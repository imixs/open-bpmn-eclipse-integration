{"version":3,"file":"bundle.js","mappings":"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aAAa,OAAO,KAAK,YAAY,aAAa,OAAO,KAAK,YAAY,aAAa,OAAO,KAAK,YAAY,aAAa,OAAO,KAAK,YAAY,aAAa,s3BAAs3B,mCAAmC,wCAAwC,wCAAwC,sDAAsD,GAAG,+BAA+B,yCAAyC,qDAAqD,GAAG,kCAAkC,yCAAyC,qDAAqD,GAAG,oCAAoC,2CAA2C,uDAAuD,GAAG,iCAAiC,wCAAwC,oDAAoD,GAAG,qBAAqB;AACz6D;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;;;ACjDvC;AACmG;AACjB;AAClF,8BAA8B,sEAA2B,CAAC,+EAAqC;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AAC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,gDAAgD,GAAG,4BAA4B,sCAAsC,GAAG,yCAAyC,mBAAmB,8BAA8B,6BAA6B,iBAAiB,GAAG,yCAAyC,iBAAiB,2BAA2B,8BAA8B,6BAA6B,iBAAiB,GAAG,8BAA8B,sDAAsD,qDAAqD,wBAAwB,+CAA+C,GAAG,oBAAoB,mBAAmB,GAAG,2EAA2E,0BAA0B,wBAAwB,2BAA2B,6BAA6B,4BAA4B,0CAA0C,iCAAiC,GAAG,qBAAqB;AACxnP;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;;;;;;;;;;ACtRvC;AACmG;AACjB;AAClF,8BAA8B,sEAA2B,CAAC,+EAAqC;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,4IAA4I,QAAQ,aAAa,MAAM,YAAY,WAAW,UAAU,YAAY,WAAW,UAAU,UAAU,YAAY,aAAa,aAAa,aAAa,WAAW,YAAY,aAAa,aAAa,WAAW,YAAY,aAAa,aAAa,WAAW,YAAY,aAAa,OAAO,aAAa,MAAM,UAAU,YAA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AoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oBAAoB,oB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AACzB;AACA;;AAEA;AACA;AACA,uBAAuB;;AAEvB;AACA;;AAEA,iEAAe,WAAW;;;;;;;;;;;;;;;;;;;;;;ACjBc;AACA;AACA;;;;;;;;;;;;;;;;ACFxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;;AAEnD;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc,cAAc;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,cAAc,mBAAmB;AACjC;AACA;;AAEA;;AAEA,cAAc,aAAa;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iEAAe,GAAG;;;;;;;;;;;;;;;ACzNlB;AACA;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O,IAAI,CAAC,IAAI,CAAC;KAClB;SAAM;QACL,IAAM,MAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;QAC7B,IAAM,KAAK,GAAG,MAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;QAClD,OAAO,KAAK,CAAC,CAAC,CAAE,KAAK,CAAC,CAAC,CAAY,CAAC,CAAC,CAAC,yBAAuB,MAAM,CAAC;KACrE;AACH,CAAC;AAED,SAAS,oBAAoB,CAAC,MAAc;IAC1C,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACxC,CAAC;AASC;;;;;;;;;;;;ACpJF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C;AACA,2DAA2D;;AAE3D;AACA,+CAA+C;AAC/C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB;AACzB,yBAAyB;AACzB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,MAAM,aAAa,OAAO;;AAEpD;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,EAAE;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,2CAA2C,EAAE;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,eAAe;AACf;;AAEA;AACA;AACA,UAAU;AACV,SAAS;AACT,SAAS;AACT,WAAW;AACX,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0BAA0B,qBAAM,gBAAgB,qBAAM,IAAI,qBAAM,sBAAsB,qBAAM;;AAE5F;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,KAA0B;;AAE9C;AACA,kCAAkC,QAAa;;AAE/C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,GAAG;AAChB,aAAa,OAAO;AACpB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,aAAa,QAAQ;AACrB,eAAe,UAAU;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,aAAa,UAAU;AACvB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB;AACA,eAAe,GAAG;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB;AACA,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,aAAa,QAAQ;AACrB,aAAa,SAAS;AACtB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,GAAG;AAChB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,UAAU;AACvB,aAAa,GAAG;AAChB,aAAa,SAAS;AACtB;AACA,aAAa,UAAU;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,UAAU;AACvB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,UAAU;AACvB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,aAAa,QAAQ;AACrB,eAAe,GAAG;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,UAAU;AACvB,aAAa,UAAU;AACvB,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,GAAG;AAChB,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,QAAQ;AACrB,eAAe,UAAU;AACzB;AACA;AACA,eAAe,0BAA0B;AACzC;AACA;AACA,oBAAoB,+BAA+B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,4BAA4B;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA,QAAQ;AACR,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,SAAS;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,SAAS;AACxB;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;AACA,qCAAqC,8BAA8B;AACnE;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,cAAc;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,GAAG;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,SAAS;AACxB;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,8BAA8B;AAC7C,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB,OAAO;;AAEP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;;AAER;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,SAAS;AACxB,eAAe,SAAS;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,iBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,oBAAoB;AACnC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,gBAAgB,SAAS;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,gBAAgB,SAAS;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,eAAe,QAAQ,UAAU;AACjC,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ,UAAU;AACjC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ,UAAU;AACjC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,SAAS;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,oEAAoE;AACpE;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,eAAe,OAAO;AACtB;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;;AAER;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C,yCAAyC;AACzC,gEAAgE;AAChE,kEAAkE;AAClE;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ,IAAI,QAAQ,MAAM,QAAQ;AAC3D,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,wBAAwB,gBAAgB,IAAI,gBAAgB;AAC5D;AACA,oCAAoC,gBAAgB;AACpD,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,mCAAmC;AAC9C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA,iCAAiC,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,oCAAoC;AAC/C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,WAAW,oCAAoC;AAC/C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,wCAAwC,4BAA4B;AACpE;AACA;AACA;AACA,4BAA4B,iCAAiC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,WAAW,mCAAmC;AAC9C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,4CAA4C,6BAA6B;AACzE;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,MAAM,QAAQ,IAAI,QAAQ;AAC7D,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,wBAAwB,gBAAgB,IAAI,gBAAgB;AAC5D,uBAAuB,gBAAgB,IAAI,gBAAgB;AAC3D;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,sBAAsB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAClE;AACA,6BAA6B,QAAQ,IAAI,QAAQ;AACjD;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,sBAAsB,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAC9E;AACA,+BAA+B,gBAAgB;AAC/C;AACA,gBAAgB,gBAAgB,IAAI,gBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,sBAAsB;AACrC,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA,kCAAkC,QAAQ,gBAAgB,aAAa;AACvE;AACA;AACA;AACA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA,sCAAsC,QAAQ,gBAAgB,aAAa;AAC3E;AACA;AACA;AACA,sCAAsC,QAAQ;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,mCAAmC;AAC9C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,6CAA6C,mBAAmB;AAChE;AACA;AACA;AACA,iCAAiC,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,oCAAoC;AAC/C,WAAW,oCAAoC;AAC/C,WAAW;AACX;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA,4BAA4B,mCAAmC;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ,MAAM,QAAQ,IAAI,QAAQ;AACtD,gBAAgB,QAAQ,IAAI,QAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,wBAAwB,gBAAgB,IAAI,gBAAgB;AAC5D,uBAAuB,gBAAgB,IAAI,gBAAgB;AAC3D;AACA;AACA,gBAAgB,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AACnD,gBAAgB,QAAQ,IAAI,QAAQ;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,wBAAwB,gBAAgB,IAAI,gBAAgB,IAAI,gBAAgB;AAChF;AACA;AACA,gBAAgB,gBAAgB,IAAI,gBAAgB;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ,MAAM,QAAQ,IAAI,QAAQ;AACpD,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA,wBAAwB,gBAAgB,IAAI,gBAAgB;AAC5D,uBAAuB,gBAAgB,IAAI,gBAAgB;AAC3D;AACA;AACA,gBAAgB,gBAAgB,IAAI,gBAAgB;AACpD;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,eAAe,OAAO,QAAQ,QAAQ,IAAI,QAAQ;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,WAAW,8BAA8B;AACzC,WAAW,8BAA8B;AACzC,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;AAE3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,WAAW,6BAA6B;AACxC,WAAW;AACX;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,gBAAgB,QAAQ;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,8CAA8C;AACzD,WAAW;AACX;AACA;AACA;AACA,wBAAwB,mCAAmC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,WAAW,6CAA6C;AACxD,WAAW;AACX;AACA;AACA,qCAAqC,mBAAmB;AACxD;AACA;AACA;AACA,yBAAyB,2BAA2B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,WAAW;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA,WAAW,8CAA8C;AACzD,WAAW,+CAA+C;AAC1D,WAAW;AACX;AACA;AACA,mCAAmC,oBAAoB;AACvD;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC,eAAe,GAAG;AAClB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,uBAAuB;AACtC;AACA,eAAe,MAAM;AACrB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,WAAW,2BAA2B;AACtC,WAAW;AACX;AACA;AACA;AACA;AACA,QAAQ;AACR,eAAe,OAAO,2BAA2B,SAAS;AAC1D;AACA;AACA,eAAe,UAAU,2BAA2B,aAAa;AACjE;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,gBAAgB;AAC/B;AACA;AACA;AACA,WAAW,kBAAkB;AAC7B,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,sCAAsC;AACrD;AACA,eAAe,UAAU;AACzB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,6BAA6B;AACxC,WAAW,6BAA6B;AACxC,WAAW,6BAA6B;AACxC,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,+CAA+C;AAC1D,WAAW,8CAA8C;AACzD,WAAW;AACX;AACA;AACA,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA,4BAA4B,2BAA2B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,eAAe,kBAAkB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,kBAAkB,wBAAwB;AAC1C;AACA;AACA,QAAQ,IAAI;AACZ,eAAe,8BAA8B;AAC7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,WAAW,8CAA8C;AACzD,WAAW;AACX;AACA;AACA,qCAAqC,mBAAmB;AACxD;AACA;AACA;AACA,yBAAyB,2BAA2B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,gBAAgB,QAAQ;AACxB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,kCAAkC;AAC7C,WAAW;AACX;AACA;AACA;AACA,uBAAuB,mCAAmC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,0BAA0B;AACzC;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA,WAAW,6BAA6B;AACxC,WAAW,6BAA6B;AACxC,WAAW,6BAA6B;AACxC,WAAW;AACX;AACA;AACA,sCAAsC,gBAAgB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,qBAAqB,gCAAgC;AACrD,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,QAAQ,WAAW;AAClC,eAAe,SAAS;AACxB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,SAAS;AACxB;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,MAAM;AACrB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,MAAM;AACrB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA,sBAAsB;AACtB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,0BAA0B;AACzC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,sBAAsB;AACrC,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,QAAQ;AACvB,eAAe,QAAQ,WAAW;AAClC,eAAe,SAAS;AACxB;AACA,eAAe,SAAS;AACxB;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,mBAAmB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA,qBAAqB,QAAQ;AAC7B,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB;AACtB;AACA,8BAA8B,mBAAmB,iBAAiB;AAClE;AACA;AACA,8BAA8B,mBAAmB,iBAAiB;AAClE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB;AACtB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA,kCAAkC,mBAAmB;AACrD;AACA;AACA;AACA;AACA;AACA,mDAAmD,mBAAmB;AACtE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB;AACtB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB;AACtB;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,gBAAgB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,OAAO;AACxB;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B,eAAe;AACf;AACA,kBAAkB,QAAQ;AAC1B,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ;AAC1B,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAClD,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AAClD,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,sBAAsB;AACrC,iBAAiB,OAAO;AACxB;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,oBAAoB,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AACpD,eAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,wBAAwB,OAAO,UAAU,IAAI,OAAO,kBAAkB;AACtE,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD,sBAAsB,4BAA4B;AAClD,sBAAsB;AACtB;AACA;AACA,sCAAsC,oBAAoB;AAC1D;AACA;AACA;AACA,0BAA0B,0BAA0B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA,sBAAsB,2BAA2B;AACjD,sBAAsB,4BAA4B;AAClD,sBAAsB;AACtB;AACA;AACA,0CAA0C,oBAAoB;AAC9D;AACA;AACA;AACA,8BAA8B,2BAA2B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB,OAAO;AAC7B,8BAA8B,gBAAgB,QAAQ,GAAG;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA,+BAA+B,gBAAgB,QAAQ,GAAG;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,QAAQ;AACR,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,MAAM;AACrB,iBAAiB,GAAG;AACpB;AACA;AACA,sBAAsB,QAAQ,OAAO,qBAAqB;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,mBAAmB,gBAAgB;AACnC;AACA,QAAQ;AACR,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,sBAAsB,8BAA8B;AACpD,sBAAsB;AACtB;AACA;AACA,wCAAwC,eAAe;AACvD,eAAe,2BAA2B;AAC1C;AACA;AACA;AACA,eAAe,2BAA2B;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,iBAAiB,QAAQ,IAAI,QAAQ;AACrC;AACA;AACA;AACA,iBAAiB,QAAQ,IAAI,QAAQ;AACrC;AACA;AACA;AACA,eAAe,QAAQ,gBAAgB,IAAI,gBAAgB;AAC3D;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,WAAW;AAC1B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB,qBAAqB;AACrB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,KAAK;;AAEL;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,sBAAsB;AACrC,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,sBAAsB;AACrC,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA,iCAAiC;AACjC,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB;AACtB;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA,sBAAsB,QAAQ,OAAO,gCAAgC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,qBAAqB,wBAAwB;AAC7C;AACA,QAAQ,IAAI;AACZ,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,iBAAiB,SAAS;AAC1B;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA;AACA;AACA;AACA,eAAe,QAAQ,SAAS;AAChC;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ,SAAS;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,sBAAsB,QAAQ,OAAO,UAAU;AAC/C;AACA,kDAAkD,eAAe;AACjE;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,cAAc;AAC7B,eAAe,UAAU;AACzB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,SAAS;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kCAAkC,KAAK;AACvC;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,eAAe;AAC9B,eAAe,iBAAiB;AAChC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,eAAe;AAC9B,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ,WAAW;AAClC,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;AACvB;AACA,gBAAgB,QAAQ;AACxB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;AACA,kBAAkB,qBAAqB;AACvC,qBAAqB,UAAU;AAC/B;AACA;AACA,uEAAuE,0BAA0B,GAAG;AACpG,kBAAkB,6BAA6B;AAC/C;AACA;AACA;AACA,6DAA6D;AAC7D,kBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA,2CAA2C,MAAM;AACjD,kBAAkB,mBAAmB;AACrC;AACA;AACA;AACA;AACA,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA,sDAAsD,0BAA0B,GAAG;AACnF,yCAAyC,aAAa,gBAAgB;AACtE,kBAAkB,6BAA6B;AAC/C;AACA;AACA;AACA,yDAAyD,oCAAoC;AAC7F;AACA;AACA;AACA;AACA,2DAA2D,oBAAoB;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,YAAY;AACvD,2CAA2C,OAAO;AAClD,kBAAkB,oBAAoB;AACtC;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;;AAE/B,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;;AAEP,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA,8BAA8B,mBAAmB;AACjD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C;;AAE5C;AACA,uDAAuD;AACvD;AACA;AACA,6BAA6B,EAAE;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,gCAAgC,gCAAgC;AAChE,cAAc;AACd;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,gBAAgB,QAAQ;AACxB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ,WAAW;AAClC,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,eAAe;AAC9B,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC;AAClC,aAAa,QAAQ,QAAQ,UAAU,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,eAAe;AAC9B,gBAAgB,QAAQ;AACxB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,eAAe,MAAM;AACrB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,sBAAsB;AACrC,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,sBAAsB,QAAQ;AAC9B,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA,cAAc,gBAAgB;AAC9B;AACA;AACA,cAAc,gBAAgB;AAC9B;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,WAAW;AACX;AACA;AACA,sCAAsC,mBAAmB,iBAAiB;AAC1E,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA,6CAA6C,QAAQ;AACrD;AACA;AACA,gBAAgB,QAAQ,IAAI,QAAQ;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,GAAG;AACpB;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,6CAA6C;AACxD,WAAW;AACX;AACA;AACA;AACA,oCAAoC,kCAAkC;AACtE,gBAAgB,6CAA6C;AAC7D;AACA;AACA;AACA,gBAAgB,2BAA2B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,wBAAwB;AACnC,WAAW;AACX;AACA;AACA,qCAAqC,gBAAgB;AACrD,gBAAgB,wBAAwB;AACxC;AACA;AACA,iDAAiD,QAAQ,eAAe,QAAQ;AAChF,gBAAgB,wBAAwB,IAAI,wBAAwB;AACpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,GAAG;AAClB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,wBAAwB;AACnC,WAAW;AACX;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,gBAAgB,wBAAwB,IAAI,wBAAwB;AACpE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,OAAO,sBAAsB;AACxC,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,MAAM;AACrB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,QAAQ;AACvB,eAAe,QAAQ,WAAW;AAClC,eAAe,SAAS;AACxB,iBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB,IAAI,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA6B,oDAAoD;AACjF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,0BAA0B;AACzC;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,QAAQ,IAAI,QAAQ;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,cAAc;AAC7B,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,WAAW,OAAO,UAAU;AAC5B,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA,gBAAgB,IAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mEAAmE;AACnE;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,UAAU;AACzB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,GAAG;AAClB,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA,sCAAsC,aAAa;AACnD,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AACpE;AACA,uCAAuC,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,GAAG;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,GAAG;AACpB;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ;AAC5C;AACA,sCAAsC,aAAa;AACnD,eAAe;AACf;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,iBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,UAAU;AACzB,iBAAiB,QAAQ;AACzB;AACA;AACA,wBAAwB,QAAQ,IAAI,QAAQ,IAAI,QAAQ,IAAI,QAAQ;AACpE;AACA,sCAAsC,aAAa;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK,OAAO,gBAAgB;;AAE5B;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oCAAoC,2DAA2D;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,wCAAwC;AACtE;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA,MAAM,IAA0E;AAChF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI,mCAAO;AACX;AACA,KAAK;AAAA,kGAAC;AACN;AACA;AACA,OAAO,EASJ;AACH,CAAC;;;;;;;;;;;ACxzhBD;AACA;AACA,gEAAgE;AAChE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,qBAAM,gBAAgB,qBAAM;AACtD;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,kDAAkD;AAC3G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,kEAAkE;AAClE,8BAA8B,gBAAgB,kBAAkB;AAChE;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,oCAAoC,wBAAwB,iBAAiB;AAC7E,oCAAoC,wBAAwB,IAAI;AAChE;AACA,wCAAwC;AACxC,wCAAwC,oBAAoB;AAC5D;AACA,wCAAwC;AACxC,wCAAwC,kBAAkB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,QAAQ;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,uBAAuB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0BAA0B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE;AACpE,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,2BAA2B;AAClE;AACA;AACA,iBAAiB;AACjB,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,UAAU;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD,qDAAqD;AACrD,sDAAsD;AACtD,4DAA4D;AAC5D,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,wBAAwB;AAC/D;AACA;AACA,iBAAiB;AACjB,uDAAuD;AACvD,uDAAuD;AACvD,0DAA0D;AAC1D,oDAAoD;AACpD,mDAAmD;AACnD,qDAAqD;AACrD,sDAAsD;AACtD,4DAA4D;AAC5D,8DAA8D;AAC9D;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,yBAAyB;AACtF;AACA;AACA;AACA;AACA,gCAAgC,UAAU;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,oBAAoB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,0BAA0B;;;;;;;;;;;;;;;;;;;;AC1mCuB;AACvB;AAcpB,SAAS,KAAK,CACnB,IAAS,EACT,QAA2C,EAC3C,GAAuB;IAEvB,IAAI,CAAC,EAAE,GAAG,4BAA4B,CAAC;IACvC,IAAI,GAAG,KAAK,eAAe,IAAI,QAAQ,KAAK,SAAS,EAAE;QACrD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACxC,MAAM,KAAK,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,OAAO,KAAK,KAAK,QAAQ;gBAAE,SAAS;YACxC,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC;YAC7B,IAAI,SAAS,KAAK,SAAS,EAAE;gBAC3B,KAAK,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EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IAEzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IACzB,UAAU,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;IAEzB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;IACvB,UAAU,CAAC,MAAM,EAAE,EAAE,C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ACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb;AACA;AACA,cAAc,KAAwC,GAAG,sBAAiB,GAAG,CAAI;AACjF;AACA;AACA;AACA;AACA;;;;;;;;;;;ACTa;;AAEb;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,iFAAiF;AACjF;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5Da;;AAEb;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACZe;AACf;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,QAAQ;AACzD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,eAAe,eAAe;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,eAAe,eAAe;AAC9B;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9EwC;AACA;AACA;AACA;AACE;AACQ;AACE;AACE;;;;;;;;;;;;;;;;ACPtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;;AAEnD;;AAEA,oBAAoB,gBAAgB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,cAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,aAAa;AAC/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iEAAe,GAAG;;;;;;;;;;;;;;;ACtNlB,iEAAe,sCAAsC;;;;;;;;;;;;;;;;ACAhB;;AAErC;AACA,OAAO,wDAAQ;AACf;AACA;;AAEA;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;;AAErB;AACA,qBAAqB;AACrB;;AAEA;AACA;AACA;AACA;AACA;A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A,eAAe,oCAAoC;AACnD;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,+BAA+B,GAAG,4BAA4B,GAAG,4BAA4B;AAC7F,cAAc,mBAAO,CAAC,mEAAO;AAC7B;AACA;AACA,cAAc,mBAAO,CAAC,0EAAe;AACrC,aAAa,mBAAO,CAAC,0EAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,+BAA+B;;;;;;;;;;;;AC3ElB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc,mBAAO,CAAC,0EAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sHAAsH,SAAS;AAC/H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,0HAA0H,gBAAgB;AAC1I;AACA;AACA;AACA,SAAS;AAC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gD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C,qBAAqB,KAAK;AACvE;AACA;AACA;AACA,CAAC,oDAAoD;AACrD;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD;AACjD,kBAAkB;AAClB,oBAAoB;AACpB,mBAAmB;AACnB,mBAAmB;AACnB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,aAAa,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,mBAAmB,KAAK;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,aAAa,KAAK;AAC/C;AACA;AACA;AACA;AACA,CAAC,wCAAwC,mBAAmB,KAAK;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wCAAwC,mBAAmB,KAAK;AACjE;AACA;AACA;AACA,CAAC,0DAA0D,4BAA4B,KAAK;AAC5F;AACA;AACA;AACA,CAAC,0DAA0D,4BAA4B,KAAK;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD,wBAAwB,KAAK;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sDAAsD,0BAA0B,KAAK;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8EAA8E,sCAAsC,KAAK;AAC1H;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,wFAAwF,2CAA2C,KAAK;AACzI;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,CAAC,0EAA0E,oCAAoC,KAAK;AACpH;AACA;AACA;AACA;AACA,oEAAoE,IAAI;AACxE,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,sEAAsE,kCAAkC,KAAK;AAC9G;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC,0DAA0D,4BAA4B,KAAK;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gDAAgD,uBAAuB,KAAK;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,oDAAoD,yBAAyB,KAAK;AACnF;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,0CAA0C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,UAAU,qBAAqB;AAC1K;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,oHAAoH,uBAAuB,uBAAuB,cAAc;AAChL;AACA;AACA,oHAAoH,uBAAuB;AAC3I;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4GAA4G,uBAAuB,uBAAuB,cAAc;AACxK;AACA;AACA,4GAA4G,uBAAuB;AACnI;AACA;AACA;AACA;AACA,8GAA8G,sBAAsB;AACpI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,oDAAoD;AACtI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,uBAAuB,yBAAyB,cAAc;AACxH;AACA;AACA,0DAA0D,uBAAuB;AACjF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,gBAAgB,UAAU,qBAAqB;AAC5G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,oCAAoC;AACtF;AACA;AACA;AACA;AACA,iEAAiE,gBAAgB;AACjF;AACA;AACA,iEAAiE,gBAAgB,UAAU,qBAAqB,sBAAsB,eAAe;AACrJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,gBAAgB;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,eAAe,yBAAyB,cAAc;AAChH;AACA;AACA,0DAA0D,eAAe;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kGAAkG,iCAAiC;AACnI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,2CAA2C,gBAAgB,KAAK,WAAW;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,gDAAgD,eAAe;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ,KAAK,WAAW,8BAA8B,uBAAuB;AACzH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,+BAA+B;AACjE;AACA,4CAA4C,gBAAgB,KAAK,WAAW;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,+BAA+B;AACrE;AACA;AACA;AACA;AACA;AACA,iDAAiD,eAAe;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,mCAAmC;AAC7E;AACA;AACA;AACA,0CAA0C,+BAA+B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uBAAuB,GAAG,mBAAmB;AAC/G,iDAAiD,wBAAwB,KAAK,WAAW,QAAQ,wCAAwC,KAAK,MAAM;AACpJ;AACA;AACA,gDAAgD,YAAY;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,+BAA+B;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,yCAAyC;AACzE;AACA;AACA;AACA,gDAAgD,oBAAoB;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,0BAA0B;AAC/E;AACA;AACA;AACA,4DAA4D,eAAe;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,8DAA8D,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,4EAA4E,cAAc;AAC1F,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,gBAAgB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wGAAwG,GAAG;AAC3G;AACA;AACA;AACA;AACA,+EAA+E,IAAI;AACnF,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,mCAAmC;AACnF;AACA;AACA;AACA;AACA;AACA,uDAAuD,eAAe;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,+BAA+B;AAC9G;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,+BAA+B;;;;;;;;;;;;AC3rClB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,kBAAkB,KAAK;;;;;;;;;;;;ACfjD;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,aAAa;AAC/B,cAAc,mBAAO,CAAC,kEAAO;AAC7B;AACA;AACA,0BAA0B;AAC1B,+BAA+B;AAC/B,CAAC,4BAA4B,aAAa,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,+CAA+C;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,SAAS;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;;;;;;;;;;;AC/Ha;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAmB,GAAG,aAAa,GAAG,YAAY,GAAG,aAAa,GAAG,cAAc,GAAG,cAAc,GAAG,eAAe;AACtH;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,mBAAmB;;;;;;;;;;;;AClCN;AACb;AACA;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,GAAG,iBAAiB,GAAG,aAAa;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4BAA4B,aAAa,KAAK;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;;;;;;;;;;;;AC7YH;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,wBAAwB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;;;;;;;;;;;;ACvJhB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,6BAA6B,GAAG,qBAAqB;AAC3F,cAAc,mBAAO,CAAC,kEAAO;AAC7B,WAAW,mBAAO,CAAC,gEAAM;AACzB,iBAAiB,mBAAO,CAAC,wEAAU;AACnC,oBAAoB,mBAAO,CAAC,8EAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C,qBAAqB,KAAK;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,2CAA2C;AACrF;AACA;AACA,SAAS;AACT;AACA;AACA,mCAAmC;;;;;;;;;;;;AC/LtB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oCAAoC,GAAG,6BAA6B,GAAG,qBAAqB;AAC5F,cAAc,mBAAO,CAAC,kEAAO;AAC7B,WAAW,mBAAO,CAAC,gEAAM;AACzB,oBAAoB,mBAAO,CAAC,8EAAa;AACzC,iBAAiB,mBAAO,CAAC,wEAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,4CAA4C,qBAAqB,KAAK;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,qDAAqD;AACpH;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,CAAC,oEAAoE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;;;;;;;;;;;;AClHvB;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,yBAAyB,GAAG,wBAAwB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,oBAAoB,GAAG,mBAAmB,GAAG,oBAAoB,GAAG,gCAAgC,GAAG,2BAA2B,GAAG,qBAAqB,GAAG,kBAAkB;AAC5qB,WAAW,mBAAO,CAAC,gEAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,kBAAkB,KAAK;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,gCAAgC,eAAe,KAAK;;;;;;;;;;;;ACjTxC;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kBAAkB;AACnB,kBAAe;;;;;;;;;;;;ACtBF;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB,cAAc,mBAAO,CAAC,kEAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wBAAwB;AACzD;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;;;;;;;;;;;ACnEJ;AACb;AACA;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mCAAmC,GAAG,iCAAiC;AACvE,uBAAuB,mBAAO,CAAC,oFAAgB;AAC/C;AACA;AACA;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","sources":["webpack://@eclipse-glsp-examples/workflow-webapp/./css/diagram.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/css/diagram.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/autocomplete-palette.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/command-palette.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/decoration.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/glsp-sprotty.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/tool-palette.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@vscode/codicons/dist/codicon.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/balloon-css/balloon.min.css","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/css/edit-label.css","webpack://@eclipse-glsp-examples/workflow-webapp/./src/app.ts","webpack://@eclipse-glsp-examples/workflow-webapp/./src/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/direct-task-editing/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/direct-task-editing/direct-task-editor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/src/workflow-views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/action-dispatcher.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/actions/focus-change-action.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/argumentable.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/auto-complete/auto-complete-actions.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/auto-complete/auto-complete-widget.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/auto-complete/validation-decorator.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/command-stack.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/container-modules.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/drag-aware-mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/editor-context-service.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/focus-tracker.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/model-initialization-constraint.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/model/model-registry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/model/update-model-command.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/selection-clearing-mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/source-uri-aware.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/tool-manager/glsp-tool-manager.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/base/view/view-registry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/move-zoom/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/move-zoom/move-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/move-zoom/zoom-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/resize-key-tool/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/resize-key-tool/resize-key-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/resize-key-tool/resize-key-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/search/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/search/search-palette.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/search/search-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/view-key-tools/deselect-key-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/view-key-tools/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/view-key-tools/movement-key-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/accessibility/view-key-tools/zoom-key-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/autocomplete-palette/base-autocomplete-palette.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/freeform-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/glsp-hidden-bounds-updater.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/hbox-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/layouter.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/bounds/vbox-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/change-bounds/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/change-bounds/movement-restrictor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/change-bounds/snap.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/command-palette/command-palette-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/command-palette/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/command-palette/server-command-palette-provider.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/context-menu/delete-element-context-menu.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/context-menu/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/context-menu/selection-service-aware-context-menu-mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/context-menu/server-context-menu-provider.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/copy-paste/copy-paste-context-menu.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/copy-paste/copy-paste-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/copy-paste/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/decoration/decoration-placer.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/decoration/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/edit-label/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/edit-label/edit-label-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/edit-label/edit-label-validator.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/export/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/export/glsp-svg-exporter.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/hints/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/hints/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/hints/type-hints.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/hover/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/hover/hover.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/layout/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/layout/layout-elements-action.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/mouse-tool/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/mouse-tool/mouse-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/navigation/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/navigation/navigation-action-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/navigation/navigation-target-resolver.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/rank/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/reconnect/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/save/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/save/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/save/save-keylistener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/select/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/select/select-feedback-action.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/select/select-mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/select/selection-service.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/source-model-watcher/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/source-model-watcher/source-model-changed-action-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/svg-metadata/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/svg-metadata/metadata-placer.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/change-bounds-tool-feedback.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/creation-tool-feedback.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/css-feedback.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/edge-edit-tool-feedback.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/feedback-action-dispatcher.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/marquee-tool-feedback.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-feedback/view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-palette/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tool-palette/tool-palette.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/base-glsp-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/change-bounds-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/delete-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/edge-creation-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/edge-edit-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/enable-default-tools-on-focus-loss.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/glsp-manhattan-edge-router.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/marquee-behavior.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/marquee-mouse-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/marquee-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/node-creation-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/tools/view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/validation/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/validation/issue-marker.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/validation/marker-navigator.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/validation/validate.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/viewport/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/features/viewport/glsp-scroll-mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/glsp-sprotty/augmented-actions.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/glsp-sprotty/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/glsp-sprotty/types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/lib/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/model-source/glsp-diagram-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/argument-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/html-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/layout-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/marker.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/smodel-util.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/utils/viewpoint-util.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/base-view-module.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/compartments.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/glsp-edge-view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/glsp-projection-view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/issue-marker-view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/rounded-corner-view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/src/views/rounded-corner.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/base-protocol.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/client-notification.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/clipboard.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/contexts.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/edge-modification.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-creation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-hover.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-navigation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-selection.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-text-editing.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-type-hints.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/element-validation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-data.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-edit-mode.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-saving.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/model-structure.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/node-modification.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/tool-palette.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/undo-redo.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/action-protocol/viewport.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/base-glsp-client.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/glsp-client.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/glsp-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/base-jsonrpc-glsp-client.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/glsp-jsonrpc-client.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/glsp-jsonrpc-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/jsonrpc/websocket-connection.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/client-server-protocol/types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/disposable/disposable.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/model/default-types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/model/model-schema.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/utils/array-util.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/utils/di-util.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/src/utils/type-util.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/bytesToUuid.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/index.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/md5.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/rng.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/sha1.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/v1.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/v3.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/v35.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/v4.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/protocol/node_modules/uuid/dist/esm-browser/v5.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/autocompleter/autocomplete.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/css-loader/dist/runtime/api.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/css-loader/dist/runtime/getUrl.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/file-saver/src/FileSaver.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/decorator_utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/inject.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/inject_base.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/injectable.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/lazy_service_identifier.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/multi_inject.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/named.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/optional.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/post_construct.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/pre_destroy.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/property_event_decorator.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/tagged.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/target_name.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/annotation/unmanaged.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/bindings/binding.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/bindings/binding_count.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/constants/error_msgs.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/constants/literal_types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/constants/metadata_keys.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/container/container.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/container/container_module.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/container/container_snapshot.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/container/lookup.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/container/module_activation_store.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/interfaces/interfaces.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../src/inversify.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/context.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/metadata.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/metadata_reader.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/plan.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/planner.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/queryable_string.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/reflection_utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/request.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/planning/target.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/resolution/instantiation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/resolution/resolver.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/scope/scope.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_in_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_in_when_on_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_on_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_to_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_when_on_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/binding_when_syntax.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/syntax/constraint_helpers.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/async.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/binding_utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/clonable.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/exceptions.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/factory_type.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/id.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/js.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../src/utils/serialization.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/lodash/lodash.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/reflect-metadata/Reflect.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/h.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/helpers/attachto.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/htmldomapi.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/init.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/is.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/jsx.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/attributes.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/class.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/dataset.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/eventlisteners.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/props.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/modules/style.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/thunk.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/tovnode.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/snabbdom/src/vnode.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/action-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/actions.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/diagram-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/diagram-services.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/utils/async.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/utils/geometry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/utils/json.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/utils/model-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty-protocol/src/utils/object.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/actions/action-dispatcher.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/actions/action-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/actions/action.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/actions/diagram-locker.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/animations/animation-frame-syncer.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/animations/animation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/animations/easing.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/commands/command-registration.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/commands/command-stack-options.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/commands/command-stack.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/commands/command.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/commands/request-command.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/features/initialize-canvas.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/features/set-model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/model/smodel-extension.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/model/smodel-factory.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/model/smodel-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/model/smodel.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/tool-manager/tool-manager.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/tool-manager/tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/types.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/ui-extensions/ui-extension-registry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/ui-extensions/ui-extension.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/css-class-postprocessor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/dom-helper.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/id-postprocessor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/key-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/mouse-tool.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/thunk-view.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/view.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/viewer-cache.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/viewer-options.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/viewer.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/vnode-postprocessor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/base/views/vnode-utils.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/abstract-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/bounds-manipulation.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/hbox-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/hidden-bounds-updater.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/layout-options.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/resize.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/stack-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/vbox-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/bounds/views.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/button/button-handler.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/button/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/button/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/command-palette/action-providers.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/command-palette/command-palette.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/command-palette/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/context-menu/context-menu-service.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/context-menu/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/context-menu/menu-providers.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/context-menu/mouse-listener.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/decoration/decoration-placer.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/decoration/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/decoration/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/decoration/views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-intersection/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-intersection/intersection-finder.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-intersection/sweepline.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-layout/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-layout/edge-layout.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edge-layout/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/create-on-drag.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/create.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/delete.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/edit-label-ui.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/edit-label.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/edit-routing.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/edit/reconnect.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/expand/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/expand/expand.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/expand/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/expand/views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/export/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/export/export.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/export/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/export/svg-exporter.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/fade/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/fade/fade.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/fade/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/hover/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/hover/hover.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/hover/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/hover/popup-position-updater.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/move/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/move/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/move/move.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/move/snap.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/nameable/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/open/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/open/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/open/open.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/projection/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/projection/views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/abstract-edge-router.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/anchor.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/bezier-anchors.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/bezier-edge-router.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/manhattan-anchors.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/manhattan-edge-router.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/polyline-anchors.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/polyline-edge-router.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/routing.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/routing/views.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/select/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/select/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/select/select.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/undo-redo/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/undo-redo/undo-redo.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/update/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/update/model-matching.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/update/update-model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/center-fit.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/scroll.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/viewport-root.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/viewport.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/viewport/zoom.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/zorder/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/features/zorder/zorder.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/graph/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/graph/sgraph-factory.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/graph/sgraph.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/graph/views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/generic-views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/html-views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/jsx.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/modules.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/svg-views.tsx","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/lib/virtualize.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/commit-model.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/diagram-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/local-model-source.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/logging.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/model-source.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/model-source/websocket.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/browser.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/codicon.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/color.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/geometry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/inversify.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/iterable.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/json.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/keyboard.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/logging.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/src/utils/registry.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/node_modules/autocompleter/autocomplete.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/tinyqueue/index.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/index.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/md5.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/nil.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/parse.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/regex.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/rng.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/sha1.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/stringify.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/v1.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/v3.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/v35.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/v4.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/v5.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/validate.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/uuid/dist/esm-browser/version.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/browser/main.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/browser/ril.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/api.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/cancellation.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/connection.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/disposable.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/events.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/is.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/linkedMap.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/messageBuffer.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/messageReader.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/messageWriter.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/messages.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/ral.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/semaphore.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/base/eclipse-glsp-diagram-server.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/features/copy-paste/copy-paste.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/features/copy-paste/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/features/invoke-delete/di.config.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/features/invoke-delete/invoke-delete.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/index.ts","webpack://@eclipse-glsp-examples/workflow-webapp/../../packages/ide/src/utils/url-parameters.ts","webpack://@eclipse-glsp-examples/workflow-webapp/./css/diagram.css?1ab1","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp-examples/workflow-glsp/css/diagram.css?c341","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/autocomplete-palette.css?ecf3","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/command-palette.css?b045","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/decoration.css?8324","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/glsp-sprotty.css?8a11","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@eclipse-glsp/client/css/tool-palette.css?6d88","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/@vscode/codicons/dist/codicon.css?8b3a","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/balloon-css/balloon.min.css?d2ea","webpack://@eclipse-glsp-examples/workflow-webapp/../../node_modules/sprotty/css/edit-label.css?a884","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/bootstrap","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/compat get default export","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/define property getters","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/global","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/hasOwnProperty shorthand","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/make namespace object","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/node module decorator","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/publicPath","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/jsonp chunk loading","webpack://@eclipse-glsp-examples/workflow-webapp/webpack/runtime/nonce","webpack://@eclipse-glsp-examples/workflow-webapp/./src/index.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.sprotty-graph {\n    background: white;\n}\n\n.sprotty-node {\n    fill: #cdc;\n    stroke: rgb(0, 0, 0);\n}\n\n.sprotty-edge {\n    stroke: black;\n}\n\n.sprotty-edge.arrow {\n    fill: black;\n}\n\n.sprotty-edge.selected {\n    stroke: #844;\n}\n\n.sprotty-edge.selected > .arrow {\n    fill: #844;\n    stroke: #844;\n}\n\n.sprotty-node:not(.selected) {\n    stroke: black;\n}\n\n.forkOrJoin > .sprotty-node {\n    fill: black;\n}\n\n.forkOrJoin > .sprotty-node.selected {\n    stroke: rgb(87, 87, 214);\n}\n\npolygon.sprotty-node {\n    stroke: black;\n}\n\n.sprotty-node.selected {\n    stroke: rgb(87, 87, 214);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./css/diagram.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,iBAAiB;AACrB;;AAEA;IACI,UAAU;IACV,oBAAoB;AACxB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,UAAU;IACV,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,WAAW;AACf;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,wBAAwB;AAC5B\",\"sourcesContent\":[\".sprotty-graph {\\n    background: white;\\n}\\n\\n.sprotty-node {\\n    fill: #cdc;\\n    stroke: rgb(0, 0, 0);\\n}\\n\\n.sprotty-edge {\\n    stroke: black;\\n}\\n\\n.sprotty-edge.arrow {\\n    fill: black;\\n}\\n\\n.sprotty-edge.selected {\\n    stroke: #844;\\n}\\n\\n.sprotty-edge.selected > .arrow {\\n    fill: #844;\\n    stroke: #844;\\n}\\n\\n.sprotty-node:not(.selected) {\\n    stroke: black;\\n}\\n\\n.forkOrJoin > .sprotty-node {\\n    fill: black;\\n}\\n\\n.forkOrJoin > .sprotty-node.selected {\\n    stroke: rgb(87, 87, 214);\\n}\\n\\npolygon.sprotty-node {\\n    stroke: black;\\n}\\n\\n.sprotty-node.selected {\\n    stroke: rgb(87, 87, 214);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2019-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.sprotty-graph {\n    font-size: 15pt;\n    border: none;\n    height: 100%;\n}\n\n.sprotty-text {\n    font-size: 12pt;\n    text-anchor: middle;\n}\n\n.sprotty-node {\n    stroke-width: 0;\n    font-weight: bold;\n}\n\n.sprotty-label {\n    stroke-width: 0;\n    fill: #000;\n    font-weight: inherit;\n    text-align: inherit;\n    font-size: 100%;\n}\n\n.sprotty-label.heading {\n    font-weight: normal;\n    font-size: 0.7em;\n    fill: #f0f3f8;\n}\n\n.icon path {\n    stroke-width: 0;\n    fill: #f0f3f8;\n}\n\n.icon .icon-background {\n    fill: transparent;\n}\n\n.task.automated > .sprotty-node {\n    fill: #5b9fa8;\n}\n\n.task.manual > .sprotty-node {\n    fill: #db8651;\n}\n\n.category > .sprotty-node {\n    fill: #5c87bd;\n}\n\n.category .category > .sprotty-node {\n    /** Add a border to nested categories, so we can distinguish them */\n    stroke: #38679a;\n    fill: #6f9ad0;\n    stroke-width: 1;\n}\n\n.sprotty-edge.weighted.low:not(.selected),\n.sprotty-edge.weighted.low:not(.selected) .arrow {\n    stroke: rgb(128, 90, 233);\n}\n\n.sprotty-edge.weighted.low:not(.selected) .arrow {\n    fill: rgb(128, 90, 233);\n}\n\n.sprotty-edge.weighted:not(.selected),\n.sprotty-edge.weighted:not(.selected) .arrow,\n.sprotty-edge.weighted.medium:not(.selected),\n.sprotty-edge.weighted.medium:not(.selected) .arrow {\n    stroke: rgb(98, 60, 193);\n}\n\n.sprotty-edge.weighted:not(.selected) .arrow,\n.sprotty-edge.weighted.medium:not(.selected) .arrow {\n    fill: rgb(98, 60, 193);\n}\n\n.sprotty-edge.weighted.high:not(.selected),\n.sprotty-edge.weighted.high:not(.selected) .arrow {\n    stroke: rgb(68, 30, 163);\n}\n\n.sprotty-edge.weighted.high:not(.selected) .arrow {\n    fill: rgb(68, 30, 163);\n}\n\n.sprotty-comp {\n    stroke: transparent;\n    fill: transparent;\n}\n\n.label-edit input {\n    margin-top: -3px;\n    margin-left: -3px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp-examples/workflow-glsp/css/diagram.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,eAAe;IACf,YAAY;IACZ,YAAY;AAChB;;AAEA;IACI,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,eAAe;IACf,iBAAiB;AACrB;;AAEA;IACI,eAAe;IACf,UAAU;IACV,oBAAoB;IACpB,mBAAmB;IACnB,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,gBAAgB;IAChB,aAAa;AACjB;;AAEA;IACI,eAAe;IACf,aAAa;AACjB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,mEAAmE;IACnE,eAAe;IACf,aAAa;IACb,eAAe;AACnB;;AAEA;;IAEI,yBAAyB;AAC7B;;AAEA;IACI,uBAAuB;AAC3B;;AAEA;;;;IAII,wBAAwB;AAC5B;;AAEA;;IAEI,sBAAsB;AAC1B;;AAEA;;IAEI,wBAAwB;AAC5B;;AAEA;IACI,sBAAsB;AAC1B;;AAEA;IACI,mBAAmB;IACnB,iBAAiB;AACrB;;AAEA;IACI,gBAAgB;IAChB,iBAAiB;AACrB\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2019-2022 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.sprotty-graph {\\n    font-size: 15pt;\\n    border: none;\\n    height: 100%;\\n}\\n\\n.sprotty-text {\\n    font-size: 12pt;\\n    text-anchor: middle;\\n}\\n\\n.sprotty-node {\\n    stroke-width: 0;\\n    font-weight: bold;\\n}\\n\\n.sprotty-label {\\n    stroke-width: 0;\\n    fill: #000;\\n    font-weight: inherit;\\n    text-align: inherit;\\n    font-size: 100%;\\n}\\n\\n.sprotty-label.heading {\\n    font-weight: normal;\\n    font-size: 0.7em;\\n    fill: #f0f3f8;\\n}\\n\\n.icon path {\\n    stroke-width: 0;\\n    fill: #f0f3f8;\\n}\\n\\n.icon .icon-background {\\n    fill: transparent;\\n}\\n\\n.task.automated > .sprotty-node {\\n    fill: #5b9fa8;\\n}\\n\\n.task.manual > .sprotty-node {\\n    fill: #db8651;\\n}\\n\\n.category > .sprotty-node {\\n    fill: #5c87bd;\\n}\\n\\n.category .category > .sprotty-node {\\n    /** Add a border to nested categories, so we can distinguish them */\\n    stroke: #38679a;\\n    fill: #6f9ad0;\\n    stroke-width: 1;\\n}\\n\\n.sprotty-edge.weighted.low:not(.selected),\\n.sprotty-edge.weighted.low:not(.selected) .arrow {\\n    stroke: rgb(128, 90, 233);\\n}\\n\\n.sprotty-edge.weighted.low:not(.selected) .arrow {\\n    fill: rgb(128, 90, 233);\\n}\\n\\n.sprotty-edge.weighted:not(.selected),\\n.sprotty-edge.weighted:not(.selected) .arrow,\\n.sprotty-edge.weighted.medium:not(.selected),\\n.sprotty-edge.weighted.medium:not(.selected) .arrow {\\n    stroke: rgb(98, 60, 193);\\n}\\n\\n.sprotty-edge.weighted:not(.selected) .arrow,\\n.sprotty-edge.weighted.medium:not(.selected) .arrow {\\n    fill: rgb(98, 60, 193);\\n}\\n\\n.sprotty-edge.weighted.high:not(.selected),\\n.sprotty-edge.weighted.high:not(.selected) .arrow {\\n    stroke: rgb(68, 30, 163);\\n}\\n\\n.sprotty-edge.weighted.high:not(.selected) .arrow {\\n    fill: rgb(68, 30, 163);\\n}\\n\\n.sprotty-comp {\\n    stroke: transparent;\\n    fill: transparent;\\n}\\n\\n.label-edit input {\\n    margin-top: -3px;\\n    margin-left: -3px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.autocomplete-palette {\n    position: absolute;\n    left: 20px;\n    top: 20px;\n    width: 400px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp/client/css/autocomplete-palette.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,kBAAkB;IAClB,UAAU;IACV,SAAS;IACT,YAAY;AAChB\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.autocomplete-palette {\\n    position: absolute;\\n    left: 20px;\\n    top: 20px;\\n    width: 400px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2019-2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.command-palette {\n    transition: opacity 0.3s linear;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.command-palette-suggestions {\n    background: white;\n    z-index: 1000;\n    overflow: auto;\n    box-sizing: border-box;\n    border: 1px solid rgba(60, 60, 60, 0.6);\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.command-palette-suggestions .icon {\n    padding-right: 0.3em;\n    display: flex;\n    align-self: center;\n}\n\n.command-palette-suggestions em {\n    font-weight: bold;\n    font-style: normal;\n}\n\n.command-palette-suggestions > div {\n    padding: 0 4px;\n    display: flex;\n}\n\n.command-palette-suggestions .group {\n    background: #eee;\n}\n\n.command-palette-suggestions > div:hover:not(.group),\n.command-palette-suggestions > div.selected {\n    cursor: pointer;\n}\n\n.command-palette-suggestions > div:hover:not(.group) {\n    background: #e0e0e0;\n}\n\n.command-palette-suggestions > div.selected {\n    background: #bbdefb;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp/client/css/command-palette.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,+BAA+B;IAC/B,4EAA4E;AAChF;;AAEA;IACI,iBAAiB;IACjB,aAAa;IACb,cAAc;IACd,sBAAsB;IACtB,uCAAuC;IACvC,4EAA4E;AAChF;;AAEA;IACI,oBAAoB;IACpB,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,iBAAiB;IACjB,kBAAkB;AACtB;;AAEA;IACI,cAAc;IACd,aAAa;AACjB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;;IAEI,eAAe;AACnB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2019-2021 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.command-palette {\\n    transition: opacity 0.3s linear;\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n\\n.command-palette-suggestions {\\n    background: white;\\n    z-index: 1000;\\n    overflow: auto;\\n    box-sizing: border-box;\\n    border: 1px solid rgba(60, 60, 60, 0.6);\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n\\n.command-palette-suggestions .icon {\\n    padding-right: 0.3em;\\n    display: flex;\\n    align-self: center;\\n}\\n\\n.command-palette-suggestions em {\\n    font-weight: bold;\\n    font-style: normal;\\n}\\n\\n.command-palette-suggestions > div {\\n    padding: 0 4px;\\n    display: flex;\\n}\\n\\n.command-palette-suggestions .group {\\n    background: #eee;\\n}\\n\\n.command-palette-suggestions > div:hover:not(.group),\\n.command-palette-suggestions > div.selected {\\n    cursor: pointer;\\n}\\n\\n.command-palette-suggestions > div:hover:not(.group) {\\n    background: #e0e0e0;\\n}\\n\\n.command-palette-suggestions > div.selected {\\n    background: #bbdefb;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2020-2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n:root {\n    --glsp-error-foreground: red;\n    --glsp-warning-foreground: yellow;\n    --glsp-info-foreground: lightblue;\n    --glsp-issue-background: rgb(255 255 255 / 85%);\n}\n\n.sprotty-issue-background {\n    fill: var(--glsp-issue-background);\n    background-color: var(--glsp-issue-background);\n}\n\n.sprotty-issue.sprotty-error {\n    fill: var(--glsp-error-foreground);\n    background-color: var(--glsp-error-foreground);\n}\n\n.sprotty-issue.sprotty-warning {\n    fill: var(--glsp-warning-foreground);\n    background-color: var(--glsp-warning-foreground);\n}\n\n.sprotty-issue.sprotty-info {\n    fill: var(--glsp-info-foreground);\n    background-color: var(--glsp-info-foreground);\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp/client/css/decoration.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,4BAA4B;IAC5B,iCAAiC;IACjC,iCAAiC;IACjC,+CAA+C;AACnD;;AAEA;IACI,kCAAkC;IAClC,8CAA8C;AAClD;;AAEA;IACI,kCAAkC;IAClC,8CAA8C;AAClD;;AAEA;IACI,oCAAoC;IACpC,gDAAgD;AACpD;;AAEA;IACI,iCAAiC;IACjC,6CAA6C;AACjD\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2020-2021 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n:root {\\n    --glsp-error-foreground: red;\\n    --glsp-warning-foreground: yellow;\\n    --glsp-info-foreground: lightblue;\\n    --glsp-issue-background: rgb(255 255 255 / 85%);\\n}\\n\\n.sprotty-issue-background {\\n    fill: var(--glsp-issue-background);\\n    background-color: var(--glsp-issue-background);\\n}\\n\\n.sprotty-issue.sprotty-error {\\n    fill: var(--glsp-error-foreground);\\n    background-color: var(--glsp-error-foreground);\\n}\\n\\n.sprotty-issue.sprotty-warning {\\n    fill: var(--glsp-warning-foreground);\\n    background-color: var(--glsp-warning-foreground);\\n}\\n\\n.sprotty-issue.sprotty-info {\\n    fill: var(--glsp-info-foreground);\\n    background-color: var(--glsp-info-foreground);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.sprotty {\n    padding: 0px;\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n}\n\n.sprotty svg text::selection {\n    background: none;\n}\n\n.sprotty-hidden {\n    display: block;\n    position: absolute;\n    width: 0px;\n    height: 0px;\n}\n\n.sprotty-popup {\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n    position: absolute;\n    background: white;\n    border-radius: 5px;\n    border: 1px solid;\n    max-width: 400px;\n    min-width: 100px;\n    z-index: 1;\n}\n\n.sprotty-popup > div {\n    margin: 10px;\n}\n\n.sprotty-popup-closed {\n    display: none;\n}\n\n.sprotty-resize-handle {\n    /* radius does not work in Firefox */\n    r: 5px;\n    fill: #1d80d1;\n    stroke: none;\n    z-index: 1000;\n}\n\n.sprotty-resize-handle.selected {\n    fill: #1d80d1;\n}\n\n.sprotty-resize-handle.active {\n    fill: #1d80d1;\n}\n\n.sprotty-edge {\n    fill: none;\n    stroke-width: 1.5px;\n}\n\n.sprotty-edge.selected {\n    stroke-width: 1.5px;\n}\n\n.sprotty-edge.mouseover:not(.selected) path {\n    stroke-width: 1.5px;\n}\n\n.sprotty-node:not(.selected) {\n    stroke-width: 0px;\n}\n\n.sprotty-node.mouseover:not(.selected),\n.sprotty-edge.mouseover:not(.selected) {\n    opacity: 60%;\n}\n\n.sprotty-node.selected,\n.sprotty-edge.selected {\n    stroke: #1d80d1;\n    stroke-width: 1.5px;\n    stroke-dashoffset: 5;\n    stroke-dasharray: 5, 5;\n    stroke-linecap: round;\n}\n\n.sprotty-edge.mouseover:not(.selected) .arrow,\n.sprotty-edge.selected .arrow {\n    stroke-dashoffset: none;\n    stroke-dasharray: none;\n}\n\n.sprotty .node-creation-mode {\n    cursor: copy;\n}\n\n.sprotty .overlap-forbidden-mode {\n    cursor: not-allowed;\n}\n\n.sprotty .default-mode {\n    cursor: default;\n}\n\n.sprotty .edge-modification-not-allowed-mode {\n    cursor: no-drop;\n}\n\n.sprotty .edge-creation-select-source-mode {\n    cursor: pointer;\n}\n\n.sprotty .edge-creation-select-target-mode,\n.sprotty .edge-reconnect-select-target-mode {\n    cursor: crosshair;\n}\n\n.sprotty .move-mode {\n    cursor: move;\n}\n\n.sprotty .resize-nesw-mode {\n    cursor: nesw-resize;\n}\n\n.sprotty .resize-nwse-mode {\n    cursor: nwse-resize;\n}\n\n.sprotty .element-deletion-mode {\n    cursor: pointer;\n}\n\n.sprotty .marquee-mode {\n    cursor: crosshair;\n}\n\n.sprotty-node.marquee {\n    fill: lightgray;\n    opacity: 0.2;\n}\n\n.sprotty-edge > .sprotty-routing-handle {\n    r: 5px;\n    fill: #1d80d1;\n    stroke: none;\n    z-index: 1000;\n}\n\n.sprotty-edge > .sprotty-routing-handle[data-kind='line'] {\n    opacity: 0.35;\n}\n\n.sprotty-edge > .sprotty-routing-handle.selected {\n    fill: #1d80d1;\n}\n\n.sprotty-edge > .sprotty-routing-handle.mouseover {\n    stroke: #1d80d1a1;\n    stroke-width: 1;\n}\n\n.sprotty-missing {\n    stroke-width: 1;\n    stroke: #f00;\n    fill: #f00;\n    font-size: 14pt;\n    text-anchor: middle;\n}\n\n.sprotty g .movement-not-allowed > .sprotty-node {\n    stroke: var(--glsp-error-foreground) !important;\n}\n\n.sprotty-resize-handle.movement-not-allowed {\n    stroke: var(--glsp-error-foreground) !important;\n    fill: var(--glsp-error-foreground) !important;\n}\n\n.sprotty .error > .sprotty-node {\n    filter: drop-shadow(0px 0px 2px var(--glsp-error-foreground)) !important;\n}\n\n.sprotty .warning > .sprotty-node {\n    filter: drop-shadow(0px 0px 2px var(--glsp-warning-foreground)) !important;\n}\n\n.sprotty .info > .sprotty-node {\n    filter: drop-shadow(0px 0px 2px var(--glsp-info-foreground)) !important;\n}\n\n.sprotty svg {\n    border-style: solid;\n    border-width: 1px;\n    border-color: #bbb;\n}\n\n.sprotty text {\n    stroke-width: 0;\n    stroke: #000;\n    fill: #000;\n    font-family: sans-serif;\n    font-size: 8pt;\n    text-anchor: middle;\n}\n\n.glsp-projection {\n    width: 40%;\n    opacity: 1;\n}\n\n.sprotty-projection-bar.vertical.bordered-projection-bar {\n    width: var(--theia-scrollbar-rail-width);\n}\n\n.sprotty-projection-bar.horizontal.bordered-projection-bar {\n    height: var(--theia-scrollbar-rail-width);\n}\n\n.projection-scroll-bar {\n    transition: opacity 0.8s linear;\n}\n\n.mouse-enter .projection-scroll-bar {\n    opacity: 0.3;\n    background: transparent;\n    background-color: #aaa;\n    z-index: 1;\n}\n\n.mouse-leave .projection-scroll-bar {\n    opacity: 0;\n    pointer-events: none;\n    background: transparent;\n    background-color: #aaa;\n    z-index: 1;\n}\n\n.bordered-projection-bar {\n    border-left: 1px solid rgba(212, 212, 212, 0.2);\n    border-top: 1px solid rgba(212, 212, 212, 0.2);\n    fill: transparent;\n    width: var(--theia-scrollbar-rail-width);\n}\n\n.search-hidden {\n    opacity: 0.2;\n}\n\n.search-highlighted .sprotty-node,\n.search-highlighted .sprotty-edge {\n    stroke-width: 1.5px;\n    stroke-width: 2px;\n    stroke-dashoffset: 5;\n    stroke-dasharray: 5, 5;\n    stroke-linecap: round;\n    stroke: rgb(218, 89, 15) !important;\n    stroke: #130bf7 !important;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp/client/css/glsp-sprotty.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,YAAY;IACZ,2DAA2D;AAC/D;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,UAAU;IACV,WAAW;AACf;;AAEA;IACI,2DAA2D;IAC3D,kBAAkB;IAClB,iBAAiB;IACjB,kBAAkB;IAClB,iBAAiB;IACjB,gBAAgB;IAChB,gBAAgB;IAChB,UAAU;AACd;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,oCAAoC;IACpC,MAAM;IACN,aAAa;IACb,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,UAAU;IACV,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;;IAEI,YAAY;AAChB;;AAEA;;IAEI,eAAe;IACf,mBAAmB;IACnB,oBAAoB;IACpB,sBAAsB;IACtB,qBAAqB;AACzB;;AAEA;;IAEI,uBAAuB;IACvB,sBAAsB;AAC1B;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;AACnB;;AAEA;;IAEI,iBAAiB;AACrB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,MAAM;IACN,aAAa;IACb,YAAY;IACZ,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,iBAAiB;IACjB,eAAe;AACnB;;AAEA;IACI,eAAe;IACf,YAAY;IACZ,UAAU;IACV,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,+CAA+C;AACnD;;AAEA;IACI,+CAA+C;IAC/C,6CAA6C;AACjD;;AAEA;IACI,wEAAwE;AAC5E;;AAEA;IACI,0EAA0E;AAC9E;;AAEA;IACI,uEAAuE;AAC3E;;AAEA;IACI,mBAAmB;IACnB,iBAAiB;IACjB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,YAAY;IACZ,UAAU;IACV,uBAAuB;IACvB,cAAc;IACd,mBAAmB;AACvB;;AAEA;IACI,UAAU;IACV,UAAU;AACd;;AAEA;IACI,wCAAwC;AAC5C;;AAEA;IACI,yCAAyC;AAC7C;;AAEA;IACI,+BAA+B;AACnC;;AAEA;IACI,YAAY;IACZ,uBAAuB;IACvB,sBAAsB;IACtB,UAAU;AACd;;AAEA;IACI,UAAU;IACV,oBAAoB;IACpB,uBAAuB;IACvB,sBAAsB;IACtB,UAAU;AACd;;AAEA;IACI,+CAA+C;IAC/C,8CAA8C;IAC9C,iBAAiB;IACjB,wCAAwC;AAC5C;;AAEA;IACI,YAAY;AAChB;;AAEA;;IAEI,mBAAmB;IACnB,iBAAiB;IACjB,oBAAoB;IACpB,sBAAsB;IACtB,qBAAqB;IACrB,mCAAmC;IACnC,0BAA0B;AAC9B\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2019-2023 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.sprotty {\\n    padding: 0px;\\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\\n}\\n\\n.sprotty svg text::selection {\\n    background: none;\\n}\\n\\n.sprotty-hidden {\\n    display: block;\\n    position: absolute;\\n    width: 0px;\\n    height: 0px;\\n}\\n\\n.sprotty-popup {\\n    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\\n    position: absolute;\\n    background: white;\\n    border-radius: 5px;\\n    border: 1px solid;\\n    max-width: 400px;\\n    min-width: 100px;\\n    z-index: 1;\\n}\\n\\n.sprotty-popup > div {\\n    margin: 10px;\\n}\\n\\n.sprotty-popup-closed {\\n    display: none;\\n}\\n\\n.sprotty-resize-handle {\\n    /* radius does not work in Firefox */\\n    r: 5px;\\n    fill: #1d80d1;\\n    stroke: none;\\n    z-index: 1000;\\n}\\n\\n.sprotty-resize-handle.selected {\\n    fill: #1d80d1;\\n}\\n\\n.sprotty-resize-handle.active {\\n    fill: #1d80d1;\\n}\\n\\n.sprotty-edge {\\n    fill: none;\\n    stroke-width: 1.5px;\\n}\\n\\n.sprotty-edge.selected {\\n    stroke-width: 1.5px;\\n}\\n\\n.sprotty-edge.mouseover:not(.selected) path {\\n    stroke-width: 1.5px;\\n}\\n\\n.sprotty-node:not(.selected) {\\n    stroke-width: 0px;\\n}\\n\\n.sprotty-node.mouseover:not(.selected),\\n.sprotty-edge.mouseover:not(.selected) {\\n    opacity: 60%;\\n}\\n\\n.sprotty-node.selected,\\n.sprotty-edge.selected {\\n    stroke: #1d80d1;\\n    stroke-width: 1.5px;\\n    stroke-dashoffset: 5;\\n    stroke-dasharray: 5, 5;\\n    stroke-linecap: round;\\n}\\n\\n.sprotty-edge.mouseover:not(.selected) .arrow,\\n.sprotty-edge.selected .arrow {\\n    stroke-dashoffset: none;\\n    stroke-dasharray: none;\\n}\\n\\n.sprotty .node-creation-mode {\\n    cursor: copy;\\n}\\n\\n.sprotty .overlap-forbidden-mode {\\n    cursor: not-allowed;\\n}\\n\\n.sprotty .default-mode {\\n    cursor: default;\\n}\\n\\n.sprotty .edge-modification-not-allowed-mode {\\n    cursor: no-drop;\\n}\\n\\n.sprotty .edge-creation-select-source-mode {\\n    cursor: pointer;\\n}\\n\\n.sprotty .edge-creation-select-target-mode,\\n.sprotty .edge-reconnect-select-target-mode {\\n    cursor: crosshair;\\n}\\n\\n.sprotty .move-mode {\\n    cursor: move;\\n}\\n\\n.sprotty .resize-nesw-mode {\\n    cursor: nesw-resize;\\n}\\n\\n.sprotty .resize-nwse-mode {\\n    cursor: nwse-resize;\\n}\\n\\n.sprotty .element-deletion-mode {\\n    cursor: pointer;\\n}\\n\\n.sprotty .marquee-mode {\\n    cursor: crosshair;\\n}\\n\\n.sprotty-node.marquee {\\n    fill: lightgray;\\n    opacity: 0.2;\\n}\\n\\n.sprotty-edge > .sprotty-routing-handle {\\n    r: 5px;\\n    fill: #1d80d1;\\n    stroke: none;\\n    z-index: 1000;\\n}\\n\\n.sprotty-edge > .sprotty-routing-handle[data-kind='line'] {\\n    opacity: 0.35;\\n}\\n\\n.sprotty-edge > .sprotty-routing-handle.selected {\\n    fill: #1d80d1;\\n}\\n\\n.sprotty-edge > .sprotty-routing-handle.mouseover {\\n    stroke: #1d80d1a1;\\n    stroke-width: 1;\\n}\\n\\n.sprotty-missing {\\n    stroke-width: 1;\\n    stroke: #f00;\\n    fill: #f00;\\n    font-size: 14pt;\\n    text-anchor: middle;\\n}\\n\\n.sprotty g .movement-not-allowed > .sprotty-node {\\n    stroke: var(--glsp-error-foreground) !important;\\n}\\n\\n.sprotty-resize-handle.movement-not-allowed {\\n    stroke: var(--glsp-error-foreground) !important;\\n    fill: var(--glsp-error-foreground) !important;\\n}\\n\\n.sprotty .error > .sprotty-node {\\n    filter: drop-shadow(0px 0px 2px var(--glsp-error-foreground)) !important;\\n}\\n\\n.sprotty .warning > .sprotty-node {\\n    filter: drop-shadow(0px 0px 2px var(--glsp-warning-foreground)) !important;\\n}\\n\\n.sprotty .info > .sprotty-node {\\n    filter: drop-shadow(0px 0px 2px var(--glsp-info-foreground)) !important;\\n}\\n\\n.sprotty svg {\\n    border-style: solid;\\n    border-width: 1px;\\n    border-color: #bbb;\\n}\\n\\n.sprotty text {\\n    stroke-width: 0;\\n    stroke: #000;\\n    fill: #000;\\n    font-family: sans-serif;\\n    font-size: 8pt;\\n    text-anchor: middle;\\n}\\n\\n.glsp-projection {\\n    width: 40%;\\n    opacity: 1;\\n}\\n\\n.sprotty-projection-bar.vertical.bordered-projection-bar {\\n    width: var(--theia-scrollbar-rail-width);\\n}\\n\\n.sprotty-projection-bar.horizontal.bordered-projection-bar {\\n    height: var(--theia-scrollbar-rail-width);\\n}\\n\\n.projection-scroll-bar {\\n    transition: opacity 0.8s linear;\\n}\\n\\n.mouse-enter .projection-scroll-bar {\\n    opacity: 0.3;\\n    background: transparent;\\n    background-color: #aaa;\\n    z-index: 1;\\n}\\n\\n.mouse-leave .projection-scroll-bar {\\n    opacity: 0;\\n    pointer-events: none;\\n    background: transparent;\\n    background-color: #aaa;\\n    z-index: 1;\\n}\\n\\n.bordered-projection-bar {\\n    border-left: 1px solid rgba(212, 212, 212, 0.2);\\n    border-top: 1px solid rgba(212, 212, 212, 0.2);\\n    fill: transparent;\\n    width: var(--theia-scrollbar-rail-width);\\n}\\n\\n.search-hidden {\\n    opacity: 0.2;\\n}\\n\\n.search-highlighted .sprotty-node,\\n.search-highlighted .sprotty-edge {\\n    stroke-width: 1.5px;\\n    stroke-width: 2px;\\n    stroke-dashoffset: 5;\\n    stroke-dasharray: 5, 5;\\n    stroke-linecap: round;\\n    stroke: rgb(218, 89, 15) !important;\\n    stroke: #130bf7 !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2019-2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* Css for main container */\n.tool-palette {\n    position: absolute;\n    right: 40px;\n    top: 25px;\n    text-align: center;\n    width: 225px;\n    display: block;\n    z-index: 1000;\n    border-style: solid;\n    border-width: 0px;\n    border-color: #bbb;\n    border-radius: 5px;\n    color: black;\n    user-select: none;\n    /* supported by Chrome and Opera */\n    -webkit-user-select: none;\n    /* Safari */\n    -khtml-user-select: none;\n    /* Konqueror HTML */\n    -moz-user-select: none;\n    /* Firefox */\n    -ms-user-select: none;\n    /* Internet Explorer/Edge */\n}\n\n/* Css for header compartment */\n\n.palette-header {\n    padding: 0.4em;\n    text-align: left;\n    background: #cccccc;\n    border: 1px solid rgba(60, 60, 60, 0.6);\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex-wrap: wrap;\n}\n\n.header-icon {\n    display: flex;\n    align-items: center;\n}\n\n.header-icon i {\n    margin-right: 0.2em;\n}\n\n.header-tools {\n    display: flex;\n    align-items: center;\n}\n\n.header-tools i {\n    border: 1px solid #cccccc;\n    padding: 0.15em;\n    margin-right: 0.15em;\n}\n\n.header-tools i:hover {\n    background: #dfdfdf;\n}\n\n.header-tools .clicked {\n    background: #bddaef;\n    border: 1px solid rgba(60, 60, 60, 0.6);\n}\n\n/*Css for palette body compartment */\n\n.palette-body {\n    background: rgba(100, 100, 100, 0.2);\n    border: 1px solid rgba(60, 60, 60, 0.6);\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\n}\n\n.tool-group {\n    text-align: left;\n    background: #ededee;\n}\n\n.group-header {\n    background: #cccccc;\n    display: flex;\n    align-items: center;\n}\n\n.group-header:hover {\n    background: #aaaaaa;\n}\n\n.group-header i {\n    padding: 0.4em;\n}\n\n.tool-button {\n    background: #ededee;\n    padding: 0.4em;\n    display: flex;\n    align-items: center;\n}\n\n.tool-button i {\n    margin-right: 0.4em;\n}\n\n.tool-button:hover {\n    background: #dfdfdf;\n}\n\n.tool-button.clicked {\n    background: #bddaef;\n}\n\n.tool-button.collapsed {\n    display: none;\n}\n\n.collapsible-palette {\n    overflow: auto;\n    transition: max-height 0.2s ease-out;\n}\n\n.minimize-palette-button {\n    position: absolute;\n    right: 20px;\n    top: 35px;\n    z-index: 1000;\n}\n\n.search-input {\n    background: #dfdfdf;\n    color: black;\n    border: #bddaef;\n    padding-left: 3px;\n    width: 100%;\n    margin: 3px;\n}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@eclipse-glsp/client/css/tool-palette.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF,2BAA2B;AAC3B;IACI,kBAAkB;IAClB,WAAW;IACX,SAAS;IACT,kBAAkB;IAClB,YAAY;IACZ,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,iBAAiB;IACjB,kBAAkB;IAClB,kBAAkB;IAClB,YAAY;IACZ,iBAAiB;IACjB,kCAAkC;IAClC,yBAAyB;IACzB,WAAW;IACX,wBAAwB;IACxB,mBAAmB;IACnB,sBAAsB;IACtB,YAAY;IACZ,qBAAqB;IACrB,2BAA2B;AAC/B;;AAEA,+BAA+B;;AAE/B;IACI,cAAc;IACd,gBAAgB;IAChB,mBAAmB;IACnB,uCAAuC;IACvC,4EAA4E;IAC5E,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,yBAAyB;IACzB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;IACnB,uCAAuC;AAC3C;;AAEA,oCAAoC;;AAEpC;IACI,oCAAoC;IACpC,uCAAuC;IACvC,4EAA4E;AAChF;;AAEA;IACI,gBAAgB;IAChB,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;IACnB,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,cAAc;IACd,oCAAoC;AACxC;;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,SAAS;IACT,aAAa;AACjB;;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,eAAe;IACf,iBAAiB;IACjB,WAAW;IACX,WAAW;AACf\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2019-2021 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n/* Css for main container */\\n.tool-palette {\\n    position: absolute;\\n    right: 40px;\\n    top: 25px;\\n    text-align: center;\\n    width: 225px;\\n    display: block;\\n    z-index: 1000;\\n    border-style: solid;\\n    border-width: 0px;\\n    border-color: #bbb;\\n    border-radius: 5px;\\n    color: black;\\n    user-select: none;\\n    /* supported by Chrome and Opera */\\n    -webkit-user-select: none;\\n    /* Safari */\\n    -khtml-user-select: none;\\n    /* Konqueror HTML */\\n    -moz-user-select: none;\\n    /* Firefox */\\n    -ms-user-select: none;\\n    /* Internet Explorer/Edge */\\n}\\n\\n/* Css for header compartment */\\n\\n.palette-header {\\n    padding: 0.4em;\\n    text-align: left;\\n    background: #cccccc;\\n    border: 1px solid rgba(60, 60, 60, 0.6);\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n    display: flex;\\n    align-items: center;\\n    justify-content: space-between;\\n    flex-wrap: wrap;\\n}\\n\\n.header-icon {\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.header-icon i {\\n    margin-right: 0.2em;\\n}\\n\\n.header-tools {\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.header-tools i {\\n    border: 1px solid #cccccc;\\n    padding: 0.15em;\\n    margin-right: 0.15em;\\n}\\n\\n.header-tools i:hover {\\n    background: #dfdfdf;\\n}\\n\\n.header-tools .clicked {\\n    background: #bddaef;\\n    border: 1px solid rgba(60, 60, 60, 0.6);\\n}\\n\\n/*Css for palette body compartment */\\n\\n.palette-body {\\n    background: rgba(100, 100, 100, 0.2);\\n    border: 1px solid rgba(60, 60, 60, 0.6);\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);\\n}\\n\\n.tool-group {\\n    text-align: left;\\n    background: #ededee;\\n}\\n\\n.group-header {\\n    background: #cccccc;\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.group-header:hover {\\n    background: #aaaaaa;\\n}\\n\\n.group-header i {\\n    padding: 0.4em;\\n}\\n\\n.tool-button {\\n    background: #ededee;\\n    padding: 0.4em;\\n    display: flex;\\n    align-items: center;\\n}\\n\\n.tool-button i {\\n    margin-right: 0.4em;\\n}\\n\\n.tool-button:hover {\\n    background: #dfdfdf;\\n}\\n\\n.tool-button.clicked {\\n    background: #bddaef;\\n}\\n\\n.tool-button.collapsed {\\n    display: none;\\n}\\n\\n.collapsible-palette {\\n    overflow: auto;\\n    transition: max-height 0.2s ease-out;\\n}\\n\\n.minimize-palette-button {\\n    position: absolute;\\n    right: 20px;\\n    top: 35px;\\n    z-index: 1000;\\n}\\n\\n.search-input {\\n    background: #dfdfdf;\\n    color: black;\\n    border: #bddaef;\\n    padding-left: 3px;\\n    width: 100%;\\n    margin: 3px;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"./codicon.ttf?7cea6a135a6c0359d1f6d18e6b2c5c42\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n@font-face {\n\tfont-family: \"codicon\";\n\tsrc: url(${___CSS_LOADER_URL_REPLACEMENT_0___}) format(\"truetype\");\n}\n\n.codicon[class*='codicon-'] {\n\tfont: normal normal normal 16px/1 codicon;\n\tdisplay: block;\n\ttext-decoration: none;\n\ttext-rendering: auto;\n\ttext-align: center;\n\t-webkit-font-smoothing: antialiased;\n\t-moz-osx-font-smoothing: grayscale;\n\tuser-select: none;\n\t-webkit-user-select: none;\n\t-ms-user-select: none;\n}\n\n\n.codicon-add:before { content: \"\\\\ea60\" }\n.codicon-plus:before { content: \"\\\\ea60\" }\n.codicon-gist-new:before { content: \"\\\\ea60\" }\n.codicon-repo-create:before { content: \"\\\\ea60\" }\n.codicon-lightbulb:before { content: \"\\\\ea61\" }\n.codicon-light-bulb:before { content: \"\\\\ea61\" }\n.codicon-repo:before { content: \"\\\\ea62\" }\n.codicon-repo-delete:before { content: \"\\\\ea62\" }\n.codicon-gist-fork:before { content: \"\\\\ea63\" }\n.codicon-repo-forked:before { content: \"\\\\ea63\" }\n.codicon-git-pull-request:before { content: \"\\\\ea64\" }\n.codicon-git-pull-request-abandoned:before { content: \"\\\\ea64\" }\n.codicon-record-keys:before { content: \"\\\\ea65\" }\n.codicon-keyboard:before { content: \"\\\\ea65\" }\n.codicon-tag:before { content: \"\\\\ea66\" }\n.codicon-tag-add:before { content: \"\\\\ea66\" }\n.codicon-tag-remove:before { content: \"\\\\ea66\" }\n.codicon-person:before { content: \"\\\\ea67\" }\n.codicon-person-follow:before { content: \"\\\\ea67\" }\n.codicon-person-outline:before { content: \"\\\\ea67\" }\n.codicon-person-filled:before { content: \"\\\\ea67\" }\n.codicon-git-branch:before { content: \"\\\\ea68\" }\n.codicon-git-branch-create:before { content: \"\\\\ea68\" }\n.codicon-git-branch-delete:before { content: \"\\\\ea68\" }\n.codicon-source-control:before { content: \"\\\\ea68\" }\n.codicon-mirror:before { content: \"\\\\ea69\" }\n.codicon-mirror-public:before { content: \"\\\\ea69\" }\n.codicon-star:before { content: \"\\\\ea6a\" }\n.codicon-star-add:before { content: \"\\\\ea6a\" }\n.codicon-star-delete:before { content: \"\\\\ea6a\" }\n.codicon-star-empty:before { content: \"\\\\ea6a\" }\n.codicon-comment:before { content: \"\\\\ea6b\" }\n.codicon-comment-add:before { content: \"\\\\ea6b\" }\n.codicon-alert:before { content: \"\\\\ea6c\" }\n.codicon-warning:before { content: \"\\\\ea6c\" }\n.codicon-search:before { content: \"\\\\ea6d\" }\n.codicon-search-save:before { content: \"\\\\ea6d\" }\n.codicon-log-out:before { content: \"\\\\ea6e\" }\n.codicon-sign-out:before { content: \"\\\\ea6e\" }\n.codicon-log-in:before { content: \"\\\\ea6f\" }\n.codicon-sign-in:before { content: \"\\\\ea6f\" }\n.codicon-eye:before { content: \"\\\\ea70\" }\n.codicon-eye-unwatch:before { content: \"\\\\ea70\" }\n.codicon-eye-watch:before { content: \"\\\\ea70\" }\n.codicon-circle-filled:before { content: \"\\\\ea71\" }\n.codicon-primitive-dot:before { content: \"\\\\ea71\" }\n.codicon-close-dirty:before { content: \"\\\\ea71\" }\n.codicon-debug-breakpoint:before { content: \"\\\\ea71\" }\n.codicon-debug-breakpoint-disabled:before { content: \"\\\\ea71\" }\n.codicon-debug-hint:before { content: \"\\\\ea71\" }\n.codicon-primitive-square:before { content: \"\\\\ea72\" }\n.codicon-edit:before { content: \"\\\\ea73\" }\n.codicon-pencil:before { content: \"\\\\ea73\" }\n.codicon-info:before { content: \"\\\\ea74\" }\n.codicon-issue-opened:before { content: \"\\\\ea74\" }\n.codicon-gist-private:before { content: \"\\\\ea75\" }\n.codicon-git-fork-private:before { content: \"\\\\ea75\" }\n.codicon-lock:before { content: \"\\\\ea75\" }\n.codicon-mirror-private:before { content: \"\\\\ea75\" }\n.codicon-close:before { content: \"\\\\ea76\" }\n.codicon-remove-close:before { content: \"\\\\ea76\" }\n.codicon-x:before { content: \"\\\\ea76\" }\n.codicon-repo-sync:before { content: \"\\\\ea77\" }\n.codicon-sync:before { content: \"\\\\ea77\" }\n.codicon-clone:before { content: \"\\\\ea78\" }\n.codicon-desktop-download:before { content: \"\\\\ea78\" }\n.codicon-beaker:before { content: \"\\\\ea79\" }\n.codicon-microscope:before { content: \"\\\\ea79\" }\n.codicon-vm:before { content: \"\\\\ea7a\" }\n.codicon-device-desktop:before { content: \"\\\\ea7a\" }\n.codicon-file:before { content: \"\\\\ea7b\" }\n.codicon-file-text:before { content: \"\\\\ea7b\" }\n.codicon-more:before { content: \"\\\\ea7c\" }\n.codicon-ellipsis:before { content: \"\\\\ea7c\" }\n.codicon-kebab-horizontal:before { content: \"\\\\ea7c\" }\n.codicon-mail-reply:before { content: \"\\\\ea7d\" }\n.codicon-reply:before { content: \"\\\\ea7d\" }\n.codicon-organization:before { content: \"\\\\ea7e\" }\n.codicon-organization-filled:before { content: \"\\\\ea7e\" }\n.codicon-organization-outline:before { content: \"\\\\ea7e\" }\n.codicon-new-file:before { content: \"\\\\ea7f\" }\n.codicon-file-add:before { content: \"\\\\ea7f\" }\n.codicon-new-folder:before { content: \"\\\\ea80\" }\n.codicon-file-directory-create:before { content: \"\\\\ea80\" }\n.codicon-trash:before { content: \"\\\\ea81\" }\n.codicon-trashcan:before { content: \"\\\\ea81\" }\n.codicon-history:before { content: \"\\\\ea82\" }\n.codicon-clock:before { content: \"\\\\ea82\" }\n.codicon-folder:before { content: \"\\\\ea83\" }\n.codicon-file-directory:before { content: \"\\\\ea83\" }\n.codicon-symbol-folder:before { content: \"\\\\ea83\" }\n.codicon-logo-github:before { content: \"\\\\ea84\" }\n.codicon-mark-github:before { content: \"\\\\ea84\" }\n.codicon-github:before { content: \"\\\\ea84\" }\n.codicon-terminal:before { content: \"\\\\ea85\" }\n.codicon-console:before { content: \"\\\\ea85\" }\n.codicon-repl:before { content: \"\\\\ea85\" }\n.codicon-zap:before { content: \"\\\\ea86\" }\n.codicon-symbol-event:before { content: \"\\\\ea86\" }\n.codicon-error:before { content: \"\\\\ea87\" }\n.codicon-stop:before { content: \"\\\\ea87\" }\n.codicon-variable:before { content: \"\\\\ea88\" }\n.codicon-symbol-variable:before { content: \"\\\\ea88\" }\n.codicon-array:before { content: \"\\\\ea8a\" }\n.codicon-symbol-array:before { content: \"\\\\ea8a\" }\n.codicon-symbol-module:before { content: \"\\\\ea8b\" }\n.codicon-symbol-package:before { content: \"\\\\ea8b\" }\n.codicon-symbol-namespace:before { content: \"\\\\ea8b\" }\n.codicon-symbol-object:before { content: \"\\\\ea8b\" }\n.codicon-symbol-method:before { content: \"\\\\ea8c\" }\n.codicon-symbol-function:before { content: \"\\\\ea8c\" }\n.codicon-symbol-constructor:before { content: \"\\\\ea8c\" }\n.codicon-symbol-boolean:before { content: \"\\\\ea8f\" }\n.codicon-symbol-null:before { content: \"\\\\ea8f\" }\n.codicon-symbol-numeric:before { content: \"\\\\ea90\" }\n.codicon-symbol-number:before { content: \"\\\\ea90\" }\n.codicon-symbol-structure:before { content: \"\\\\ea91\" }\n.codicon-symbol-struct:before { content: \"\\\\ea91\" }\n.codicon-symbol-parameter:before { content: \"\\\\ea92\" }\n.codicon-symbol-type-parameter:before { content: \"\\\\ea92\" }\n.codicon-symbol-key:before { content: \"\\\\ea93\" }\n.codicon-symbol-text:before { content: \"\\\\ea93\" }\n.codicon-symbol-reference:before { content: \"\\\\ea94\" }\n.codicon-go-to-file:before { content: \"\\\\ea94\" }\n.codicon-symbol-enum:before { content: \"\\\\ea95\" }\n.codicon-symbol-value:before { content: \"\\\\ea95\" }\n.codicon-symbol-ruler:before { content: \"\\\\ea96\" }\n.codicon-symbol-unit:before { content: \"\\\\ea96\" }\n.codicon-activate-breakpoints:before { content: \"\\\\ea97\" }\n.codicon-archive:before { content: \"\\\\ea98\" }\n.codicon-arrow-both:before { content: \"\\\\ea99\" }\n.codicon-arrow-down:before { content: \"\\\\ea9a\" }\n.codicon-arrow-left:before { content: \"\\\\ea9b\" }\n.codicon-arrow-right:before { content: \"\\\\ea9c\" }\n.codicon-arrow-small-down:before { content: \"\\\\ea9d\" }\n.codicon-arrow-small-left:before { content: \"\\\\ea9e\" }\n.codicon-arrow-small-right:before { content: \"\\\\ea9f\" }\n.codicon-arrow-small-up:before { content: \"\\\\eaa0\" }\n.codicon-arrow-up:before { content: \"\\\\eaa1\" }\n.codicon-bell:before { content: \"\\\\eaa2\" }\n.codicon-bold:before { content: \"\\\\eaa3\" }\n.codicon-book:before { content: \"\\\\eaa4\" }\n.codicon-bookmark:before { content: \"\\\\eaa5\" }\n.codicon-debug-breakpoint-conditional-unverified:before { content: \"\\\\eaa6\" }\n.codicon-debug-breakpoint-conditional:before { content: \"\\\\eaa7\" }\n.codicon-debug-breakpoint-conditional-disabled:before { content: \"\\\\eaa7\" }\n.codicon-debug-breakpoint-data-unverified:before { content: \"\\\\eaa8\" }\n.codicon-debug-breakpoint-data:before { content: \"\\\\eaa9\" }\n.codicon-debug-breakpoint-data-disabled:before { content: \"\\\\eaa9\" }\n.codicon-debug-breakpoint-log-unverified:before { content: \"\\\\eaaa\" }\n.codicon-debug-breakpoint-log:before { content: \"\\\\eaab\" }\n.codicon-debug-breakpoint-log-disabled:before { content: \"\\\\eaab\" }\n.codicon-briefcase:before { content: \"\\\\eaac\" }\n.codicon-broadcast:before { content: \"\\\\eaad\" }\n.codicon-browser:before { content: \"\\\\eaae\" }\n.codicon-bug:before { content: \"\\\\eaaf\" }\n.codicon-calendar:before { content: \"\\\\eab0\" }\n.codicon-case-sensitive:before { content: \"\\\\eab1\" }\n.codicon-check:before { content: \"\\\\eab2\" }\n.codicon-checklist:before { content: \"\\\\eab3\" }\n.codicon-chevron-down:before { content: \"\\\\eab4\" }\n.codicon-chevron-left:before { content: \"\\\\eab5\" }\n.codicon-chevron-right:before { content: \"\\\\eab6\" }\n.codicon-chevron-up:before { content: \"\\\\eab7\" }\n.codicon-chrome-close:before { content: \"\\\\eab8\" }\n.codicon-chrome-maximize:before { content: \"\\\\eab9\" }\n.codicon-chrome-minimize:before { content: \"\\\\eaba\" }\n.codicon-chrome-restore:before { content: \"\\\\eabb\" }\n.codicon-circle-outline:before { content: \"\\\\eabc\" }\n.codicon-debug-breakpoint-unverified:before { content: \"\\\\eabc\" }\n.codicon-circle-slash:before { content: \"\\\\eabd\" }\n.codicon-circuit-board:before { content: \"\\\\eabe\" }\n.codicon-clear-all:before { content: \"\\\\eabf\" }\n.codicon-clippy:before { content: \"\\\\eac0\" }\n.codicon-close-all:before { content: \"\\\\eac1\" }\n.codicon-cloud-download:before { content: \"\\\\eac2\" }\n.codicon-cloud-upload:before { content: \"\\\\eac3\" }\n.codicon-code:before { content: \"\\\\eac4\" }\n.codicon-collapse-all:before { content: \"\\\\eac5\" }\n.codicon-color-mode:before { content: \"\\\\eac6\" }\n.codicon-comment-discussion:before { content: \"\\\\eac7\" }\n.codicon-credit-card:before { content: \"\\\\eac9\" }\n.codicon-dash:before { content: \"\\\\eacc\" }\n.codicon-dashboard:before { content: \"\\\\eacd\" }\n.codicon-database:before { content: \"\\\\eace\" }\n.codicon-debug-continue:before { content: \"\\\\eacf\" }\n.codicon-debug-disconnect:before { content: \"\\\\ead0\" }\n.codicon-debug-pause:before { content: \"\\\\ead1\" }\n.codicon-debug-restart:before { content: \"\\\\ead2\" }\n.codicon-debug-start:before { content: \"\\\\ead3\" }\n.codicon-debug-step-into:before { content: \"\\\\ead4\" }\n.codicon-debug-step-out:before { content: \"\\\\ead5\" }\n.codicon-debug-step-over:before { content: \"\\\\ead6\" }\n.codicon-debug-stop:before { content: \"\\\\ead7\" }\n.codicon-debug:before { content: \"\\\\ead8\" }\n.codicon-device-camera-video:before { content: \"\\\\ead9\" }\n.codicon-device-camera:before { content: \"\\\\eada\" }\n.codicon-device-mobile:before { content: \"\\\\eadb\" }\n.codicon-diff-added:before { content: \"\\\\eadc\" }\n.codicon-diff-ignored:before { content: \"\\\\eadd\" }\n.codicon-diff-modified:before { content: \"\\\\eade\" }\n.codicon-diff-removed:before { content: \"\\\\eadf\" }\n.codicon-diff-renamed:before { content: \"\\\\eae0\" }\n.codicon-diff:before { content: \"\\\\eae1\" }\n.codicon-discard:before { content: \"\\\\eae2\" }\n.codicon-editor-layout:before { content: \"\\\\eae3\" }\n.codicon-empty-window:before { content: \"\\\\eae4\" }\n.codicon-exclude:before { content: \"\\\\eae5\" }\n.codicon-extensions:before { content: \"\\\\eae6\" }\n.codicon-eye-closed:before { content: \"\\\\eae7\" }\n.codicon-file-binary:before { content: \"\\\\eae8\" }\n.codicon-file-code:before { content: \"\\\\eae9\" }\n.codicon-file-media:before { content: \"\\\\eaea\" }\n.codicon-file-pdf:before { content: \"\\\\eaeb\" }\n.codicon-file-submodule:before { content: \"\\\\eaec\" }\n.codicon-file-symlink-directory:before { content: \"\\\\eaed\" }\n.codicon-file-symlink-file:before { content: \"\\\\eaee\" }\n.codicon-file-zip:before { content: \"\\\\eaef\" }\n.codicon-files:before { content: \"\\\\eaf0\" }\n.codicon-filter:before { content: \"\\\\eaf1\" }\n.codicon-flame:before { content: \"\\\\eaf2\" }\n.codicon-fold-down:before { content: \"\\\\eaf3\" }\n.codicon-fold-up:before { content: \"\\\\eaf4\" }\n.codicon-fold:before { content: \"\\\\eaf5\" }\n.codicon-folder-active:before { content: \"\\\\eaf6\" }\n.codicon-folder-opened:before { content: \"\\\\eaf7\" }\n.codicon-gear:before { content: \"\\\\eaf8\" }\n.codicon-gift:before { content: \"\\\\eaf9\" }\n.codicon-gist-secret:before { content: \"\\\\eafa\" }\n.codicon-gist:before { content: \"\\\\eafb\" }\n.codicon-git-commit:before { content: \"\\\\eafc\" }\n.codicon-git-compare:before { content: \"\\\\eafd\" }\n.codicon-compare-changes:before { content: \"\\\\eafd\" }\n.codicon-git-merge:before { content: \"\\\\eafe\" }\n.codicon-github-action:before { content: \"\\\\eaff\" }\n.codicon-github-alt:before { content: \"\\\\eb00\" }\n.codicon-globe:before { content: \"\\\\eb01\" }\n.codicon-grabber:before { content: \"\\\\eb02\" }\n.codicon-graph:before { content: \"\\\\eb03\" }\n.codicon-gripper:before { content: \"\\\\eb04\" }\n.codicon-heart:before { content: \"\\\\eb05\" }\n.codicon-home:before { content: \"\\\\eb06\" }\n.codicon-horizontal-rule:before { content: \"\\\\eb07\" }\n.codicon-hubot:before { content: \"\\\\eb08\" }\n.codicon-inbox:before { content: \"\\\\eb09\" }\n.codicon-issue-reopened:before { content: \"\\\\eb0b\" }\n.codicon-issues:before { content: \"\\\\eb0c\" }\n.codicon-italic:before { content: \"\\\\eb0d\" }\n.codicon-jersey:before { content: \"\\\\eb0e\" }\n.codicon-json:before { content: \"\\\\eb0f\" }\n.codicon-kebab-vertical:before { content: \"\\\\eb10\" }\n.codicon-key:before { content: \"\\\\eb11\" }\n.codicon-law:before { content: \"\\\\eb12\" }\n.codicon-lightbulb-autofix:before { content: \"\\\\eb13\" }\n.codicon-link-external:before { content: \"\\\\eb14\" }\n.codicon-link:before { content: \"\\\\eb15\" }\n.codicon-list-ordered:before { content: \"\\\\eb16\" }\n.codicon-list-unordered:before { content: \"\\\\eb17\" }\n.codicon-live-share:before { content: \"\\\\eb18\" }\n.codicon-loading:before { content: \"\\\\eb19\" }\n.codicon-location:before { content: \"\\\\eb1a\" }\n.codicon-mail-read:before { content: \"\\\\eb1b\" }\n.codicon-mail:before { content: \"\\\\eb1c\" }\n.codicon-markdown:before { content: \"\\\\eb1d\" }\n.codicon-megaphone:before { content: \"\\\\eb1e\" }\n.codicon-mention:before { content: \"\\\\eb1f\" }\n.codicon-milestone:before { content: \"\\\\eb20\" }\n.codicon-mortar-board:before { content: \"\\\\eb21\" }\n.codicon-move:before { content: \"\\\\eb22\" }\n.codicon-multiple-windows:before { content: \"\\\\eb23\" }\n.codicon-mute:before { content: \"\\\\eb24\" }\n.codicon-no-newline:before { content: \"\\\\eb25\" }\n.codicon-note:before { content: \"\\\\eb26\" }\n.codicon-octoface:before { content: \"\\\\eb27\" }\n.codicon-open-preview:before { content: \"\\\\eb28\" }\n.codicon-package:before { content: \"\\\\eb29\" }\n.codicon-paintcan:before { content: \"\\\\eb2a\" }\n.codicon-pin:before { content: \"\\\\eb2b\" }\n.codicon-play:before { content: \"\\\\eb2c\" }\n.codicon-run:before { content: \"\\\\eb2c\" }\n.codicon-plug:before { content: \"\\\\eb2d\" }\n.codicon-preserve-case:before { content: \"\\\\eb2e\" }\n.codicon-preview:before { content: \"\\\\eb2f\" }\n.codicon-project:before { content: \"\\\\eb30\" }\n.codicon-pulse:before { content: \"\\\\eb31\" }\n.codicon-question:before { content: \"\\\\eb32\" }\n.codicon-quote:before { content: \"\\\\eb33\" }\n.codicon-radio-tower:before { content: \"\\\\eb34\" }\n.codicon-reactions:before { content: \"\\\\eb35\" }\n.codicon-references:before { content: \"\\\\eb36\" }\n.codicon-refresh:before { content: \"\\\\eb37\" }\n.codicon-regex:before { content: \"\\\\eb38\" }\n.codicon-remote-explorer:before { content: \"\\\\eb39\" }\n.codicon-remote:before { content: \"\\\\eb3a\" }\n.codicon-remove:before { content: \"\\\\eb3b\" }\n.codicon-replace-all:before { content: \"\\\\eb3c\" }\n.codicon-replace:before { content: \"\\\\eb3d\" }\n.codicon-repo-clone:before { content: \"\\\\eb3e\" }\n.codicon-repo-force-push:before { content: \"\\\\eb3f\" }\n.codicon-repo-pull:before { content: \"\\\\eb40\" }\n.codicon-repo-push:before { content: \"\\\\eb41\" }\n.codicon-report:before { content: \"\\\\eb42\" }\n.codicon-request-changes:before { content: \"\\\\eb43\" }\n.codicon-rocket:before { content: \"\\\\eb44\" }\n.codicon-root-folder-opened:before { content: \"\\\\eb45\" }\n.codicon-root-folder:before { content: \"\\\\eb46\" }\n.codicon-rss:before { content: \"\\\\eb47\" }\n.codicon-ruby:before { content: \"\\\\eb48\" }\n.codicon-save-all:before { content: \"\\\\eb49\" }\n.codicon-save-as:before { content: \"\\\\eb4a\" }\n.codicon-save:before { content: \"\\\\eb4b\" }\n.codicon-screen-full:before { content: \"\\\\eb4c\" }\n.codicon-screen-normal:before { content: \"\\\\eb4d\" }\n.codicon-search-stop:before { content: \"\\\\eb4e\" }\n.codicon-server:before { content: \"\\\\eb50\" }\n.codicon-settings-gear:before { content: \"\\\\eb51\" }\n.codicon-settings:before { content: \"\\\\eb52\" }\n.codicon-shield:before { content: \"\\\\eb53\" }\n.codicon-smiley:before { content: \"\\\\eb54\" }\n.codicon-sort-precedence:before { content: \"\\\\eb55\" }\n.codicon-split-horizontal:before { content: \"\\\\eb56\" }\n.codicon-split-vertical:before { content: \"\\\\eb57\" }\n.codicon-squirrel:before { content: \"\\\\eb58\" }\n.codicon-star-full:before { content: \"\\\\eb59\" }\n.codicon-star-half:before { content: \"\\\\eb5a\" }\n.codicon-symbol-class:before { content: \"\\\\eb5b\" }\n.codicon-symbol-color:before { content: \"\\\\eb5c\" }\n.codicon-symbol-constant:before { content: \"\\\\eb5d\" }\n.codicon-symbol-enum-member:before { content: \"\\\\eb5e\" }\n.codicon-symbol-field:before { content: \"\\\\eb5f\" }\n.codicon-symbol-file:before { content: \"\\\\eb60\" }\n.codicon-symbol-interface:before { content: \"\\\\eb61\" }\n.codicon-symbol-keyword:before { content: \"\\\\eb62\" }\n.codicon-symbol-misc:before { content: \"\\\\eb63\" }\n.codicon-symbol-operator:before { content: \"\\\\eb64\" }\n.codicon-symbol-property:before { content: \"\\\\eb65\" }\n.codicon-wrench:before { content: \"\\\\eb65\" }\n.codicon-wrench-subaction:before { content: \"\\\\eb65\" }\n.codicon-symbol-snippet:before { content: \"\\\\eb66\" }\n.codicon-tasklist:before { content: \"\\\\eb67\" }\n.codicon-telescope:before { content: \"\\\\eb68\" }\n.codicon-text-size:before { content: \"\\\\eb69\" }\n.codicon-three-bars:before { content: \"\\\\eb6a\" }\n.codicon-thumbsdown:before { content: \"\\\\eb6b\" }\n.codicon-thumbsup:before { content: \"\\\\eb6c\" }\n.codicon-tools:before { content: \"\\\\eb6d\" }\n.codicon-triangle-down:before { content: \"\\\\eb6e\" }\n.codicon-triangle-left:before { content: \"\\\\eb6f\" }\n.codicon-triangle-right:before { content: \"\\\\eb70\" }\n.codicon-triangle-up:before { content: \"\\\\eb71\" }\n.codicon-twitter:before { content: \"\\\\eb72\" }\n.codicon-unfold:before { content: \"\\\\eb73\" }\n.codicon-unlock:before { content: \"\\\\eb74\" }\n.codicon-unmute:before { content: \"\\\\eb75\" }\n.codicon-unverified:before { content: \"\\\\eb76\" }\n.codicon-verified:before { content: \"\\\\eb77\" }\n.codicon-versions:before { content: \"\\\\eb78\" }\n.codicon-vm-active:before { content: \"\\\\eb79\" }\n.codicon-vm-outline:before { content: \"\\\\eb7a\" }\n.codicon-vm-running:before { content: \"\\\\eb7b\" }\n.codicon-watch:before { content: \"\\\\eb7c\" }\n.codicon-whitespace:before { content: \"\\\\eb7d\" }\n.codicon-whole-word:before { content: \"\\\\eb7e\" }\n.codicon-window:before { content: \"\\\\eb7f\" }\n.codicon-word-wrap:before { content: \"\\\\eb80\" }\n.codicon-zoom-in:before { content: \"\\\\eb81\" }\n.codicon-zoom-out:before { content: \"\\\\eb82\" }\n.codicon-list-filter:before { content: \"\\\\eb83\" }\n.codicon-list-flat:before { content: \"\\\\eb84\" }\n.codicon-list-selection:before { content: \"\\\\eb85\" }\n.codicon-selection:before { content: \"\\\\eb85\" }\n.codicon-list-tree:before { content: \"\\\\eb86\" }\n.codicon-debug-breakpoint-function-unverified:before { content: \"\\\\eb87\" }\n.codicon-debug-breakpoint-function:before { content: \"\\\\eb88\" }\n.codicon-debug-breakpoint-function-disabled:before { content: \"\\\\eb88\" }\n.codicon-debug-stackframe-active:before { content: \"\\\\eb89\" }\n.codicon-debug-stackframe-dot:before { content: \"\\\\eb8a\" }\n.codicon-debug-stackframe:before { content: \"\\\\eb8b\" }\n.codicon-debug-stackframe-focused:before { content: \"\\\\eb8b\" }\n.codicon-debug-breakpoint-unsupported:before { content: \"\\\\eb8c\" }\n.codicon-symbol-string:before { content: \"\\\\eb8d\" }\n.codicon-debug-reverse-continue:before { content: \"\\\\eb8e\" }\n.codicon-debug-step-back:before { content: \"\\\\eb8f\" }\n.codicon-debug-restart-frame:before { content: \"\\\\eb90\" }\n.codicon-debug-alt:before { content: \"\\\\eb91\" }\n.codicon-call-incoming:before { content: \"\\\\eb92\" }\n.codicon-call-outgoing:before { content: \"\\\\eb93\" }\n.codicon-menu:before { content: \"\\\\eb94\" }\n.codicon-expand-all:before { content: \"\\\\eb95\" }\n.codicon-feedback:before { content: \"\\\\eb96\" }\n.codicon-group-by-ref-type:before { content: \"\\\\eb97\" }\n.codicon-ungroup-by-ref-type:before { content: \"\\\\eb98\" }\n.codicon-account:before { content: \"\\\\eb99\" }\n.codicon-bell-dot:before { content: \"\\\\eb9a\" }\n.codicon-debug-console:before { content: \"\\\\eb9b\" }\n.codicon-library:before { content: \"\\\\eb9c\" }\n.codicon-output:before { content: \"\\\\eb9d\" }\n.codicon-run-all:before { content: \"\\\\eb9e\" }\n.codicon-sync-ignored:before { content: \"\\\\eb9f\" }\n.codicon-pinned:before { content: \"\\\\eba0\" }\n.codicon-github-inverted:before { content: \"\\\\eba1\" }\n.codicon-server-process:before { content: \"\\\\eba2\" }\n.codicon-server-environment:before { content: \"\\\\eba3\" }\n.codicon-pass:before { content: \"\\\\eba4\" }\n.codicon-issue-closed:before { content: \"\\\\eba4\" }\n.codicon-stop-circle:before { content: \"\\\\eba5\" }\n.codicon-play-circle:before { content: \"\\\\eba6\" }\n.codicon-record:before { content: \"\\\\eba7\" }\n.codicon-debug-alt-small:before { content: \"\\\\eba8\" }\n.codicon-vm-connect:before { content: \"\\\\eba9\" }\n.codicon-cloud:before { content: \"\\\\ebaa\" }\n.codicon-merge:before { content: \"\\\\ebab\" }\n.codicon-export:before { content: \"\\\\ebac\" }\n.codicon-graph-left:before { content: \"\\\\ebad\" }\n.codicon-magnet:before { content: \"\\\\ebae\" }\n.codicon-notebook:before { content: \"\\\\ebaf\" }\n.codicon-redo:before { content: \"\\\\ebb0\" }\n.codicon-check-all:before { content: \"\\\\ebb1\" }\n.codicon-pinned-dirty:before { content: \"\\\\ebb2\" }\n.codicon-pass-filled:before { content: \"\\\\ebb3\" }\n.codicon-circle-large-filled:before { content: \"\\\\ebb4\" }\n.codicon-circle-large-outline:before { content: \"\\\\ebb5\" }\n.codicon-combine:before { content: \"\\\\ebb6\" }\n.codicon-gather:before { content: \"\\\\ebb6\" }\n.codicon-table:before { content: \"\\\\ebb7\" }\n.codicon-variable-group:before { content: \"\\\\ebb8\" }\n.codicon-type-hierarchy:before { content: \"\\\\ebb9\" }\n.codicon-type-hierarchy-sub:before { content: \"\\\\ebba\" }\n.codicon-type-hierarchy-super:before { content: \"\\\\ebbb\" }\n.codicon-git-pull-request-create:before { content: \"\\\\ebbc\" }\n.codicon-run-above:before { content: \"\\\\ebbd\" }\n.codicon-run-below:before { content: \"\\\\ebbe\" }\n.codicon-notebook-template:before { content: \"\\\\ebbf\" }\n.codicon-debug-rerun:before { content: \"\\\\ebc0\" }\n.codicon-workspace-trusted:before { content: \"\\\\ebc1\" }\n.codicon-workspace-untrusted:before { content: \"\\\\ebc2\" }\n.codicon-workspace-unknown:before { content: \"\\\\ebc3\" }\n.codicon-terminal-cmd:before { content: \"\\\\ebc4\" }\n.codicon-terminal-debian:before { content: \"\\\\ebc5\" }\n.codicon-terminal-linux:before { content: \"\\\\ebc6\" }\n.codicon-terminal-powershell:before { content: \"\\\\ebc7\" }\n.codicon-terminal-tmux:before { content: \"\\\\ebc8\" }\n.codicon-terminal-ubuntu:before { content: \"\\\\ebc9\" }\n.codicon-terminal-bash:before { content: \"\\\\ebca\" }\n.codicon-arrow-swap:before { content: \"\\\\ebcb\" }\n.codicon-copy:before { content: \"\\\\ebcc\" }\n.codicon-person-add:before { content: \"\\\\ebcd\" }\n.codicon-filter-filled:before { content: \"\\\\ebce\" }\n.codicon-wand:before { content: \"\\\\ebcf\" }\n.codicon-debug-line-by-line:before { content: \"\\\\ebd0\" }\n.codicon-inspect:before { content: \"\\\\ebd1\" }\n.codicon-layers:before { content: \"\\\\ebd2\" }\n.codicon-layers-dot:before { content: \"\\\\ebd3\" }\n.codicon-layers-active:before { content: \"\\\\ebd4\" }\n.codicon-compass:before { content: \"\\\\ebd5\" }\n.codicon-compass-dot:before { content: \"\\\\ebd6\" }\n.codicon-compass-active:before { content: \"\\\\ebd7\" }\n.codicon-azure:before { content: \"\\\\ebd8\" }\n.codicon-issue-draft:before { content: \"\\\\ebd9\" }\n.codicon-git-pull-request-closed:before { content: \"\\\\ebda\" }\n.codicon-git-pull-request-draft:before { content: \"\\\\ebdb\" }\n.codicon-debug-all:before { content: \"\\\\ebdc\" }\n.codicon-debug-coverage:before { content: \"\\\\ebdd\" }\n.codicon-run-errors:before { content: \"\\\\ebde\" }\n.codicon-folder-library:before { content: \"\\\\ebdf\" }\n.codicon-debug-continue-small:before { content: \"\\\\ebe0\" }\n.codicon-beaker-stop:before { content: \"\\\\ebe1\" }\n.codicon-graph-line:before { content: \"\\\\ebe2\" }\n.codicon-graph-scatter:before { content: \"\\\\ebe3\" }\n.codicon-pie-chart:before { content: \"\\\\ebe4\" }\n.codicon-bracket:before { content: \"\\\\eb0f\" }\n.codicon-bracket-dot:before { content: \"\\\\ebe5\" }\n.codicon-bracket-error:before { content: \"\\\\ebe6\" }\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/@vscode/codicons/dist/codicon.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"/*---------------------------------------------------------------------------------------------\\n *  Copyright (c) Microsoft Corporation. All rights reserved.\\n *  Licensed under the MIT License. See License.txt in the project root for license information.\\n *--------------------------------------------------------------------------------------------*/\\n\\n@font-face {\\n\\tfont-family: \\\"codicon\\\";\\n\\tsrc: url(\\\"./codicon.ttf?7cea6a135a6c0359d1f6d18e6b2c5c42\\\") format(\\\"truetype\\\");\\n}\\n\\n.codicon[class*='codicon-'] {\\n\\tfont: normal normal normal 16px/1 codicon;\\n\\tdisplay: block;\\n\\ttext-decoration: none;\\n\\ttext-rendering: auto;\\n\\ttext-align: center;\\n\\t-webkit-font-smoothing: antialiased;\\n\\t-moz-osx-font-smoothing: grayscale;\\n\\tuser-select: none;\\n\\t-webkit-user-select: none;\\n\\t-ms-user-select: none;\\n}\\n\\n\\n.codicon-add:before { content: \\\"\\\\ea60\\\" }\\n.codicon-plus:before { content: \\\"\\\\ea60\\\" }\\n.codicon-gist-new:before { content: \\\"\\\\ea60\\\" }\\n.codicon-repo-create:before { content: \\\"\\\\ea60\\\" }\\n.codicon-lightbulb:before { content: \\\"\\\\ea61\\\" }\\n.codicon-light-bulb:before { content: \\\"\\\\ea61\\\" }\\n.codicon-repo:before { content: \\\"\\\\ea62\\\" }\\n.codicon-repo-delete:before { content: \\\"\\\\ea62\\\" }\\n.codicon-gist-fork:before { content: \\\"\\\\ea63\\\" }\\n.codicon-repo-forked:before { content: \\\"\\\\ea63\\\" }\\n.codicon-git-pull-request:before { content: \\\"\\\\ea64\\\" }\\n.codicon-git-pull-request-abandoned:before { content: \\\"\\\\ea64\\\" }\\n.codicon-record-keys:before { content: \\\"\\\\ea65\\\" }\\n.codicon-keyboard:before { content: \\\"\\\\ea65\\\" }\\n.codicon-tag:before { content: \\\"\\\\ea66\\\" }\\n.codicon-tag-add:before { content: \\\"\\\\ea66\\\" }\\n.codicon-tag-remove:before { content: \\\"\\\\ea66\\\" }\\n.codicon-person:before { content: \\\"\\\\ea67\\\" }\\n.codicon-person-follow:before { content: \\\"\\\\ea67\\\" }\\n.codicon-person-outline:before { content: \\\"\\\\ea67\\\" }\\n.codicon-person-filled:before { content: \\\"\\\\ea67\\\" }\\n.codicon-git-branch:before { content: \\\"\\\\ea68\\\" }\\n.codicon-git-branch-create:before { content: \\\"\\\\ea68\\\" }\\n.codicon-git-branch-delete:before { content: \\\"\\\\ea68\\\" }\\n.codicon-source-control:before { content: \\\"\\\\ea68\\\" }\\n.codicon-mirror:before { content: \\\"\\\\ea69\\\" }\\n.codicon-mirror-public:before { content: \\\"\\\\ea69\\\" }\\n.codicon-star:before { content: \\\"\\\\ea6a\\\" }\\n.codicon-star-add:before { content: \\\"\\\\ea6a\\\" }\\n.codicon-star-delete:before { content: \\\"\\\\ea6a\\\" }\\n.codicon-star-empty:before { content: \\\"\\\\ea6a\\\" }\\n.codicon-comment:before { content: \\\"\\\\ea6b\\\" }\\n.codicon-comment-add:before { content: \\\"\\\\ea6b\\\" }\\n.codicon-alert:before { content: \\\"\\\\ea6c\\\" }\\n.codicon-warning:before { content: \\\"\\\\ea6c\\\" }\\n.codicon-search:before { content: \\\"\\\\ea6d\\\" }\\n.codicon-search-save:before { content: \\\"\\\\ea6d\\\" }\\n.codicon-log-out:before { content: \\\"\\\\ea6e\\\" }\\n.codicon-sign-out:before { content: \\\"\\\\ea6e\\\" }\\n.codicon-log-in:before { content: \\\"\\\\ea6f\\\" }\\n.codicon-sign-in:before { content: \\\"\\\\ea6f\\\" }\\n.codicon-eye:before { content: \\\"\\\\ea70\\\" }\\n.codicon-eye-unwatch:before { content: \\\"\\\\ea70\\\" }\\n.codicon-eye-watch:before { content: \\\"\\\\ea70\\\" }\\n.codicon-circle-filled:before { content: \\\"\\\\ea71\\\" }\\n.codicon-primitive-dot:before { content: \\\"\\\\ea71\\\" }\\n.codicon-close-dirty:before { content: \\\"\\\\ea71\\\" }\\n.codicon-debug-breakpoint:before { content: \\\"\\\\ea71\\\" }\\n.codicon-debug-breakpoint-disabled:before { content: \\\"\\\\ea71\\\" }\\n.codicon-debug-hint:before { content: \\\"\\\\ea71\\\" }\\n.codicon-primitive-square:before { content: \\\"\\\\ea72\\\" }\\n.codicon-edit:before { content: \\\"\\\\ea73\\\" }\\n.codicon-pencil:before { content: \\\"\\\\ea73\\\" }\\n.codicon-info:before { content: \\\"\\\\ea74\\\" }\\n.codicon-issue-opened:before { content: \\\"\\\\ea74\\\" }\\n.codicon-gist-private:before { content: \\\"\\\\ea75\\\" }\\n.codicon-git-fork-private:before { content: \\\"\\\\ea75\\\" }\\n.codicon-lock:before { content: \\\"\\\\ea75\\\" }\\n.codicon-mirror-private:before { content: \\\"\\\\ea75\\\" }\\n.codicon-close:before { content: \\\"\\\\ea76\\\" }\\n.codicon-remove-close:before { content: \\\"\\\\ea76\\\" }\\n.codicon-x:before { content: \\\"\\\\ea76\\\" }\\n.codicon-repo-sync:before { content: \\\"\\\\ea77\\\" }\\n.codicon-sync:before { content: \\\"\\\\ea77\\\" }\\n.codicon-clone:before { content: \\\"\\\\ea78\\\" }\\n.codicon-desktop-download:before { content: \\\"\\\\ea78\\\" }\\n.codicon-beaker:before { content: \\\"\\\\ea79\\\" }\\n.codicon-microscope:before { content: \\\"\\\\ea79\\\" }\\n.codicon-vm:before { content: \\\"\\\\ea7a\\\" }\\n.codicon-device-desktop:before { content: \\\"\\\\ea7a\\\" }\\n.codicon-file:before { content: \\\"\\\\ea7b\\\" }\\n.codicon-file-text:before { content: \\\"\\\\ea7b\\\" }\\n.codicon-more:before { content: \\\"\\\\ea7c\\\" }\\n.codicon-ellipsis:before { content: \\\"\\\\ea7c\\\" }\\n.codicon-kebab-horizontal:before { content: \\\"\\\\ea7c\\\" }\\n.codicon-mail-reply:before { content: \\\"\\\\ea7d\\\" }\\n.codicon-reply:before { content: \\\"\\\\ea7d\\\" }\\n.codicon-organization:before { content: \\\"\\\\ea7e\\\" }\\n.codicon-organization-filled:before { content: \\\"\\\\ea7e\\\" }\\n.codicon-organization-outline:before { content: \\\"\\\\ea7e\\\" }\\n.codicon-new-file:before { content: \\\"\\\\ea7f\\\" }\\n.codicon-file-add:before { content: \\\"\\\\ea7f\\\" }\\n.codicon-new-folder:before { content: \\\"\\\\ea80\\\" }\\n.codicon-file-directory-create:before { content: \\\"\\\\ea80\\\" }\\n.codicon-trash:before { content: \\\"\\\\ea81\\\" }\\n.codicon-trashcan:before { content: \\\"\\\\ea81\\\" }\\n.codicon-history:before { content: \\\"\\\\ea82\\\" }\\n.codicon-clock:before { content: \\\"\\\\ea82\\\" }\\n.codicon-folder:before { content: \\\"\\\\ea83\\\" }\\n.codicon-file-directory:before { content: \\\"\\\\ea83\\\" }\\n.codicon-symbol-folder:before { content: \\\"\\\\ea83\\\" }\\n.codicon-logo-github:before { content: \\\"\\\\ea84\\\" }\\n.codicon-mark-github:before { content: \\\"\\\\ea84\\\" }\\n.codicon-github:before { content: \\\"\\\\ea84\\\" }\\n.codicon-terminal:before { content: \\\"\\\\ea85\\\" }\\n.codicon-console:before { content: \\\"\\\\ea85\\\" }\\n.codicon-repl:before { content: \\\"\\\\ea85\\\" }\\n.codicon-zap:before { content: \\\"\\\\ea86\\\" }\\n.codicon-symbol-event:before { content: \\\"\\\\ea86\\\" }\\n.codicon-error:before { content: \\\"\\\\ea87\\\" }\\n.codicon-stop:before { content: \\\"\\\\ea87\\\" }\\n.codicon-variable:before { content: \\\"\\\\ea88\\\" }\\n.codicon-symbol-variable:before { content: \\\"\\\\ea88\\\" }\\n.codicon-array:before { content: \\\"\\\\ea8a\\\" }\\n.codicon-symbol-array:before { content: \\\"\\\\ea8a\\\" }\\n.codicon-symbol-module:before { content: \\\"\\\\ea8b\\\" }\\n.codicon-symbol-package:before { content: \\\"\\\\ea8b\\\" }\\n.codicon-symbol-namespace:before { content: \\\"\\\\ea8b\\\" }\\n.codicon-symbol-object:before { content: \\\"\\\\ea8b\\\" }\\n.codicon-symbol-method:before { content: \\\"\\\\ea8c\\\" }\\n.codicon-symbol-function:before { content: \\\"\\\\ea8c\\\" }\\n.codicon-symbol-constructor:before { content: \\\"\\\\ea8c\\\" }\\n.codicon-symbol-boolean:before { content: \\\"\\\\ea8f\\\" }\\n.codicon-symbol-null:before { content: \\\"\\\\ea8f\\\" }\\n.codicon-symbol-numeric:before { content: \\\"\\\\ea90\\\" }\\n.codicon-symbol-number:before { content: \\\"\\\\ea90\\\" }\\n.codicon-symbol-structure:before { content: \\\"\\\\ea91\\\" }\\n.codicon-symbol-struct:before { content: \\\"\\\\ea91\\\" }\\n.codicon-symbol-parameter:before { content: \\\"\\\\ea92\\\" }\\n.codicon-symbol-type-parameter:before { content: \\\"\\\\ea92\\\" }\\n.codicon-symbol-key:before { content: \\\"\\\\ea93\\\" }\\n.codicon-symbol-text:before { content: \\\"\\\\ea93\\\" }\\n.codicon-symbol-reference:before { content: \\\"\\\\ea94\\\" }\\n.codicon-go-to-file:before { content: \\\"\\\\ea94\\\" }\\n.codicon-symbol-enum:before { content: \\\"\\\\ea95\\\" }\\n.codicon-symbol-value:before { content: \\\"\\\\ea95\\\" }\\n.codicon-symbol-ruler:before { content: \\\"\\\\ea96\\\" }\\n.codicon-symbol-unit:before { content: \\\"\\\\ea96\\\" }\\n.codicon-activate-breakpoints:before { content: \\\"\\\\ea97\\\" }\\n.codicon-archive:before { content: \\\"\\\\ea98\\\" }\\n.codicon-arrow-both:before { content: \\\"\\\\ea99\\\" }\\n.codicon-arrow-down:before { content: \\\"\\\\ea9a\\\" }\\n.codicon-arrow-left:before { content: \\\"\\\\ea9b\\\" }\\n.codicon-arrow-right:before { content: \\\"\\\\ea9c\\\" }\\n.codicon-arrow-small-down:before { content: \\\"\\\\ea9d\\\" }\\n.codicon-arrow-small-left:before { content: \\\"\\\\ea9e\\\" }\\n.codicon-arrow-small-right:before { content: \\\"\\\\ea9f\\\" }\\n.codicon-arrow-small-up:before { content: \\\"\\\\eaa0\\\" }\\n.codicon-arrow-up:before { content: \\\"\\\\eaa1\\\" }\\n.codicon-bell:before { content: \\\"\\\\eaa2\\\" }\\n.codicon-bold:before { content: \\\"\\\\eaa3\\\" }\\n.codicon-book:before { content: \\\"\\\\eaa4\\\" }\\n.codicon-bookmark:before { content: \\\"\\\\eaa5\\\" }\\n.codicon-debug-breakpoint-conditional-unverified:before { content: \\\"\\\\eaa6\\\" }\\n.codicon-debug-breakpoint-conditional:before { content: \\\"\\\\eaa7\\\" }\\n.codicon-debug-breakpoint-conditional-disabled:before { content: \\\"\\\\eaa7\\\" }\\n.codicon-debug-breakpoint-data-unverified:before { content: \\\"\\\\eaa8\\\" }\\n.codicon-debug-breakpoint-data:before { content: \\\"\\\\eaa9\\\" }\\n.codicon-debug-breakpoint-data-disabled:before { content: \\\"\\\\eaa9\\\" }\\n.codicon-debug-breakpoint-log-unverified:before { content: \\\"\\\\eaaa\\\" }\\n.codicon-debug-breakpoint-log:before { content: \\\"\\\\eaab\\\" }\\n.codicon-debug-breakpoint-log-disabled:before { content: \\\"\\\\eaab\\\" }\\n.codicon-briefcase:before { content: \\\"\\\\eaac\\\" }\\n.codicon-broadcast:before { content: \\\"\\\\eaad\\\" }\\n.codicon-browser:before { content: \\\"\\\\eaae\\\" }\\n.codicon-bug:before { content: \\\"\\\\eaaf\\\" }\\n.codicon-calendar:before { content: \\\"\\\\eab0\\\" }\\n.codicon-case-sensitive:before { content: \\\"\\\\eab1\\\" }\\n.codicon-check:before { content: \\\"\\\\eab2\\\" }\\n.codicon-checklist:before { content: \\\"\\\\eab3\\\" }\\n.codicon-chevron-down:before { content: \\\"\\\\eab4\\\" }\\n.codicon-chevron-left:before { content: \\\"\\\\eab5\\\" }\\n.codicon-chevron-right:before { content: \\\"\\\\eab6\\\" }\\n.codicon-chevron-up:before { content: \\\"\\\\eab7\\\" }\\n.codicon-chrome-close:before { content: \\\"\\\\eab8\\\" }\\n.codicon-chrome-maximize:before { content: \\\"\\\\eab9\\\" }\\n.codicon-chrome-minimize:before { content: \\\"\\\\eaba\\\" }\\n.codicon-chrome-restore:before { content: \\\"\\\\eabb\\\" }\\n.codicon-circle-outline:before { content: \\\"\\\\eabc\\\" }\\n.codicon-debug-breakpoint-unverified:before { content: \\\"\\\\eabc\\\" }\\n.codicon-circle-slash:before { content: \\\"\\\\eabd\\\" }\\n.codicon-circuit-board:before { content: \\\"\\\\eabe\\\" }\\n.codicon-clear-all:before { content: \\\"\\\\eabf\\\" }\\n.codicon-clippy:before { content: \\\"\\\\eac0\\\" }\\n.codicon-close-all:before { content: \\\"\\\\eac1\\\" }\\n.codicon-cloud-download:before { content: \\\"\\\\eac2\\\" }\\n.codicon-cloud-upload:before { content: \\\"\\\\eac3\\\" }\\n.codicon-code:before { content: \\\"\\\\eac4\\\" }\\n.codicon-collapse-all:before { content: \\\"\\\\eac5\\\" }\\n.codicon-color-mode:before { content: \\\"\\\\eac6\\\" }\\n.codicon-comment-discussion:before { content: \\\"\\\\eac7\\\" }\\n.codicon-credit-card:before { content: \\\"\\\\eac9\\\" }\\n.codicon-dash:before { content: \\\"\\\\eacc\\\" }\\n.codicon-dashboard:before { content: \\\"\\\\eacd\\\" }\\n.codicon-database:before { content: \\\"\\\\eace\\\" }\\n.codicon-debug-continue:before { content: \\\"\\\\eacf\\\" }\\n.codicon-debug-disconnect:before { content: \\\"\\\\ead0\\\" }\\n.codicon-debug-pause:before { content: \\\"\\\\ead1\\\" }\\n.codicon-debug-restart:before { content: \\\"\\\\ead2\\\" }\\n.codicon-debug-start:before { content: \\\"\\\\ead3\\\" }\\n.codicon-debug-step-into:before { content: \\\"\\\\ead4\\\" }\\n.codicon-debug-step-out:before { content: \\\"\\\\ead5\\\" }\\n.codicon-debug-step-over:before { content: \\\"\\\\ead6\\\" }\\n.codicon-debug-stop:before { content: \\\"\\\\ead7\\\" }\\n.codicon-debug:before { content: \\\"\\\\ead8\\\" }\\n.codicon-device-camera-video:before { content: \\\"\\\\ead9\\\" }\\n.codicon-device-camera:before { content: \\\"\\\\eada\\\" }\\n.codicon-device-mobile:before { content: \\\"\\\\eadb\\\" }\\n.codicon-diff-added:before { content: \\\"\\\\eadc\\\" }\\n.codicon-diff-ignored:before { content: \\\"\\\\eadd\\\" }\\n.codicon-diff-modified:before { content: \\\"\\\\eade\\\" }\\n.codicon-diff-removed:before { content: \\\"\\\\eadf\\\" }\\n.codicon-diff-renamed:before { content: \\\"\\\\eae0\\\" }\\n.codicon-diff:before { content: \\\"\\\\eae1\\\" }\\n.codicon-discard:before { content: \\\"\\\\eae2\\\" }\\n.codicon-editor-layout:before { content: \\\"\\\\eae3\\\" }\\n.codicon-empty-window:before { content: \\\"\\\\eae4\\\" }\\n.codicon-exclude:before { content: \\\"\\\\eae5\\\" }\\n.codicon-extensions:before { content: \\\"\\\\eae6\\\" }\\n.codicon-eye-closed:before { content: \\\"\\\\eae7\\\" }\\n.codicon-file-binary:before { content: \\\"\\\\eae8\\\" }\\n.codicon-file-code:before { content: \\\"\\\\eae9\\\" }\\n.codicon-file-media:before { content: \\\"\\\\eaea\\\" }\\n.codicon-file-pdf:before { content: \\\"\\\\eaeb\\\" }\\n.codicon-file-submodule:before { content: \\\"\\\\eaec\\\" }\\n.codicon-file-symlink-directory:before { content: \\\"\\\\eaed\\\" }\\n.codicon-file-symlink-file:before { content: \\\"\\\\eaee\\\" }\\n.codicon-file-zip:before { content: \\\"\\\\eaef\\\" }\\n.codicon-files:before { content: \\\"\\\\eaf0\\\" }\\n.codicon-filter:before { content: \\\"\\\\eaf1\\\" }\\n.codicon-flame:before { content: \\\"\\\\eaf2\\\" }\\n.codicon-fold-down:before { content: \\\"\\\\eaf3\\\" }\\n.codicon-fold-up:before { content: \\\"\\\\eaf4\\\" }\\n.codicon-fold:before { content: \\\"\\\\eaf5\\\" }\\n.codicon-folder-active:before { content: \\\"\\\\eaf6\\\" }\\n.codicon-folder-opened:before { content: \\\"\\\\eaf7\\\" }\\n.codicon-gear:before { content: \\\"\\\\eaf8\\\" }\\n.codicon-gift:before { content: \\\"\\\\eaf9\\\" }\\n.codicon-gist-secret:before { content: \\\"\\\\eafa\\\" }\\n.codicon-gist:before { content: \\\"\\\\eafb\\\" }\\n.codicon-git-commit:before { content: \\\"\\\\eafc\\\" }\\n.codicon-git-compare:before { content: \\\"\\\\eafd\\\" }\\n.codicon-compare-changes:before { content: \\\"\\\\eafd\\\" }\\n.codicon-git-merge:before { content: \\\"\\\\eafe\\\" }\\n.codicon-github-action:before { content: \\\"\\\\eaff\\\" }\\n.codicon-github-alt:before { content: \\\"\\\\eb00\\\" }\\n.codicon-globe:before { content: \\\"\\\\eb01\\\" }\\n.codicon-grabber:before { content: \\\"\\\\eb02\\\" }\\n.codicon-graph:before { content: \\\"\\\\eb03\\\" }\\n.codicon-gripper:before { content: \\\"\\\\eb04\\\" }\\n.codicon-heart:before { content: \\\"\\\\eb05\\\" }\\n.codicon-home:before { content: \\\"\\\\eb06\\\" }\\n.codicon-horizontal-rule:before { content: \\\"\\\\eb07\\\" }\\n.codicon-hubot:before { content: \\\"\\\\eb08\\\" }\\n.codicon-inbox:before { content: \\\"\\\\eb09\\\" }\\n.codicon-issue-reopened:before { content: \\\"\\\\eb0b\\\" }\\n.codicon-issues:before { content: \\\"\\\\eb0c\\\" }\\n.codicon-italic:before { content: \\\"\\\\eb0d\\\" }\\n.codicon-jersey:before { content: \\\"\\\\eb0e\\\" }\\n.codicon-json:before { content: \\\"\\\\eb0f\\\" }\\n.codicon-kebab-vertical:before { content: \\\"\\\\eb10\\\" }\\n.codicon-key:before { content: \\\"\\\\eb11\\\" }\\n.codicon-law:before { content: \\\"\\\\eb12\\\" }\\n.codicon-lightbulb-autofix:before { content: \\\"\\\\eb13\\\" }\\n.codicon-link-external:before { content: \\\"\\\\eb14\\\" }\\n.codicon-link:before { content: \\\"\\\\eb15\\\" }\\n.codicon-list-ordered:before { content: \\\"\\\\eb16\\\" }\\n.codicon-list-unordered:before { content: \\\"\\\\eb17\\\" }\\n.codicon-live-share:before { content: \\\"\\\\eb18\\\" }\\n.codicon-loading:before { content: \\\"\\\\eb19\\\" }\\n.codicon-location:before { content: \\\"\\\\eb1a\\\" }\\n.codicon-mail-read:before { content: \\\"\\\\eb1b\\\" }\\n.codicon-mail:before { content: \\\"\\\\eb1c\\\" }\\n.codicon-markdown:before { content: \\\"\\\\eb1d\\\" }\\n.codicon-megaphone:before { content: \\\"\\\\eb1e\\\" }\\n.codicon-mention:before { content: \\\"\\\\eb1f\\\" }\\n.codicon-milestone:before { content: \\\"\\\\eb20\\\" }\\n.codicon-mortar-board:before { content: \\\"\\\\eb21\\\" }\\n.codicon-move:before { content: \\\"\\\\eb22\\\" }\\n.codicon-multiple-windows:before { content: \\\"\\\\eb23\\\" }\\n.codicon-mute:before { content: \\\"\\\\eb24\\\" }\\n.codicon-no-newline:before { content: \\\"\\\\eb25\\\" }\\n.codicon-note:before { content: \\\"\\\\eb26\\\" }\\n.codicon-octoface:before { content: \\\"\\\\eb27\\\" }\\n.codicon-open-preview:before { content: \\\"\\\\eb28\\\" }\\n.codicon-package:before { content: \\\"\\\\eb29\\\" }\\n.codicon-paintcan:before { content: \\\"\\\\eb2a\\\" }\\n.codicon-pin:before { content: \\\"\\\\eb2b\\\" }\\n.codicon-play:before { content: \\\"\\\\eb2c\\\" }\\n.codicon-run:before { content: \\\"\\\\eb2c\\\" }\\n.codicon-plug:before { content: \\\"\\\\eb2d\\\" }\\n.codicon-preserve-case:before { content: \\\"\\\\eb2e\\\" }\\n.codicon-preview:before { content: \\\"\\\\eb2f\\\" }\\n.codicon-project:before { content: \\\"\\\\eb30\\\" }\\n.codicon-pulse:before { content: \\\"\\\\eb31\\\" }\\n.codicon-question:before { content: \\\"\\\\eb32\\\" }\\n.codicon-quote:before { content: \\\"\\\\eb33\\\" }\\n.codicon-radio-tower:before { content: \\\"\\\\eb34\\\" }\\n.codicon-reactions:before { content: \\\"\\\\eb35\\\" }\\n.codicon-references:before { content: \\\"\\\\eb36\\\" }\\n.codicon-refresh:before { content: \\\"\\\\eb37\\\" }\\n.codicon-regex:before { content: \\\"\\\\eb38\\\" }\\n.codicon-remote-explorer:before { content: \\\"\\\\eb39\\\" }\\n.codicon-remote:before { content: \\\"\\\\eb3a\\\" }\\n.codicon-remove:before { content: \\\"\\\\eb3b\\\" }\\n.codicon-replace-all:before { content: \\\"\\\\eb3c\\\" }\\n.codicon-replace:before { content: \\\"\\\\eb3d\\\" }\\n.codicon-repo-clone:before { content: \\\"\\\\eb3e\\\" }\\n.codicon-repo-force-push:before { content: \\\"\\\\eb3f\\\" }\\n.codicon-repo-pull:before { content: \\\"\\\\eb40\\\" }\\n.codicon-repo-push:before { content: \\\"\\\\eb41\\\" }\\n.codicon-report:before { content: \\\"\\\\eb42\\\" }\\n.codicon-request-changes:before { content: \\\"\\\\eb43\\\" }\\n.codicon-rocket:before { content: \\\"\\\\eb44\\\" }\\n.codicon-root-folder-opened:before { content: \\\"\\\\eb45\\\" }\\n.codicon-root-folder:before { content: \\\"\\\\eb46\\\" }\\n.codicon-rss:before { content: \\\"\\\\eb47\\\" }\\n.codicon-ruby:before { content: \\\"\\\\eb48\\\" }\\n.codicon-save-all:before { content: \\\"\\\\eb49\\\" }\\n.codicon-save-as:before { content: \\\"\\\\eb4a\\\" }\\n.codicon-save:before { content: \\\"\\\\eb4b\\\" }\\n.codicon-screen-full:before { content: \\\"\\\\eb4c\\\" }\\n.codicon-screen-normal:before { content: \\\"\\\\eb4d\\\" }\\n.codicon-search-stop:before { content: \\\"\\\\eb4e\\\" }\\n.codicon-server:before { content: \\\"\\\\eb50\\\" }\\n.codicon-settings-gear:before { content: \\\"\\\\eb51\\\" }\\n.codicon-settings:before { content: \\\"\\\\eb52\\\" }\\n.codicon-shield:before { content: \\\"\\\\eb53\\\" }\\n.codicon-smiley:before { content: \\\"\\\\eb54\\\" }\\n.codicon-sort-precedence:before { content: \\\"\\\\eb55\\\" }\\n.codicon-split-horizontal:before { content: \\\"\\\\eb56\\\" }\\n.codicon-split-vertical:before { content: \\\"\\\\eb57\\\" }\\n.codicon-squirrel:before { content: \\\"\\\\eb58\\\" }\\n.codicon-star-full:before { content: \\\"\\\\eb59\\\" }\\n.codicon-star-half:before { content: \\\"\\\\eb5a\\\" }\\n.codicon-symbol-class:before { content: \\\"\\\\eb5b\\\" }\\n.codicon-symbol-color:before { content: \\\"\\\\eb5c\\\" }\\n.codicon-symbol-constant:before { content: \\\"\\\\eb5d\\\" }\\n.codicon-symbol-enum-member:before { content: \\\"\\\\eb5e\\\" }\\n.codicon-symbol-field:before { content: \\\"\\\\eb5f\\\" }\\n.codicon-symbol-file:before { content: \\\"\\\\eb60\\\" }\\n.codicon-symbol-interface:before { content: \\\"\\\\eb61\\\" }\\n.codicon-symbol-keyword:before { content: \\\"\\\\eb62\\\" }\\n.codicon-symbol-misc:before { content: \\\"\\\\eb63\\\" }\\n.codicon-symbol-operator:before { content: \\\"\\\\eb64\\\" }\\n.codicon-symbol-property:before { content: \\\"\\\\eb65\\\" }\\n.codicon-wrench:before { content: \\\"\\\\eb65\\\" }\\n.codicon-wrench-subaction:before { content: \\\"\\\\eb65\\\" }\\n.codicon-symbol-snippet:before { content: \\\"\\\\eb66\\\" }\\n.codicon-tasklist:before { content: \\\"\\\\eb67\\\" }\\n.codicon-telescope:before { content: \\\"\\\\eb68\\\" }\\n.codicon-text-size:before { content: \\\"\\\\eb69\\\" }\\n.codicon-three-bars:before { content: \\\"\\\\eb6a\\\" }\\n.codicon-thumbsdown:before { content: \\\"\\\\eb6b\\\" }\\n.codicon-thumbsup:before { content: \\\"\\\\eb6c\\\" }\\n.codicon-tools:before { content: \\\"\\\\eb6d\\\" }\\n.codicon-triangle-down:before { content: \\\"\\\\eb6e\\\" }\\n.codicon-triangle-left:before { content: \\\"\\\\eb6f\\\" }\\n.codicon-triangle-right:before { content: \\\"\\\\eb70\\\" }\\n.codicon-triangle-up:before { content: \\\"\\\\eb71\\\" }\\n.codicon-twitter:before { content: \\\"\\\\eb72\\\" }\\n.codicon-unfold:before { content: \\\"\\\\eb73\\\" }\\n.codicon-unlock:before { content: \\\"\\\\eb74\\\" }\\n.codicon-unmute:before { content: \\\"\\\\eb75\\\" }\\n.codicon-unverified:before { content: \\\"\\\\eb76\\\" }\\n.codicon-verified:before { content: \\\"\\\\eb77\\\" }\\n.codicon-versions:before { content: \\\"\\\\eb78\\\" }\\n.codicon-vm-active:before { content: \\\"\\\\eb79\\\" }\\n.codicon-vm-outline:before { content: \\\"\\\\eb7a\\\" }\\n.codicon-vm-running:before { content: \\\"\\\\eb7b\\\" }\\n.codicon-watch:before { content: \\\"\\\\eb7c\\\" }\\n.codicon-whitespace:before { content: \\\"\\\\eb7d\\\" }\\n.codicon-whole-word:before { content: \\\"\\\\eb7e\\\" }\\n.codicon-window:before { content: \\\"\\\\eb7f\\\" }\\n.codicon-word-wrap:before { content: \\\"\\\\eb80\\\" }\\n.codicon-zoom-in:before { content: \\\"\\\\eb81\\\" }\\n.codicon-zoom-out:before { content: \\\"\\\\eb82\\\" }\\n.codicon-list-filter:before { content: \\\"\\\\eb83\\\" }\\n.codicon-list-flat:before { content: \\\"\\\\eb84\\\" }\\n.codicon-list-selection:before { content: \\\"\\\\eb85\\\" }\\n.codicon-selection:before { content: \\\"\\\\eb85\\\" }\\n.codicon-list-tree:before { content: \\\"\\\\eb86\\\" }\\n.codicon-debug-breakpoint-function-unverified:before { content: \\\"\\\\eb87\\\" }\\n.codicon-debug-breakpoint-function:before { content: \\\"\\\\eb88\\\" }\\n.codicon-debug-breakpoint-function-disabled:before { content: \\\"\\\\eb88\\\" }\\n.codicon-debug-stackframe-active:before { content: \\\"\\\\eb89\\\" }\\n.codicon-debug-stackframe-dot:before { content: \\\"\\\\eb8a\\\" }\\n.codicon-debug-stackframe:before { content: \\\"\\\\eb8b\\\" }\\n.codicon-debug-stackframe-focused:before { content: \\\"\\\\eb8b\\\" }\\n.codicon-debug-breakpoint-unsupported:before { content: \\\"\\\\eb8c\\\" }\\n.codicon-symbol-string:before { content: \\\"\\\\eb8d\\\" }\\n.codicon-debug-reverse-continue:before { content: \\\"\\\\eb8e\\\" }\\n.codicon-debug-step-back:before { content: \\\"\\\\eb8f\\\" }\\n.codicon-debug-restart-frame:before { content: \\\"\\\\eb90\\\" }\\n.codicon-debug-alt:before { content: \\\"\\\\eb91\\\" }\\n.codicon-call-incoming:before { content: \\\"\\\\eb92\\\" }\\n.codicon-call-outgoing:before { content: \\\"\\\\eb93\\\" }\\n.codicon-menu:before { content: \\\"\\\\eb94\\\" }\\n.codicon-expand-all:before { content: \\\"\\\\eb95\\\" }\\n.codicon-feedback:before { content: \\\"\\\\eb96\\\" }\\n.codicon-group-by-ref-type:before { content: \\\"\\\\eb97\\\" }\\n.codicon-ungroup-by-ref-type:before { content: \\\"\\\\eb98\\\" }\\n.codicon-account:before { content: \\\"\\\\eb99\\\" }\\n.codicon-bell-dot:before { content: \\\"\\\\eb9a\\\" }\\n.codicon-debug-console:before { content: \\\"\\\\eb9b\\\" }\\n.codicon-library:before { content: \\\"\\\\eb9c\\\" }\\n.codicon-output:before { content: \\\"\\\\eb9d\\\" }\\n.codicon-run-all:before { content: \\\"\\\\eb9e\\\" }\\n.codicon-sync-ignored:before { content: \\\"\\\\eb9f\\\" }\\n.codicon-pinned:before { content: \\\"\\\\eba0\\\" }\\n.codicon-github-inverted:before { content: \\\"\\\\eba1\\\" }\\n.codicon-server-process:before { content: \\\"\\\\eba2\\\" }\\n.codicon-server-environment:before { content: \\\"\\\\eba3\\\" }\\n.codicon-pass:before { content: \\\"\\\\eba4\\\" }\\n.codicon-issue-closed:before { content: \\\"\\\\eba4\\\" }\\n.codicon-stop-circle:before { content: \\\"\\\\eba5\\\" }\\n.codicon-play-circle:before { content: \\\"\\\\eba6\\\" }\\n.codicon-record:before { content: \\\"\\\\eba7\\\" }\\n.codicon-debug-alt-small:before { content: \\\"\\\\eba8\\\" }\\n.codicon-vm-connect:before { content: \\\"\\\\eba9\\\" }\\n.codicon-cloud:before { content: \\\"\\\\ebaa\\\" }\\n.codicon-merge:before { content: \\\"\\\\ebab\\\" }\\n.codicon-export:before { content: \\\"\\\\ebac\\\" }\\n.codicon-graph-left:before { content: \\\"\\\\ebad\\\" }\\n.codicon-magnet:before { content: \\\"\\\\ebae\\\" }\\n.codicon-notebook:before { content: \\\"\\\\ebaf\\\" }\\n.codicon-redo:before { content: \\\"\\\\ebb0\\\" }\\n.codicon-check-all:before { content: \\\"\\\\ebb1\\\" }\\n.codicon-pinned-dirty:before { content: \\\"\\\\ebb2\\\" }\\n.codicon-pass-filled:before { content: \\\"\\\\ebb3\\\" }\\n.codicon-circle-large-filled:before { content: \\\"\\\\ebb4\\\" }\\n.codicon-circle-large-outline:before { content: \\\"\\\\ebb5\\\" }\\n.codicon-combine:before { content: \\\"\\\\ebb6\\\" }\\n.codicon-gather:before { content: \\\"\\\\ebb6\\\" }\\n.codicon-table:before { content: \\\"\\\\ebb7\\\" }\\n.codicon-variable-group:before { content: \\\"\\\\ebb8\\\" }\\n.codicon-type-hierarchy:before { content: \\\"\\\\ebb9\\\" }\\n.codicon-type-hierarchy-sub:before { content: \\\"\\\\ebba\\\" }\\n.codicon-type-hierarchy-super:before { content: \\\"\\\\ebbb\\\" }\\n.codicon-git-pull-request-create:before { content: \\\"\\\\ebbc\\\" }\\n.codicon-run-above:before { content: \\\"\\\\ebbd\\\" }\\n.codicon-run-below:before { content: \\\"\\\\ebbe\\\" }\\n.codicon-notebook-template:before { content: \\\"\\\\ebbf\\\" }\\n.codicon-debug-rerun:before { content: \\\"\\\\ebc0\\\" }\\n.codicon-workspace-trusted:before { content: \\\"\\\\ebc1\\\" }\\n.codicon-workspace-untrusted:before { content: \\\"\\\\ebc2\\\" }\\n.codicon-workspace-unknown:before { content: \\\"\\\\ebc3\\\" }\\n.codicon-terminal-cmd:before { content: \\\"\\\\ebc4\\\" }\\n.codicon-terminal-debian:before { content: \\\"\\\\ebc5\\\" }\\n.codicon-terminal-linux:before { content: \\\"\\\\ebc6\\\" }\\n.codicon-terminal-powershell:before { content: \\\"\\\\ebc7\\\" }\\n.codicon-terminal-tmux:before { content: \\\"\\\\ebc8\\\" }\\n.codicon-terminal-ubuntu:before { content: \\\"\\\\ebc9\\\" }\\n.codicon-terminal-bash:before { content: \\\"\\\\ebca\\\" }\\n.codicon-arrow-swap:before { content: \\\"\\\\ebcb\\\" }\\n.codicon-copy:before { content: \\\"\\\\ebcc\\\" }\\n.codicon-person-add:before { content: \\\"\\\\ebcd\\\" }\\n.codicon-filter-filled:before { content: \\\"\\\\ebce\\\" }\\n.codicon-wand:before { content: \\\"\\\\ebcf\\\" }\\n.codicon-debug-line-by-line:before { content: \\\"\\\\ebd0\\\" }\\n.codicon-inspect:before { content: \\\"\\\\ebd1\\\" }\\n.codicon-layers:before { content: \\\"\\\\ebd2\\\" }\\n.codicon-layers-dot:before { content: \\\"\\\\ebd3\\\" }\\n.codicon-layers-active:before { content: \\\"\\\\ebd4\\\" }\\n.codicon-compass:before { content: \\\"\\\\ebd5\\\" }\\n.codicon-compass-dot:before { content: \\\"\\\\ebd6\\\" }\\n.codicon-compass-active:before { content: \\\"\\\\ebd7\\\" }\\n.codicon-azure:before { content: \\\"\\\\ebd8\\\" }\\n.codicon-issue-draft:before { content: \\\"\\\\ebd9\\\" }\\n.codicon-git-pull-request-closed:before { content: \\\"\\\\ebda\\\" }\\n.codicon-git-pull-request-draft:before { content: \\\"\\\\ebdb\\\" }\\n.codicon-debug-all:before { content: \\\"\\\\ebdc\\\" }\\n.codicon-debug-coverage:before { content: \\\"\\\\ebdd\\\" }\\n.codicon-run-errors:before { content: \\\"\\\\ebde\\\" }\\n.codicon-folder-library:before { content: \\\"\\\\ebdf\\\" }\\n.codicon-debug-continue-small:before { content: \\\"\\\\ebe0\\\" }\\n.codicon-beaker-stop:before { content: \\\"\\\\ebe1\\\" }\\n.codicon-graph-line:before { content: \\\"\\\\ebe2\\\" }\\n.codicon-graph-scatter:before { content: \\\"\\\\ebe3\\\" }\\n.codicon-pie-chart:before { content: \\\"\\\\ebe4\\\" }\\n.codicon-bracket:before { content: \\\"\\\\eb0f\\\" }\\n.codicon-bracket-dot:before { content: \\\"\\\\ebe5\\\" }\\n.codicon-bracket-error:before { content: \\\"\\\\ebe6\\\" }\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,17,17,0.9%29%22%20transform%3D%22rotate%280%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,17,17,0.9%29%22%20transform%3D%22rotate%28180 18 6%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,17,17,0.9%29%22%20transform%3D%22rotate%28-90 18 18%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,17,17,0.9%29%22%20transform%3D%22rotate%2890 6 6%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `button[data-balloon]{overflow:visible}[data-balloon]{position:relative;cursor:pointer}[data-balloon]:after{filter:alpha(opacity=0);-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";-moz-opacity:0;-khtml-opacity:0;opacity:0;pointer-events:none;-webkit-transition:all 0.18s ease-out 0.18s;-moz-transition:all 0.18s ease-out 0.18s;-ms-transition:all 0.18s ease-out 0.18s;-o-transition:all 0.18s ease-out 0.18s;transition:all 0.18s ease-out 0.18s;font-family:sans-serif !important;font-weight:normal !important;font-style:normal !important;text-shadow:none !important;font-size:12px !important;background:rgba(17,17,17,0.9);border-radius:4px;color:#fff;content:attr(data-balloon);padding:.5em 1em;position:absolute;white-space:nowrap;z-index:10}[data-balloon]:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_0___});background-size:100% auto;width:18px;height:6px;filter:alpha(opacity=0);-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\";-moz-opacity:0;-khtml-opacity:0;opacity:0;pointer-events:none;-webkit-transition:all 0.18s ease-out 0.18s;-moz-transition:all 0.18s ease-out 0.18s;-ms-transition:all 0.18s ease-out 0.18s;-o-transition:all 0.18s ease-out 0.18s;transition:all 0.18s ease-out 0.18s;content:'';position:absolute;z-index:10}[data-balloon]:hover:before,[data-balloon]:hover:after,[data-balloon][data-balloon-visible]:before,[data-balloon][data-balloon-visible]:after{filter:alpha(opacity=100);-ms-filter:\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\";-moz-opacity:1;-khtml-opacity:1;opacity:1;pointer-events:auto}[data-balloon]:not([data-balloon-pos]):after{bottom:100%;left:50%;margin-bottom:11px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon]:not([data-balloon-pos]):before{bottom:100%;left:50%;margin-bottom:5px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon]:not([data-balloon-pos]):hover:after,[data-balloon]:not([data-balloon-pos])[data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon]:not([data-balloon-pos]):hover:before,[data-balloon]:not([data-balloon-pos])[data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon].font-awesome:after{font-family:FontAwesome, sans-serif !important}[data-balloon][data-balloon-break]:after{white-space:pre}[data-balloon][data-balloon-blunt]:before,[data-balloon][data-balloon-blunt]:after{-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none;transition:none}[data-balloon][data-balloon-pos=\"up\"]:after{bottom:100%;left:50%;margin-bottom:11px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up\"]:before{bottom:100%;left:50%;margin-bottom:5px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up\"]:hover:after,[data-balloon][data-balloon-pos=\"up\"][data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos=\"up\"]:hover:before,[data-balloon][data-balloon-pos=\"up\"][data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos=\"up-left\"]:after{bottom:100%;left:0;margin-bottom:11px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up-left\"]:before{bottom:100%;left:5px;margin-bottom:5px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up-left\"]:hover:after,[data-balloon][data-balloon-pos=\"up-left\"][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\"up-left\"]:hover:before,[data-balloon][data-balloon-pos=\"up-left\"][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\"up-right\"]:after{bottom:100%;right:0;margin-bottom:11px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up-right\"]:before{bottom:100%;right:5px;margin-bottom:5px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\"up-right\"]:hover:after,[data-balloon][data-balloon-pos=\"up-right\"][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\"up-right\"]:hover:before,[data-balloon][data-balloon-pos=\"up-right\"][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down']:after{left:50%;margin-top:11px;top:100%;-webkit-transform:translate(-50%, -10px);-moz-transform:translate(-50%, -10px);-ms-transform:translate(-50%, -10px);transform:translate(-50%, -10px)}[data-balloon][data-balloon-pos='down']:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_1___});background-size:100% auto;width:18px;height:6px;left:50%;margin-top:5px;top:100%;-webkit-transform:translate(-50%, -10px);-moz-transform:translate(-50%, -10px);-ms-transform:translate(-50%, -10px);transform:translate(-50%, -10px)}[data-balloon][data-balloon-pos='down']:hover:after,[data-balloon][data-balloon-pos='down'][data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos='down']:hover:before,[data-balloon][data-balloon-pos='down'][data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos='down-left']:after{left:0;margin-top:11px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-left']:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_1___});background-size:100% auto;width:18px;height:6px;left:5px;margin-top:5px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-left']:hover:after,[data-balloon][data-balloon-pos='down-left'][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-left']:hover:before,[data-balloon][data-balloon-pos='down-left'][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-right']:after{right:0;margin-top:11px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-right']:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_1___});background-size:100% auto;width:18px;height:6px;right:5px;margin-top:5px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-right']:hover:after,[data-balloon][data-balloon-pos='down-right'][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-right']:hover:before,[data-balloon][data-balloon-pos='down-right'][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='left']:after{margin-right:11px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);-moz-transform:translate(10px, -50%);-ms-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos='left']:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_2___});background-size:100% auto;width:6px;height:18px;margin-right:5px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);-moz-transform:translate(10px, -50%);-ms-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos='left']:hover:after,[data-balloon][data-balloon-pos='left'][data-balloon-visible]:after{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='left']:hover:before,[data-balloon][data-balloon-pos='left'][data-balloon-visible]:before{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='right']:after{left:100%;margin-left:11px;top:50%;-webkit-transform:translate(-10px, -50%);-moz-transform:translate(-10px, -50%);-ms-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos='right']:before{background:no-repeat url(${___CSS_LOADER_URL_REPLACEMENT_3___});background-size:100% auto;width:6px;height:18px;left:100%;margin-left:5px;top:50%;-webkit-transform:translate(-10px, -50%);-moz-transform:translate(-10px, -50%);-ms-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos='right']:hover:after,[data-balloon][data-balloon-pos='right'][data-balloon-visible]:after{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='right']:hover:before,[data-balloon][data-balloon-pos='right'][data-balloon-visible]:before{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-length='small']:after{white-space:normal;width:80px}[data-balloon][data-balloon-length='medium']:after{white-space:normal;width:150px}[data-balloon][data-balloon-length='large']:after{white-space:normal;width:260px}[data-balloon][data-balloon-length='xlarge']:after{white-space:normal;width:380px}@media screen and (max-width: 768px){[data-balloon][data-balloon-length='xlarge']:after{white-space:normal;width:90vw}}[data-balloon][data-balloon-length='fit']:after{white-space:normal;width:100%}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/balloon-css/balloon.min.css\"],\"names\":[],\"mappings\":\"AAAA,qBAAqB,gBAAgB,CAAC,eAAe,iBAAiB,CAAC,cAAc,CAAC,qBAAqB,uBAAuB,CAAC,+DAA+D,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,CAAC,mBAAmB,CAAC,2CAA2C,CAAC,wCAAwC,CAAC,uCAAuC,CAAC,sCAAsC,CAAC,mCAAmC,CAAC,iCAAiC,CAAC,6BAA6B,CAAC,4BAA4B,CAAC,2BAA2B,CAAC,yBAAyB,CAAC,6BAA6B,CAAC,iBAAiB,CAAC,UAAU,CAAC,0BAA0B,CAAC,gBAAgB,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,UAAU,CAAC,sBAAsB,4DAA0Z,CAAC,yBAAyB,CAAC,UAAU,CAAC,UAAU,CAAC,uBAAuB,CAAC,+DAA+D,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,CAAC,mBAAmB,CAAC,2CAA2C,CAAC,wCAAwC,CAAC,uCAAuC,CAAC,sCAAsC,CAAC,mCAAmC,CAAC,UAAU,CAAC,iBAAiB,CAAC,UAAU,CAAC,8IAA8I,yBAAyB,CAAC,iEAAiE,CAAC,cAAc,CAAC,gBAAgB,CAAC,SAAS,CAAC,mBAAmB,CAAC,6CAA6C,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,8CAA8C,WAAW,CAAC,QAAQ,CAAC,iBAAiB,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,sHAAsH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,wHAAwH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,kCAAkC,8CAA8C,CAAC,yCAAyC,eAAe,CAAC,mFAAmF,uBAAuB,CAAC,oBAAoB,CAAC,mBAAmB,CAAC,kBAAkB,CAAC,eAAe,CAAC,4CAA4C,WAAW,CAAC,QAAQ,CAAC,kBAAkB,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,6CAA6C,WAAW,CAAC,QAAQ,CAAC,iBAAiB,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,oHAAoH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,sHAAsH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,iDAAiD,WAAW,CAAC,MAAM,CAAC,kBAAkB,CAAC,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,kDAAkD,WAAW,CAAC,QAAQ,CAAC,iBAAiB,CAAC,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,8HAA8H,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,gIAAgI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,kDAAkD,WAAW,CAAC,OAAO,CAAC,kBAAkB,CAAC,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,mDAAmD,WAAW,CAAC,SAAS,CAAC,iBAAiB,CAAC,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,4BAA4B,CAAC,yBAAyB,CAAC,wBAAwB,CAAC,oBAAoB,CAAC,gIAAgI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,kIAAkI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,8CAA8C,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC,wCAAwC,CAAC,qCAAqC,CAAC,oCAAoC,CAAC,gCAAgC,CAAC,+CAA+C,4DAAia,CAAC,yBAAyB,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,wCAAwC,CAAC,qCAAqC,CAAC,oCAAoC,CAAC,gCAAgC,CAAC,wHAAwH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,0HAA0H,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,mDAAmD,MAAM,CAAC,eAAe,CAAC,QAAQ,CAAC,qCAAqC,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,6BAA6B,CAAC,oDAAoD,4DAAia,CAAC,yBAAyB,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,CAAC,cAAc,CAAC,QAAQ,CAAC,qCAAqC,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,6BAA6B,CAAC,kIAAkI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,oIAAoI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,oDAAoD,OAAO,CAAC,eAAe,CAAC,QAAQ,CAAC,qCAAqC,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,6BAA6B,CAAC,qDAAqD,4DAAia,CAAC,yBAAyB,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,QAAQ,CAAC,qCAAqC,CAAC,kCAAkC,CAAC,iCAAiC,CAAC,6BAA6B,CAAC,oIAAoI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,sIAAsI,iCAAiC,CAAC,8BAA8B,CAAC,6BAA6B,CAAC,yBAAyB,CAAC,8CAA8C,iBAAiB,CAAC,UAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,+CAA+C,4DAAka,CAAC,yBAAyB,CAAC,SAAS,CAAC,WAAW,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,uCAAuC,CAAC,oCAAoC,CAAC,mCAAmC,CAAC,+BAA+B,CAAC,wHAAwH,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,0HAA0H,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,+CAA+C,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC,wCAAwC,CAAC,qCAAqC,CAAC,oCAAoC,CAAC,gCAAgC,CAAC,gDAAgD,4DAA+Z,CAAC,yBAAyB,CAAC,SAAS,CAAC,WAAW,CAAC,SAAS,CAAC,eAAe,CAAC,OAAO,CAAC,wCAAwC,CAAC,qCAAqC,CAAC,oCAAoC,CAAC,gCAAgC,CAAC,0HAA0H,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,4HAA4H,oCAAoC,CAAC,iCAAiC,CAAC,gCAAgC,CAAC,4BAA4B,CAAC,kDAAkD,kBAAkB,CAAC,UAAU,CAAC,mDAAmD,kBAAkB,CAAC,WAAW,CAAC,kDAAkD,kBAAkB,CAAC,WAAW,CAAC,mDAAmD,kBAAkB,CAAC,WAAW,CAAC,qCAAqC,mDAAmD,kBAAkB,CAAC,UAAU,CAAC,CAAC,gDAAgD,kBAAkB,CAAC,UAAU\",\"sourcesContent\":[\"button[data-balloon]{overflow:visible}[data-balloon]{position:relative;cursor:pointer}[data-balloon]:after{filter:alpha(opacity=0);-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";-moz-opacity:0;-khtml-opacity:0;opacity:0;pointer-events:none;-webkit-transition:all 0.18s ease-out 0.18s;-moz-transition:all 0.18s ease-out 0.18s;-ms-transition:all 0.18s ease-out 0.18s;-o-transition:all 0.18s ease-out 0.18s;transition:all 0.18s ease-out 0.18s;font-family:sans-serif !important;font-weight:normal !important;font-style:normal !important;text-shadow:none !important;font-size:12px !important;background:rgba(17,17,17,0.9);border-radius:4px;color:#fff;content:attr(data-balloon);padding:.5em 1em;position:absolute;white-space:nowrap;z-index:10}[data-balloon]:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(0)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;filter:alpha(opacity=0);-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)\\\";-moz-opacity:0;-khtml-opacity:0;opacity:0;pointer-events:none;-webkit-transition:all 0.18s ease-out 0.18s;-moz-transition:all 0.18s ease-out 0.18s;-ms-transition:all 0.18s ease-out 0.18s;-o-transition:all 0.18s ease-out 0.18s;transition:all 0.18s ease-out 0.18s;content:'';position:absolute;z-index:10}[data-balloon]:hover:before,[data-balloon]:hover:after,[data-balloon][data-balloon-visible]:before,[data-balloon][data-balloon-visible]:after{filter:alpha(opacity=100);-ms-filter:\\\"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)\\\";-moz-opacity:1;-khtml-opacity:1;opacity:1;pointer-events:auto}[data-balloon]:not([data-balloon-pos]):after{bottom:100%;left:50%;margin-bottom:11px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon]:not([data-balloon-pos]):before{bottom:100%;left:50%;margin-bottom:5px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon]:not([data-balloon-pos]):hover:after,[data-balloon]:not([data-balloon-pos])[data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon]:not([data-balloon-pos]):hover:before,[data-balloon]:not([data-balloon-pos])[data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon].font-awesome:after{font-family:FontAwesome, sans-serif !important}[data-balloon][data-balloon-break]:after{white-space:pre}[data-balloon][data-balloon-blunt]:before,[data-balloon][data-balloon-blunt]:after{-webkit-transition:none;-moz-transition:none;-ms-transition:none;-o-transition:none;transition:none}[data-balloon][data-balloon-pos=\\\"up\\\"]:after{bottom:100%;left:50%;margin-bottom:11px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up\\\"]:before{bottom:100%;left:50%;margin-bottom:5px;-webkit-transform:translate(-50%, 10px);-moz-transform:translate(-50%, 10px);-ms-transform:translate(-50%, 10px);transform:translate(-50%, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up\\\"]:hover:after,[data-balloon][data-balloon-pos=\\\"up\\\"][data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos=\\\"up\\\"]:hover:before,[data-balloon][data-balloon-pos=\\\"up\\\"][data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos=\\\"up-left\\\"]:after{bottom:100%;left:0;margin-bottom:11px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up-left\\\"]:before{bottom:100%;left:5px;margin-bottom:5px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up-left\\\"]:hover:after,[data-balloon][data-balloon-pos=\\\"up-left\\\"][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\\\"up-left\\\"]:hover:before,[data-balloon][data-balloon-pos=\\\"up-left\\\"][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\\\"up-right\\\"]:after{bottom:100%;right:0;margin-bottom:11px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up-right\\\"]:before{bottom:100%;right:5px;margin-bottom:5px;-webkit-transform:translate(0, 10px);-moz-transform:translate(0, 10px);-ms-transform:translate(0, 10px);transform:translate(0, 10px);-webkit-transform-origin:top;-moz-transform-origin:top;-ms-transform-origin:top;transform-origin:top}[data-balloon][data-balloon-pos=\\\"up-right\\\"]:hover:after,[data-balloon][data-balloon-pos=\\\"up-right\\\"][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos=\\\"up-right\\\"]:hover:before,[data-balloon][data-balloon-pos=\\\"up-right\\\"][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down']:after{left:50%;margin-top:11px;top:100%;-webkit-transform:translate(-50%, -10px);-moz-transform:translate(-50%, -10px);-ms-transform:translate(-50%, -10px);transform:translate(-50%, -10px)}[data-balloon][data-balloon-pos='down']:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(180 18 6)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;left:50%;margin-top:5px;top:100%;-webkit-transform:translate(-50%, -10px);-moz-transform:translate(-50%, -10px);-ms-transform:translate(-50%, -10px);transform:translate(-50%, -10px)}[data-balloon][data-balloon-pos='down']:hover:after,[data-balloon][data-balloon-pos='down'][data-balloon-visible]:after{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos='down']:hover:before,[data-balloon][data-balloon-pos='down'][data-balloon-visible]:before{-webkit-transform:translate(-50%, 0);-moz-transform:translate(-50%, 0);-ms-transform:translate(-50%, 0);transform:translate(-50%, 0)}[data-balloon][data-balloon-pos='down-left']:after{left:0;margin-top:11px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-left']:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(180 18 6)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;left:5px;margin-top:5px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-left']:hover:after,[data-balloon][data-balloon-pos='down-left'][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-left']:hover:before,[data-balloon][data-balloon-pos='down-left'][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-right']:after{right:0;margin-top:11px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-right']:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(180 18 6)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:18px;height:6px;right:5px;margin-top:5px;top:100%;-webkit-transform:translate(0, -10px);-moz-transform:translate(0, -10px);-ms-transform:translate(0, -10px);transform:translate(0, -10px)}[data-balloon][data-balloon-pos='down-right']:hover:after,[data-balloon][data-balloon-pos='down-right'][data-balloon-visible]:after{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='down-right']:hover:before,[data-balloon][data-balloon-pos='down-right'][data-balloon-visible]:before{-webkit-transform:translate(0, 0);-moz-transform:translate(0, 0);-ms-transform:translate(0, 0);transform:translate(0, 0)}[data-balloon][data-balloon-pos='left']:after{margin-right:11px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);-moz-transform:translate(10px, -50%);-ms-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos='left']:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(-90 18 18)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:6px;height:18px;margin-right:5px;right:100%;top:50%;-webkit-transform:translate(10px, -50%);-moz-transform:translate(10px, -50%);-ms-transform:translate(10px, -50%);transform:translate(10px, -50%)}[data-balloon][data-balloon-pos='left']:hover:after,[data-balloon][data-balloon-pos='left'][data-balloon-visible]:after{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='left']:hover:before,[data-balloon][data-balloon-pos='left'][data-balloon-visible]:before{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='right']:after{left:100%;margin-left:11px;top:50%;-webkit-transform:translate(-10px, -50%);-moz-transform:translate(-10px, -50%);-ms-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos='right']:before{background:no-repeat url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http://www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba(17,17,17,0.9)%22%20transform%3D%22rotate(90 6 6)%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E\\\");background-size:100% auto;width:6px;height:18px;left:100%;margin-left:5px;top:50%;-webkit-transform:translate(-10px, -50%);-moz-transform:translate(-10px, -50%);-ms-transform:translate(-10px, -50%);transform:translate(-10px, -50%)}[data-balloon][data-balloon-pos='right']:hover:after,[data-balloon][data-balloon-pos='right'][data-balloon-visible]:after{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-pos='right']:hover:before,[data-balloon][data-balloon-pos='right'][data-balloon-visible]:before{-webkit-transform:translate(0, -50%);-moz-transform:translate(0, -50%);-ms-transform:translate(0, -50%);transform:translate(0, -50%)}[data-balloon][data-balloon-length='small']:after{white-space:normal;width:80px}[data-balloon][data-balloon-length='medium']:after{white-space:normal;width:150px}[data-balloon][data-balloon-length='large']:after{white-space:normal;width:260px}[data-balloon][data-balloon-length='xlarge']:after{white-space:normal;width:380px}@media screen and (max-width: 768px){[data-balloon][data-balloon-length='xlarge']:after{white-space:normal;width:90vw}}[data-balloon][data-balloon-length='fit']:after{white-space:normal;width:100%}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `/********************************************************************************\n * Copyright (c) 2019-2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n.label-edit input, .label-edit textarea {\n    background: rgba(255, 255, 255, 0.5);\n    border-radius: 5px;\n    border: 0;\n    width: 99%;\n    height: 99%;\n}\n\n.label-edit input:focus, .label-edit textarea:focus {\n    outline: none;\n    outline-offset: 0px;\n}\n\n.label-edit {\n    border-left: 1px dotted gray;\n}\n\n.label-edit.validation-warning {\n    color: orange;\n    border-left: 1px dotted orange;\n}\n\n.label-edit.validation-error {\n    color: red;\n    border-left: 1px dotted red;\n}`, \"\",{\"version\":3,\"sources\":[\"webpack://./../../node_modules/sprotty/css/edit-label.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;;;;;;;;;iFAciF;;AAEjF;IACI,oCAAoC;IACpC,kBAAkB;IAClB,SAAS;IACT,UAAU;IACV,WAAW;AACf;;AAEA;IACI,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,4BAA4B;AAChC;;AAEA;IACI,aAAa;IACb,8BAA8B;AAClC;;AAEA;IACI,UAAU;IACV,2BAA2B;AAC/B\",\"sourcesContent\":[\"/********************************************************************************\\n * Copyright (c) 2019-2020 EclipseSource and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.label-edit input, .label-edit textarea {\\n    background: rgba(255, 255, 255, 0.5);\\n    border-radius: 5px;\\n    border: 0;\\n    width: 99%;\\n    height: 99%;\\n}\\n\\n.label-edit input:focus, .label-edit textarea:focus {\\n    outline: none;\\n    outline-offset: 0px;\\n}\\n\\n.label-edit {\\n    border-left: 1px dotted gray;\\n}\\n\\n.label-edit.validation-warning {\\n    color: orange;\\n    border-left: 1px dotted orange;\\n}\\n\\n.label-edit.validation-error {\\n    color: red;\\n    border-left: 1px dotted red;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    BaseJsonrpcGLSPClient,\n    CenterAction,\n    configureServerActions,\n    EnableToolPaletteAction,\n    GLSPActionDispatcher,\n    GLSPDiagramServer,\n    RequestModelAction,\n    RequestTypeHintsAction,\n    TYPES\n} from '@eclipse-glsp/client';\nimport { getParameters } from '@eclipse-glsp/ide';\nimport { ApplicationIdProvider, GLSPClient, listen } from '@eclipse-glsp/protocol';\nimport { MessageConnection } from 'vscode-jsonrpc';\nimport createContainer from './di.config';\n\nconst urlParameters = getParameters();\nconst filePath = urlParameters.path;\n\n// In the Eclipse Integration, port is dynamic, as multiple editors\n// and/or Eclipse Servers may be running in parallel (e.g. 1/Eclipse IDE)\nconst port = parseInt(urlParameters.port, 10);\nconst applicationId = urlParameters.application;\nconst id = 'workflow';\nconst diagramType = 'workflow-diagram';\n\nconst clientId = urlParameters.client || ApplicationIdProvider.get();\nconst widgetId = urlParameters.widget || clientId;\nsetWidgetId(widgetId);\nconst container = createContainer(widgetId);\n\nconst diagramServer = container.get<GLSPDiagramServer>(TYPES.ModelSource);\ndiagramServer.clientId = clientId;\n\nconst websocket = new WebSocket(`ws://localhost:${port}/${id}`);\nlisten(websocket, connection => initialize(connection));\n\nasync function initialize(connectionProvider: MessageConnection): Promise<void> {\n    const client = new BaseJsonrpcGLSPClient({ id, connectionProvider });\n    await diagramServer.connect(client);\n    const result = await client.initializeServer({\n        applicationId,\n        protocolVersion: GLSPClient.protocolVersion\n    });\n    await configureServerActions(result, diagramType, container);\n\n    await client.initializeClientSession({ clientSessionId: diagramServer.clientId, diagramType });\n    const actionDispatcher = container.get<GLSPActionDispatcher>(TYPES.IActionDispatcher);\n    actionDispatcher.dispatch(\n        RequestModelAction.create({\n            // Java's URLEncoder.encode encodes spaces as plus sign but decodeURI expects spaces to be encoded as %20.\n            // See also https://en.wikipedia.org/wiki/Query_string#URL_encoding for URL encoding in forms vs generic URL encoding.\n            options: {\n                sourceUri: 'file://' + decodeURI(filePath.replace(/\\+/g, '%20')),\n                diagramType: 'workflow-diagram'\n            }\n        })\n    );\n    actionDispatcher.dispatch(RequestTypeHintsAction.create());\n    actionDispatcher.dispatch(EnableToolPaletteAction.create());\n    actionDispatcher.onceModelInitialized().then(() => actionDispatcher.dispatch(CenterAction.create([])));\n}\n\nfunction setWidgetId(mainWidgetId: string): void {\n    const mainWidget = document.getElementById('sprotty');\n    if (mainWidget) {\n        mainWidget.id = mainWidgetId;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { createWorkflowDiagramContainer } from '@eclipse-glsp-examples/workflow-glsp/lib';\nimport { ConsoleLogger, LogLevel, TYPES } from '@eclipse-glsp/client';\nimport { eclipseCopyPasteModule, eclipseDeleteModule, EclipseGLSPDiagramServer } from '@eclipse-glsp/ide';\nimport { Container } from 'inversify';\nimport '../css/diagram.css';\n\nexport default function createContainer(widgetId: string): Container {\n    const container = createWorkflowDiagramContainer(widgetId);\n    container.bind(TYPES.ModelSource).to(EclipseGLSPDiagramServer).inSingletonScope();\n    container.rebind(TYPES.ILogger).to(ConsoleLogger).inSingletonScope();\n    container.rebind(TYPES.LogLevel).toConstantValue(LogLevel.warn);\n\n    container.load(eclipseCopyPasteModule);\n    container.load(eclipseDeleteModule);\n\n    return container;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    ConsoleLogger,\n    ContainerConfiguration,\n    DefaultTypes,\n    DeleteElementContextMenuItemProvider,\n    DiamondNodeView,\n    GEdge,\n    glspAccessibilityModule,\n    GLSPGraph,\n    GLSPProjectionView,\n    GridSnapper,\n    LogLevel,\n    RectangularNodeView,\n    RevealNamedElementActionProvider,\n    RoundedCornerNodeView,\n    SCompartment,\n    SCompartmentView,\n    SLabel,\n    SLabelView,\n    StructureCompartmentView,\n    TYPES,\n    bindAsService,\n    bindOrRebind,\n    configureDefaultModelElements,\n    configureModelElement,\n    editLabelFeature,\n    initializeDiagramContainer,\n    overrideViewerOptions\n} from '@eclipse-glsp/client';\nimport 'balloon-css/balloon.min.css';\nimport { Container, ContainerModule } from 'inversify';\nimport 'sprotty/css/edit-label.css';\nimport '../css/diagram.css';\nimport { directTaskEditor } from './direct-task-editing/di.config';\nimport { ActivityNode, CategoryNode, Icon, TaskNode, WeightedEdge } from './model';\nimport { IconView, WorkflowEdgeView } from './workflow-views';\n\nexport const workflowDiagramModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    const context = { bind, unbind, isBound, rebind };\n\n    bindOrRebind(context, TYPES.ILogger).to(ConsoleLogger).inSingletonScope();\n    bindOrRebind(context, TYPES.LogLevel).toConstantValue(LogLevel.warn);\n    bind(TYPES.ISnapper).to(GridSnapper);\n    bindAsService(context, TYPES.ICommandPaletteActionProvider, RevealNamedElementActionProvider);\n    bindAsService(context, TYPES.IContextMenuItemProvider, DeleteElementContextMenuItemProvider);\n\n    configureDefaultModelElements(context);\n    configureModelElement(context, 'task:automated', TaskNode, RoundedCornerNodeView);\n    configureModelElement(context, 'task:manual', TaskNode, RoundedCornerNodeView);\n    configureModelElement(context, 'label:heading', SLabel, SLabelView, { enable: [editLabelFeature] });\n    configureModelElement(context, 'comp:comp', SCompartment, SCompartmentView);\n    configureModelElement(context, 'comp:header', SCompartment, SCompartmentView);\n    configureModelElement(context, 'label:icon', SLabel, SLabelView);\n    configureModelElement(context, DefaultTypes.EDGE, GEdge, WorkflowEdgeView);\n    configureModelElement(context, 'edge:weighted', WeightedEdge, WorkflowEdgeView);\n    configureModelElement(context, 'icon', Icon, IconView);\n    configureModelElement(context, 'activityNode:merge', ActivityNode, DiamondNodeView);\n    configureModelElement(context, 'activityNode:decision', ActivityNode, DiamondNodeView);\n    configureModelElement(context, 'activityNode:fork', ActivityNode, RectangularNodeView);\n    configureModelElement(context, 'activityNode:join', ActivityNode, RectangularNodeView);\n    configureModelElement(context, DefaultTypes.GRAPH, GLSPGraph, GLSPProjectionView);\n    configureModelElement(context, 'category', CategoryNode, RoundedCornerNodeView);\n    configureModelElement(context, 'struct', SCompartment, StructureCompartmentView);\n});\n\nexport function createWorkflowDiagramContainer(widgetId: string, ...containerConfiguration: ContainerConfiguration): Container {\n    return initializeWorkflowDiagramContainer(new Container(), widgetId, ...containerConfiguration);\n}\n\nexport function initializeWorkflowDiagramContainer(\n    container: Container,\n    widgetId: string,\n    ...containerConfiguration: ContainerConfiguration\n): Container {\n    initializeDiagramContainer(container, workflowDiagramModule, directTaskEditor, glspAccessibilityModule, ...containerConfiguration);\n    overrideViewerOptions(container, {\n        baseDiv: widgetId,\n        hiddenDiv: widgetId + '_hidden'\n    });\n    return container;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { bindAsService, TYPES } from '@eclipse-glsp/client';\nimport { ContainerModule } from 'inversify';\nimport { TaskEditor } from './direct-task-editor';\n\nexport const directTaskEditor = new ContainerModule((bind, _unbind, _isBound) => {\n    bindAsService(bind, TYPES.IUIExtension, TaskEditor);\n});\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    AbstractUIExtension,\n    Action,\n    AutoCompleteWidget,\n    DOMHelper,\n    EditorContextService,\n    GLSPActionDispatcher,\n    ILogger,\n    LabeledAction,\n    ModelIndexImpl,\n    Operation,\n    RequestContextActions,\n    RequestEditValidationAction,\n    SModelRoot,\n    SetContextActions,\n    SetEditValidationResultAction,\n    TYPES,\n    ValidationDecorator,\n    ValidationStatus,\n    ViewerOptions,\n    getAbsoluteClientBounds,\n    hasStringProp,\n    toActionArray\n} from '@eclipse-glsp/client';\nimport { inject, injectable } from 'inversify';\nimport { TaskNode, isTaskNode } from '../model';\n\n/**\n * Is send from the {@link TaskEditor} to the GLSP server\n * to update a feature from a specified task.\n */\nexport interface EditTaskOperation extends Operation {\n    kind: typeof EditTaskOperation.KIND;\n\n    /**\n     * Id of the task that should be edited\n     */\n    taskId: string;\n\n    /**\n     * The feature that is to be updated\n     */\n    feature: 'duration' | 'taskType';\n\n    /**\n     * The new feature value\n     */\n    value: string;\n}\n\nexport namespace EditTaskOperation {\n    export const KIND = 'editTask';\n\n    export function is(object: any): object is EditTaskOperation {\n        return (\n            Action.hasKind(object, KIND) &&\n            hasStringProp(object, 'taskId') &&\n            hasStringProp(object, 'feature') &&\n            hasStringProp(object, 'value')\n        );\n    }\n\n    export function create(options: { taskId: string; feature: 'duration' | 'taskType'; value: string }): EditTaskOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport class TaskEditor extends AbstractUIExtension {\n    static readonly ID = 'task-editor';\n    readonly autoSuggestionSettings = {\n        noSuggestionsMessage: 'No suggestions available',\n        suggestionsClass: 'command-palette-suggestions',\n        debounceWaitMs: 50,\n        showOnFocus: true\n    };\n\n    @inject(TYPES.IActionDispatcher)\n    protected actionDispatcher: GLSPActionDispatcher;\n\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n\n    @inject(TYPES.ViewerOptions)\n    protected viewerOptions: ViewerOptions;\n\n    @inject(TYPES.DOMHelper)\n    protected domHelper: DOMHelper;\n\n    @inject(TYPES.ILogger)\n    protected override logger: ILogger;\n\n    protected task: TaskNode;\n    protected autoSuggestion: AutoCompleteWidget;\n\n    id(): string {\n        return TaskEditor.ID;\n    }\n    containerClass(): string {\n        return 'command-palette';\n    }\n\n    protected initializeContents(containerElement: HTMLElement): void {\n        this.autoSuggestion = new AutoCompleteWidget(\n            this.autoSuggestionSettings,\n            { provideSuggestions: input => this.retrieveSuggestions(input) },\n            { executeFromSuggestion: input => this.executeFromSuggestion(input) },\n            () => this.hide(),\n            this.logger\n        );\n        this.autoSuggestion.configureValidation(\n            { validate: input => this.validateInput(input) },\n            new ValidationDecorator(containerElement)\n        );\n        this.autoSuggestion.configureTextSubmitHandler({\n            executeFromTextOnlyInput: (input: string) => this.executeFromTextOnlyInput(input)\n        });\n        this.autoSuggestion.initialize(containerElement);\n    }\n\n    override show(root: Readonly<SModelRoot>, ...contextElementIds: string[]): void {\n        super.show(root, ...contextElementIds);\n        this.autoSuggestion.open(root);\n    }\n\n    protected override onBeforeShow(containerElement: HTMLElement, root: Readonly<SModelRoot>, ...contextElementIds: string[]): void {\n        this.task = getTask(contextElementIds, root.index)[0];\n        this.autoSuggestion.inputField.value = '';\n        this.setPosition(containerElement);\n    }\n\n    protected setPosition(containerElement: HTMLElement): void {\n        let x = 0;\n        let y = 0;\n\n        if (this.task) {\n            const bounds = getAbsoluteClientBounds(this.task, this.domHelper, this.viewerOptions);\n            x = bounds.x + 5;\n            y = bounds.y + 5;\n        }\n\n        containerElement.style.left = `${x}px`;\n        containerElement.style.top = `${y}px`;\n        containerElement.style.width = '200px';\n    }\n\n    protected async retrieveSuggestions(input: string): Promise<LabeledAction[]> {\n        const response = await this.actionDispatcher.request(\n            RequestContextActions.create({ contextId: TaskEditor.ID, editorContext: this.editorContextService.get({ ['text']: input }) })\n        );\n        if (SetContextActions.is(response)) {\n            return response.actions;\n        }\n        return Promise.reject();\n    }\n\n    protected async validateInput(input: string): Promise<ValidationStatus> {\n        const response = await this.actionDispatcher.request(\n            RequestEditValidationAction.create({ contextId: TaskEditor.ID, modelElementId: this.task.id, text: input })\n        );\n        if (SetEditValidationResultAction.is(response)) {\n            return response.status;\n        }\n        return Promise.reject();\n    }\n\n    protected executeFromSuggestion(input: LabeledAction | Action[] | Action): void {\n        this.actionDispatcher.dispatchAll(toActionArray(input));\n    }\n\n    protected executeFromTextOnlyInput(input: string): void {\n        if (input.startsWith('duration:')) {\n            const value = input.substring('duration:'.length);\n            const action = EditTaskOperation.create({ taskId: this.task.id, feature: 'duration', value });\n            this.actionDispatcher.dispatch(action);\n        } else if (input.startsWith('taskType:')) {\n            const value = input.substring('taskType:'.length);\n            const action = EditTaskOperation.create({ taskId: this.task.id, feature: 'taskType', value });\n            this.actionDispatcher.dispatch(action);\n        } else {\n            throw new Error('Unsupported Task Editing: ' + input);\n        }\n    }\n\n    override hide(): void {\n        this.autoSuggestion.dispose();\n        super.hide();\n    }\n}\n\nfunction getTask(ids: string[], index: ModelIndexImpl): TaskNode[] {\n    return ids.map(id => index.getById(id)).filter(element => element && isTaskNode(element)) as TaskNode[];\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './di.config';\nexport * from './direct-task-editing/direct-task-editor';\nexport * from './model';\nexport * from './workflow-views';\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    boundsFeature,\n    connectableFeature,\n    deletableFeature,\n    DiamondNode,\n    EditableLabel,\n    fadeFeature,\n    GEdge,\n    hoverFeedbackFeature,\n    isEditableLabel,\n    layoutableChildFeature,\n    LayoutContainer,\n    layoutContainerFeature,\n    moveFeature,\n    Nameable,\n    nameFeature,\n    popupFeature,\n    RectangularNode,\n    SChildElement,\n    selectFeature,\n    SModelElement,\n    SShapeElement,\n    WithEditableLabel,\n    withEditLabelFeature\n} from '@eclipse-glsp/client';\n\nexport class TaskNode extends RectangularNode implements Nameable, WithEditableLabel {\n    static override readonly DEFAULT_FEATURES = [\n        connectableFeature,\n        deletableFeature,\n        selectFeature,\n        boundsFeature,\n        moveFeature,\n        layoutContainerFeature,\n        fadeFeature,\n        hoverFeedbackFeature,\n        popupFeature,\n        nameFeature,\n        withEditLabelFeature\n    ];\n    duration?: number;\n    taskType?: string;\n    reference?: string;\n\n    get editableLabel(): (SChildElement & EditableLabel) | undefined {\n        const label = this.children.find(element => element.type === 'label:heading');\n        if (label && isEditableLabel(label)) {\n            return label;\n        }\n        return undefined;\n    }\n\n    get name(): string {\n        const labelText = this.editableLabel?.text;\n        return labelText ? labelText : '<unknown>';\n    }\n}\n\nexport function isTaskNode(element: SModelElement): element is TaskNode {\n    return element instanceof TaskNode || false;\n}\n\nexport class WeightedEdge extends GEdge {\n    probability?: string;\n}\n\nexport class ActivityNode extends DiamondNode {\n    nodeType: string = ActivityNode.Type.UNDEFINED;\n    override size = {\n        width: 32,\n        height: 32\n    };\n    override strokeWidth = 1;\n}\n\nexport namespace ActivityNode {\n    export namespace Type {\n        export const INITIAL = 'initialNode';\n        export const FINAL = 'finalNode';\n        export const DECISION = 'decisionNode';\n        export const MERGE = 'mergeNode';\n        export const JOIN = 'joinNode';\n        export const FORK = 'forkNode';\n        export const UNDEFINED = 'undefined';\n    }\n}\n\nexport class Icon extends SShapeElement implements LayoutContainer {\n    static readonly DEFAULT_FEATURES = [boundsFeature, layoutContainerFeature, layoutableChildFeature, fadeFeature];\n\n    layout: string;\n    override layoutOptions?: { [key: string]: string | number | boolean };\n    override size = {\n        width: 32,\n        height: 32\n    };\n}\n\nexport class CategoryNode extends RectangularNode implements Nameable, WithEditableLabel {\n    static override readonly DEFAULT_FEATURES = [\n        deletableFeature,\n        selectFeature,\n        boundsFeature,\n        moveFeature,\n        layoutContainerFeature,\n        fadeFeature,\n        hoverFeedbackFeature,\n        popupFeature,\n        nameFeature,\n        withEditLabelFeature\n    ];\n\n    name = '';\n\n    get editableLabel(): (SChildElement & EditableLabel) | undefined {\n        const label = this.children.find(element => element.type === 'label:heading');\n        if (label && isEditableLabel(label)) {\n            return label;\n        }\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    angleOfPoint,\n    findParentByFeature,\n    getSubType,\n    Point,\n    PolylineEdgeViewWithGapsOnIntersections,\n    RenderingContext,\n    SEdge,\n    setAttr,\n    ShapeView,\n    svg,\n    toDegrees\n} from '@eclipse-glsp/client';\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { Icon, isTaskNode } from './model';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class WorkflowEdgeView extends PolylineEdgeViewWithGapsOnIntersections {\n    protected override renderAdditionals(edge: SEdge, segments: Point[], context: RenderingContext): VNode[] {\n        const additionals = super.renderAdditionals(edge, segments, context);\n        const p1 = segments[segments.length - 2];\n        const p2 = segments[segments.length - 1];\n        const arrow = (\n            <path\n                class-sprotty-edge={true}\n                class-arrow={true}\n                d='M 1,0 L 10,-4 L 10,4 Z'\n                transform={`rotate(${toDegrees(angleOfPoint({ x: p1.x - p2.x, y: p1.y - p2.y }))} ${p2.x} ${p2.y}) translate(${p2.x} ${\n                    p2.y\n                })`}\n            />\n        );\n        additionals.push(arrow);\n        return additionals;\n    }\n}\n\n@injectable()\nexport class IconView extends ShapeView {\n    render(element: Icon, context: RenderingContext): VNode | undefined {\n        const taskNode = findParentByFeature(element, isTaskNode);\n        if (!taskNode || !this.isVisible(element, context)) {\n            return undefined;\n        }\n\n        let icon;\n        if (taskNode.type === 'task:manual') {\n            // From codicons: https://github.com/microsoft/vscode-codicons/blob/main/src/icons/account.svg?short_path=8135b2d\n            icon =\n                // eslint-disable-next-line max-len\n                'M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09.016.016.032.016.032.032.144.112.288.224.448.336.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16.144-.111.304-.223.448-.335.016-.016.032-.016.032-.032 1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816.24-.24.528-.463.816-.639.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023.144-.32.336-.607.576-.847.24-.24.528-.431.848-.575.32-.144.672-.208 1.024-.208.368 0 .704.064 1.024.208.32.144.608.336.848.575.24.24.432.528.576.847.144.32.208.672.208 1.023 0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848 2.84 2.84 0 0 1-.848.575 2.715 2.715 0 0 1-2.064 0 2.84 2.84 0 0 1-.848-.575 2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406 4.883 4.883 0 0 0-1.088-1.135 5.207 5.207 0 0 0-1.04-.608 2.82 2.82 0 0 0 .464-.383 4.2 4.2 0 0 0 .624-.784 3.624 3.624 0 0 0 .528-1.934 3.71 3.71 0 0 0-.288-1.47 3.799 3.799 0 0 0-.816-1.199 3.845 3.845 0 0 0-1.2-.8 3.72 3.72 0 0 0-1.472-.287 3.72 3.72 0 0 0-1.472.288 3.631 3.631 0 0 0-1.2.815 3.84 3.84 0 0 0-.8 1.199 3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007.096.336.224.64.4.927.16.288.384.544.624.784.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z';\n        } else {\n            // From codicons: https://github.com/microsoft/vscode-codicons/blob/main/src/icons/gear.svg?short_path=8ee3ec4\n            icon =\n                // eslint-disable-next-line max-len\n                'M9.1 4.4L8.6 2H7.4l-.5 2.4-.7.3-2-1.3-.9.8 1.3 2-.2.7-2.4.5v1.2l2.4.5.3.8-1.3 2 .8.8 2-1.3.8.3.4 2.3h1.2l.5-2.4.8-.3 2 1.3.8-.8-1.3-2 .3-.8 2.3-.4V7.4l-2.4-.5-.3-.8 1.3-2-.8-.8-2 1.3-.7-.2zM9.4 1l.5 2.4L12 2.1l2 2-1.4 2.1 2.4.4v2.8l-2.4.5L14 12l-2 2-2.1-1.4-.5 2.4H6.6l-.5-2.4L4 13.9l-2-2 1.4-2.1L1 9.4V6.6l2.4-.5L2.1 4l2-2 2.1 1.4.4-2.4h2.8zm.6 7c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zM8 9c.6 0 1-.4 1-1s-.4-1-1-1-1 .4-1 1 .4 1 1 1z';\n        }\n\n        const vnode = (\n            <g>\n                <path\n                    transform={'scale(1.15),translate(0.75,0.75)'}\n                    // From codicons: https://github.com/microsoft/vscode-codicons/blob/main/src/icons/terminal.svg?short_path=2ffc08e\n                    // eslint-disable-next-line max-len\n                    d={icon}\n                />\n                <rect class-icon-background x={0} y={0} width={25} height={20} />\n                {context.renderChildren(element)}\n            </g>\n        );\n\n        const subType = getSubType(element);\n        if (subType) {\n            setAttr(vnode, 'class', subType);\n        }\n\n        return vnode;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject } from 'inversify';\nimport { Action, ActionDispatcher, RequestAction, ResponseAction } from '~glsp-sprotty';\nimport { ModelInitializationConstraint } from './model-initialization-constraint';\n\nexport class GLSPActionDispatcher extends ActionDispatcher {\n    protected readonly timeouts: Map<string, NodeJS.Timeout> = new Map();\n    protected initializedConstraint = false;\n    @inject(ModelInitializationConstraint) protected initializationConstraint: ModelInitializationConstraint;\n\n    override initialize(): Promise<void> {\n        return super.initialize().then(() => this.startModelInitialization());\n    }\n\n    startModelInitialization(): void {\n        if (!this.initializedConstraint) {\n            this.logger.log(this, 'Starting model initialization mode');\n            this.initializationConstraint.onInitialized().then(() => this.logger.log(this, 'Model initialization completed'));\n            this.initializedConstraint = true;\n        }\n    }\n\n    onceModelInitialized(): Promise<void> {\n        return this.initializationConstraint.onInitialized();\n    }\n\n    override dispatch(action: Action): Promise<void> {\n        const result = super.dispatch(action);\n        this.initializationConstraint.notifyDispatched(action);\n        return result;\n    }\n\n    protected override handleAction(action: Action): Promise<void> {\n        if (ResponseAction.hasValidResponseId(action)) {\n            // clear timeout\n            const timeout = this.timeouts.get(action.responseId);\n            if (timeout !== undefined) {\n                clearTimeout(timeout);\n                this.timeouts.delete(action.responseId);\n            }\n\n            // we might have reached a timeout, so we simply drop the response\n            const deferred = this.requests.get(action.responseId);\n            if (deferred === undefined) {\n                this.logger.log(this, 'No matching request for response', action);\n                return Promise.resolve();\n            }\n        }\n        return super.handleAction(action);\n    }\n\n    override request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res> {\n        if (!action.requestId && action.requestId === '') {\n            // No request id has been specified. So we use a generated one.\n            action.requestId = RequestAction.generateRequestId();\n        }\n        return super.request(action);\n    }\n\n    /**\n     * Dispatch a request and waits for a response until the timeout given in `timeoutMs` has\n     * been reached. The returned promise is resolved when a response with matching identifier\n     * is dispatched or when the timeout has been reached. That response is _not_ passed to the\n     * registered action handlers. Instead, it is the responsibility of the caller of this method\n     * to handle the response properly. For example, it can be sent to the registered handlers by\n     * passing it again to the `dispatch` method.\n     * If `rejectOnTimeout` is set to false (default) the returned promise will be resolved with\n     * no value, otherwise it will be rejected.\n     */\n    requestUntil<Res extends ResponseAction>(action: RequestAction<Res>, timeoutMs = 2000, rejectOnTimeout = false): Promise<Res> {\n        if (!action.requestId && action.requestId === '') {\n            // No request id has been specified. So we use a generated one.\n            action.requestId = RequestAction.generateRequestId();\n        }\n\n        const requestId = action.requestId;\n        const timeout = setTimeout(() => {\n            const deferred = this.requests.get(requestId);\n            if (deferred !== undefined) {\n                // cleanup\n                clearTimeout(timeout);\n                this.requests.delete(requestId);\n\n                const notification = 'Request ' + requestId + ' (' + action + ') time out after ' + timeoutMs + 'ms.';\n                if (rejectOnTimeout) {\n                    deferred.reject(notification);\n                } else {\n                    this.logger.info(this, notification);\n                    deferred.resolve();\n                }\n            }\n        }, timeoutMs);\n        this.timeouts.set(requestId, timeout);\n\n        return super.request(action);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, hasBooleanProp } from '~glsp-sprotty';\n\n/**\n * A `FocusStateChangedAction` is dispatched by the client whenever the\n * diagram focus changes (i.e. focus loss or focus gain).\n */\nexport interface FocusStateChangedAction extends Action {\n    kind: typeof FocusStateChangedAction.KIND;\n    /**\n     * The new focus state of the diagram.\n     */\n    hasFocus: boolean;\n}\n\nexport namespace FocusStateChangedAction {\n    export const KIND = 'focusStateChanged';\n\n    export function is(object: any): object is FocusStateChangedAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'hasFocus');\n    }\n\n    export function create(hasFocus = true): FocusStateChangedAction {\n        return {\n            kind: KIND,\n            hasFocus\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Args, SModelElement } from '~glsp-sprotty';\n\nexport interface SArgumentable {\n    args: Args;\n}\n\nexport function hasArguments(element?: SModelElement): element is SModelElement & SArgumentable {\n    return element !== undefined && 'args' in element;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasStringProp, LabeledAction } from '~glsp-sprotty';\n\nexport interface AutoCompleteValue extends LabeledAction {\n    readonly text: string;\n}\n\nexport namespace AutoCompleteValue {\n    export function is(object: any): object is AutoCompleteValue {\n        return LabeledAction.is(object) && hasStringProp(object, 'text');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { AutocompleteResult, AutocompleteSettings } from 'autocompleter';\nimport { Action, ILogger, LabeledAction, SModelRoot, ValidationStatus, codiconCSSClasses, matchesKeystroke, toArray } from '~glsp-sprotty';\nimport { AutoCompleteValue } from './auto-complete-actions';\nimport { IValidationDecorator } from './validation-decorator';\n\nexport interface AutoCompleteSettings {\n    readonly noSuggestionsMessage?: string;\n    readonly suggestionsClass?: string;\n    readonly debounceWaitMs?: number;\n    readonly showOnFocus?: boolean;\n}\n\nexport type CloseReason = 'submission' | 'blur' | 'escape';\nexport interface InputValidator {\n    validate(input: string): Promise<ValidationStatus>;\n}\n\nexport interface SuggestionProvider {\n    provideSuggestions(input: string): Promise<LabeledAction[]>;\n}\n\nexport interface InputValueInitializer {\n    initializeValue(containerElement: HTMLElement, root: Readonly<SModelRoot>, ...contextElementIds: string[]): string;\n}\n\nexport interface SuggestionSubmitHandler {\n    executeFromSuggestion(input: LabeledAction | Action | Action[]): void;\n}\n\nexport interface TextSubmitHandler {\n    executeFromTextOnlyInput(input: string): void;\n}\n\nexport interface AutoCompleteWidgetOptions {\n    visibleSuggestionsChanged?: (suggestions: LabeledAction[]) => void;\n    selectedSuggestionChanged?: (suggestion?: LabeledAction) => void;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst configureAutocomplete: (settings: AutocompleteSettings<LabeledAction>) => AutocompleteResult = require('autocompleter');\n\n/**\n * The `AutoCompleteWidget` is a reusable UI element that provides a text input supporting auto-completion,\n * validation, validation messages, etc.\n *\n * An example for using it is available in the workflow diagram:\n * https://github.com/eclipse-glsp/glsp-client/blob/master/examples/workflow-glsp/src/direct-task-editing/direct-task-editor.ts\n */\nexport class AutoCompleteWidget {\n    loadingIndicatorClasses = codiconCSSClasses('loading', false, true, ['loading']);\n\n    protected containerElement: HTMLElement;\n    protected inputElement: HTMLInputElement;\n    protected loadingIndicator: HTMLSpanElement;\n    protected autoCompleteResult: AutocompleteResult;\n    protected contextActions?: LabeledAction[];\n    protected previousContent?: string;\n\n    protected inputValidator?: InputValidator;\n    protected validationDecorator: IValidationDecorator = IValidationDecorator.NO_DECORATION;\n\n    protected textSubmitHandler?: TextSubmitHandler;\n\n    constructor(\n        public autoSuggestionSettings: AutoCompleteSettings,\n        public suggestionProvider: SuggestionProvider,\n        public suggestionSubmitHandler: SuggestionSubmitHandler,\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        protected notifyClose: (reason: CloseReason) => void = () => {},\n        protected logger?: ILogger,\n        protected options?: AutoCompleteWidgetOptions\n    ) {}\n\n    configureValidation(\n        inputValidator: InputValidator,\n        validationDecorator: IValidationDecorator = IValidationDecorator.NO_DECORATION\n    ): void {\n        this.inputValidator = inputValidator;\n        this.validationDecorator = validationDecorator;\n    }\n\n    configureTextSubmitHandler(textSubmitHandler: TextSubmitHandler): void {\n        this.textSubmitHandler = textSubmitHandler;\n    }\n\n    initialize(containerElement: HTMLElement): void {\n        this.containerElement = containerElement;\n        this.inputElement = this.createInputElement();\n        this.containerElement.appendChild(this.inputElement);\n        this.containerElement.style.position = 'absolute';\n    }\n\n    protected createInputElement(): HTMLInputElement {\n        const inputElement = document.createElement('input');\n        inputElement.style.position = 'absolute';\n        inputElement.spellcheck = false;\n        inputElement.autocapitalize = 'false';\n        inputElement.autocomplete = 'false';\n        inputElement.style.width = '100%';\n        inputElement.addEventListener('keydown', event => this.handleKeyDown(event));\n        inputElement.addEventListener('blur', () => {\n            if (this.containerElement.style.visibility !== 'hidden') {\n                window.setTimeout(() => this.notifyClose('blur'), 200);\n            }\n        });\n\n        return inputElement;\n    }\n\n    protected handleKeyDown(event: KeyboardEvent): void {\n        if (matchesKeystroke(event, 'Escape')) {\n            this.notifyClose('escape');\n            return;\n        }\n        if (matchesKeystroke(event, 'Enter') && !this.isInputElementChanged() && this.isSuggestionAvailable()) {\n            return;\n        }\n        if (this.isInputElementChanged()) {\n            this.invalidateValidationResultAndContextActions();\n        }\n        if (!matchesKeystroke(event, 'Enter') || this.isSuggestionAvailable()) {\n            return;\n        }\n        if (!this.validationDecorator.isValidatedOk()) {\n            event.stopImmediatePropagation();\n            return;\n        }\n        if (this.textSubmitHandler) {\n            this.executeFromTextOnlyInput();\n            this.notifyClose('submission');\n        }\n    }\n\n    protected isInputElementChanged(): boolean {\n        return this.inputElement.value !== this.previousContent;\n    }\n\n    protected invalidateValidationResultAndContextActions(): void {\n        this.contextActions = undefined;\n        this.validationDecorator.invalidate();\n    }\n\n    open(root: Readonly<SModelRoot>, ...contextElementIds: string[]): void {\n        this.contextActions = undefined;\n        this.autoCompleteResult = configureAutocomplete(this.autocompleteSettings(root));\n        this.previousContent = this.inputElement.value;\n        this.inputElement.setSelectionRange(0, this.inputElement.value.length);\n        this.inputElement.focus();\n    }\n\n    protected autocompleteSettings(root: Readonly<SModelRoot>): AutocompleteSettings<LabeledAction> {\n        return {\n            input: this.inputElement,\n            emptyMsg: this.autoSuggestionSettings.noSuggestionsMessage,\n            className: this.autoSuggestionSettings.suggestionsClass,\n            showOnFocus: this.autoSuggestionSettings.showOnFocus,\n            debounceWaitMs: this.autoSuggestionSettings.debounceWaitMs,\n            minLength: -1,\n            fetch: (text: string, update: (items: LabeledAction[]) => void) => this.updateSuggestions(update, text, root),\n            onSelect: (item: LabeledAction) => this.onSelect(item),\n            render: (item: LabeledAction, currentValue: string): HTMLDivElement | undefined => this.renderSuggestions(item, currentValue),\n            customize: (input: HTMLInputElement, inputRect: DOMRect, container: HTMLDivElement, maxHeight: number) => {\n                this.customizeInputElement(input, inputRect, container, maxHeight);\n            }\n        };\n    }\n\n    protected customizeInputElement(input: HTMLInputElement, inputRect: DOMRect, container: HTMLDivElement, maxHeight: number): void {\n        // move container into our UIExtension container as this is already positioned correctly\n        if (this.containerElement) {\n            this.containerElement.appendChild(container);\n\n            if (this.options && this.options.selectedSuggestionChanged) {\n                const selectedElement = container.querySelector('.selected');\n                // eslint-disable-next-line no-null/no-null\n                if (selectedElement !== null && selectedElement !== undefined) {\n                    const index = Array.from(container.children).indexOf(selectedElement);\n                    this.options.selectedSuggestionChanged(this.contextActions?.[index]);\n                } else {\n                    this.options.selectedSuggestionChanged(undefined);\n                }\n            }\n        }\n    }\n\n    protected updateSuggestions(\n        update: (items: LabeledAction[]) => void,\n        text: string,\n        root: Readonly<SModelRoot>,\n        ...contextElementIds: string[]\n    ): void {\n        this.onLoading();\n        this.doUpdateSuggestions(text, root)\n            .then(actions => {\n                this.contextActions = this.filterActions(text, actions);\n                update(this.contextActions);\n                this.options?.visibleSuggestionsChanged?.(this.contextActions);\n                this.onLoaded('success');\n            })\n            .catch(reason => {\n                if (this.logger) {\n                    this.logger.error(this, 'Failed to obtain suggestions', reason);\n                }\n                this.onLoaded('error');\n            });\n    }\n\n    protected onLoading(): void {\n        if (this.loadingIndicator && this.containerElement.contains(this.loadingIndicator)) {\n            return;\n        }\n        this.loadingIndicator = document.createElement('span');\n        this.loadingIndicator.classList.add(...this.loadingIndicatorClasses);\n        this.containerElement.appendChild(this.loadingIndicator);\n    }\n\n    protected doUpdateSuggestions(text: string, root: Readonly<SModelRoot>, ...contextElementIds: string[]): Promise<LabeledAction[]> {\n        return this.suggestionProvider.provideSuggestions(text);\n    }\n\n    protected onLoaded(_success: 'success' | 'error'): void {\n        if (this.containerElement.contains(this.loadingIndicator)) {\n            this.containerElement.removeChild(this.loadingIndicator);\n        }\n        this.validationDecorator.invalidate();\n        this.validateInputIfNoContextActions();\n        this.previousContent = this.inputElement.value;\n    }\n\n    protected renderSuggestions(item: LabeledAction, value: string): HTMLDivElement {\n        const itemElement = document.createElement('div');\n        const wordMatcher = this.escapeForRegExp(value).split(' ').join('|');\n        const regex = new RegExp(wordMatcher, 'gi');\n        if (item.icon) {\n            this.renderIcon(itemElement, item.icon);\n        }\n        itemElement.innerHTML += item.label.replace(regex, match => '<em>' + match + '</em>').replace(/ /g, '&nbsp;');\n        return itemElement;\n    }\n\n    protected escapeForRegExp(value: string): string {\n        return value.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n    }\n\n    protected renderIcon(itemElement: HTMLDivElement, icon: string): void {\n        itemElement.innerHTML += `<span class=\"icon ${icon}\"></span>`;\n    }\n\n    protected filterActions(filterText: string, actions: LabeledAction[]): LabeledAction[] {\n        return toArray(\n            actions.filter(action => {\n                const label = action.label.toLowerCase();\n                const searchWords = filterText.split(' ');\n                return searchWords.every(word => label.indexOf(word.toLowerCase()) !== -1);\n            })\n        );\n    }\n\n    protected onSelect(item: LabeledAction): void {\n        if (AutoCompleteValue.is(item)) {\n            this.inputElement.value = item.text;\n            // trigger update of suggestions with an keyup event\n            window.setTimeout(() => this.inputElement.dispatchEvent(new Event('keyup')));\n        } else {\n            this.executeFromSuggestion(item);\n            this.notifyClose('submission');\n        }\n    }\n\n    protected validateInputIfNoContextActions(): void {\n        if (this.isNoOrExactlyOneMatchingContextAction()) {\n            this.validateInput();\n        } else {\n            this.validationDecorator.dispose();\n        }\n    }\n\n    private isNoOrExactlyOneMatchingContextAction(): boolean | undefined {\n        return (\n            !this.isSuggestionAvailable() ||\n            (this.contextActions && this.contextActions.length === 1 && this.inputElement.value.endsWith(this.contextActions[0].label))\n        );\n    }\n\n    protected isSuggestionAvailable(): boolean | undefined {\n        return this.contextActions && this.contextActions.length > 0;\n    }\n\n    validateInput(): void {\n        if (this.inputValidator) {\n            this.inputValidator\n                .validate(this.inputElement.value)\n                .then(result => this.validationDecorator.decorateValidationResult(result))\n                .catch(error => this.handleErrorDuringValidation(error));\n        }\n    }\n\n    protected handleErrorDuringValidation(error: Error): void {\n        if (this.logger) {\n            this.logger.error(this, 'Failed to validate input', error);\n        }\n        this.validationDecorator.dispose();\n    }\n\n    protected executeFromSuggestion(input: LabeledAction | Action[] | Action): void {\n        this.suggestionSubmitHandler.executeFromSuggestion(input);\n    }\n\n    protected executeFromTextOnlyInput(): void {\n        if (this.textSubmitHandler) {\n            this.textSubmitHandler.executeFromTextOnlyInput(this.inputElement.value);\n        }\n    }\n\n    get inputField(): HTMLInputElement {\n        return this.inputElement;\n    }\n\n    dispose(): void {\n        this.validationDecorator.dispose();\n        if (this.autoCompleteResult) {\n            this.autoCompleteResult.destroy();\n        }\n    }\n}\n\nexport function toActionArray(input: LabeledAction | Action[] | Action): Action[] {\n    if (LabeledAction.is(input)) {\n        return input.actions;\n    } else if (Action.is(input)) {\n        return [input];\n    }\n    return [];\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ValidationStatus, codiconCSSString } from '~glsp-sprotty';\n\nexport interface IValidationDecorator {\n    decorateValidationResult(status: ValidationStatus): void;\n    isValidatedOk(): boolean;\n    invalidate(): void;\n    dispose(): void;\n}\n\nexport namespace IValidationDecorator {\n    export const NO_DECORATION: IValidationDecorator = {\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        decorateValidationResult(_status: ValidationStatus) {},\n        isValidatedOk(): boolean {\n            return false;\n        },\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        invalidate() {},\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        dispose() {}\n    };\n}\n\nexport class ValidationDecorator implements IValidationDecorator {\n    warningClasses = ['warning'];\n    warningIconClasses = codiconCSSString('warning');\n    errorClasses = ['error'];\n    errorIconClasses = codiconCSSString('error');\n\n    isValidated = false;\n    hasValidationError = false;\n\n    protected decorationDiv?: HTMLDivElement;\n\n    constructor(protected containerElement: HTMLElement) {}\n\n    decorateValidationResult(status: ValidationStatus): void {\n        if (ValidationStatus.isError(status)) {\n            this.hasValidationError = true;\n            this.decorateError(status.message ? status.message : 'Error');\n        } else if (ValidationStatus.isWarning(status)) {\n            this.hasValidationError = false;\n            this.decorateWarning(status.message ? status.message : 'Warning');\n        } else {\n            this.hasValidationError = false;\n            this.dispose();\n        }\n        this.isValidated = true;\n    }\n\n    protected decorateError(message: string): void {\n        this.switchCssClasses(this.containerElement, this.errorClasses);\n        const div = this.createDecorationDiv();\n        this.switchCssClasses(div, this.errorClasses);\n        div.innerHTML = `<span class=\"${this.errorIconClasses}\"></span> ${message}`;\n        this.adjustPosition();\n    }\n\n    protected decorateWarning(message: string): void {\n        this.switchCssClasses(this.containerElement, this.warningClasses);\n        const div = this.createDecorationDiv();\n        this.switchCssClasses(div, this.warningClasses);\n        div.innerHTML = `<span class=\"${this.warningIconClasses}\"></span> ${message}`;\n        this.adjustPosition();\n    }\n\n    protected switchCssClasses(element: HTMLElement, cssClasses: string[]): void {\n        element.classList.remove(...this.errorClasses, ...this.warningClasses);\n        element.classList.add(...cssClasses);\n    }\n\n    protected createDecorationDiv(): HTMLDivElement {\n        if (!this.decorationDiv) {\n            this.containerElement.classList.add('validation');\n            this.decorationDiv = document.createElement('div');\n            this.decorationDiv.style.width = `${this.decorationContainerWidth()}px`;\n            this.decorationDiv.classList.add('validation-decorator');\n            this.containerElement.appendChild(this.decorationDiv);\n        }\n        return this.decorationDiv;\n    }\n\n    protected decorationContainerWidth(): number {\n        return this.containerElement.clientWidth - 5;\n    }\n\n    protected adjustPosition(): void {\n        if (this.decorationDiv) {\n            const height = this.decorationDiv.clientHeight + 2;\n            this.decorationDiv.style.top = `-${height}px`;\n        }\n    }\n\n    isValidatedOk(): boolean {\n        return this.isValidated && !this.hasValidationError;\n    }\n\n    invalidate(): void {\n        this.isValidated = false;\n    }\n\n    dispose(): void {\n        this.hasValidationError = false;\n        this.isValidated = false;\n        if (this.decorationDiv && this.containerElement && this.containerElement.contains(this.decorationDiv)) {\n            this.containerElement.removeChild(this.decorationDiv);\n            this.switchCssClasses(this.containerElement, []);\n            this.decorationDiv = undefined;\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { CommandStack, SModelRoot } from '~glsp-sprotty';\n\n@injectable()\nexport class GLSPCommandStack extends CommandStack {\n    override undo(): Promise<SModelRoot> {\n        this.logger.warn(\n            this,\n            'GLSPCommandStack.undo() was called. This should never happen as the GLSP server is responsible for handling undo requests'\n        );\n        return this.currentModel;\n    }\n\n    override redo(): Promise<SModelRoot> {\n        this.logger.warn(\n            this,\n            'GLSPCommandStack.redo() was called. This should never happen as the GLSP server is responsible for handling redo requests'\n        );\n        return this.currentModel;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Container, ContainerModule } from 'inversify';\nimport {\n    ContainerConfiguration,\n    buttonModule,\n    defaultModule,\n    edgeIntersectionModule,\n    edgeLayoutModule,\n    expandModule,\n    fadeModule,\n    initializeContainer,\n    labelEditUiModule,\n    modelSourceModule,\n    openModule,\n    routingModule,\n    zorderModule\n} from '~glsp-sprotty';\nimport glspBoundsModule from '../features/bounds/di.config';\nimport glspCommandPaletteModule from '../features/command-palette/di.config';\nimport glspContextMenuModule from '../features/context-menu/di.config';\nimport { glspServerCopyPasteModule } from '../features/copy-paste/di.config';\nimport glspDecorationModule from '../features/decoration/di.config';\nimport glspEditLabelModule from '../features/edit-label/di.config';\nimport glspExportModule from '../features/export/di.config';\nimport modelHintsModule from '../features/hints/di.config';\nimport glspHoverModule from '../features/hover/di.config';\nimport layoutModule from '../features/layout/di.config';\nimport glspMouseToolModule from '../features/mouse-tool/di.config';\nimport navigationModule from '../features/navigation/di.config';\nimport glspSelectModule from '../features/select/di.config';\nimport sourceModelWatcherModule from '../features/source-model-watcher/di.config';\nimport svgMetadataModule from '../features/svg-metadata/di.config';\nimport toolFeedbackModule from '../features/tool-feedback/di.config';\nimport toolPaletteModule from '../features/tool-palette/di.config';\nimport { enableDefaultToolsOnFocusLossModule, toolsModule } from '../features/tools/di.config';\nimport { markerNavigatorModule, validationModule } from '../features/validation/di.config';\nimport glspViewportModule from '../features/viewport/di.config';\nimport defaultGLSPModule from './di.config';\n\nexport const DEFAULT_MODULES = [\n    defaultModule,\n    defaultGLSPModule,\n    buttonModule,\n    edgeIntersectionModule,\n    edgeLayoutModule,\n    expandModule,\n    glspExportModule,\n    fadeModule,\n    glspBoundsModule,\n    glspCommandPaletteModule,\n    glspContextMenuModule,\n    glspDecorationModule,\n    glspEditLabelModule,\n    glspHoverModule,\n    glspMouseToolModule,\n    glspSelectModule,\n    glspServerCopyPasteModule,\n    glspViewportModule,\n    labelEditUiModule,\n    layoutModule,\n    markerNavigatorModule,\n    modelHintsModule,\n    modelSourceModule,\n    sourceModelWatcherModule,\n    navigationModule,\n    openModule,\n    toolPaletteModule,\n    routingModule,\n    toolFeedbackModule,\n    toolsModule,\n    enableDefaultToolsOnFocusLossModule,\n    validationModule,\n    zorderModule,\n    svgMetadataModule\n] as const;\n\n/**\n *  Initializes a GLSP Diagram container with the GLSP default modules and the specified custom `modules`.\n *  Additional modules can be passed as direct arguments or as part of a {@link ModuleConfiguration}.\n *  ```typescript\n *  const container= createDiagramContainer(myModule1, myModule2)\n *  // or\n *  const container= createDiagramContainer({ add: [myModule1, myModule2]})\n *  ```\n *  Default modules can be excluded using {@link ModuleConfiguration}s.\n *  This means, you can still customize the default modules in two ways.\n *\n * First, you can exclude default modules and add a module with your custom code.\n *\n * ```typescript\n * const container = createDiagramContainer({ add:myModelSourceWatcherModule, remove: modelSourceWatcherModule} );\n * ```\n *\n * Second, you can unbind or rebind implementations that are originally bound in one of the default modules.\n *\n * ```typescript\n * rebind(NavigationTargetResolver).to(MyNavigationTargetResolver);\n * ```\n *\n * @param containerConfiguration\n *          Custom modules to be loaded in addition to the default modules and/or default modules that should be excluded.\n * @returns The initialized container.\n */\nexport function initializeDiagramContainer(container: Container, ...containerConfiguration: ContainerConfiguration): Container {\n    return initializeContainer(container, ...DEFAULT_MODULES, ...containerConfiguration);\n}\n\n/**\n * Creates a GLSP Client container with the GLSP default modules and the specified custom `modules`.\n *\n * You can still customize the default modules in two ways.\n *\n * First, you can unload default modules and load them again with your custom code.\n *\n * ```typescript\n * const container = createClientContainer(myModule1, myModule2);\n * container.unload(modelSourceWatcherModule);\n * container.load(myModelSourceWatcherModule);\n * ```\n *\n * Second, you can unbind or rebind implementations that are originally bound in one of the default modules.\n *\n * ```typescript\n * rebind(NavigationTargetResolver).to(MyNavigationTargetResolver);\n * ```\n * @param modules Custom modules to be loaded in addition to the default modules.\n * @returns The created container.\n * @deprecated Please use `initializeDiagramContainer` from `@eclipse-glsp/client` instead\n */\nexport function createClientContainer(...modules: ContainerModule[]): Container {\n    return initializeDiagramContainer(new Container(), ...modules);\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport '@vscode/codicons/dist/codicon.css';\nimport { Container, ContainerModule } from 'inversify';\nimport {\n    ActionHandlerRegistry,\n    bindAsService,\n    bindOrRebind,\n    configureActionHandler,\n    configureCommand,\n    InitializeResult,\n    ModelSource,\n    SetEditModeAction,\n    SetModelCommand,\n    TYPES\n} from '~glsp-sprotty';\nimport '../../css/glsp-sprotty.css';\nimport { GLSPActionDispatcher } from './action-dispatcher';\nimport { FocusStateChangedAction } from './actions/focus-change-action';\nimport { GLSPCommandStack } from './command-stack';\nimport { EditorContextService } from './editor-context-service';\nimport { FocusTracker } from './focus-tracker';\nimport { DefaultModelInitializationConstraint, ModelInitializationConstraint } from './model-initialization-constraint';\nimport { GLSPModelRegistry } from './model/model-registry';\nimport { FeedbackAwareUpdateModelCommand, SetModelActionHandler } from './model/update-model-command';\nimport { SelectionClearingMouseListener } from './selection-clearing-mouse-listener';\nimport { GLSPToolManager } from './tool-manager/glsp-tool-manager';\nimport { GLSPViewRegistry } from './view/view-registry';\n\nconst defaultGLSPModule = new ContainerModule((bind, _unbind, isBound, rebind) => {\n    const context = { bind, _unbind, isBound, rebind };\n    bind(EditorContextService).toSelf().inSingletonScope();\n    bind(TYPES.IEditorContextServiceProvider).toProvider<EditorContextService>(\n        ctx => () =>\n            new Promise<EditorContextService>((resolve, reject) => {\n                if (ctx.container.isBound(EditorContextService)) {\n                    resolve(ctx.container.get<EditorContextService>(EditorContextService));\n                } else {\n                    reject();\n                }\n            })\n    );\n\n    configureActionHandler(context, SetEditModeAction.KIND, EditorContextService);\n\n    bind(FocusTracker).toSelf().inSingletonScope();\n    configureActionHandler(context, FocusStateChangedAction.KIND, FocusTracker);\n\n    // Model update initialization ------------------------------------\n    configureCommand(context, FeedbackAwareUpdateModelCommand);\n    configureActionHandler(context, SetModelCommand.KIND, SetModelActionHandler);\n\n    bindAsService(context, TYPES.MouseListener, SelectionClearingMouseListener);\n\n    bindOrRebind(context, TYPES.ICommandStack).to(GLSPCommandStack);\n    bind(GLSPToolManager).toSelf().inSingletonScope();\n    bindOrRebind(context, TYPES.IToolManager).toService(GLSPToolManager);\n    bind(GLSPActionDispatcher).toSelf().inSingletonScope();\n    bindOrRebind(context, TYPES.IActionDispatcher).toService(GLSPActionDispatcher);\n\n    bind(ModelInitializationConstraint).to(DefaultModelInitializationConstraint).inSingletonScope();\n\n    // support re-registration of model elements and views\n    bindOrRebind(context, TYPES.SModelRegistry).to(GLSPModelRegistry).inSingletonScope();\n    bindOrRebind(context, TYPES.ViewRegistry).to(GLSPViewRegistry).inSingletonScope();\n});\n\nexport default defaultGLSPModule;\n\n/**\n * Utility function to configure the {@link ModelSource}, i.e. the `DiagramServer`, as action handler for all server actions for the given\n * diagramType.\n * @param result A promise that resolves after all server actions have been registered.\n * @param diagramType The diagram type.\n * @param container The di container.\n */\nexport async function configureServerActions(result: InitializeResult, diagramType: string, container: Container): Promise<void> {\n    const modelSource = container.get<ModelSource>(TYPES.ModelSource);\n    const actionHandlerRegistry = container.get<ActionHandlerRegistry>(ActionHandlerRegistry);\n    const serverActions = result.serverActions[diagramType];\n    if (serverActions.length === 0) {\n        throw new Error(`No server-handled actions could be derived from the initialize result for diagramType: ${diagramType}!`);\n    }\n    serverActions.forEach(actionKind => actionHandlerRegistry.register(actionKind, modelSource));\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, MouseListener, SModelElement } from '~glsp-sprotty';\n\n/**\n * A mouse listener that is aware of prior mouse dragging.\n *\n * Therefore, this listener distinguishes between mouse up events after dragging and\n * mouse up events without prior dragging. Subclasses may override the methods\n * `draggingMouseUp` and/or `nonDraggingMouseUp` to react to only these specific kinds\n * of mouse up events.\n */\nexport class DragAwareMouseListener extends MouseListener {\n    private _isMouseDown = false;\n    private _isMouseDrag = false;\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        this._isMouseDown = true;\n        return [];\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        if (this._isMouseDown) {\n            this._isMouseDrag = true;\n        }\n        return [];\n    }\n\n    override mouseUp(element: SModelElement, event: MouseEvent): Action[] {\n        this._isMouseDown = false;\n        if (this._isMouseDrag) {\n            this._isMouseDrag = false;\n            return this.draggingMouseUp(element, event);\n        }\n\n        return this.nonDraggingMouseUp(element, event);\n    }\n\n    nonDraggingMouseUp(element: SModelElement, event: MouseEvent): Action[] {\n        return [];\n    }\n\n    draggingMouseUp(element: SModelElement, event: MouseEvent): Action[] {\n        return [];\n    }\n\n    get isMouseDrag(): boolean {\n        return this._isMouseDrag;\n    }\n\n    get isMouseDown(): boolean {\n        return this._isMouseDown;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport {\n    Action,\n    Args,\n    EditMode,\n    EditorContext,\n    IActionHandler,\n    ModelSource,\n    MousePositionTracker,\n    SModelElement,\n    SModelRoot,\n    SetEditModeAction,\n    TYPES,\n    distinctAdd,\n    remove\n} from '~glsp-sprotty';\nimport { SelectionService } from '../features/select/selection-service';\nimport { isSourceUriAware } from './source-uri-aware';\n\nexport interface EditModeListener {\n    editModeChanged(newValue: string, oldValue: string): void;\n}\n\n/**\n * The `EditorContextService` is a central injectable component that gives read-only access to\n * certain aspects of the diagram, such as the currently selected elements, the model root,\n * the edit mode, the latest position of the mouse in the diagram.\n *\n * It has been introduced for two main reasons:\n * 1. to simplify accessing the model root and the current selection from components that are\n *    not commands,\n * 2. to conveniently create an EditorContext, which is a context object sent as part of several\n *    actions to the server to describe the current state of the editor (selection, last mouse\n *    position, etc.).\n */\n@injectable()\nexport class EditorContextService implements IActionHandler {\n    @inject(TYPES.SelectionService)\n    protected selectionService: SelectionService;\n\n    @inject(MousePositionTracker)\n    protected mousePositionTracker: MousePositionTracker;\n\n    @multiInject(TYPES.IEditModeListener)\n    @optional()\n    protected editModeListeners: EditModeListener[] = [];\n\n    @inject(TYPES.ModelSourceProvider)\n    protected modelSourceProvider: () => Promise<ModelSource>;\n\n    protected _editMode: string;\n\n    register(editModeListener: EditModeListener): void {\n        distinctAdd(this.editModeListeners, editModeListener);\n    }\n\n    deregister(editModeListener: EditModeListener): void {\n        remove(this.editModeListeners, editModeListener);\n    }\n\n    get(args?: Args): EditorContext {\n        return {\n            selectedElementIds: Array.from(this.selectionService.getSelectedElementIDs()),\n            lastMousePosition: this.mousePositionTracker.lastPositionOnDiagram,\n            args\n        };\n    }\n\n    getWithSelection(selectedElementIds: string[], args?: Args): EditorContext {\n        return {\n            selectedElementIds,\n            lastMousePosition: this.mousePositionTracker.lastPositionOnDiagram,\n            args\n        };\n    }\n\n    handle(action: Action): void {\n        if (SetEditModeAction.is(action)) {\n            const oldValue = this._editMode;\n            this._editMode = action.editMode;\n            this.notifyEditModeListeners(oldValue);\n        }\n    }\n\n    protected notifyEditModeListeners(oldValue: string): void {\n        this.editModeListeners.forEach(listener => listener.editModeChanged(oldValue, this.editMode));\n    }\n\n    async getSourceUri(): Promise<string | undefined> {\n        const modelSource = await this.modelSourceProvider();\n        if (isSourceUriAware(modelSource)) {\n            return modelSource.sourceURI;\n        }\n        return undefined;\n    }\n\n    get editMode(): string {\n        return this._editMode;\n    }\n\n    get modelRoot(): Readonly<SModelRoot> {\n        return this.selectionService.getModelRoot();\n    }\n\n    get selectedElements(): Readonly<SModelElement>[] {\n        return this.selectionService.getSelectedElements();\n    }\n\n    get isReadonly(): boolean {\n        return this.editMode === EditMode.READONLY;\n    }\n}\n\nexport type EditorContextServiceProvider = () => Promise<EditorContextService>;\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { Action, IActionHandler, ICommand, TYPES, ViewerOptions } from '~glsp-sprotty';\nimport { FocusStateChangedAction } from './actions/focus-change-action';\n\n@injectable()\nexport class FocusTracker implements IActionHandler {\n    protected inActiveCssClass = 'inactive';\n    protected _hasFocus = true;\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n\n    get hasFocus(): boolean {\n        return this._hasFocus;\n    }\n\n    handle(action: Action): void | Action | ICommand {\n        if (FocusStateChangedAction.is(action)) {\n            this._hasFocus = action.hasFocus;\n            const placeholder = document.getElementById(this.options.baseDiv);\n            if (!placeholder) {\n                return;\n            }\n            if (this.hasFocus) {\n                if (placeholder.classList.contains(this.inActiveCssClass)) {\n                    placeholder.classList.remove(this.inActiveCssClass);\n                }\n            } else {\n                placeholder.classList.add(this.inActiveCssClass);\n            }\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Action, Deferred, InitializeCanvasBoundsAction, SetModelAction, UpdateModelAction } from '~glsp-sprotty';\n\n/**\n * The constraint defining when the initialization of the GLSP model is completed.\n *\n * Many actions, such as the `CenterAction`, can only be successfully processed if\n * the GLSP model initialization is completed, that is, the model has been set,\n * its bounds have been computed, the canvas bounds are available, etc.\n *\n * An injectable implementation of this constraint will be used by the\n * `GLSPActionDispatcher` to determine when the initialization is completed.\n * The action dispatcher therefore provides a promise via `onceInitialized()`\n * to trigger clients that want to dispatch an action, once the initialization\n * is done.\n *\n * For most of the cases `DefaultInitializationConstraint` can be used. In fact,\n * it is bound by default. However, custom implementations can rebind other\n * implementations of this constraint to, for instance, delay further before the\n * `onceInitialized()` promise is fulfilled by the `GLSPActionDispatcher`.\n */\n@injectable()\nexport abstract class ModelInitializationConstraint {\n    protected completion: Deferred<void> = new Deferred();\n    protected completed = false;\n\n    get isCompleted(): boolean {\n        return this.completed;\n    }\n\n    protected setCompleted(isCompleted: boolean): void {\n        this.completed = isCompleted;\n        if (isCompleted) {\n            this.completion.resolve();\n        }\n    }\n\n    onInitialized(): Promise<void> {\n        return this.completion.promise;\n    }\n\n    notifyDispatched(action: Action): void {\n        if (this.isCompleted) {\n            return;\n        }\n        if (this.isInitializedAfter(action)) {\n            this.setCompleted(true);\n        }\n    }\n\n    abstract isInitializedAfter(action: Action): boolean;\n}\n\n/**\n * Default initialization constraint triggers after a non-empty `UpdateModelAction`\n * and a subsequent `InitializeCanvasBoundsAction`.\n */\n@injectable()\nexport class DefaultModelInitializationConstraint extends ModelInitializationConstraint {\n    protected seenNonEmptyModelAction = false;\n\n    isInitializedAfter(action: Action): boolean {\n        if (this.isNonEmptyModelAction(action)) {\n            this.seenNonEmptyModelAction = true;\n        } else if (this.seenNonEmptyModelAction && action.kind === InitializeCanvasBoundsAction.KIND) {\n            return true;\n        }\n        return false;\n    }\n\n    protected isNonEmptyModelAction(action: Action): boolean {\n        if (SetModelAction.is(action) || UpdateModelAction.is(action)) {\n            return action.newRoot.type !== 'NONE';\n        }\n        return false;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { SModelElement, SModelRegistry } from '~glsp-sprotty';\n\n@injectable()\nexport class GLSPModelRegistry extends SModelRegistry {\n    override register(key: string, factory: (u: void) => SModelElement): void {\n        if (key === undefined) {\n            throw new Error('Key is undefined');\n        }\n        if (this.hasKey(key)) {\n            // do not throw error but log overwriting\n            console.log(`Factory for model element '${key}' will be overwritten.`);\n        }\n        this.elements.set(key, factory);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport {\n    Action,\n    ActionHandlerRegistry,\n    Animation,\n    Command,\n    CommandActionHandler,\n    CommandExecutionContext,\n    CommandReturn,\n    IActionHandler,\n    ILogger,\n    MorphEdgesAnimation,\n    SModelRoot,\n    SetModelAction,\n    TYPES,\n    UpdateAnimationData,\n    UpdateModelAction,\n    UpdateModelCommand,\n    toTypeGuard\n} from '~glsp-sprotty';\nimport { IFeedbackActionDispatcher } from '../../features/tool-feedback/feedback-action-dispatcher';\nimport { FeedbackCommand } from '../../features/tool-feedback/model';\n\n/**\n * ActionHandler that transforms a {@link SetModelAction} into an {@link UpdateModelAction} that can be handled\n * by the {@link FeedbackAwareUpdateModelCommand}. This can be done because in sprotty an {@link UpdateModelCommand} and\n * a {@link SetModelCommand} have the same behavior of no model is present yet.\n */\n@injectable()\nexport class SetModelActionHandler implements IActionHandler {\n    handle(action: Action): Action | void {\n        if (SetModelAction.is(action)) {\n            return UpdateModelAction.create(action.newRoot, { animate: false });\n        }\n    }\n}\n\nexport interface SModelRootListener {\n    modelRootChanged(root: Readonly<SModelRoot>): void;\n}\n\n/**\n * A special {@link UpdateModelCommand} that retrieves all registered {@link Action}s from the {@link IFeedbackActionDispatcher}\n * (if present) and applies their feedback to the `newRoot` before performing the update. This enables persistent client-side feedback\n * across model updates initiated by the GLSP server.\n */\n@injectable()\nexport class FeedbackAwareUpdateModelCommand extends UpdateModelCommand {\n    @inject(TYPES.ILogger)\n    protected logger: ILogger;\n\n    @inject(TYPES.IFeedbackActionDispatcher)\n    @optional()\n    protected feedbackActionDispatcher: IFeedbackActionDispatcher;\n\n    @multiInject(TYPES.SModelRootListener)\n    @optional()\n    protected modelRootListeners: SModelRootListener[] = [];\n\n    protected actionHandlerRegistry?: ActionHandlerRegistry;\n\n    constructor(\n        @inject(TYPES.Action) action: UpdateModelAction,\n        @inject(TYPES.ActionHandlerRegistryProvider)\n        actionHandlerRegistryProvider: () => Promise<ActionHandlerRegistry>\n    ) {\n        super({ animate: true, ...action });\n        actionHandlerRegistryProvider().then(registry => (this.actionHandlerRegistry = registry));\n    }\n\n    protected override performUpdate(oldRoot: SModelRoot, newRoot: SModelRoot, context: CommandExecutionContext): CommandReturn {\n        if (this.feedbackActionDispatcher && this.actionHandlerRegistry) {\n            // Create a temporary context which defines the `newRoot` as `root`\n            // This way we do not corrupt the redo/undo behavior of the super class\n            const tempContext: CommandExecutionContext = {\n                ...context,\n                root: newRoot\n            };\n\n            const feedbackCommands = this.getFeedbackCommands(this.actionHandlerRegistry);\n            feedbackCommands.forEach(command => command.execute(tempContext));\n        }\n\n        this.modelRootListeners.forEach(listener => listener.modelRootChanged(newRoot));\n        return super.performUpdate(oldRoot, newRoot, context);\n    }\n\n    protected getFeedbackCommands(registry: ActionHandlerRegistry): Command[] {\n        const result: Command[] = [];\n        this.feedbackActionDispatcher.getRegisteredFeedback().forEach(action => {\n            const commands = registry\n                .get(action.kind)\n                .filter<CommandActionHandler>(toTypeGuard(CommandActionHandler))\n                .map(handler => handler.handle(action));\n            result.push(...commands);\n        });\n        // sort commands descanting by priority\n        return result.sort((a, b) => this.getPriority(b) - this.getPriority(a));\n    }\n\n    protected getPriority(command: Partial<FeedbackCommand>): number {\n        return command.priority ?? 0;\n    }\n\n    // Override the `createAnimations` implementation and remove the animation for edge morphing. Otherwise routing & reconnect\n    // handles flicker after each server update.\n    protected override createAnimations(data: UpdateAnimationData, root: SModelRoot, context: CommandExecutionContext): Animation[] {\n        const animations = super.createAnimations(data, root, context);\n        return animations.filter(animation => !(animation instanceof MorphEdgesAnimation));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { MouseListener, SModelElement } from '~glsp-sprotty';\n\n/**\n * A mouse listener that clears the document selection on click\n *\n * Clicking on SVG elements doesn't update the document selection. In the context of diagramming\n * with GLSP, this is unnatural, as the user would expect that clicking in the diagram (e.g. to\n * select a diagram element) would clear any other selection state in the DOM. From a technical\n * point of view, an active selection in the document after clicking into the diagram may also\n * lead to bogus target elements in certain browser events, such as clipboard events, etc.\n *\n * This listener helps to overcome this problem by actively clearing any existing selection in\n * the document, if the user clicks into the diagram.\n */\n@injectable()\nexport class SelectionClearingMouseListener extends MouseListener {\n    override mouseDown(_target: SModelElement, event: MouseEvent): never[] {\n        const selection = document.getSelection();\n        // eslint-disable-next-line no-null/no-null\n        if (selection === null) {\n            return [];\n        }\n        selection.removeAllRanges();\n        selection.addRange(document.createRange());\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { AnyObject, hasStringProp } from '~glsp-sprotty';\nexport interface SourceUriAware {\n    sourceURI: string;\n}\n\nexport function isSourceUriAware(obj: any): obj is SourceUriAware {\n    return AnyObject.is(obj) && hasStringProp(obj, 'sourceURI');\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional, postConstruct } from 'inversify';\nimport { AnyObject, EditMode, TYPES, Tool, ToolManager, distinctAdd, hasBooleanProp, hasFunctionProp, hasStringProp } from '~glsp-sprotty';\nimport { EditModeListener, EditorContextService, EditorContextServiceProvider } from '../editor-context-service';\n\n@injectable()\nexport class GLSPToolManager extends ToolManager implements EditModeListener {\n    protected editorContext?: EditorContextService;\n\n    @multiInject(TYPES.ITool) @optional() override tools: Tool[];\n    @multiInject(TYPES.IDefaultTool) @optional() override defaultTools: Tool[];\n    @inject(TYPES.IEditorContextServiceProvider) contextServiceProvider: EditorContextServiceProvider;\n\n    @postConstruct()\n    protected initialize(): void {\n        this.registerTools(...this.tools);\n        this.registerDefaultTools(...this.defaultTools);\n        this.enableDefaultTools();\n        this.contextServiceProvider().then(editorContext => {\n            editorContext.register(this);\n            this.editorContext = editorContext;\n        });\n    }\n\n    override registerDefaultTools(...tools: Tool[]): void {\n        for (const tool of tools) {\n            distinctAdd(this.defaultTools, tool);\n        }\n    }\n\n    override registerTools(...tools: Tool[]): void {\n        for (const tool of tools) {\n            distinctAdd(this.tools, tool);\n        }\n    }\n\n    override enable(toolIds: string[]): void {\n        this.disableActiveTools();\n        let tools = toolIds.map(id => this.tool(id));\n        if (this.editorContext && this.editorContext.isReadonly) {\n            tools = tools.filter(tool => tool && (!GLSPTool.is(tool) || tool.isEditTool === false));\n        }\n        tools.forEach(tool => {\n            if (tool !== undefined) {\n                tool.enable();\n                this.actives.push(tool);\n            }\n        });\n    }\n\n    disableEditTools(): void {\n        this.disableActiveTools();\n        this.enable(this.defaultTools.filter(tool => !GLSPTool.is(tool) || tool.isEditTool === false).map(tool => tool.id));\n    }\n\n    editModeChanged(oldValue: string, newValue: string): void {\n        if (oldValue === newValue) {\n            return;\n        }\n        if (newValue === EditMode.READONLY) {\n            this.disableEditTools();\n        } else if (newValue === EditMode.EDITABLE) {\n            this.enableDefaultTools();\n        }\n    }\n}\n\nexport interface GLSPTool extends Tool {\n    isEditTool: boolean;\n}\n\nexport namespace GLSPTool {\n    export function is(object: unknown): object is GLSPTool {\n        return (\n            AnyObject.is(object) &&\n            hasStringProp(object, 'id') &&\n            hasFunctionProp(object, 'enable') &&\n            hasFunctionProp(object, 'disable') &&\n            hasBooleanProp(object, 'isEditTool')\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { IView, ViewRegistry } from '~glsp-sprotty';\n\n@injectable()\nexport class GLSPViewRegistry extends ViewRegistry {\n    override register(key: string, instance: IView): void {\n        if (key === undefined) {\n            throw new Error('Key is undefined');\n        }\n        if (this.hasKey(key)) {\n            // do not throw error but log overwriting\n            console.log(`View instance for type '${key}' will be overwritten.`);\n        }\n        this.elements.set(key, instance);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { configureMoveZoom } from './move-zoom/di.config';\nimport { configureResizeTools } from './resize-key-tool/di.config';\nimport { configureSearchPaletteModule } from './search/di.config';\nimport { configureViewKeyTools } from './view-key-tools/di.config';\n\n/**\n * Enables the accessibility tools for a keyboard-only-usage\n */\nexport const glspAccessibilityModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    const context = { bind, unbind, isBound, rebind };\n    configureResizeTools(context);\n    configureViewKeyTools(context);\n    configureMoveZoom(context);\n    configureSearchPaletteModule(context);\n});\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { BindingContext, configureActionHandler } from '~glsp-sprotty';\nimport { MoveElementAction, MoveElementHandler, MoveViewportAction, MoveViewportHandler } from './move-handler';\nimport { ZoomElementAction, ZoomElementHandler, ZoomViewportAction, ZoomViewportHandler } from './zoom-handler';\n\n/**\n * Handles move and zoom actions.\n */\nexport const glspMoveZoomModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    const context = { bind, unbind, isBound, rebind };\n    configureMoveZoom(context);\n});\n\nexport function configureMoveZoom(context: BindingContext): void {\n    context.bind(MoveViewportHandler).toSelf().inSingletonScope();\n    context.bind(MoveElementHandler).toSelf().inSingletonScope();\n\n    context.bind(ZoomViewportHandler).toSelf().inSingletonScope();\n    context.bind(ZoomElementHandler).toSelf().inSingletonScope();\n\n    configureActionHandler(context, MoveViewportAction.KIND, MoveViewportHandler);\n    configureActionHandler(context, MoveElementAction.KIND, MoveElementHandler);\n\n    configureActionHandler(context, ZoomViewportAction.KIND, ZoomViewportHandler);\n    configureActionHandler(context, ZoomElementAction.KIND, ZoomElementHandler);\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { throttle } from 'lodash';\nimport {\n    Action,\n    ChangeBoundsOperation,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    Point,\n    SModelRoot,\n    SetViewportAction,\n    TYPES,\n    Viewport,\n    findParentByFeature,\n    isViewport\n} from '~glsp-sprotty';\nimport { EditorContextService } from '../../../base/editor-context-service';\nimport { SelectableBoundsAware, getElements, isSelectableAndBoundsAware } from '../../../utils/smodel-util';\n\n/**\n * Action for triggering moving of the viewport.\n */\nexport interface MoveViewportAction extends Action {\n    kind: typeof MoveViewportAction.KIND;\n    /**\n     * used to specify the amount to be moved in the x-axis\n     */\n    moveX: number;\n    /**\n     * used to specify the amount to be moved in the y-axis\n     */\n    moveY: number;\n}\n\nexport namespace MoveViewportAction {\n    export const KIND = 'moveViewportAction';\n\n    export function is(object: any): object is MoveViewportAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(moveX: number, moveY: number): MoveViewportAction {\n        return { kind: KIND, moveX, moveY };\n    }\n}\n\n/**\n * Action for triggering moving of elements.\n */\nexport interface MoveElementAction extends Action {\n    kind: typeof MoveElementAction.KIND;\n    /**\n     * used to specify the elements to be zoomed in/out\n     */\n    elementIds: string[];\n    /**\n     * used to specify the amount to be moved in the x-axis\n     */\n    moveX: number;\n    /**\n     * used to specify the amount to be moved in the y-axis\n     */\n    moveY: number;\n}\n\nexport namespace MoveElementAction {\n    export const KIND = 'moveElementAction';\n\n    export function is(object: any): object is MoveElementAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(elementIds: string[], moveX: number, moveY: number): MoveElementAction {\n        return { kind: KIND, elementIds, moveX, moveY };\n    }\n}\n\n/* The MoveViewportHandler class is an implementation of the IActionHandler interface that handles\nmoving of the viewport. */\n@injectable()\nexport class MoveViewportHandler implements IActionHandler {\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    protected readonly throttledHandleViewportMove = throttle((action: MoveViewportAction) => this.handleMoveViewport(action), 150);\n\n    handle(action: Action): void | Action | ICommand {\n        if (MoveViewportAction.is(action)) {\n            this.throttledHandleViewportMove(action);\n        }\n    }\n\n    handleMoveViewport(action: MoveViewportAction): void {\n        const viewport = findParentByFeature(this.editorContextService.modelRoot, isViewport);\n        if (!viewport) {\n            return;\n        }\n        this.dispatcher.dispatch(this.moveViewport(viewport, action.moveX, action.moveY));\n    }\n\n    protected moveViewport(viewport: SModelRoot & Viewport, offsetX: number, offSetY: number): SetViewportAction {\n        const newViewport: Viewport = {\n            scroll: {\n                x: viewport.scroll.x + offsetX,\n                y: viewport.scroll.y + offSetY\n            },\n            zoom: viewport.zoom\n        };\n\n        return SetViewportAction.create(viewport.id, newViewport, { animate: true });\n    }\n}\n\n/* The MoveElementHandler class is an implementation of the IActionHandler interface that handles\nmoving elements. */\n@injectable()\nexport class MoveElementHandler implements IActionHandler {\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    protected readonly throttledHandleElementMove = throttle((action: MoveElementAction) => this.handleMoveElement(action), 150);\n\n    handle(action: Action): void | Action | ICommand {\n        if (MoveElementAction.is(action)) {\n            this.throttledHandleElementMove(action);\n        }\n    }\n\n    handleMoveElement(action: MoveElementAction): void {\n        const viewport = findParentByFeature(this.editorContextService.modelRoot, isViewport);\n        if (!viewport) {\n            return;\n        }\n\n        const elements = getElements(this.editorContextService.modelRoot.index, action.elementIds, isSelectableAndBoundsAware);\n\n        this.dispatcher.dispatchAll(this.move(viewport, elements, action.moveX, action.moveY));\n    }\n\n    protected getBounds(element: SelectableBoundsAware, offSetX: number, offSetY: number): Point {\n        return { x: element.bounds.x + offSetX, y: element.bounds.y + offSetY };\n    }\n\n    protected adaptViewport(\n        viewport: SModelRoot & Viewport,\n        newPoint: Point,\n        moveX: number,\n        moveY: number\n    ): MoveViewportAction | undefined {\n        if (\n            newPoint.x < viewport.scroll.x ||\n            newPoint.x > viewport.scroll.x + viewport.canvasBounds.width ||\n            newPoint.y < viewport.scroll.y ||\n            newPoint.y > viewport.scroll.y + viewport.canvasBounds.height\n        ) {\n            return MoveViewportAction.create(moveX, moveY);\n        }\n        return;\n    }\n\n    protected moveElement(element: SelectableBoundsAware, offSetX: number, offSetY: number): ChangeBoundsOperation {\n        return ChangeBoundsOperation.create([\n            {\n                elementId: element.id,\n                newSize: {\n                    width: element.bounds.width,\n                    height: element.bounds.height\n                },\n                newPosition: {\n                    x: element.bounds.x + offSetX,\n                    y: element.bounds.y + offSetY\n                }\n            }\n        ]);\n    }\n\n    protected move(viewport: SModelRoot & Viewport, selectedElements: SelectableBoundsAware[], deltaX: number, deltaY: number): Action[] {\n        const results: Action[] = [];\n\n        if (selectedElements.length !== 0) {\n            selectedElements.forEach(currentElement => {\n                results.push(this.moveElement(currentElement, deltaX, deltaY));\n                const newPosition = this.getBounds(currentElement, deltaX, deltaY);\n                const viewportAction = this.adaptViewport(viewport, newPosition, deltaX, deltaY);\n                if (viewportAction) {\n                    results.push(viewportAction);\n                }\n            });\n        }\n        return results;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { throttle } from 'lodash';\nimport {\n    Action,\n    Bounds,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    Point,\n    SChildElement,\n    SModelElement,\n    SModelRoot,\n    SetViewportAction,\n    TYPES,\n    Viewport,\n    findParentByFeature,\n    isViewport\n} from '~glsp-sprotty';\nimport { EditorContextService } from '../../../base/editor-context-service';\nimport { SelectableBoundsAware, getElements, isSelectableAndBoundsAware } from '../../../utils/smodel-util';\n\n/**\n * Action for triggering zooming of the viewport.\n */\nexport interface ZoomViewportAction extends Action {\n    kind: typeof ZoomViewportAction.KIND;\n    /**\n     * used to specify the amount by which the viewport should be zoomed\n     */\n    zoomFactor: number;\n}\n\nexport namespace ZoomViewportAction {\n    export const KIND = 'zoomViewportAction';\n\n    export function is(object: any): object is ZoomViewportAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(zoomFactor: number): ZoomViewportAction {\n        return { kind: KIND, zoomFactor };\n    }\n}\n\n/**\n * Action for triggering zooming of the elements..\n */\nexport interface ZoomElementAction extends Action {\n    kind: typeof ZoomElementAction.KIND;\n    /**\n     * used to specify the elements to be zoomed in/out\n     */\n    elementIds: string[];\n    /**\n     * used to specify the amount by which the viewport should be zoomed\n     */\n    zoomFactor: number;\n}\n\nexport namespace ZoomElementAction {\n    export const KIND = 'zoomElementAction';\n\n    export function is(object: any): object is ZoomElementAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(elementIds: string[], zoomFactor: number): ZoomElementAction {\n        return { kind: KIND, elementIds, zoomFactor };\n    }\n}\n\n/* The ZoomViewportHandler class is an implementation of the IActionHandler interface that handles\nzooming in and out of a viewport. */\n@injectable()\nexport class ZoomViewportHandler implements IActionHandler {\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n\n    static readonly defaultZoomInFactor = 1.1;\n    static readonly defaultZoomOutFactor = 0.9;\n\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    protected readonly throttledHandleViewportZoom = throttle((action: ZoomViewportAction) => this.handleZoomViewport(action), 150);\n\n    handle(action: Action): void {\n        if (ZoomViewportAction.is(action)) {\n            this.throttledHandleViewportZoom(action);\n        }\n    }\n\n    handleZoomViewport(action: ZoomViewportAction): void {\n        const viewport = findParentByFeature(this.editorContextService.modelRoot, isViewport);\n        if (!viewport) {\n            return;\n        }\n        this.dispatcher.dispatch(this.setNewZoomFactor(viewport, action.zoomFactor));\n    }\n\n    protected setNewZoomFactor(viewport: SModelRoot & Viewport, zoomFactor: number): SetViewportAction {\n        const newZoom = viewport.zoom * zoomFactor;\n\n        const newViewport = {\n            scroll: viewport.scroll,\n            zoom: newZoom\n        };\n\n        return SetViewportAction.create(viewport.id, newViewport, { animate: true });\n    }\n}\n\n/* The ZoomElementHandler class is an implementation of the IActionHandler interface that handles\nzooming in and out of elements. */\n@injectable()\nexport class ZoomElementHandler implements IActionHandler {\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    protected readonly throttledHandleElementZoom = throttle((action: ZoomElementAction) => this.handleZoomElement(action), 150);\n\n    handle(action: Action): void | Action | ICommand {\n        if (ZoomElementAction.is(action)) {\n            this.throttledHandleElementZoom(action);\n        }\n    }\n\n    handleZoomElement(action: ZoomElementAction): void {\n        const viewport = findParentByFeature(this.editorContextService.modelRoot, isViewport);\n        if (!viewport) {\n            return;\n        }\n\n        const elements = getElements(this.editorContextService.modelRoot.index, action.elementIds, isSelectableAndBoundsAware);\n        const center = this.getCenter(viewport, elements);\n        this.dispatcher.dispatch(this.setNewZoomFactor(viewport, action.zoomFactor, center));\n    }\n\n    protected getCenter(viewport: SModelRoot & Viewport, selectedElements: SelectableBoundsAware[]): Point {\n        // Get bounds of elements based on the viewport\n        const allBounds = selectedElements.map(e => this.boundsInViewport(viewport, e, e.bounds));\n        const mergedBounds = allBounds.reduce((b0, b1) => Bounds.combine(b0, b1));\n        return Bounds.center(mergedBounds);\n    }\n\n    // copy from center-fit.ts, translates the children bounds to the viewport bounds\n    protected boundsInViewport(viewport: SModelRoot & Viewport, element: SModelElement, bounds: Bounds): Bounds {\n        if (element instanceof SChildElement && element.parent !== viewport) {\n            return this.boundsInViewport(viewport, element.parent, element.parent.localToParent(bounds) as Bounds);\n        } else {\n            return bounds;\n        }\n    }\n\n    protected setNewZoomFactor(viewport: SModelRoot & Viewport, zoomFactor: number, point: Point): SetViewportAction {\n        const newZoom = viewport.zoom * zoomFactor;\n\n        const newViewport = {\n            scroll: {\n                x: point.x - (0.5 * viewport.canvasBounds.width) / newZoom,\n                y: point.y - (0.5 * viewport.canvasBounds.height) / newZoom\n            },\n            zoom: newZoom\n        };\n\n        return SetViewportAction.create(viewport.id, newViewport, { animate: true });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, BindingContext, configureActionHandler, TYPES } from '~glsp-sprotty';\nimport { ResizeElementAction, ResizeElementHandler } from './resize-key-handler';\nimport { ResizeKeyTool } from './resize-key-tool';\n\n/**\n * Handles resize actions.\n */\nexport const glspResizeKeyModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    const context = { bind, unbind, isBound, rebind };\n    configureResizeTools(context);\n});\n\nexport function configureResizeTools(context: BindingContext): void {\n    context.bind(ResizeElementHandler).toSelf().inSingletonScope();\n\n    configureActionHandler(context, ResizeElementAction.KIND, ResizeElementHandler);\n    bindAsService(context, TYPES.IDefaultTool, ResizeKeyTool);\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    ChangeBoundsOperation,\n    Dimension,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    ISnapper,\n    Point,\n    SModelElement,\n    SParentElement,\n    TYPES\n} from '~glsp-sprotty';\nimport { EditorContextService } from '../../../base/editor-context-service';\nimport { isValidMove, isValidSize, minHeight, minWidth } from '../../../utils/layout-utils';\nimport { SelectableBoundsAware, getElements, isSelectableAndBoundsAware, toElementAndBounds } from '../../../utils/smodel-util';\nimport { Resizable } from '../../change-bounds/model';\nimport { GridSnapper } from '../../change-bounds/snap';\n\nexport enum ResizeType {\n    Increase,\n    Decrease,\n    MinSize\n}\n\n/**\n * Action for triggering resizing of elements.\n */\nexport interface ResizeElementAction extends Action {\n    kind: typeof ResizeElementAction.KIND;\n    elementIds: string[];\n    resizeType: ResizeType;\n}\nexport namespace ResizeElementAction {\n    export const KIND = 'resizeElementAction';\n\n    export function is(object: any): object is ResizeElementAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(elementIds: string[], resizeType: ResizeType): ResizeElementAction {\n        return { kind: KIND, elementIds, resizeType };\n    }\n}\n\n/* The ResizeElementHandler class is an implementation of the IActionHandler interface that handles\nresizing of elements. */\n@injectable()\nexport class ResizeElementHandler implements IActionHandler {\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n\n    // Default x resize used if GridSnapper is not provided\n    static readonly defaultResizeX = 20;\n\n    // Default y resize used if GridSnapper is not provided\n    static readonly defaultResizeY = 20;\n    protected grid = { x: ResizeElementHandler.defaultResizeX, y: ResizeElementHandler.defaultResizeY };\n\n    protected isEditMode = false;\n\n    constructor(@inject(TYPES.ISnapper) @optional() protected readonly snapper?: ISnapper) {\n        if (snapper instanceof GridSnapper) {\n            this.grid = snapper.grid;\n        }\n    }\n\n    handle(action: Action): void | Action | ICommand {\n        if (ResizeElementAction.is(action)) {\n            this.handleResizeElement(action);\n        }\n    }\n\n    handleResizeElement(action: ResizeElementAction): void {\n        const elements = getElements(this.editorContextService.modelRoot.index, action.elementIds, isSelectableAndBoundsAware);\n        this.dispatcher.dispatchAll(this.resize(elements, action));\n    }\n\n    protected resize(elements: SelectableBoundsAware[], action: ResizeElementAction): Action[] {\n        const actions: Action[] = [];\n\n        elements.forEach(element => {\n            const { x, y, width: oldWidth, height: oldHeight } = element.bounds;\n            let width = 0;\n            let height = 0;\n\n            if (action.resizeType === ResizeType.Decrease) {\n                width = oldWidth - this.grid.x;\n                height = oldHeight - this.grid.y;\n            } else if (action.resizeType === ResizeType.Increase) {\n                width = oldWidth + this.grid.x;\n                height = oldHeight + this.grid.y;\n            } else if (action.resizeType === ResizeType.MinSize) {\n                width = minWidth(element);\n                height = minHeight(element);\n            }\n\n            if (this.isValidBoundChange(element, { x, y }, { width, height })) {\n                const resizeElement = { id: element.id, bounds: { x, y, width, height } } as SModelElement & SParentElement & Resizable;\n                actions.push(ChangeBoundsOperation.create([toElementAndBounds(resizeElement)]));\n            }\n        });\n\n        return actions;\n    }\n\n    protected isValidBoundChange(element: SelectableBoundsAware, newPosition: Point, newSize: Dimension): boolean {\n        return isValidSize(element, newSize) && isValidMove(element, newPosition);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { matchesKeystroke } from 'sprotty/lib/utils/keyboard';\nimport { Action, EnableDefaultToolsAction, EnableToolsAction, ISnapper, KeyListener, KeyTool, SModelElement, TYPES } from '~glsp-sprotty';\nimport { GLSPTool } from '../../../base/tool-manager/glsp-tool-manager';\nimport { IMovementRestrictor } from '../../change-bounds/movement-restrictor';\nimport { SelectionService } from '../../select/selection-service';\nimport { ResizeElementAction, ResizeType } from './resize-key-handler';\n\n@injectable()\nexport class ResizeKeyTool implements GLSPTool {\n    static ID = 'glsp.resize-key-tool';\n\n    isEditTool = true;\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n    @inject(TYPES.IMovementRestrictor) @optional() readonly movementRestrictor?: IMovementRestrictor;\n    @inject(TYPES.ISnapper) @optional() readonly snapper?: ISnapper;\n    @inject(TYPES.SelectionService) readonly selectionService: SelectionService;\n\n    protected resizeKeyListener: ResizeKeyListener = new ResizeKeyListener(this);\n\n    get id(): string {\n        return ResizeKeyTool.ID;\n    }\n\n    enable(): void {\n        this.keytool.register(this.resizeKeyListener);\n    }\n\n    disable(): void {\n        this.keytool.deregister(this.resizeKeyListener);\n    }\n}\n@injectable()\nexport class ResizeKeyListener extends KeyListener {\n    protected isEditMode = false;\n\n    constructor(protected readonly tool: ResizeKeyTool) {\n        super();\n    }\n\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        const actions = [];\n        const selectedElementsIds = this.tool.selectionService.getSelectedElementIDs();\n\n        if (this.isEditMode && this.matchesDeactivateResizeModeKeystroke(event)) {\n            this.isEditMode = false;\n            actions.push(EnableDefaultToolsAction.create());\n        }\n\n        if (selectedElementsIds.length > 0) {\n            if (!this.isEditMode && this.matchesActivateResizeModeKeystroke(event)) {\n                this.isEditMode = true;\n                actions.push(EnableToolsAction.create([ResizeKeyTool.ID]));\n            }\n\n            if (this.isEditMode) {\n                if (this.matchesIncreaseSizeKeystroke(event)) {\n                    actions.push(ResizeElementAction.create(selectedElementsIds, ResizeType.Increase));\n                } else if (this.matchesDecreaseSizeKeystroke(event)) {\n                    actions.push(ResizeElementAction.create(selectedElementsIds, ResizeType.Decrease));\n                } else if (this.matchesMinSizeKeystroke(event)) {\n                    actions.push(ResizeElementAction.create(selectedElementsIds, ResizeType.MinSize));\n                }\n            }\n        }\n        return actions;\n    }\n\n    protected matchesIncreaseSizeKeystroke(event: KeyboardEvent): boolean {\n        /** here event.key is used for '+', as keycode 187 is already declared for 'Equals' in {@link matchesKeystroke}.*/\n        return event.key === '+' || matchesKeystroke(event, 'NumpadAdd');\n    }\n\n    protected matchesActivateResizeModeKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'KeyA', 'alt');\n    }\n\n    protected matchesDeactivateResizeModeKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Escape');\n    }\n\n    protected matchesMinSizeKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Digit0', 'ctrl') || matchesKeystroke(event, 'Numpad0', 'ctrl');\n    }\n\n    protected matchesDecreaseSizeKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Minus') || matchesKeystroke(event, 'NumpadSubtract');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, BindingContext, TYPES } from '~glsp-sprotty';\nimport { SearchAutocompletePalette } from './search-palette';\nimport { SearchAutocompletePaletteTool } from './search-tool';\n\nexport const glspSearchPaletteModule = new ContainerModule((bind, _unbind, isBound, rebind) => {\n    const context = { bind, isBound, rebind };\n    configureSearchPaletteModule(context);\n});\n\nexport function configureSearchPaletteModule(context: Pick<BindingContext, 'bind'>): void {\n    bindAsService(context, TYPES.IUIExtension, SearchAutocompletePalette);\n    bindAsService(context, TYPES.IDefaultTool, SearchAutocompletePaletteTool);\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { isEqual } from 'lodash';\nimport { toArray } from 'sprotty/lib/utils/iterable';\nimport {\n    Action,\n    CenterAction,\n    LabeledAction,\n    SEdge,\n    SModelElement,\n    SModelRoot,\n    SNode,\n    SelectAction,\n    SelectAllAction,\n    codiconCSSString,\n    isNameable,\n    name\n} from '~glsp-sprotty';\nimport { AutocompleteSuggestion, IAutocompleteSuggestionProvider } from '../../autocomplete-palette/autocomplete-suggestion-providers';\nimport { BaseAutocompletePalette } from '../../autocomplete-palette/base-autocomplete-palette';\n\nimport { applyCssClasses, deleteCssClasses } from '../../tool-feedback/css-feedback';\n\nconst CSS_SEARCH_HIDDEN = 'search-hidden';\nconst CSS_SEARCH_HIGHLIGHTED = 'search-highlighted';\n\nexport class RevealNamedElementAutocompleteSuggestionProvider implements IAutocompleteSuggestionProvider {\n    async retrieveSuggestions(root: Readonly<SModelRoot>, text: string): Promise<AutocompleteSuggestion[]> {\n        const nameables = toArray(root.index.all().filter(element => isNameable(element)));\n        return nameables.map(nameable => ({\n            element: nameable,\n            action: {\n                label: `[${nameable.type}] ${name(nameable) ?? '<no-name>'}`,\n                actions: this.getActions(nameable),\n                icon: codiconCSSString('eye')\n            }\n        }));\n    }\n\n    protected getActions(nameable: SModelElement): Action[] {\n        return [SelectAction.create({ selectedElementsIDs: [nameable.id] }), CenterAction.create([nameable.id], { retainZoom: true })];\n    }\n}\n\nexport class RevealEdgeElementAutocompleteSuggestionProvider implements IAutocompleteSuggestionProvider {\n    async retrieveSuggestions(root: Readonly<SModelRoot>, text: string): Promise<AutocompleteSuggestion[]> {\n        const edges = toArray(root.index.all().filter(element => element instanceof SEdge)) as SEdge[];\n        return edges.map(edge => ({\n            element: edge,\n            action: {\n                label: `[${edge.type}]  ${this.getEdgeLabel(root, edge)}`,\n                actions: this.getActions(edge),\n                icon: codiconCSSString('arrow-both')\n            }\n        }));\n    }\n    protected getActions(edge: SEdge): Action[] {\n        return [SelectAction.create({ selectedElementsIDs: [edge.id] }), CenterAction.create([edge.sourceId, edge.targetId])];\n    }\n    protected getEdgeLabel(root: Readonly<SModelRoot>, edge: SEdge): string {\n        let sourceName = '';\n        let targetName = '';\n\n        const sourceNode = root.index.getById(edge.sourceId);\n        const targetNode = root.index.getById(edge.targetId);\n\n        if (sourceNode !== undefined) {\n            sourceName = name(sourceNode) ?? sourceNode.type;\n        }\n        if (targetNode !== undefined) {\n            targetName = name(targetNode) ?? targetNode.type;\n        }\n\n        return sourceName + ' -> ' + targetName;\n    }\n}\n@injectable()\nexport class SearchAutocompletePalette extends BaseAutocompletePalette {\n    static readonly ID = 'search-autocomplete-palette';\n\n    protected cachedSuggestions: AutocompleteSuggestion[] = [];\n\n    id(): string {\n        return SearchAutocompletePalette.ID;\n    }\n\n    protected override initializeContents(containerElement: HTMLElement): void {\n        super.initializeContents(containerElement);\n\n        this.autocompleteWidget.inputField.placeholder = 'Search for elements';\n    }\n    protected getSuggestionProviders(root: Readonly<SModelRoot>, input: string): IAutocompleteSuggestionProvider[] {\n        return [new RevealNamedElementAutocompleteSuggestionProvider(), new RevealEdgeElementAutocompleteSuggestionProvider()];\n    }\n    protected async retrieveSuggestions(root: Readonly<SModelRoot>, input: string): Promise<LabeledAction[]> {\n        const providers = this.getSuggestionProviders(root, input);\n        const suggestions = (await Promise.all(providers.map(provider => provider.retrieveSuggestions(root, input)))).flat(1);\n\n        this.cachedSuggestions = suggestions;\n\n        return suggestions.map(s => s.action);\n    }\n\n    protected override async visibleSuggestionsChanged(root: Readonly<SModelRoot>, labeledActions: LabeledAction[]): Promise<void> {\n        await this.applyCSS(this.getHiddenElements(root, this.getSuggestionsFromLabeledActions(labeledActions)), CSS_SEARCH_HIDDEN);\n        await this.deleteCSS(\n            this.getSuggestionsFromLabeledActions(labeledActions).map(s => s.element),\n            CSS_SEARCH_HIDDEN\n        );\n    }\n\n    protected override async selectedSuggestionChanged(\n        root: Readonly<SModelRoot>,\n        labeledAction?: LabeledAction | undefined\n    ): Promise<void> {\n        await this.deleteAllCSS(root, CSS_SEARCH_HIGHLIGHTED);\n        if (labeledAction !== undefined) {\n            const suggestions = this.getSuggestionsFromLabeledActions([labeledAction]);\n\n            const actions: CenterAction[] = [];\n            suggestions.map(currElem => actions.push(CenterAction.create([currElem.element.id], { animate: true, retainZoom: true })));\n\n            this.actionDispatcher.dispatchAll(actions);\n            await this.applyCSS(\n                suggestions.map(s => s.element),\n                CSS_SEARCH_HIGHLIGHTED\n            );\n        }\n    }\n\n    public override show(root: Readonly<SModelRoot>, ...contextElementIds: string[]): void {\n        this.actionDispatcher.dispatch(SelectAllAction.create(false));\n\n        super.show(root, ...contextElementIds);\n    }\n\n    public override hide(): void {\n        if (this.root !== undefined) {\n            this.deleteAllCSS(this.root, CSS_SEARCH_HIDDEN);\n            this.deleteAllCSS(this.root, CSS_SEARCH_HIGHLIGHTED);\n            this.autocompleteWidget.inputField.value = '';\n        }\n\n        super.hide();\n    }\n\n    protected applyCSS(elements: SModelElement[], cssClass: string): Promise<void> {\n        const actions = elements.map(element => applyCssClasses(element, cssClass));\n        return this.actionDispatcher.dispatchAll(actions);\n    }\n\n    protected deleteCSS(elements: SModelElement[], cssClass: string): Promise<void> {\n        const actions = elements.map(element => deleteCssClasses(element, cssClass));\n        return this.actionDispatcher.dispatchAll(actions);\n    }\n\n    protected deleteAllCSS(root: Readonly<SModelRoot>, cssClass: string): Promise<void> {\n        const actions = toArray(root.index.all().map(element => deleteCssClasses(element, cssClass)));\n        return this.actionDispatcher.dispatchAll(actions);\n    }\n\n    protected getSuggestionsFromLabeledActions(labeledActions: LabeledAction[]): AutocompleteSuggestion[] {\n        return this.cachedSuggestions.filter(c => labeledActions.find(s => isEqual(s, c.action)));\n    }\n\n    protected getHiddenSuggestionsFromLabeledActions(labeledActions: LabeledAction[]): AutocompleteSuggestion[] {\n        return this.cachedSuggestions.filter(c => !labeledActions.find(s => isEqual(s, c.action)));\n    }\n\n    protected getHiddenElements(root: Readonly<SModelRoot>, suggestions: AutocompleteSuggestion[]): SModelElement[] {\n        return toArray(\n            root.index\n                .all()\n                .filter(element => element instanceof SNode || element instanceof SEdge)\n                .filter(element => suggestions.find(suggestion => suggestion.element.id === element.id) === undefined)\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { matchesKeystroke } from 'sprotty/lib/utils/keyboard';\nimport { Action, KeyListener, KeyTool, SModelElement, SetUIExtensionVisibilityAction, Tool } from '~glsp-sprotty';\nimport { SearchAutocompletePalette } from './search-palette';\n\n@injectable()\nexport class SearchAutocompletePaletteTool implements Tool {\n    static readonly ID = 'glsp.search-autocomplete-palette-tool';\n\n    protected readonly keyListener = new SearchAutocompletePaletteKeyListener();\n\n    @inject(KeyTool) protected keyTool: KeyTool;\n\n    get id(): string {\n        return SearchAutocompletePaletteTool.ID;\n    }\n\n    enable(): void {\n        this.keyTool.register(this.keyListener);\n    }\n\n    disable(): void {\n        this.keyTool.deregister(this.keyListener);\n    }\n}\n\nexport class SearchAutocompletePaletteKeyListener extends KeyListener {\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        if (this.matchesSearchActivateKeystroke(event)) {\n            return [\n                SetUIExtensionVisibilityAction.create({\n                    extensionId: SearchAutocompletePalette.ID,\n                    visible: true\n                })\n            ];\n        }\n        return [];\n    }\n\n    protected matchesSearchActivateKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'KeyF', 'ctrl');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { toArray } from 'sprotty/lib/utils/iterable';\nimport { matchesKeystroke } from 'sprotty/lib/utils/keyboard';\nimport {\n    Action,\n    KeyListener,\n    KeyTool,\n    SModelElement,\n    SRoutableElement,\n    SelectAction,\n    SwitchEditModeAction,\n    isSelectable\n} from '~glsp-sprotty';\nimport { GLSPTool } from '../../../base/tool-manager/glsp-tool-manager';\nimport { SResizeHandle } from '../../change-bounds/model';\n\n/**\n * Deselects the element if there is no interaction possible with element.\n */\n@injectable()\nexport class DeselectKeyTool implements GLSPTool {\n    static ID = 'glsp.deselect-key-tool';\n\n    isEditTool = true;\n\n    protected readonly deselectKeyListener = new DeselectKeyListener();\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n\n    get id(): string {\n        return DeselectKeyTool.ID;\n    }\n\n    enable(): void {\n        this.keytool.register(this.deselectKeyListener);\n    }\n\n    disable(): void {\n        this.keytool.deregister(this.deselectKeyListener);\n    }\n}\n\nexport class DeselectKeyListener extends KeyListener {\n    override keyDown(target: SModelElement, event: KeyboardEvent): Action[] {\n        if (this.matchesDeselectKeystroke(event)) {\n            const isResizeHandleActive = toArray(target.root.index.all().filter(el => el instanceof SResizeHandle)).length > 0;\n\n            if (isResizeHandleActive) {\n                return [];\n            }\n\n            const deselect = toArray(target.root.index.all().filter(element => isSelectable(element) && element.selected));\n            const actions: Action[] = [];\n\n            if (deselect.length > 0) {\n                actions.push(SelectAction.create({ deselectedElementsIDs: deselect.map(e => e.id) }));\n            }\n\n            const routableDeselect = deselect.filter(e => e instanceof SRoutableElement).map(e => e.id);\n            if (routableDeselect.length > 0) {\n                actions.push(SwitchEditModeAction.create({ elementsToDeactivate: routableDeselect }));\n            }\n\n            return actions;\n        }\n        return [];\n    }\n\n    protected matchesDeselectKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Escape');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, BindingContext, TYPES } from '~glsp-sprotty';\nimport { DeselectKeyTool } from '../view-key-tools/deselect-key-tool';\nimport { MovementKeyTool } from './movement-key-tool';\nimport { ZoomKeyTool } from './zoom-key-tool';\n\nexport const glspViewKeyToolsModule = new ContainerModule((bind, _unbind, isBound, rebind) => {\n    const context = { bind, isBound, rebind };\n    configureViewKeyTools(context);\n});\n\nexport function configureViewKeyTools(context: Pick<BindingContext, 'bind'>): void {\n    bindAsService(context, TYPES.IDefaultTool, MovementKeyTool);\n    bindAsService(context, TYPES.IDefaultTool, ZoomKeyTool);\n    bindAsService(context, TYPES.IDefaultTool, DeselectKeyTool);\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { matchesKeystroke } from 'sprotty/lib/utils/keyboard';\nimport { Action, ISnapper, KeyListener, KeyTool, SModelElement, TYPES } from '~glsp-sprotty';\nimport { GLSPTool } from '../../../base/tool-manager/glsp-tool-manager';\nimport { GridSnapper } from '../../change-bounds/snap';\n\nimport { SelectionService } from '../../select/selection-service';\nimport { MoveElementAction, MoveViewportAction } from '../move-zoom/move-handler';\n\n/**\n * Moves viewport and elements when its focused and arrow keys are hit.\n */\n@injectable()\nexport class MovementKeyTool implements GLSPTool {\n    static ID = 'glsp.movement-key-tool';\n\n    isEditTool = true;\n\n    protected readonly movementKeyListener = new MoveKeyListener(this);\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n    @inject(TYPES.SelectionService) selectionService: SelectionService;\n    @inject(TYPES.ISnapper) @optional() readonly snapper?: ISnapper;\n\n    get id(): string {\n        return MovementKeyTool.ID;\n    }\n\n    enable(): void {\n        this.keytool.register(this.movementKeyListener);\n    }\n\n    disable(): void {\n        this.keytool.deregister(this.movementKeyListener);\n    }\n}\n\nexport class MoveKeyListener extends KeyListener {\n    // Default x distance used if GridSnapper is not provided\n    static readonly defaultMoveX = 20;\n\n    // Default y distance used if GridSnapper is not provided\n    static readonly defaultMoveY = 20;\n\n    protected grid = { x: MoveKeyListener.defaultMoveX, y: MoveKeyListener.defaultMoveY };\n\n    constructor(protected readonly tool: MovementKeyTool) {\n        super();\n\n        if (this.tool.snapper instanceof GridSnapper) {\n            this.grid = this.tool.snapper.grid;\n        }\n    }\n\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        const selectedElementIds = this.tool.selectionService.getSelectedElementIDs();\n\n        if (selectedElementIds.length > 0) {\n            if (this.matchesMoveUpKeystroke(event)) {\n                return [MoveElementAction.create(selectedElementIds, 0, -this.grid.x)];\n            } else if (this.matchesMoveDownKeystroke(event)) {\n                return [MoveElementAction.create(selectedElementIds, 0, this.grid.x)];\n            } else if (this.matchesMoveRightKeystroke(event)) {\n                return [MoveElementAction.create(selectedElementIds, this.grid.x, 0)];\n            } else if (this.matchesMoveLeftKeystroke(event)) {\n                return [MoveElementAction.create(selectedElementIds, -this.grid.x, 0)];\n            }\n        } else {\n            if (this.matchesMoveUpKeystroke(event)) {\n                return [MoveViewportAction.create(0, -this.grid.x)];\n            } else if (this.matchesMoveDownKeystroke(event)) {\n                return [MoveViewportAction.create(0, this.grid.x)];\n            } else if (this.matchesMoveRightKeystroke(event)) {\n                return [MoveViewportAction.create(this.grid.x, 0)];\n            } else if (this.matchesMoveLeftKeystroke(event)) {\n                return [MoveViewportAction.create(-this.grid.x, 0)];\n            }\n        }\n        return [];\n    }\n\n    protected matchesMoveUpKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'ArrowUp');\n    }\n\n    protected matchesMoveDownKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'ArrowDown');\n    }\n\n    protected matchesMoveRightKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'ArrowRight');\n    }\n\n    protected matchesMoveLeftKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'ArrowLeft');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { matchesKeystroke } from 'sprotty/lib/utils/keyboard';\nimport { Action, CenterAction, KeyListener, KeyTool, SModelElement, TYPES } from '~glsp-sprotty';\nimport { GLSPTool } from '../../../base/tool-manager/glsp-tool-manager';\nimport { SelectionService } from '../../select/selection-service';\nimport { ZoomElementAction, ZoomViewportAction } from '../move-zoom/zoom-handler';\n\n/**\n * Zoom viewport and elements when its focused and arrow keys are hit.\n */\n@injectable()\nexport class ZoomKeyTool implements GLSPTool {\n    static ID = 'glsp.zoom-key-tool';\n\n    isEditTool = false;\n\n    protected readonly zoomKeyListener = new ZoomKeyListener(this);\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n    @inject(TYPES.SelectionService) selectionService: SelectionService;\n\n    get id(): string {\n        return ZoomKeyTool.ID;\n    }\n\n    enable(): void {\n        this.keytool.register(this.zoomKeyListener);\n    }\n\n    disable(): void {\n        this.keytool.deregister(this.zoomKeyListener);\n    }\n}\n\nexport class ZoomKeyListener extends KeyListener {\n    static readonly defaultZoomInFactor = 1.1;\n    static readonly defaultZoomOutFactor = 0.9;\n\n    constructor(protected tool: ZoomKeyTool) {\n        super();\n    }\n\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        const selectedElementIds = this.tool.selectionService.getSelectedElementIDs();\n\n        if (this.matchesZoomOutKeystroke(event)) {\n            if (selectedElementIds.length > 0) {\n                return [ZoomElementAction.create(selectedElementIds, ZoomKeyListener.defaultZoomOutFactor)];\n            } else {\n                return [ZoomViewportAction.create(ZoomKeyListener.defaultZoomOutFactor)];\n            }\n        } else if (this.matchesZoomInKeystroke(event)) {\n            if (selectedElementIds.length > 0) {\n                return [ZoomElementAction.create(selectedElementIds, ZoomKeyListener.defaultZoomInFactor)];\n            } else {\n                return [ZoomViewportAction.create(ZoomKeyListener.defaultZoomInFactor)];\n            }\n        } else if (this.matchesMinZoomLevelKeystroke(event)) {\n            return [CenterAction.create(selectedElementIds)];\n        }\n        return [];\n    }\n\n    protected matchesZoomInKeystroke(event: KeyboardEvent): boolean {\n        /** here event.key is used for '+', as keycode 187 is already declared for 'Equals' in {@link matchesKeystroke}.*/\n        return event.key === '+' || matchesKeystroke(event, 'NumpadAdd');\n    }\n\n    protected matchesMinZoomLevelKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Digit0', 'ctrl') || matchesKeystroke(event, 'Numpad0', 'ctrl');\n    }\n\n    protected matchesZoomOutKeystroke(event: KeyboardEvent): boolean {\n        return matchesKeystroke(event, 'Minus') || matchesKeystroke(event, 'NumpadSubtract');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from 'inversify';\nimport { AbstractUIExtension, Action, LabeledAction, SModelRoot, TYPES } from '~glsp-sprotty';\nimport '../../../css/autocomplete-palette.css';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\nimport { AutoCompleteWidget, CloseReason, toActionArray } from '../../base/auto-complete/auto-complete-widget';\n\nexport abstract class BaseAutocompletePalette extends AbstractUIExtension {\n    protected readonly autoSuggestionSettings = {\n        noSuggestionsMessage: 'No suggestions available',\n        suggestionsClass: 'command-palette-suggestions',\n        debounceWaitMs: 50,\n        showOnFocus: true\n    };\n\n    protected root?: Readonly<SModelRoot>;\n    protected autocompleteWidget: AutoCompleteWidget;\n\n    @inject(TYPES.IActionDispatcher)\n    protected actionDispatcher: GLSPActionDispatcher;\n\n    containerClass(): string {\n        return 'autocomplete-palette';\n    }\n\n    override show(root: Readonly<SModelRoot>, ...contextElementIds: string[]): void {\n        super.show(root, ...contextElementIds);\n        this.root = root;\n        this.autocompleteWidget.open(root);\n    }\n\n    override hide(): void {\n        this.autocompleteWidget.dispose();\n        this.root = undefined;\n        super.hide();\n    }\n\n    protected initializeContents(containerElement: HTMLElement): void {\n        containerElement.classList.add('command-palette');\n\n        this.autocompleteWidget = new AutoCompleteWidget(\n            this.autoSuggestionSettings,\n            { provideSuggestions: input => this.retrieveSuggestions(this.root!, input) },\n            { executeFromSuggestion: input => this.executeSuggestion(input) },\n            reason => this.autocompleteHide(reason),\n            this.logger,\n            {\n                visibleSuggestionsChanged: suggestions => this.visibleSuggestionsChanged(this.root!, suggestions),\n                selectedSuggestionChanged: suggestion => this.selectedSuggestionChanged(this.root!, suggestion)\n            }\n        );\n        this.autocompleteWidget.initialize(containerElement);\n    }\n\n    protected abstract retrieveSuggestions(root: Readonly<SModelRoot>, input: string): Promise<LabeledAction[]>;\n\n    protected async visibleSuggestionsChanged(root: Readonly<SModelRoot>, labeledActions: LabeledAction[]): Promise<void> {\n        return;\n    }\n\n    protected async selectedSuggestionChanged(root: Readonly<SModelRoot>, labeledAction?: LabeledAction): Promise<void> {\n        return;\n    }\n\n    protected autocompleteHide(reason: CloseReason): void {\n        this.hide();\n    }\n\n    protected executeSuggestion(input: LabeledAction | Action[] | Action): void {\n        this.actionDispatcher.dispatchAll(toActionArray(input));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport {\n    HBoxLayouter,\n    HiddenBoundsUpdater,\n    LayoutRegistry,\n    Layouter,\n    RequestBoundsCommand,\n    SetBoundsCommand,\n    TYPES,\n    VBoxLayouter,\n    bindAsService,\n    configureCommand,\n    configureLayout\n} from '~glsp-sprotty';\nimport { FreeFormLayouter } from './freeform-layout';\nimport { GLSPHiddenBoundsUpdater } from './glsp-hidden-bounds-updater';\nimport { HBoxLayouterExt } from './hbox-layout';\nimport { VBoxLayouterExt } from './vbox-layout';\n\nconst glspBoundsModule = new ContainerModule((bind, _unbind, isBound, _rebind) => {\n    const context = { bind, isBound };\n    configureCommand(context, SetBoundsCommand);\n    configureCommand(context, RequestBoundsCommand);\n    bind(HiddenBoundsUpdater).toSelf().inSingletonScope();\n    bindAsService(context, TYPES.HiddenVNodePostprocessor, GLSPHiddenBoundsUpdater);\n    bind(TYPES.Layouter).to(Layouter).inSingletonScope();\n    bind(TYPES.LayoutRegistry).to(LayoutRegistry).inSingletonScope();\n\n    configureLayout(context, VBoxLayouter.KIND, VBoxLayouterExt);\n    configureLayout(context, HBoxLayouter.KIND, HBoxLayouterExt);\n    configureLayout(context, FreeFormLayouter.KIND, FreeFormLayouter);\n});\n\nexport default glspBoundsModule;\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    AbstractLayout,\n    AbstractLayoutOptions,\n    Bounds,\n    BoundsData,\n    Dimension,\n    LayoutContainer,\n    Point,\n    SChildElement,\n    SParentElement,\n    StatefulLayouter\n} from '~glsp-sprotty';\n\n/**\n * Layouts children of a container with explicit X/Y positions\n */\n@injectable()\nexport class FreeFormLayouter extends AbstractLayout<AbstractLayoutOptions> {\n    static KIND = 'freeform';\n\n    override layout(container: SParentElement & LayoutContainer, layouter: StatefulLayouter): void {\n        const boundsData = layouter.getBoundsData(container);\n        const options = this.getLayoutOptions(container);\n        const childrenSize = this.getChildrenSize(container, options, layouter);\n\n        // The real size of the compartment will be determined by the parent node layout;\n        // we only need to compute the bounds required to layout the children.\n\n        const maxWidth = childrenSize.width > 0 ? childrenSize.width + options.paddingLeft + options.paddingRight : 0;\n        const maxHeight = childrenSize.height > 0 ? childrenSize.height + options.paddingTop + options.paddingBottom : 0;\n        if (maxWidth > 0 && maxHeight > 0) {\n            const offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        } else {\n            boundsData.bounds = { x: boundsData.bounds!.x, y: boundsData.bounds!.y, width: 0, height: 0 };\n            boundsData.boundsChanged = true;\n        }\n    }\n\n    protected getChildrenSize(\n        container: SParentElement & LayoutContainer,\n        containerOptions: AbstractLayoutOptions,\n        layouter: StatefulLayouter\n    ): Dimension {\n        let maxX = 0;\n        let maxY = 0;\n        container.children.forEach(child => {\n            const bounds = layouter.getBoundsData(child).bounds;\n            if (bounds !== undefined && Dimension.isValid(bounds)) {\n                const childMaxX = bounds.x + bounds.width;\n                const childMaxY = bounds.y + bounds.height;\n                maxX = Math.max(maxX, childMaxX);\n                maxY = Math.max(maxY, childMaxY);\n            }\n        });\n        return {\n            width: maxX,\n            height: maxY\n        };\n    }\n\n    protected layoutChild(\n        child: SChildElement,\n        boundsData: BoundsData,\n        bounds: Bounds,\n        childOptions: AbstractLayoutOptions,\n        containerOptions: AbstractLayoutOptions,\n        currentOffset: Point,\n        maxWidth: number,\n        maxHeight: number\n    ): Point {\n        boundsData.bounds = {\n            x: (child as any).bounds.x,\n            y: (child as any).bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    }\n\n    protected override getFinalContainerBounds(\n        container: SParentElement & LayoutContainer,\n        lastOffset: Point,\n        options: AbstractLayoutOptions,\n        maxWidth: number,\n        maxHeight: number\n    ): Bounds {\n        const result = {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(options.minWidth, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(options.minHeight, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n\n        return result;\n    }\n\n    protected getDefaultLayoutOptions(): AbstractLayoutOptions {\n        return {\n            resizeContainer: true,\n            paddingTop: 0,\n            paddingBottom: 0,\n            paddingLeft: 0,\n            paddingRight: 0,\n            paddingFactor: 1,\n            minWidth: 0,\n            minHeight: 0\n        };\n    }\n\n    protected spread(a: AbstractLayoutOptions, b: AbstractLayoutOptions): AbstractLayoutOptions {\n        return { ...a, ...b };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport {\n    Action,\n    ComputedBoundsAction,\n    Deferred,\n    EdgeRouterRegistry,\n    ElementAndRoutingPoints,\n    HiddenBoundsUpdater,\n    IActionDispatcher,\n    RequestAction,\n    ResponseAction,\n    SModelElement,\n    SRoutableElement\n} from '~glsp-sprotty';\nimport { calcElementAndRoute, isRoutable } from '../../utils/smodel-util';\n\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts, collects routes and fires {@link ComputedBoundsAction}s.\n *\n * The actions will contain the bound, alignment, and routing points of elements.\n */\n@injectable()\nexport class GLSPHiddenBoundsUpdater extends HiddenBoundsUpdater {\n    @inject(EdgeRouterRegistry) @optional() protected readonly edgeRouterRegistry?: EdgeRouterRegistry;\n\n    protected element2route: ElementAndRoutingPoints[] = [];\n    protected edges: SRoutableElement[] = [];\n    protected nodes: VNode[] = [];\n\n    override decorate(vnode: VNode, element: SModelElement): VNode {\n        super.decorate(vnode, element);\n        if (isRoutable(element)) {\n            this.element2route.push(calcElementAndRoute(element, this.edgeRouterRegistry));\n        }\n        return vnode;\n    }\n\n    override postUpdate(cause?: Action): void {\n        const actions = this.captureActions(() => super.postUpdate(cause));\n        actions\n            .filter(action => ComputedBoundsAction.is(action))\n            .forEach(action => this.actionDispatcher.dispatch(this.enhanceAction(action as ComputedBoundsAction)));\n        this.element2route = [];\n    }\n\n    protected captureActions(call: () => void): Action[] {\n        const capturingActionDispatcher = new CapturingActionDispatcher();\n        const actualActionDispatcher = this.actionDispatcher;\n        this.actionDispatcher = capturingActionDispatcher;\n        try {\n            call();\n            return capturingActionDispatcher.actions;\n        } finally {\n            this.actionDispatcher = actualActionDispatcher;\n        }\n    }\n\n    protected enhanceAction(action: ComputedBoundsAction): ComputedBoundsAction {\n        action.routes = this.element2route.length === 0 ? undefined : this.element2route;\n        return action;\n    }\n}\n\nclass CapturingActionDispatcher implements IActionDispatcher {\n    readonly actions: Action[] = [];\n\n    async dispatch(action: Action): Promise<void> {\n        this.actions.push(action);\n    }\n\n    async dispatchAll(actions: Action[]): Promise<void> {\n        this.actions.push(...actions);\n    }\n\n    async request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res> {\n        // ignore, not needed for our purposes\n        return new Deferred<Res>().promise;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Bounds,\n    BoundsData,\n    Dimension,\n    HBoxLayoutOptions,\n    HBoxLayouter,\n    LayoutContainer,\n    Point,\n    SChildElement,\n    SModelElement,\n    SParentElement,\n    StatefulLayouter,\n    isBoundsAware,\n    isLayoutableChild\n} from '~glsp-sprotty';\n\nexport interface HBoxLayoutOptionsExt extends HBoxLayoutOptions {\n    hGrab: boolean;\n    vGrab: boolean;\n    prefWidth: number | null;\n    prefHeight: number | null;\n}\n\n/**\n * Extends HBoxLayouter to support additional layout options\n */\n@injectable()\nexport class HBoxLayouterExt extends HBoxLayouter {\n    static override KIND = HBoxLayouter.KIND;\n\n    override layout(container: SParentElement & LayoutContainer, layouter: StatefulLayouter): void {\n        const boundsData = layouter.getBoundsData(container);\n        const options = this.getLayoutOptions(container);\n        const childrenSize = this.getChildrenSize(container, options, layouter);\n\n        const fixedSize = this.getFixedContainerBounds(container, options, layouter);\n\n        const currentWidth = boundsData.bounds ? boundsData.bounds?.width - options.paddingLeft - options.paddingRight : 0;\n        const currentHeight = boundsData.bounds ? boundsData.bounds?.height - options.paddingTop - options.paddingBottom : 0;\n\n        const maxWidth =\n            options.paddingFactor *\n            (options.resizeContainer\n                ? Math.max(fixedSize.width - options.paddingLeft - options.paddingRight, childrenSize.width)\n                : Math.max(0, fixedSize.width - options.paddingLeft - options.paddingRight));\n        const maxHeight =\n            options.paddingFactor *\n            (options.resizeContainer\n                ? Math.max(fixedSize.height - options.paddingTop - options.paddingBottom, childrenSize.height)\n                : Math.max(0, fixedSize.height - options.paddingTop - options.paddingBottom));\n\n        const width = Math.max(currentWidth, maxWidth);\n        const height = Math.max(currentHeight, maxHeight);\n\n        // Remaining size that can be grabbed by children with the hGrab option\n        const grabWidth = width - childrenSize.width;\n        // Number of children that request hGrab\n        // FIXME: This approach works fine when only 1 child uses HGrab, but may cause rounding issues\n        // when the grabHeight can't be equally shared by all children.\n        const grabbingChildren = container.children\n            .map(child => this.getChildLayoutOptions(child, options))\n            .filter(opt => opt.hGrab).length;\n\n        if (width > 0 && height > 0) {\n            const offset = this.layoutChildren(container, layouter, options, width, height, grabWidth, grabbingChildren);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, childrenSize.width, childrenSize.height);\n            boundsData.boundsChanged = true;\n        }\n    }\n\n    protected override getChildrenSize(\n        container: SParentElement & LayoutContainer,\n        containerOptions: HBoxLayoutOptionsExt,\n        layouter: StatefulLayouter\n    ): Dimension {\n        let maxWidth = 0;\n        let maxHeight = -1;\n        let isFirst = true;\n        container.children.forEach(child => {\n            if (isLayoutableChild(child)) {\n                const bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && Dimension.isValid(bounds)) {\n                    maxWidth += bounds.width;\n                    if (isFirst) {\n                        isFirst = false;\n                    } else {\n                        maxWidth += containerOptions.hGap;\n                    }\n                    maxHeight = Math.max(maxHeight, bounds.height);\n                }\n            }\n        });\n        const result = {\n            width: maxWidth,\n            height: maxHeight\n        };\n        return result;\n    }\n\n    protected override layoutChildren(\n        container: SParentElement & LayoutContainer,\n        layouter: StatefulLayouter,\n        containerOptions: HBoxLayoutOptionsExt,\n        maxWidth: number,\n        maxHeight: number,\n        grabWidth?: number,\n        grabbingChildren?: number\n    ): Point {\n        let currentOffset: Point = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - maxWidth / containerOptions.paddingFactor),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - maxHeight / containerOptions.paddingFactor)\n        };\n\n        container.children.forEach(child => {\n            if (isLayoutableChild(child)) {\n                const boundsData = layouter.getBoundsData(child);\n                const bounds = boundsData.bounds;\n                const childOptions = this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && Dimension.isValid(bounds)) {\n                    currentOffset = this.layoutChild(\n                        child,\n                        boundsData,\n                        bounds,\n                        childOptions,\n                        containerOptions,\n                        currentOffset,\n                        maxWidth,\n                        maxHeight,\n                        grabWidth,\n                        grabbingChildren\n                    );\n                }\n            }\n        });\n        return currentOffset;\n    }\n\n    protected override layoutChild(\n        child: SChildElement,\n        boundsData: BoundsData,\n        bounds: Bounds,\n        childOptions: HBoxLayoutOptionsExt,\n        containerOptions: HBoxLayoutOptionsExt,\n        currentOffset: Point,\n        maxWidth: number,\n        maxHeight: number,\n        grabWidth?: number,\n        grabbingChildren?: number\n    ): Point {\n        const vAlign = childOptions.vGrab ? 'top' : childOptions.vAlign;\n        const dy = this.getDy(vAlign, bounds, maxHeight);\n        let offset = super.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n        boundsData.bounds = {\n            ...boundsData.bounds!,\n            x: currentOffset.x,\n            y: currentOffset.y + dy\n        };\n        if (childOptions.vGrab) {\n            boundsData.bounds = {\n                x: boundsData.bounds!.x,\n                y: boundsData.bounds!.y,\n                width: boundsData.bounds!.width,\n                height: maxHeight\n            };\n            boundsData.boundsChanged = true;\n        }\n        if (childOptions.hGrab && grabWidth && grabbingChildren) {\n            const width = boundsData.bounds!.width + grabWidth / grabbingChildren;\n            boundsData.bounds = {\n                x: boundsData.bounds!.x,\n                y: boundsData.bounds!.y,\n                width: width,\n                height: boundsData.bounds!.height\n            };\n            boundsData.boundsChanged = true;\n            offset = { x: currentOffset.x + width, y: currentOffset.y };\n        }\n        return offset;\n    }\n\n    protected override getFixedContainerBounds(\n        container: SModelElement,\n        layoutOptions: HBoxLayoutOptionsExt,\n        layouter: StatefulLayouter\n    ): Bounds {\n        const currentContainer = container;\n        // eslint-disable-next-line no-constant-condition\n        if (isBoundsAware(currentContainer)) {\n            const bounds = currentContainer.bounds;\n            const elementOptions = this.getElementLayoutOptions(currentContainer);\n            const width = elementOptions?.prefWidth ?? 0;\n            const height = elementOptions?.prefHeight ?? 0;\n            return { ...bounds, width, height };\n        }\n        return Bounds.EMPTY;\n    }\n\n    protected override getChildLayoutOptions(child: SChildElement, containerOptions: HBoxLayoutOptionsExt): HBoxLayoutOptionsExt {\n        return super.getChildLayoutOptions(child, this.filterContainerOptions(containerOptions)) as HBoxLayoutOptionsExt;\n    }\n\n    protected override getLayoutOptions(element: SModelElement): HBoxLayoutOptionsExt {\n        return super.getLayoutOptions(element) as HBoxLayoutOptionsExt;\n    }\n\n    protected getElementLayoutOptions(element: SModelElement): HBoxLayoutOptionsExt | undefined {\n        return (element as any).layoutOptions;\n    }\n\n    protected override getFinalContainerBounds(\n        container: SParentElement & LayoutContainer,\n        lastOffset: Point,\n        options: HBoxLayoutOptionsExt,\n        maxWidth: number,\n        maxHeight: number\n    ): Bounds {\n        const elementOptions = this.getElementLayoutOptions(container);\n        const width = elementOptions?.prefWidth ?? options.minWidth;\n        const height = elementOptions?.prefHeight ?? options.minHeight;\n\n        const result = {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(width, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(height, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n\n        return result;\n    }\n\n    protected override getDefaultLayoutOptions(): HBoxLayoutOptionsExt {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0,\n            hGrab: false,\n            vGrab: false,\n            // eslint-disable-next-line no-null/no-null\n            prefHeight: null,\n            // eslint-disable-next-line no-null/no-null\n            prefWidth: null\n        };\n    }\n\n    protected filterContainerOptions(containerOptions: HBoxLayoutOptionsExt): HBoxLayoutOptionsExt {\n        // Reset object-specific layout options to default before merging,\n        // to make sure they won't be inherited (grab, prefSize)\n        // eslint-disable-next-line no-null/no-null\n        const localOptions = { vGrab: false, hGrab: false, prefHeight: null, prefWidth: null };\n        return { ...containerOptions, ...localOptions };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Bounds,\n    BoundsData,\n    ILogger,\n    LayoutContainer,\n    LayoutRegistry,\n    Layouter,\n    SModelElement,\n    SParentElement,\n    StatefulLayouter,\n    isLayoutContainer\n} from '~glsp-sprotty';\n\n@injectable()\nexport class LayouterExt extends Layouter {\n    override layout(element2boundsData: Map<SModelElement, BoundsData>): void {\n        new StatefulLayouterExt(element2boundsData, this.layoutRegistry, this.logger).layout();\n    }\n}\n\n// 2-pass layout:\n// Step 1: Find \"rendered size\" of each element (may take resizeContainer into account)\n// Child-to-parent layout\n// Step 2: Extend parents as necessary, then use the adjusted parent size to properly\n// align children (center/end alignments, hGrab/vGrab)\n// Parent-to-children layout\n\nexport class StatefulLayouterExt extends StatefulLayouter {\n    protected toBeLayouted2: (SParentElement & LayoutContainer)[];\n\n    /**\n     *\n     * @param elementToBoundsData The map of element to bounds data. Bounds Data are computed from the hidden\n     * SVG rendering pass.\n     * @param layoutRegistry2 The registry of available layouts.\n     * @param log The log.\n     */\n    constructor(\n        protected readonly elementToBoundsData: Map<SModelElement, BoundsData>,\n        protected readonly layoutRegistry2: LayoutRegistry,\n        log: ILogger\n    ) {\n        super(elementToBoundsData, layoutRegistry2, log);\n        this.toBeLayouted2 = [];\n        elementToBoundsData.forEach((data, element) => {\n            if (isLayoutContainer(element)) {\n                this.toBeLayouted2.push(element);\n            }\n        });\n        for (const element of this.toBeLayouted2) {\n            // Clear previous layout information for dynamic-layout objects\n            elementToBoundsData.delete(element);\n        }\n    }\n\n    override getBoundsData(element: SModelElement): BoundsData {\n        let boundsData = this.elementToBoundsData.get(element);\n        let bounds = (element as any).bounds;\n        if (isLayoutContainer(element) && this.toBeLayouted2.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        } else if (isLayoutContainer(element)) {\n            bounds = {\n                x: 0,\n                y: 0,\n                width: -1,\n                height: -1\n            };\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.elementToBoundsData.set(element, boundsData);\n        }\n        return boundsData;\n    }\n\n    override layout(): void {\n        // First pass: apply layout with cleared container data. Will get\n        // preferred size for all elements (Children first, then parents)\n        while (this.toBeLayouted2.length > 0) {\n            const element = this.toBeLayouted2[0];\n            this.doLayout(element);\n        }\n\n        this.toBeLayouted2 = [];\n        this.elementToBoundsData.forEach((data, element) => {\n            if (isLayoutContainer(element)) {\n                this.toBeLayouted2.push(element);\n            }\n        });\n\n        // Second pass: apply layout with initial size data for all\n        // nodes. Update the position/size of all elements, taking\n        // vGrab/hGrab into account (parent -> children).\n        while (this.toBeLayouted2.length > 0) {\n            const element = this.toBeLayouted2[0];\n            this.doLayout(element);\n        }\n    }\n\n    protected override doLayout(element: SParentElement & LayoutContainer): Bounds {\n        const index = this.toBeLayouted2.indexOf(element);\n        if (index >= 0) {\n            this.toBeLayouted2.splice(index, 1);\n        }\n        const layout = this.layoutRegistry2.get(element.layout);\n        if (layout) {\n            layout.layout(element, this);\n        }\n        const boundsData = this.elementToBoundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        } else {\n            this.log.error(element, 'Layout failed');\n            return Bounds.EMPTY;\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Bounds,\n    BoundsData,\n    Dimension,\n    LayoutContainer,\n    Point,\n    SChildElement,\n    SModelElement,\n    SParentElement,\n    StatefulLayouter,\n    VBoxLayoutOptions,\n    VBoxLayouter,\n    isBoundsAware,\n    isLayoutableChild\n} from '~glsp-sprotty';\n\nexport interface VBoxLayoutOptionsExt extends VBoxLayoutOptions {\n    hGrab: boolean;\n    vGrab: boolean;\n    prefWidth: number | null;\n    prefHeight: number | null;\n}\n\n/**\n * Extends VBoxLayouter to support additional layout options\n */\n@injectable()\nexport class VBoxLayouterExt extends VBoxLayouter {\n    static override KIND = VBoxLayouter.KIND;\n\n    override layout(container: SParentElement & LayoutContainer, layouter: StatefulLayouter): void {\n        const boundsData = layouter.getBoundsData(container);\n        const options = this.getLayoutOptions(container);\n        const childrenSize = this.getChildrenSize(container, options, layouter);\n\n        const fixedSize = this.getFixedContainerBounds(container, options, layouter);\n\n        const currentWidth = (boundsData.bounds?.width || 0) - options.paddingLeft - options.paddingRight;\n        const currentHeight = (boundsData.bounds?.height || 0) - options.paddingTop - options.paddingBottom;\n\n        const maxWidth =\n            options.paddingFactor *\n            (options.resizeContainer\n                ? Math.max(fixedSize.width - options.paddingLeft - options.paddingRight, childrenSize.width)\n                : Math.max(0, fixedSize.width - options.paddingLeft - options.paddingRight));\n        const maxHeight =\n            options.paddingFactor *\n            (options.resizeContainer\n                ? Math.max(fixedSize.height - options.paddingTop - options.paddingBottom, childrenSize.height)\n                : Math.max(0, fixedSize.height - options.paddingTop - options.paddingBottom));\n\n        const width = Math.max(currentWidth, maxWidth);\n        const height = Math.max(currentHeight, maxHeight);\n\n        // Remaining size that can be grabbed by children with the vGrab option\n        const grabHeight: number = height - childrenSize.height;\n        // Number of children that request vGrab\n        // FIXME: This approach works fine when only 1 child uses VGrab, but may cause rounding issues\n        // when the grabHeight can't be equally shared by all children.\n        const grabbingChildren = container.children\n            .map(child => this.getChildLayoutOptions(child, options))\n            .filter(opt => opt.vGrab).length;\n\n        if (maxWidth > 0 && maxHeight > 0) {\n            const offset = this.layoutChildren(container, layouter, options, width, height, grabHeight, grabbingChildren);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, childrenSize.width, childrenSize.height);\n            boundsData.boundsChanged = true;\n        }\n    }\n\n    protected override getChildrenSize(\n        container: SParentElement & LayoutContainer,\n        containerOptions: VBoxLayoutOptionsExt,\n        layouter: StatefulLayouter\n    ): Dimension {\n        let maxWidth = -1;\n        let maxHeight = 0;\n        let isFirst = true;\n        container.children.forEach(child => {\n            if (isLayoutableChild(child)) {\n                const bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && Dimension.isValid(bounds)) {\n                    maxHeight += bounds.height;\n                    if (isFirst) {\n                        isFirst = false;\n                    } else {\n                        maxHeight += containerOptions.vGap;\n                    }\n                    maxWidth = Math.max(maxWidth, bounds.width);\n                }\n            }\n        });\n        const result = {\n            width: maxWidth,\n            height: maxHeight\n        };\n        return result;\n    }\n\n    protected override layoutChildren(\n        container: SParentElement & LayoutContainer,\n        layouter: StatefulLayouter,\n        containerOptions: VBoxLayoutOptionsExt,\n        maxWidth: number,\n        maxHeight: number,\n        grabHeight?: number,\n        grabbingChildren?: number\n    ): Point {\n        let currentOffset: Point = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - maxWidth / containerOptions.paddingFactor),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - maxHeight / containerOptions.paddingFactor)\n        };\n\n        container.children.forEach(child => {\n            if (isLayoutableChild(child)) {\n                const boundsData = layouter.getBoundsData(child);\n                const bounds = boundsData.bounds;\n                const childOptions = this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && Dimension.isValid(bounds)) {\n                    currentOffset = this.layoutChild(\n                        child,\n                        boundsData,\n                        bounds,\n                        childOptions,\n                        containerOptions,\n                        currentOffset,\n                        maxWidth,\n                        maxHeight,\n                        grabHeight,\n                        grabbingChildren\n                    );\n                }\n            }\n        });\n        return currentOffset;\n    }\n\n    protected override layoutChild(\n        child: SChildElement,\n        boundsData: BoundsData,\n        bounds: Bounds,\n        childOptions: VBoxLayoutOptionsExt,\n        containerOptions: VBoxLayoutOptionsExt,\n        currentOffset: Point,\n        maxWidth: number,\n        maxHeight: number,\n        grabHeight?: number,\n        grabbingChildren?: number\n    ): Point {\n        const hAlign = childOptions.hGrab ? 'left' : childOptions.hAlign;\n        const dx = this.getDx(hAlign, bounds, maxWidth);\n        let offset = super.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n        boundsData.bounds = {\n            ...boundsData.bounds!,\n            x: currentOffset.x + dx,\n            y: currentOffset.y\n        };\n        if (childOptions.hGrab) {\n            boundsData.bounds = {\n                x: boundsData.bounds!.x,\n                y: boundsData.bounds!.y,\n                width: maxWidth,\n                height: boundsData.bounds!.height\n            };\n            boundsData.boundsChanged = true;\n        }\n        if (childOptions.vGrab && grabHeight && grabbingChildren) {\n            const height = boundsData.bounds!.height + grabHeight / grabbingChildren;\n            boundsData.bounds = {\n                x: boundsData.bounds!.x,\n                y: boundsData.bounds!.y,\n                width: boundsData.bounds!.width,\n                height: height\n            };\n            boundsData.boundsChanged = true;\n            offset = { x: currentOffset.x, y: currentOffset.y + height };\n        }\n        return offset;\n    }\n\n    protected override getFixedContainerBounds(\n        container: SModelElement,\n        layoutOptions: VBoxLayoutOptionsExt,\n        layouter: StatefulLayouter\n    ): Bounds {\n        const currentContainer = container;\n        // eslint-disable-next-line no-constant-condition\n        if (isBoundsAware(currentContainer)) {\n            const bounds = currentContainer.bounds;\n            const elementOptions = this.getElementLayoutOptions(currentContainer);\n            const width = elementOptions?.prefWidth ?? 0;\n            const height = elementOptions?.prefHeight ?? 0;\n            return { ...bounds, width, height };\n        }\n        return Bounds.EMPTY;\n    }\n\n    protected override getChildLayoutOptions(child: SChildElement, containerOptions: VBoxLayoutOptionsExt): VBoxLayoutOptionsExt {\n        return super.getChildLayoutOptions(child, this.filterContainerOptions(containerOptions)) as VBoxLayoutOptionsExt;\n    }\n\n    protected override getLayoutOptions(element: SModelElement): VBoxLayoutOptionsExt {\n        return super.getLayoutOptions(element) as VBoxLayoutOptionsExt;\n    }\n\n    protected getElementLayoutOptions(element: SModelElement): VBoxLayoutOptionsExt | undefined {\n        return (element as any).layoutOptions;\n    }\n\n    protected override getFinalContainerBounds(\n        container: SParentElement & LayoutContainer,\n        lastOffset: Point,\n        options: VBoxLayoutOptionsExt,\n        maxWidth: number,\n        maxHeight: number\n    ): Bounds {\n        const elementOptions = this.getElementLayoutOptions(container);\n        const width = elementOptions?.prefWidth ?? options.minWidth;\n        const height = elementOptions?.prefHeight ?? options.minHeight;\n\n        const result = {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(width, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(height, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n\n        return result;\n    }\n\n    protected override getDefaultLayoutOptions(): VBoxLayoutOptionsExt {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center',\n            minWidth: 0,\n            minHeight: 0,\n            hGrab: false,\n            vGrab: false,\n            // eslint-disable-next-line no-null/no-null\n            prefHeight: null,\n            // eslint-disable-next-line no-null/no-null\n            prefWidth: null\n        };\n    }\n\n    protected filterContainerOptions(containerOptions: VBoxLayoutOptionsExt): VBoxLayoutOptionsExt {\n        // Reset object-specific layout options to default before merging,\n        // to make sure they won't be inherited (grab, prefSize)\n        // eslint-disable-next-line no-null/no-null\n        const localOptions = { vGrab: false, hGrab: false, prefHeight: null, prefWidth: null };\n        return { ...containerOptions, ...localOptions };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    BoundsAware,\n    Hoverable,\n    hoverFeedbackFeature,\n    isBoundsAware,\n    isMoveable,\n    isSelectable,\n    Locateable,\n    SChildElement,\n    Selectable,\n    SModelElement,\n    SParentElement\n} from '~glsp-sprotty';\n\nexport const resizeFeature = Symbol('resizeFeature');\n\nexport interface Resizable extends BoundsAware, Selectable {}\n\nexport function isResizable(element: SModelElement): element is SParentElement & Resizable {\n    return isBoundsAware(element) && isSelectable(element) && element instanceof SParentElement && element.hasFeature(resizeFeature);\n}\n\n// eslint-disable-next-line no-shadow\nexport enum ResizeHandleLocation {\n    TopLeft = 'top-left',\n    TopRight = 'top-right',\n    BottomLeft = 'bottom-left',\n    BottomRight = 'bottom-right'\n}\n\nexport function isBoundsAwareMoveable(element: SModelElement): element is SModelElement & Locateable & BoundsAware {\n    return isMoveable(element) && isBoundsAware(element);\n}\n\nexport class SResizeHandle extends SChildElement implements Hoverable {\n    static readonly TYPE = 'resize-handle';\n\n    constructor(\n        readonly location?: ResizeHandleLocation,\n        override readonly type: string = SResizeHandle.TYPE,\n        readonly hoverFeedback: boolean = false\n    ) {\n        super();\n    }\n\n    override hasFeature(feature: symbol): boolean {\n        return feature === hoverFeedbackFeature;\n    }\n\n    isNwSeResize(): boolean {\n        return this.location === ResizeHandleLocation.TopLeft || this.location === ResizeHandleLocation.BottomRight;\n    }\n\n    isNeSwResize(): boolean {\n        return this.location === ResizeHandleLocation.TopRight || this.location === ResizeHandleLocation.BottomLeft;\n    }\n}\n\nexport function addResizeHandles(element: SParentElement): void {\n    removeResizeHandles(element);\n    element.add(new SResizeHandle(ResizeHandleLocation.TopLeft));\n    element.add(new SResizeHandle(ResizeHandleLocation.TopRight));\n    element.add(new SResizeHandle(ResizeHandleLocation.BottomLeft));\n    element.add(new SResizeHandle(ResizeHandleLocation.BottomRight));\n}\n\nexport function removeResizeHandles(element: SParentElement): void {\n    element.removeAll(child => child instanceof SResizeHandle);\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { BoundsAware, Point, SModelElement, SNode, SParentElement } from '~glsp-sprotty';\nimport { toAbsoluteBounds } from '../../utils/viewpoint-util';\nimport { ModifyCSSFeedbackAction } from '../tool-feedback/css-feedback';\nimport { SResizeHandle, isBoundsAwareMoveable } from './model';\n\n/**\n * A `MovementRestrictor` is an optional service that can be used by tools to validate\n * whether a certain move operation (e.g. `ChangeBoundsOperation`) in the diagram is valid.\n */\nexport interface IMovementRestrictor {\n    /**\n     * Validate whether moving the given element to a new given location is allowed.\n     * @param element The element that should be moved.\n     * @param newLocation The new location of the element.\n     * @returns `true` if the the element is movable and moving to the given location is allowed, `false` otherwise.\n     *          Should also return `false` if the newLocation is `undefined`:\n     */\n    validate(element: SModelElement, newLocation?: Point): boolean;\n    /**\n     * Feedback css-classes. Can be applied to elements that did fail the validation.\n     */\n    cssClasses?: string[];\n}\n\n/**\n *  A `IMovementRestrictor` that checks for overlapping elements. Move operations\n *  are only valid if the element does not collide with another element after moving.\n */\n@injectable()\nexport class NoOverlapMovementRestrictor implements IMovementRestrictor {\n    cssClasses = ['movement-not-allowed'];\n\n    validate(element: SModelElement, newLocation?: Point): boolean {\n        if (!isBoundsAwareMoveable(element) || !newLocation) {\n            return false;\n        }\n        // Create ghost element at the newLocation\n        const ghostElement = Object.create(element) as SModelElement & BoundsAware;\n        ghostElement.bounds = {\n            x: newLocation.x,\n            y: newLocation.y,\n            width: element.bounds.width,\n            height: element.bounds.height\n        };\n        ghostElement.type = 'Ghost';\n        ghostElement.id = element.id;\n        return !Array.from(\n            element.root.index\n                .all()\n                .filter(e => e.id !== ghostElement.id && e !== ghostElement.root && e instanceof SNode)\n                .map(e => e as SModelElement & BoundsAware)\n        ).some(e => this.areOverlapping(e, ghostElement));\n    }\n\n    protected areOverlapping(element1: SModelElement & BoundsAware, element2: SModelElement & BoundsAware): boolean {\n        const b1 = toAbsoluteBounds(element1);\n        const b2 = toAbsoluteBounds(element2);\n        const r1TopLeft: Point = b1;\n        const r1BottomRight = { x: b1.x + b1.width, y: b1.y + b1.height };\n        const r2TopLeft: Point = b2;\n        const r2BottomRight = { x: b2.x + b2.width, y: b2.y + b2.height };\n\n        // If one rectangle is on left side of other\n        if (r1TopLeft.x > r2BottomRight.x || r2TopLeft.x > r1BottomRight.x) {\n            return false;\n        }\n\n        // If one rectangle is above other\n        if (r1BottomRight.y < r2TopLeft.y || r2BottomRight.y < r1TopLeft.y) {\n            return false;\n        }\n\n        return true;\n    }\n}\n\n/**\n * Utility function to create an action that applies the given {@link IMovementRestrictor.cssClasses} to the given element.\n * @param element The element on which the css classes should be applied.\n * @param movementRestrictor The movement restrictor whose cssClasses should be applied.\n * @returns The corresponding {@link ModifyCSSFeedbackAction}\n */\nexport function createMovementRestrictionFeedback(\n    element: SModelElement,\n    movementRestrictor: IMovementRestrictor\n): ModifyCSSFeedbackAction {\n    const elements: SModelElement[] = [element];\n    if (element instanceof SParentElement) {\n        element.children.filter(child => child instanceof SResizeHandle).forEach(e => elements.push(e));\n    }\n    return ModifyCSSFeedbackAction.create({ elements, add: movementRestrictor.cssClasses });\n}\n\n/**\n * Utility function to create an action that removes the given {@link IMovementRestrictor.cssClasses} from the given element.\n * @param element The element from which the css classes should be removed.\n * @param movementRestrictor The movement restrictor whose cssClasses should be removed.\n * @returns The corresponding {@link ModifyCSSFeedbackAction}\n */\nexport function removeMovementRestrictionFeedback(\n    element: SModelElement,\n    movementRestrictor: IMovementRestrictor\n): ModifyCSSFeedbackAction {\n    const elements: SModelElement[] = [element];\n    if (element instanceof SParentElement) {\n        element.children.filter(child => child instanceof SResizeHandle).forEach(e => elements.push(e));\n    }\n\n    return ModifyCSSFeedbackAction.create({ elements, remove: movementRestrictor.cssClasses });\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { ISnapper, Point, SModelElement, Writable, findParentByFeature, isViewport } from '~glsp-sprotty';\n\n/**\n * A {@link ISnapper} implementation that snaps all elements onto a fixed gride size.\n * The default grid size is 10x10 pixel.\n * To configure a custom grid size  bind the `TYPES.ISnapper` service identifier\n * to constant value, e.g:\n *\n * ```ts\n * bind(TYPES.ISnapper).toConstantValue(new GridSnapper({x:25 ,y:25 }));\n * ```\n */\n@injectable()\nexport class GridSnapper implements ISnapper {\n    constructor(public grid: { x: number; y: number } = { x: 10, y: 10 }) {}\n\n    snap(position: Point, element: SModelElement): Point {\n        return {\n            x: Math.round(position.x / this.grid.x) * this.grid.x,\n            y: Math.round(position.y / this.grid.y) * this.grid.y\n        };\n    }\n}\n\n/**\n * This class can be used to calculate the current position, when an element is\n * moved. This includes node movements, node resizing (resize handle movement)\n * or edge routing-point movements.\n *\n * You can initialize a this class with a optional {@link ISnapper}. If a\n * snapper is present, the positions will be snapped to the defined grid.\n */\nexport class PointPositionUpdater {\n    protected lastDragPosition?: Point;\n    protected positionDelta: Writable<Point> = { x: 0, y: 0 };\n\n    constructor(protected snapper?: ISnapper) {}\n\n    /**\n     * Init the position with the {@link Point} of your mouse cursor.\n     * This method is normally called in the `mouseDown` event.\n     * @param mousePosition current mouse position e.g `{x: event.pageX, y: event.pageY }`\n     */\n    public updateLastDragPosition(mousePosition: Point): void {\n        this.lastDragPosition = mousePosition;\n    }\n\n    /**\n     * Check if the mouse is currently not in a drag mode.\n     * @returns true if the last drag position is undefined\n     */\n    public isLastDragPositionUndefined(): boolean {\n        return this.lastDragPosition === undefined;\n    }\n\n    /**\n     * Reset the updater for new movements.\n     * This method is normally called in the `mouseUp` event.\n     */\n    public resetPosition(): void {\n        this.lastDragPosition = undefined;\n        this.positionDelta = { x: 0, y: 0 };\n    }\n\n    /**\n     * Calculate the current position of your movement.\n     * This method is normally called in the `mouseMove` event.\n     * @param target node which is moved around\n     * @param mousePosition current mouse position e.g `{x: event.pageX, y: event.pageY }`\n     * @param isSnapEnabled if a snapper is defined you can disable it, e.g when a specific key is pressed `!event.altKey`\n     * @returns current position or undefined if updater has no last drag position initialized\n     */\n    public updatePosition(target: SModelElement, mousePosition: Point, isSnapEnabled: boolean): Point | undefined {\n        if (this.lastDragPosition) {\n            const newDragPosition = mousePosition;\n\n            const viewport = findParentByFeature(target, isViewport);\n            const zoom = viewport?.zoom ?? 1;\n            const dx = (mousePosition.x - this.lastDragPosition.x) / zoom;\n            const dy = (mousePosition.y - this.lastDragPosition.y) / zoom;\n            const deltaToLastPosition = { x: dx, y: dy };\n            this.lastDragPosition = newDragPosition;\n\n            // update position delta with latest delta\n            this.positionDelta.x += deltaToLastPosition.x;\n            this.positionDelta.y += deltaToLastPosition.y;\n\n            // snap our delta and only send update if the position actually changes\n            // otherwise accumulate delta until we do snap to an update\n            const positionUpdate = this.snap(this.positionDelta, target, isSnapEnabled);\n            if (positionUpdate.x === 0 && positionUpdate.y === 0) {\n                return undefined;\n            }\n\n            // we update our position so we update our delta by the snapped position\n            this.positionDelta.x -= positionUpdate.x;\n            this.positionDelta.y -= positionUpdate.y;\n            return positionUpdate;\n        }\n        return undefined;\n    }\n\n    protected snap(position: Point, element: SModelElement, isSnap: boolean): Point {\n        return isSnap && this.snapper ? this.snapper.snap(position, element) : { x: position.x, y: position.y };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { CommandPaletteKeyListener, KeyListener, KeyTool, Tool } from '~glsp-sprotty';\n\n@injectable()\nexport class CommandPaletteTool implements Tool {\n    static ID = 'glsp.command-palette-tool';\n\n    protected commandPaletteKeyListener: KeyListener;\n    @inject(KeyTool) protected keyTool: KeyTool;\n\n    @postConstruct()\n    protected postConstruct(): void {\n        this.commandPaletteKeyListener = this.createCommandPaletteKeyListener();\n    }\n\n    get id(): string {\n        return CommandPaletteTool.ID;\n    }\n\n    enable(): void {\n        this.keyTool.register(this.commandPaletteKeyListener);\n    }\n\n    disable(): void {\n        this.keyTool.deregister(this.commandPaletteKeyListener);\n    }\n\n    protected createCommandPaletteKeyListener(): KeyListener {\n        return new CommandPaletteKeyListener();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { CommandPalette, CommandPaletteActionProviderRegistry, TYPES, bindAsService } from '~glsp-sprotty';\nimport '../../../css/command-palette.css';\nimport { CommandPaletteTool } from './command-palette-tool';\nimport { ServerCommandPaletteActionProvider } from './server-command-palette-provider';\n\nconst glspCommandPaletteModule = new ContainerModule(bind => {\n    bindAsService(bind, TYPES.IUIExtension, CommandPalette);\n    bind(TYPES.ICommandPaletteActionProviderRegistry).to(CommandPaletteActionProviderRegistry).inSingletonScope();\n    bindAsService(bind, TYPES.ICommandPaletteActionProvider, ServerCommandPaletteActionProvider);\n    bindAsService(bind, TYPES.IDefaultTool, CommandPaletteTool);\n});\n\nexport default glspCommandPaletteModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    ICommandPaletteActionProvider,\n    LabeledAction,\n    Point,\n    RequestContextActions,\n    SModelElement,\n    SetContextActions,\n    TYPES\n} from '~glsp-sprotty';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\nimport { EditorContextService } from '../../base/editor-context-service';\n\nexport namespace ServerCommandPalette {\n    export const CONTEXT_ID = 'command-palette';\n    export const TEXT = 'text';\n    export const INDEX = 'index';\n}\n\n@injectable()\nexport class ServerCommandPaletteActionProvider implements ICommandPaletteActionProvider {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: GLSPActionDispatcher;\n    @inject(EditorContextService) protected editorContext: EditorContextService;\n\n    getActions(_root: Readonly<SModelElement>, text: string, _lastMousePosition?: Point, index?: number): Promise<LabeledAction[]> {\n        const requestAction = RequestContextActions.create({\n            contextId: ServerCommandPalette.CONTEXT_ID,\n            editorContext: this.editorContext.get({\n                [ServerCommandPalette.TEXT]: text,\n                [ServerCommandPalette.INDEX]: index ? index : 0\n            })\n        });\n        return this.actionDispatcher.requestUntil(requestAction).then(response => this.getPaletteActionsFromResponse(response));\n    }\n\n    getPaletteActionsFromResponse(action: Action): LabeledAction[] {\n        if (SetContextActions.is(action)) {\n            return action.actions;\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { DeleteElementOperation, IContextMenuItemProvider, MenuItem, Point, SModelRoot, TYPES } from '~glsp-sprotty';\nimport { EditorContextService, EditorContextServiceProvider } from '../../base/editor-context-service';\n\n@injectable()\nexport class DeleteElementContextMenuItemProvider implements IContextMenuItemProvider {\n    @inject(TYPES.IEditorContextServiceProvider) editorContextServiceProvider: EditorContextServiceProvider;\n\n    async getItems(_root: Readonly<SModelRoot>, _lastMousePosition?: Point): Promise<MenuItem[]> {\n        const editorContextService = await this.editorContextServiceProvider();\n        return [this.createDeleteMenuItem(editorContextService)];\n    }\n\n    protected createDeleteMenuItem(editorContextService: EditorContextService): MenuItem {\n        return {\n            id: 'delete',\n            label: 'Delete',\n            sortString: 'd',\n            group: 'edit',\n            actions: [DeleteElementOperation.create(editorContextService.selectedElements.map(e => e.id))],\n            isEnabled: () => !editorContextService.isReadonly && editorContextService.selectedElements.length > 0\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { ContextMenuProviderRegistry, IContextMenuService, TYPES, bindAsService } from '~glsp-sprotty';\nimport { SelectionServiceAwareContextMenuMouseListener } from './selection-service-aware-context-menu-mouse-listener';\nimport { ServerContextMenuItemProvider } from './server-context-menu-provider';\n\nconst glspContextMenuModule = new ContainerModule(bind => {\n    bind(TYPES.IContextMenuServiceProvider).toProvider<IContextMenuService>(\n        ctx => () =>\n            new Promise<IContextMenuService>((resolve, reject) => {\n                if (ctx.container.isBound(TYPES.IContextMenuService)) {\n                    resolve(ctx.container.get<IContextMenuService>(TYPES.IContextMenuService));\n                } else {\n                    reject();\n                }\n            })\n    );\n    bindAsService(bind, TYPES.MouseListener, SelectionServiceAwareContextMenuMouseListener);\n    bind(TYPES.IContextMenuProviderRegistry).to(ContextMenuProviderRegistry);\n    bindAsService(bind, TYPES.IContextMenuItemProvider, ServerContextMenuItemProvider);\n});\n\nexport default glspContextMenuModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport { Action, ContextMenuProviderRegistry, IContextMenuServiceProvider, MouseListener, SModelElement, TYPES } from '~glsp-sprotty';\nimport { FocusStateChangedAction } from '../../base/actions/focus-change-action';\nimport { SelectionService } from '../select/selection-service';\n\n@injectable()\nexport class SelectionServiceAwareContextMenuMouseListener extends MouseListener {\n    @inject(TYPES.IContextMenuServiceProvider)\n    @optional()\n    protected readonly contextMenuService?: IContextMenuServiceProvider;\n\n    @inject(TYPES.IContextMenuProviderRegistry)\n    @optional()\n    protected readonly menuProvider?: ContextMenuProviderRegistry;\n\n    @inject(TYPES.SelectionService)\n    protected selectionService: SelectionService;\n\n    /**\n     * Opens the context menu.\n     */\n    override contextMenu(target: SModelElement, event: MouseEvent): (Action | Promise<Action>)[] {\n        return this.openContextMenu(target, event);\n    }\n\n    /**\n     * Opens the context menu.\n     *\n     *   - query the context menu service and the context menu elements\n     *   - show the context menu\n     *   - send a focus state change to indicate that the diagram becomes inactive, once the context menu is shown\n     *\n     * When the context menu is closed, we focus the diagram element again.\n     */\n    protected openContextMenu(target: SModelElement, event: MouseEvent): Promise<Action>[] {\n        if (!this.contextMenuService || !this.menuProvider) {\n            return [];\n        }\n\n        const mousePosition = { x: event.x, y: event.y };\n\n        const result = Promise.all([this.contextMenuService(), this.menuProvider.getItems(target.root, mousePosition)])\n            .then(([menuService, menuItems]) => menuService.show(menuItems, mousePosition, () => this.focusEventTarget(event)))\n            .then((): Action => FocusStateChangedAction.create(false));\n\n        return [result];\n    }\n\n    protected focusEventTarget(event: MouseEvent): void {\n        const targetElement = event.target instanceof SVGElement ? event.target : undefined;\n        const svgParentElement = targetElement?.closest('svg');\n        if (svgParentElement) {\n            svgParentElement.focus();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    IContextMenuItemProvider,\n    LabeledAction,\n    Point,\n    RequestContextActions,\n    SModelElement,\n    SetContextActions,\n    TYPES,\n    isSelected\n} from '~glsp-sprotty';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\nimport { EditorContextService } from '../../base/editor-context-service';\n\nexport namespace ServerContextMenu {\n    export const CONTEXT_ID = 'context-menu';\n}\n\n@injectable()\nexport class ServerContextMenuItemProvider implements IContextMenuItemProvider {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: GLSPActionDispatcher;\n    @inject(EditorContextService) protected editorContext: EditorContextService;\n\n    getItems(root: Readonly<SModelElement>, lastMousePosition?: Point): Promise<LabeledAction[]> {\n        const selectedElementIds = Array.from(\n            root.index\n                .all()\n                .filter(isSelected)\n                .map(e => e.id)\n        );\n        const editorContext = this.editorContext.getWithSelection(selectedElementIds);\n        const requestAction = RequestContextActions.create({ contextId: ServerContextMenu.CONTEXT_ID, editorContext });\n        return this.actionDispatcher.requestUntil(requestAction).then(response => this.getContextActionsFromResponse(response));\n    }\n\n    getContextActionsFromResponse(action: Action): LabeledAction[] {\n        if (SetContextActions.is(action)) {\n            return action.actions;\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable deprecation/deprecation */\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    IActionDispatcher,\n    IActionHandler,\n    IContextMenuItemProvider,\n    MenuItem,\n    Point,\n    SModelRoot,\n    ServerMessageAction,\n    ServerStatusAction,\n    TYPES,\n    hasStringProp,\n    isSelected\n} from '~glsp-sprotty';\n\n/**\n * An `InvokeCopyPasteAction` is dispatched by the client to initiate a cut, copy or paste operation.\n */\nexport interface InvokeCopyPasteAction extends Action {\n    kind: typeof InvokeCopyPasteAction.KIND;\n    command: 'copy' | 'cut' | 'paste';\n}\n\nexport namespace InvokeCopyPasteAction {\n    export const KIND = 'invokeCopyPaste';\n\n    export function is(object: any): object is InvokeCopyPasteAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'command');\n    }\n\n    export function create(command: 'copy' | 'cut' | 'paste'): InvokeCopyPasteAction {\n        return { kind: KIND, command };\n    }\n}\n\n@injectable()\nexport class InvokeCopyPasteActionHandler implements IActionHandler {\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    handle(action: InvokeCopyPasteAction): void {\n        switch (action.command) {\n            case 'copy':\n                if (supportsCopy()) {\n                    document.execCommand('copy');\n                } else {\n                    this.notifyUserToUseShortcut('copy');\n                }\n                break;\n            case 'paste':\n                if (supportsPaste()) {\n                    document.execCommand('paste');\n                } else {\n                    this.notifyUserToUseShortcut('paste');\n                }\n                break;\n            case 'cut':\n                if (supportsCut()) {\n                    document.execCommand('cut');\n                } else {\n                    this.notifyUserToUseShortcut('cut');\n                }\n                break;\n        }\n    }\n\n    protected notifyUserToUseShortcut(operation: string): void {\n        const message = `Please use the browser's ${operation} command or shortcut.`;\n        const timeout = 10000;\n        const severity = 'WARNING';\n        this.dispatcher.dispatchAll([\n            ServerStatusAction.create(message, { severity, timeout }),\n            ServerMessageAction.create(message, { severity, timeout })\n        ]);\n    }\n}\n\n@injectable()\nexport class CopyPasteContextMenuItemProvider implements IContextMenuItemProvider {\n    getItems(root: Readonly<SModelRoot>, _lastMousePosition?: Point): Promise<MenuItem[]> {\n        const hasSelectedElements = Array.from(root.index.all().filter(isSelected)).length > 0;\n        return Promise.resolve([\n            this.createCopyMenuItem(hasSelectedElements),\n            this.createCutMenuItem(hasSelectedElements),\n            this.createPasteMenuItem()\n        ]);\n    }\n\n    protected createPasteMenuItem(): MenuItem {\n        return {\n            id: 'paste',\n            label: 'Paste',\n            group: 'copy-paste',\n            actions: [InvokeCopyPasteAction.create('paste')],\n            isEnabled: () => true\n        };\n    }\n\n    protected createCutMenuItem(hasSelectedElements: boolean): MenuItem {\n        return {\n            id: 'cut',\n            label: 'Cut',\n            group: 'copy-paste',\n            actions: [InvokeCopyPasteAction.create('cut')],\n            isEnabled: () => hasSelectedElements\n        };\n    }\n\n    protected createCopyMenuItem(hasSelectedElements: boolean): MenuItem {\n        return {\n            id: 'copy',\n            label: 'Copy',\n            group: 'copy-paste',\n            actions: [InvokeCopyPasteAction.create('copy')],\n            isEnabled: () => hasSelectedElements\n        };\n    }\n}\n\nexport function supportsCopy(): boolean {\n    return isNative() || document.queryCommandSupported('copy');\n}\n\nexport function supportsCut(): boolean {\n    return isNative() || document.queryCommandSupported('cut');\n}\n\nexport function supportsPaste(): boolean {\n    const isChrome = userAgent().indexOf('Chrome') >= 0;\n    return isNative() || (!isChrome && document.queryCommandSupported('paste'));\n}\n\nexport function isNative(): boolean {\n    return typeof (window as any).process !== 'undefined';\n}\n\nfunction userAgent(): string {\n    return typeof navigator !== 'undefined' ? navigator.userAgent : '';\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { v4 as uuid } from 'uuid';\nimport {\n    ClipboardData,\n    CutOperation,\n    PasteOperation,\n    RequestClipboardDataAction,\n    SetClipboardDataAction,\n    TYPES,\n    ViewerOptions\n} from '~glsp-sprotty';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\nimport { EditorContextService } from '../../base/editor-context-service';\n\nexport interface ICopyPasteHandler {\n    handleCopy(event: ClipboardEvent): void;\n    handleCut(event: ClipboardEvent): void;\n    handlePaste(event: ClipboardEvent): void;\n}\n\nexport interface IAsyncClipboardService {\n    clear(): void;\n    put(data: ClipboardData, id?: string): void;\n    get(id?: string): ClipboardData | undefined;\n}\n\n/**\n * A local implementation of the async clipboard interface.\n *\n * This implementation just stores the clipboard data in memory, but not in the clipboard.\n * This implementation can be used if you don't need to support cross-widget/browser/application\n * data transfer and you would like to avoid to require the permission of the user for accessing the\n * system clipboard asynchronously.\n *\n * In order to detect whether the user copied something else since we recorded the clipboard data\n * we put a uuid into the system clipboard synchronously. If on paste this ID has changed or is not\n * available anymore, we know that the user copied in another application or context, so we shouldn't\n * paste what we have stored locally and just return undefined.\n *\n * Real async clipboard service implementations can just ignore the ID that is passed and rely on the\n * system clipboard's content instead.\n */\n@injectable()\nexport class LocalClipboardService implements IAsyncClipboardService {\n    protected currentId?: string;\n    protected data?: ClipboardData;\n\n    clear(): void {\n        this.currentId = undefined;\n        this.data = undefined;\n    }\n\n    put(data: ClipboardData, id: string): void {\n        this.currentId = id;\n        this.data = data;\n    }\n\n    get(id?: string): ClipboardData | undefined {\n        if (id !== this.currentId) {\n            return undefined;\n        }\n        return this.data;\n    }\n}\n\ninterface ClipboardId {\n    readonly clipboardId: string;\n}\n\nfunction toClipboardId(clipboardId: string): string {\n    return JSON.stringify({ clipboardId });\n}\n\nfunction isClipboardId(jsonData: any): jsonData is ClipboardId {\n    return jsonData !== undefined && 'clipboardId' in jsonData;\n}\n\nfunction getClipboardIdFromDataTransfer(dataTransfer: DataTransfer): string | undefined {\n    const jsonString = dataTransfer.getData(CLIPBOARD_DATA_FORMAT);\n    const jsonObject = jsonString ? JSON.parse(jsonString) : undefined;\n    return isClipboardId(jsonObject) ? jsonObject.clipboardId : undefined;\n}\n\nconst CLIPBOARD_DATA_FORMAT = 'text/plain';\n\n@injectable()\nexport class ServerCopyPasteHandler implements ICopyPasteHandler {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: GLSPActionDispatcher;\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    @inject(TYPES.IAsyncClipboardService) protected clipboardService: IAsyncClipboardService;\n    @inject(EditorContextService) protected editorContext: EditorContextService;\n\n    handleCopy(event: ClipboardEvent): void {\n        if (event.clipboardData && this.shouldCopy(event)) {\n            const clipboardId = uuid();\n            event.clipboardData.setData(CLIPBOARD_DATA_FORMAT, toClipboardId(clipboardId));\n            this.actionDispatcher\n                .request<SetClipboardDataAction>(RequestClipboardDataAction.create(this.editorContext.get()))\n                .then(action => this.clipboardService.put(action.clipboardData, clipboardId));\n            event.preventDefault();\n        } else {\n            if (event.clipboardData) {\n                event.clipboardData.clearData();\n            }\n            this.clipboardService.clear();\n        }\n    }\n\n    handleCut(event: ClipboardEvent): void {\n        if (event.clipboardData && this.shouldCopy(event)) {\n            this.handleCopy(event);\n            this.actionDispatcher.dispatch(CutOperation.create(this.editorContext.get()));\n            event.preventDefault();\n        }\n    }\n\n    handlePaste(event: ClipboardEvent): void {\n        if (event.clipboardData && this.shouldPaste(event)) {\n            const clipboardId = getClipboardIdFromDataTransfer(event.clipboardData);\n            const clipboardData = this.clipboardService.get(clipboardId);\n            if (clipboardData) {\n                this.actionDispatcher.dispatch(PasteOperation.create({ clipboardData, editorContext: this.editorContext.get() }));\n            }\n            event.preventDefault();\n        }\n    }\n\n    protected shouldCopy(_event: ClipboardEvent): boolean {\n        return this.editorContext.get().selectedElementIds.length > 0 && this.isDiagramActive();\n    }\n\n    protected shouldPaste(_event: ClipboardEvent): boolean {\n        return this.isDiagramActive();\n    }\n\n    private isDiagramActive(): boolean {\n        return document.activeElement?.parentElement?.id === this.viewerOptions.baseDiv;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { configureActionHandler, TYPES } from '~glsp-sprotty';\nimport { CopyPasteContextMenuItemProvider, InvokeCopyPasteAction, InvokeCopyPasteActionHandler } from './copy-paste-context-menu';\nimport { LocalClipboardService, ServerCopyPasteHandler } from './copy-paste-handler';\n\nexport const glspServerCopyPasteModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(TYPES.ICopyPasteHandler).to(ServerCopyPasteHandler);\n    bind(TYPES.IAsyncClipboardService).to(LocalClipboardService).inSingletonScope();\n});\n\n/**\n * This module is not required if the diagram is deployed in Theia but only intended to be used\n * in a standalone deployment of GLSP. If the GLSP diagram in Theia use the Theia-native\n * `CopyPasteMenuContribution` in `glsp-theia-integration` instead.\n */\nexport const copyPasteContextMenuModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(TYPES.IContextMenuProvider).to(CopyPasteContextMenuItemProvider).inSingletonScope();\n    bind(InvokeCopyPasteActionHandler).toSelf().inSingletonScope();\n    configureActionHandler({ bind, isBound }, InvokeCopyPasteAction.KIND, InvokeCopyPasteActionHandler);\n});\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Decoration, DecorationPlacer, isSizeable, Point, SChildElement, SModelElement, SRoutableElement } from '~glsp-sprotty';\n\n@injectable()\nexport class GlspDecorationPlacer extends DecorationPlacer {\n    protected static readonly DECORATION_OFFSET: Point = { x: 12, y: 10 };\n\n    protected override getPosition(element: SModelElement & Decoration): Point {\n        if (element instanceof SChildElement && element.parent instanceof SRoutableElement) {\n            return super.getPosition(element);\n        }\n        if (isSizeable(element)) {\n            return {\n                x: GlspDecorationPlacer.DECORATION_OFFSET.x * element.bounds.width,\n                y: GlspDecorationPlacer.DECORATION_OFFSET.y * element.bounds.height\n            };\n        }\n        return Point.ORIGIN;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { TYPES, bindAsService } from '~glsp-sprotty';\nimport '../../../css/decoration.css';\nimport { GlspDecorationPlacer } from './decoration-placer';\n\nconst glspDecorationModule = new ContainerModule(bind => {\n    bindAsService(bind, TYPES.IVNodePostprocessor, GlspDecorationPlacer);\n});\n\nexport default glspDecorationModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { ApplyLabelEditCommand, TYPES, bindAsService, configureCommand } from '~glsp-sprotty';\nimport { DirectLabelEditTool } from './edit-label-tool';\nimport { BalloonLabelValidationDecorator, ServerEditLabelValidator } from './edit-label-validator';\n\nconst glspEditLabelModule = new ContainerModule((bind, _unbind, isBound, _rebind) => {\n    bind(TYPES.IEditLabelValidator).to(ServerEditLabelValidator);\n    bind(TYPES.IEditLabelValidationDecorator).to(BalloonLabelValidationDecorator);\n    bindAsService(bind, TYPES.IDefaultTool, DirectLabelEditTool);\n    configureCommand({ bind, isBound }, ApplyLabelEditCommand);\n});\n\nexport default glspEditLabelModule;\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { EditLabelKeyListener, EditLabelMouseListener, KeyListener, MouseListener } from '~glsp-sprotty';\nimport { BaseGLSPTool } from '../tools/base-glsp-tool';\n\n@injectable()\nexport class DirectLabelEditTool extends BaseGLSPTool {\n    static readonly ID = 'glsp.direct-label-edit-tool';\n\n    protected editLabelMouseListener: MouseListener;\n    protected editLabelKeyListener: KeyListener;\n\n    get id(): string {\n        return DirectLabelEditTool.ID;\n    }\n\n    protected createEditLabelMouseListener(): MouseListener {\n        return new EditLabelMouseListener();\n    }\n\n    protected createEditLabelKeyListener(): KeyListener {\n        return new EditLabelKeyListener();\n    }\n\n    enable(): void {\n        this.editLabelKeyListener = this.createEditLabelKeyListener();\n        this.editLabelMouseListener = this.createEditLabelMouseListener();\n        this.mouseTool.register(this.editLabelMouseListener);\n        this.keyTool.register(this.editLabelKeyListener);\n    }\n\n    disable(): void {\n        this.keyTool.deregister(this.editLabelKeyListener);\n        this.mouseTool.deregister(this.editLabelMouseListener);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    EditLabelValidationResult,\n    EditableLabel,\n    IEditLabelValidationDecorator,\n    IEditLabelValidator,\n    RequestEditValidationAction,\n    SModelElement,\n    SetEditValidationResultAction,\n    Severity,\n    TYPES,\n    ValidationStatus\n} from '~glsp-sprotty';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\n\nexport namespace LabelEditValidation {\n    export const CONTEXT_ID = 'label-edit';\n\n    export function toEditLabelValidationResult(status: ValidationStatus): EditLabelValidationResult {\n        const message = status.message;\n        let severity = 'ok' as Severity;\n        if (ValidationStatus.isError(status)) {\n            severity = 'error' as Severity;\n        } else if (ValidationStatus.isWarning(status)) {\n            severity = 'warning' as Severity;\n        }\n        return { message, severity };\n    }\n\n    export function createValidationRequestAction(value: string, labelId: string): RequestEditValidationAction {\n        return RequestEditValidationAction.create({ contextId: CONTEXT_ID, modelElementId: labelId, text: value });\n    }\n}\n\n@injectable()\nexport class ServerEditLabelValidator implements IEditLabelValidator {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: GLSPActionDispatcher;\n\n    validate(value: string, label: EditableLabel & SModelElement): Promise<EditLabelValidationResult> {\n        const action = LabelEditValidation.createValidationRequestAction(value, label.id);\n        return this.actionDispatcher.requestUntil(action).then(response => this.getValidationResultFromResponse(response));\n    }\n\n    getValidationResultFromResponse(action: Action): EditLabelValidationResult {\n        if (SetEditValidationResultAction.is(action)) {\n            return LabelEditValidation.toEditLabelValidationResult(action.status);\n        }\n        return { severity: 'ok' as Severity };\n    }\n}\n\n@injectable()\nexport class BalloonLabelValidationDecorator implements IEditLabelValidationDecorator {\n    decorate(input: HTMLInputElement, result: EditLabelValidationResult): void {\n        const containerElement = input.parentElement;\n        if (!containerElement) {\n            return;\n        }\n        if (result.message) {\n            containerElement.setAttribute('data-balloon', result.message);\n            containerElement.setAttribute('data-balloon-pos', 'up-left');\n            containerElement.setAttribute('data-balloon-visible', 'true');\n        }\n        switch (result.severity) {\n            case 'ok':\n                containerElement.classList.add('validation-ok');\n                break;\n            case 'warning':\n                containerElement.classList.add('validation-warning');\n                break;\n            case 'error':\n                containerElement.classList.add('validation-error');\n                break;\n        }\n    }\n\n    dispose(input: HTMLInputElement): void {\n        const containerElement = input.parentElement;\n        if (containerElement) {\n            containerElement.removeAttribute('data-balloon');\n            containerElement.removeAttribute('data-balloon-pos');\n            containerElement.removeAttribute('data-balloon-visible');\n            containerElement.classList.remove('validation-ok', 'validation-warning', 'validation-error');\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, configureCommand, ExportSvgCommand, ExportSvgKeyListener, ExportSvgPostprocessor, TYPES } from '~glsp-sprotty';\nimport { GLSPSvgExporter } from './glsp-svg-exporter';\n\nconst glspExportSvgModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    bindAsService(context, TYPES.KeyListener, ExportSvgKeyListener);\n    bindAsService(context, TYPES.HiddenVNodePostprocessor, ExportSvgPostprocessor);\n    configureCommand(context, ExportSvgCommand);\n    bind(TYPES.SvgExporter).to(GLSPSvgExporter).inSingletonScope();\n});\n\nexport default glspExportSvgModule;\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { v4 as uuid } from 'uuid';\nimport { ExportSvgAction, RequestAction, SModelRoot, SvgExporter } from '~glsp-sprotty';\n\n@injectable()\nexport class GLSPSvgExporter extends SvgExporter {\n    override export(root: SModelRoot, _request?: RequestAction<ExportSvgAction>): void {\n        if (typeof document !== 'undefined') {\n            const svgElement = this.findSvgElement();\n            if (svgElement) {\n                // createSvg requires the svg to have a non-empty id, so we generate one if necessary\n                const originalId = svgElement.id;\n                try {\n                    svgElement.id = originalId || uuid();\n                    // provide generated svg code with respective sizing for proper viewing in browser and remove undesired border\n                    const bounds = this.getBounds(root);\n                    const svg = this.createSvg(svgElement, root).replace(\n                        'style=\"',\n                        `style=\"width: ${bounds.width}px !important;height: ${bounds.height}px !important;border: none !important;`\n                    );\n                    // do not give request/response id here as otherwise the action is treated as an unrequested response\n                    this.actionDispatcher.dispatch(ExportSvgAction.create(svg, ''));\n                } finally {\n                    svgElement.id = originalId;\n                }\n            }\n        }\n    }\n\n    protected findSvgElement(): SVGSVGElement | null {\n        const div = document.getElementById(this.options.hiddenDiv);\n        // search for first svg element as hierarchy within Sprotty might change\n        return div && div.querySelector('svg');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { SetTypeHintsAction, TYPES, configureActionHandler, configureCommand } from '~glsp-sprotty';\nimport { ApplyTypeHintsCommand, TypeHintProvider } from './type-hints';\n\nconst modelHintsModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(TypeHintProvider).toSelf().inSingletonScope();\n    bind(TYPES.ITypeHintProvider).toService(TypeHintProvider);\n    configureActionHandler({ bind, isBound }, SetTypeHintsAction.KIND, TypeHintProvider);\n    configureCommand({ bind, isBound }, ApplyTypeHintsCommand);\n});\n\nexport default modelHintsModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { SModelElement, SModelElementSchema, SModelExtension } from '~glsp-sprotty';\n\nexport const containerFeature = Symbol('containable');\n\nexport interface Containable extends SModelExtension {\n    isContainableElement(input: SModelElement | SModelElementSchema | string): boolean;\n}\n\nexport function isContainable(element: SModelElement): element is SModelElement & Containable {\n    return element.hasFeature(containerFeature);\n}\n\nexport const reparentFeature = Symbol('reparentFeature');\n\nexport interface Reparentable extends SModelExtension {}\n\nexport function isReparentable(element: SModelElement): element is SModelElement & Reparentable {\n    return element.hasFeature(reparentFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    CommandExecutionContext,\n    CommandReturn,\n    Connectable,\n    EdgeTypeHint,\n    FeatureSet,\n    IActionHandler,\n    ICommand,\n    SEdge,\n    SModelElement,\n    SModelRoot,\n    SShapeElement,\n    SetTypeHintsAction,\n    ShapeTypeHint,\n    TYPES,\n    TypeHint,\n    connectableFeature,\n    deletableFeature,\n    editFeature,\n    moveFeature\n} from '~glsp-sprotty';\nimport { getElementTypeId, hasCompatibleType } from '../../utils/smodel-util';\nimport { resizeFeature } from '../change-bounds/model';\nimport { reconnectFeature } from '../reconnect/model';\nimport { IFeedbackActionDispatcher } from '../tool-feedback/feedback-action-dispatcher';\nimport { FeedbackCommand } from '../tool-feedback/model';\nimport { Containable, containerFeature, reparentFeature } from './model';\n\n/**\n * Is dispatched by the {@link TypeHintProvider} to apply the type hints received from the server\n * onto the graphical model. The action is dispatched as persistent feedback to ensure the applied type hints\n * don't get lost after a server-side model update.\n */\nexport interface ApplyTypeHintsAction extends Action {\n    kind: typeof ApplyTypeHintsAction.KIND;\n}\n\nexport namespace ApplyTypeHintsAction {\n    export const KIND = 'applyTypeHints';\n\n    export function is(object: any): object is ApplyTypeHintsAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): ApplyTypeHintsAction {\n        return { kind: KIND };\n    }\n}\n\n@injectable()\nexport class ApplyTypeHintsCommand extends FeedbackCommand {\n    public static KIND = ApplyTypeHintsAction.KIND;\n    public override readonly priority = 10;\n\n    @inject(TYPES.ITypeHintProvider) protected typeHintProvider: ITypeHintProvider;\n\n    constructor(@inject(TYPES.Action) protected action: Action) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        context.root.index.all().forEach(element => {\n            if (element instanceof SShapeElement || element instanceof SModelRoot) {\n                this.applyShapeTypeHint(element);\n            } else if (element instanceof SEdge) {\n                return this.applyEdgeTypeHint(element);\n            }\n        });\n        return context.root;\n    }\n\n    protected applyEdgeTypeHint(element: SModelElement): void {\n        const hint = this.typeHintProvider.getEdgeTypeHint(element);\n        if (hint && isModifiableFeatureSet(element.features)) {\n            addOrRemove(element.features, deletableFeature, hint.deletable);\n            addOrRemove(element.features, editFeature, hint.routable);\n            addOrRemove(element.features, reconnectFeature, hint.repositionable);\n        }\n    }\n\n    protected applyShapeTypeHint(element: SModelElement): void {\n        const hint = this.typeHintProvider.getShapeTypeHint(element);\n        if (hint && isModifiableFeatureSet(element.features)) {\n            addOrRemove(element.features, deletableFeature, hint.deletable);\n            addOrRemove(element.features, moveFeature, hint.repositionable);\n            addOrRemove(element.features, resizeFeature, hint.resizable);\n            addOrRemove(element.features, reparentFeature, hint.reparentable);\n\n            addOrRemove(element.features, containerFeature, true);\n            const containable = createContainable(hint);\n            Object.assign(element, containable);\n\n            addOrRemove(element.features, connectableFeature, true);\n            const validSourceEdges = this.typeHintProvider.getValidEdgeElementTypes(element, 'source');\n            const validTargetEdges = this.typeHintProvider.getValidEdgeElementTypes(element, 'target');\n            const connectable = createConnectable(validSourceEdges, validTargetEdges);\n            Object.assign(element, connectable);\n        }\n    }\n}\n\nfunction createConnectable(validSourceEdges: string[], validTargetEdges: string[]): Connectable {\n    return {\n        canConnect: (routable, role) =>\n            role === 'source' ? validSourceEdges.includes(routable.type) : validTargetEdges.includes(routable.type)\n    };\n}\n\nfunction createContainable(hint: ShapeTypeHint): Containable {\n    return {\n        isContainableElement: element =>\n            hint.containableElementTypeIds ? hint.containableElementTypeIds.includes(getElementTypeId(element)) : false\n    };\n}\n\nfunction addOrRemove(features: Set<symbol>, feature: symbol, add: boolean): void {\n    if (add && !features.has(feature)) {\n        features.add(feature);\n    } else if (!add && features.has(feature)) {\n        features.delete(feature);\n    }\n}\n\nfunction isModifiableFeatureSet(featureSet?: FeatureSet): featureSet is FeatureSet & Set<symbol> {\n    return featureSet !== undefined && featureSet instanceof Set;\n}\n\nexport interface ITypeHintProvider {\n    getShapeTypeHint(input: SModelElement | SModelElement | string): ShapeTypeHint | undefined;\n    getEdgeTypeHint(input: SModelElement | SModelElement | string): EdgeTypeHint | undefined;\n    getValidEdgeElementTypes(input: SModelElement | SModelElement | string, role: 'source' | 'target'): string[];\n}\n\n@injectable()\nexport class TypeHintProvider implements IActionHandler, ITypeHintProvider {\n    @inject(TYPES.IFeedbackActionDispatcher)\n    protected feedbackActionDispatcher: IFeedbackActionDispatcher;\n\n    protected shapeHints: Map<string, ShapeTypeHint> = new Map();\n    protected edgeHints: Map<string, EdgeTypeHint> = new Map();\n\n    handle(action: Action): ICommand | Action | void {\n        if (SetTypeHintsAction.is(action)) {\n            action.shapeHints.forEach(hint => this.shapeHints.set(hint.elementTypeId, hint));\n            action.edgeHints.forEach(hint => this.edgeHints.set(hint.elementTypeId, hint));\n            this.feedbackActionDispatcher.registerFeedback(this, [ApplyTypeHintsAction.create()]);\n        }\n    }\n\n    getValidEdgeElementTypes(input: SModelElement | SModelElement | string, role: 'source' | 'target'): string[] {\n        const elementTypeId = getElementTypeId(input);\n        if (role === 'source') {\n            return Array.from(\n                Array.from(this.edgeHints.values())\n                    .filter(hint =>\n                        hint.sourceElementTypeIds.some(sourceElementTypeId => hasCompatibleType(elementTypeId, sourceElementTypeId))\n                    )\n                    .map(hint => hint.elementTypeId)\n            );\n        } else {\n            return Array.from(\n                Array.from(this.edgeHints.values())\n                    .filter(hint =>\n                        hint.targetElementTypeIds.some(targetElementTypeId => hasCompatibleType(elementTypeId, targetElementTypeId))\n                    )\n                    .map(hint => hint.elementTypeId)\n            );\n        }\n    }\n\n    getShapeTypeHint(input: SModelElement | SModelElement | string): ShapeTypeHint | undefined {\n        return getTypeHint(input, this.shapeHints);\n    }\n\n    getEdgeTypeHint(input: SModelElement | SModelElement | string): EdgeTypeHint | undefined {\n        return getTypeHint(input, this.edgeHints);\n    }\n}\n\nfunction getTypeHint<T extends TypeHint>(input: SModelElement | SModelElement | string, hints: Map<string, T>): T | undefined {\n    const type = getElementTypeId(input);\n    let hint = hints.get(type);\n    // Check subtypes\n    if (hint === undefined) {\n        const subtypes = type.split(':');\n        while (hint === undefined && subtypes.length > 0) {\n            subtypes.pop();\n            hint = hints.get(subtypes.join(':'));\n        }\n    }\n    return hint;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport {\n    CenterCommand,\n    ClosePopupActionHandler,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    FitToScreenCommand,\n    HoverFeedbackCommand,\n    HoverKeyListener,\n    HoverState,\n    MoveCommand,\n    PopupHoverMouseListener,\n    PopupPositionUpdater,\n    SetPopupModelCommand,\n    SetViewportCommand,\n    TYPES,\n    bindAsService,\n    configureActionHandler,\n    configureCommand\n} from '~glsp-sprotty';\nimport { FocusStateChangedAction } from '../../base/actions/focus-change-action';\nimport { GlspHoverMouseListener } from './hover';\n\nconst glspHoverModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    bindAsService(context, TYPES.PopupVNodePostprocessor, PopupPositionUpdater);\n    bindAsService(context, TYPES.MouseListener, GlspHoverMouseListener);\n    bindAsService(context, TYPES.PopupMouseListener, PopupHoverMouseListener);\n    bindAsService(context, TYPES.KeyListener, HoverKeyListener);\n\n    bind<HoverState>(TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n    bind(ClosePopupActionHandler).toSelf().inSingletonScope();\n\n    configureCommand(context, HoverFeedbackCommand);\n    configureCommand(context, SetPopupModelCommand);\n    configureActionHandler(context, SetPopupModelCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, FitToScreenCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, CenterCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, SetViewportCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, MoveCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, FocusStateChangedAction.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, EnableToolsAction.KIND, GlspHoverMouseListener);\n    configureActionHandler(context, EnableDefaultToolsAction.KIND, GlspHoverMouseListener);\n    configureActionHandler(context, FocusStateChangedAction.KIND, GlspHoverMouseListener);\n});\n\nexport default glspHoverModule;\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Action,\n    Bounds,\n    EMPTY_ROOT,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    HoverFeedbackAction,\n    HoverMouseListener,\n    IActionHandler,\n    ICommand,\n    PreRenderedElementSchema,\n    RequestPopupModelAction,\n    SModelElement,\n    SModelElementSchema,\n    SModelRootSchema,\n    SetPopupModelAction\n} from '~glsp-sprotty';\nimport { FocusStateChangedAction } from '../../base/actions/focus-change-action';\nimport { EdgeCreationTool } from '../tools/edge-creation-tool';\nimport { GIssueMarker, getSeverity } from '../validation/issue-marker';\n@injectable()\nexport class GlspHoverMouseListener extends HoverMouseListener implements IActionHandler {\n    protected enableHover = true;\n    /**\n     * Stops mouse over timer and remove hover feedback, if focus is lost.\n     *\n     * This fixes strange effects that appear if the mouse left the element via e.g. a context menu,\n     * which explicitly removes the focus of the diagram.\n     * @see SelectionServiceAwareContextMenuMouseListener\n     * @param action should be a `FocusStateChangedAction`\n     * @returns a `HoverFeedbackAction` resetting the state, if the specified action indicates lost focus\n     */\n    handle(action: Action): void | Action | ICommand {\n        if (FocusStateChangedAction.is(action) && !action.hasFocus) {\n            this.stopMouseOverTimer();\n            if (this.lastHoverFeedbackElementId) {\n                const previousTargetId = this.lastHoverFeedbackElementId;\n                this.lastHoverFeedbackElementId = undefined;\n                return HoverFeedbackAction.create({ mouseoverElement: previousTargetId, mouseIsOver: false });\n            }\n        } else if (EnableToolsAction.is(action)) {\n            this.enableHover = !(action as EnableToolsAction).toolIds.includes(EdgeCreationTool.ID);\n        } else if (EnableDefaultToolsAction.is(action)) {\n            this.enableHover = true;\n        }\n    }\n\n    override mouseOver(target: SModelElement, event: MouseEvent): (Action | Promise<Action>)[] {\n        if (this.enableHover) {\n            return super.mouseOver(target, event);\n        }\n        return [];\n    }\n\n    protected override startMouseOverTimer(target: SModelElement, event: MouseEvent): Promise<Action> {\n        this.stopMouseOverTimer();\n        return new Promise(resolve => {\n            this.state.mouseOverTimer = window.setTimeout(() => {\n                const popupBounds = this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                if (target instanceof GIssueMarker) {\n                    resolve(SetPopupModelAction.create(this.createPopupModel(target as GIssueMarker, popupBounds)));\n                } else {\n                    resolve(RequestPopupModelAction.create({ elementId: target.id, bounds: popupBounds }));\n                }\n\n                this.state.popupOpen = true;\n                this.state.previousPopupElement = target;\n            }, this.options.popupOpenDelay);\n        });\n    }\n\n    protected createPopupModel(marker: GIssueMarker, bounds: Bounds): SModelRootSchema {\n        if (marker.issues !== undefined && marker.issues.length > 0) {\n            return {\n                type: 'html',\n                id: 'sprotty-popup',\n                children: [this.createMarkerIssuePopup(marker)],\n                canvasBounds: this.modifyBounds(bounds)\n            };\n        }\n        return { type: EMPTY_ROOT.type, id: EMPTY_ROOT.id };\n    }\n\n    protected createMarkerIssuePopup(marker: GIssueMarker): SModelElementSchema {\n        const message = this.createIssueMessage(marker);\n        return {\n            type: 'pre-rendered',\n            id: 'popup-title',\n            code: `<div class=\"${getSeverity(marker)}\"><div class=\"sprotty-popup-title\">${message}</div></div>`\n        } as PreRenderedElementSchema;\n    }\n\n    protected createIssueMessage(marker: GIssueMarker): string {\n        return '<ul>' + marker.issues.map(i => '<li>' + i.severity.toUpperCase() + ': ' + i.message + '</li>').join('') + '</ul>';\n    }\n\n    protected modifyBounds(bounds: Bounds): Bounds {\n        return bounds;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { configureActionHandler } from '~glsp-sprotty';\nimport {\n    AlignElementsAction,\n    AlignElementsActionHandler,\n    ResizeElementsAction,\n    ResizeElementsActionHandler\n} from './layout-elements-action';\n\nconst layoutModule = new ContainerModule((bind, _unbind, isBound, rebind) => {\n    const context = { bind, isBound };\n    configureActionHandler(context, ResizeElementsAction.KIND, ResizeElementsActionHandler);\n    configureActionHandler(context, AlignElementsAction.KIND, AlignElementsActionHandler);\n});\n\nexport default layoutModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    ChangeBoundsOperation,\n    ElementAndBounds,\n    ElementMove,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    MoveAction,\n    SModelElement,\n    SetBoundsAction,\n    TYPES,\n    Writable,\n    hasArrayProp,\n    hasNumberProp,\n    hasStringProp\n} from '~glsp-sprotty';\nimport { toValidElementAndBounds, toValidElementMove } from '../../utils/layout-utils';\nimport { BoundsAwareModelElement, getElements } from '../../utils/smodel-util';\nimport { isBoundsAwareMoveable, isResizable } from '../change-bounds/model';\nimport { IMovementRestrictor } from '../change-bounds/movement-restrictor';\nimport { SelectionService } from '../select/selection-service';\n\n/**\n * Used to specify the desired resize dimension for a {@link ResizeElementsCommand}.\n */\nexport enum ResizeDimension {\n    Width,\n    Height,\n    Width_And_Height\n}\n\n/**\n * A function that computes a single number from a set of given numbers\n * i.e. it reduces the given numbers to one single number.\n * Mainly used by the {@link ResizeElementsCommand} to reduce the given dimensions to a target dimension value.\n */\nexport type ReduceFunction = (...values: number[]) => number;\n\nexport namespace ReduceFunction {\n    /**\n     * Returns the minimal value of the given numbers.\n     * @param values Numbers to be evaluated.\n     * @returns The reduced number.\n     */\n    export function min(...values: number[]): number {\n        return Math.min(...values);\n    }\n\n    /**\n     * Returns the maximal value of the given numbers.\n     * @param values Numbers to be evaluated.\n     * @returns The reduced number.\n     */\n    export function max(...values: number[]): number {\n        return Math.max(...values);\n    }\n\n    /**\n     * Computes the  average of the given numbers.\n     * @param values Numbers to be evaluated.\n     */\n    export function avg(...values: number[]): number {\n        return values.reduce((a, b) => a + b, 0) / values.length;\n    }\n\n    /**\n     *  Returns the last value of the given numbers.\n     *  @param values Numbers to be evaluated.\n     *  @returns The reduced number.\n     */\n    export function first(...values: number[]): number {\n        return values[0];\n    }\n\n    /**\n     *  Returns the minimal value of the given numbers.\n     *  @param values Numbers  to be evaluated.\n     *  @returns The reduced number.\n     */\n    export function last(...values: number[]): number {\n        return values[values.length - 1];\n    }\n\n    /**\n     * Returns the reduce function that corresponds to the given {@link ReduceFunctionType}.\n     * @param type The reduce function kind.\n     * @returns The corresponding reduce function.\n     */\n    export function get(type: ReduceFunctionType): ReduceFunction {\n        return ReduceFunction[type];\n    }\n}\n\n/** Union type of all {@link ReduceFunction} keys. */\nexport type ReduceFunctionType = Exclude<keyof typeof ReduceFunction, 'get'>;\n\nexport interface ResizeElementsAction extends Action {\n    kind: typeof ResizeElementsAction.KIND;\n\n    /**\n     * IDs of the elements that should be resized. If no IDs are given, the selected elements will be resized.\n     */\n    elementIds: string[];\n\n    /**\n     * Resize dimension. The default is {@link ResizeDimension.Width}.\n     */\n    dimension: ResizeDimension;\n\n    /**\n     * Type of the {@link ReduceFunction} that should be used to reduce the dimension to a target dimension value\n     */\n    reduceFunction: ReduceFunctionType;\n}\n\nexport namespace ResizeElementsAction {\n    export const KIND = 'resizeElementAction';\n\n    export function is(object: any): object is ResizeElementsAction {\n        return (\n            Action.hasKind(object, KIND) &&\n            hasArrayProp(object, 'elementIds') &&\n            hasNumberProp(object, 'dimension') &&\n            hasStringProp(object, 'reduceFunction')\n        );\n    }\n\n    export function create(options: {\n        elementIds?: string[];\n        dimension?: ResizeDimension;\n        reduceFunction: ReduceFunctionType;\n    }): ResizeElementsAction {\n        return {\n            kind: KIND,\n            dimension: ResizeDimension.Width,\n            elementIds: [],\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport abstract class LayoutElementsActionHandler implements IActionHandler {\n    @inject(TYPES.IActionDispatcher)\n    protected actionDispatcher: IActionDispatcher;\n\n    @inject(TYPES.SelectionService)\n    protected selectionService: SelectionService;\n\n    @inject(TYPES.IMovementRestrictor)\n    @optional()\n    protected movementRestrictor?: IMovementRestrictor;\n\n    abstract handle(action: Action): void | Action | ICommand;\n\n    getSelectedElements(selection: { elementIds: string[] }): BoundsAwareModelElement[] {\n        const index = this.selectionService.getModelRoot().index;\n        const selectedElements = selection.elementIds.length > 0 ? selection.elementIds : this.selectionService.getSelectedElementIDs();\n        return getElements(index, selectedElements, this.isActionElement);\n    }\n\n    protected abstract isActionElement(element: SModelElement): element is BoundsAwareModelElement;\n\n    dispatchAction(action: Action): void {\n        this.actionDispatcher.dispatch(action);\n    }\n\n    dispatchActions(actions: Action[]): void {\n        this.actionDispatcher.dispatchAll(actions);\n    }\n}\n\n@injectable()\nexport class ResizeElementsActionHandler extends LayoutElementsActionHandler {\n    handle(action: ResizeElementsAction): void {\n        const elements = this.getSelectedElements(action);\n        if (elements.length > 1) {\n            const reduceFn = ReduceFunction.get(action.reduceFunction);\n            switch (action.dimension) {\n                case ResizeDimension.Width:\n                    return this.resizeWidth(elements, reduceFn);\n                case ResizeDimension.Height:\n                    return this.resizeHeight(elements, reduceFn);\n                case ResizeDimension.Width_And_Height:\n                    return this.resizeWidthAndHeight(elements, reduceFn);\n            }\n        }\n    }\n\n    resizeWidth(elements: BoundsAwareModelElement[], reduceFn: ReduceFunction): void {\n        const targetWidth = reduceFn(...elements.map(element => element.bounds.width));\n        this.dispatchResizeActions(elements, (element, bounds) => {\n            // resize around center (horizontal)\n            const halfDiffWidth = 0.5 * (targetWidth - element.bounds.width);\n            bounds.newPosition!.x = element.bounds.x - halfDiffWidth;\n            bounds.newSize.width = targetWidth;\n        });\n    }\n\n    resizeHeight(elements: BoundsAwareModelElement[], reduceFn: ReduceFunction): void {\n        const targetHeight = reduceFn(...elements.map(element => element.bounds.height));\n        this.dispatchResizeActions(elements, (element, bounds) => {\n            // resize around middle (vertical)\n            const halfDiffHeight = 0.5 * (targetHeight - element.bounds.height);\n            bounds.newPosition!.y = element.bounds.y - halfDiffHeight;\n            bounds.newSize.height = targetHeight;\n        });\n    }\n\n    resizeWidthAndHeight(elements: BoundsAwareModelElement[], reduceFn: ReduceFunction): void {\n        const targetWidth = reduceFn(...elements.map(element => element.bounds.width));\n        const targetHeight = reduceFn(...elements.map(element => element.bounds.height));\n        this.dispatchResizeActions(elements, (element, bounds) => {\n            // resize around center and middle (horizontal & vertical)\n            const halfDiffWidth = 0.5 * (targetWidth - element.bounds.width);\n            const halfDiffHeight = 0.5 * (targetHeight - element.bounds.height);\n            bounds.newPosition = { x: element.bounds.x - halfDiffWidth, y: element.bounds.y - halfDiffHeight };\n            bounds.newSize = { width: targetWidth, height: targetHeight };\n        });\n    }\n\n    dispatchResizeActions(\n        elements: BoundsAwareModelElement[],\n        change: (element: BoundsAwareModelElement, bounds: Writable<ElementAndBounds>) => void\n    ): void {\n        const elementAndBounds: ElementAndBounds[] = []; // client- and server-side resize\n\n        elements.forEach(element => {\n            const elementChange = this.createElementAndBounds(element, change);\n            if (elementChange) {\n                // simply skip invalid changes\n                elementAndBounds.push(elementChange);\n            }\n        });\n        this.dispatchActions([SetBoundsAction.create(elementAndBounds), ChangeBoundsOperation.create(elementAndBounds)]);\n    }\n\n    createElementAndBounds(\n        element: BoundsAwareModelElement,\n        change: (_element: BoundsAwareModelElement, _bounds: Writable<ElementAndBounds>) => void\n    ): Writable<ElementAndBounds> | undefined {\n        const bounds: ElementAndBounds = {\n            elementId: element.id,\n            newPosition: {\n                x: element.bounds.x,\n                y: element.bounds.y\n            },\n            newSize: {\n                width: element.bounds.width,\n                height: element.bounds.height\n            }\n        };\n        change(element, bounds);\n        return toValidElementAndBounds(element, bounds, this.movementRestrictor);\n    }\n    protected isActionElement(element: SModelElement): element is BoundsAwareModelElement {\n        return isResizable(element);\n    }\n}\n\nexport enum Alignment {\n    Left,\n    Center,\n    Right,\n    Top,\n    Middle,\n    Bottom\n}\n\n/**\n * A function that retrieves a specific (sub)-selection of elements from a given set of elements.\n * Mainly used by the {@link AlignElementsActionHandler}.\n */\nexport type SelectFunction = (elements: BoundsAwareModelElement[]) => BoundsAwareModelElement[];\nexport namespace SelectFunction {\n    /**\n     * Select all elements from the given set of elements.\n     * @param elements The set of elements.\n     * @returns All elements.\n     */\n    export function all(elements: BoundsAwareModelElement[]): BoundsAwareModelElement[] {\n        return elements;\n    }\n\n    /**\n     * Select the first element from a given set of elements.\n     * @param elements The elements.\n     * @returns An array containing the first element of the given elements.\n     */\n    export function first(elements: BoundsAwareModelElement[]): BoundsAwareModelElement[] {\n        return [elements[0]];\n    }\n\n    /**\n     * Select the last element from a given set of elements.\n     * @param elements The elements.\n     * @returns An array containing the last element of the given elements.\n     */\n    export function last(elements: BoundsAwareModelElement[]): BoundsAwareModelElement[] {\n        return [elements[elements.length - 1]];\n    }\n\n    /**\n     * Returns the select function that corresponds to the given {@link SelectFunctionType}.\n     * @param type The select function type.\n     * @returns The corresponding select function.\n     */\n    export function get(kind: SelectFunctionType): SelectFunction {\n        return SelectFunction[kind];\n    }\n}\n\n/** Union type of all {@link SelectFunction} keys. */\nexport type SelectFunctionType = Exclude<keyof typeof SelectFunction, 'get'>;\n\nexport interface AlignElementsAction extends Action {\n    kind: typeof AlignElementsAction.KIND;\n\n    /**\n     * IDs of the elements that should be aligned. If no IDs are given, the selected elements will be aligned.\n     */\n    elementIds: string[];\n    /**\n     * Alignment direction. The default is {@link Alignment.Left}\n     */\n    alignment: Alignment;\n    /**\n     * Function to selected elements that are considered during alignment calculation.\n     * The default value is {@link Select.all}.\n     */\n    selectFunction: SelectFunctionType;\n}\n\nexport namespace AlignElementsAction {\n    export const KIND = 'alignElements';\n\n    export function is(object: any): object is AlignElementsAction {\n        return (\n            Action.hasKind(object, KIND) &&\n            hasArrayProp(object, 'elementIds') &&\n            hasNumberProp(object, 'alignment') &&\n            hasStringProp(object, 'selectFunction')\n        );\n    }\n\n    export function create(\n        options: { elementIds?: string[]; alignment?: Alignment; selectionFunction?: SelectFunctionType } = {}\n    ): AlignElementsAction {\n        return {\n            kind: KIND,\n            elementIds: [],\n            alignment: Alignment.Left,\n            selectFunction: 'all',\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport class AlignElementsActionHandler extends LayoutElementsActionHandler {\n    handle(action: AlignElementsAction): void {\n        const elements = this.getSelectedElements(action);\n        const selectFn = SelectFunction.get(action.selectFunction);\n        const calculatedElements = selectFn(elements);\n        if (elements.length > 1) {\n            switch (action.alignment) {\n                case Alignment.Left:\n                    return this.alignLeft(calculatedElements);\n                case Alignment.Center:\n                    return this.alignCenter(calculatedElements);\n                case Alignment.Right:\n                    return this.alignRight(calculatedElements);\n                case Alignment.Top:\n                    return this.alignTop(calculatedElements);\n                case Alignment.Middle:\n                    return this.alignMiddle(calculatedElements);\n                case Alignment.Bottom:\n                    return this.alignBottom(calculatedElements);\n            }\n        }\n    }\n\n    alignLeft(elements: BoundsAwareModelElement[]): void {\n        const minX = elements.map(element => element.bounds.x).reduce((a, b) => Math.min(a, b));\n        this.dispatchAlignActions(elements, (_, move) => (move.toPosition.x = minX));\n    }\n\n    alignCenter(elements: BoundsAwareModelElement[]): void {\n        const minX = elements.map(element => element.bounds.x).reduce((a, b) => Math.min(a, b));\n        const maxX = elements.map(element => element.bounds.x + element.bounds.width).reduce((a, b) => Math.max(a, b));\n        const diffX = maxX - minX;\n        const centerX = minX + 0.5 * diffX;\n        this.dispatchAlignActions(elements, (element, move) => (move.toPosition.x = centerX - 0.5 * element.bounds.width));\n    }\n\n    alignRight(elements: BoundsAwareModelElement[]): void {\n        const maxX = elements.map(element => element.bounds.x + element.bounds.width).reduce((a, b) => Math.max(a, b));\n        this.dispatchAlignActions(elements, (element, move) => (move.toPosition.x = maxX - element.bounds.width));\n    }\n\n    alignTop(elements: BoundsAwareModelElement[]): void {\n        const minY = elements.map(element => element.bounds.y).reduce((a, b) => Math.min(a, b));\n        this.dispatchAlignActions(elements, (_, move) => (move.toPosition.y = minY));\n    }\n\n    alignMiddle(elements: BoundsAwareModelElement[]): void {\n        const minY = elements.map(element => element.bounds.y).reduce((a, b) => Math.min(a, b));\n        const maxY = elements.map(element => element.bounds.y + element.bounds.height).reduce((a, b) => Math.max(a, b));\n        const diffY = maxY - minY;\n        const middleY = minY + 0.5 * diffY;\n        this.dispatchAlignActions(elements, (element, move) => (move.toPosition.y = middleY - 0.5 * element.bounds.height));\n    }\n\n    alignBottom(elements: BoundsAwareModelElement[]): void {\n        const maxY = elements.map(element => element.bounds.y + element.bounds.height).reduce((a, b) => Math.max(a, b));\n        this.dispatchAlignActions(elements, (element, move) => (move.toPosition.y = maxY - element.bounds.height));\n    }\n\n    dispatchAlignActions(\n        elements: BoundsAwareModelElement[],\n        change: (element: BoundsAwareModelElement, move: Writable<ElementMove>) => void\n    ): void {\n        const moves: ElementMove[] = []; // client-side move\n        const elementAndBounds: ElementAndBounds[] = []; // server-side move\n        elements.forEach(element => {\n            const move = this.createElementMove(element, change);\n            if (move) {\n                // simply skip invalid changes\n                moves.push(move);\n                const elementAndBound = this.createElementAndBounds(element, move);\n                elementAndBounds.push(elementAndBound);\n            }\n        });\n        this.dispatchActions([MoveAction.create(moves), ChangeBoundsOperation.create(elementAndBounds)]);\n    }\n\n    createElementMove(\n        element: BoundsAwareModelElement,\n        change: (_element: BoundsAwareModelElement, _move: Writable<ElementMove>) => void\n    ): Writable<ElementMove> | undefined {\n        const move: ElementMove = {\n            elementId: element.id,\n            fromPosition: {\n                x: element.bounds.x,\n                y: element.bounds.y\n            },\n            toPosition: {\n                x: element.bounds.x,\n                y: element.bounds.y\n            }\n        };\n        change(element, move);\n        return toValidElementMove(element, move, this.movementRestrictor);\n    }\n\n    createElementAndBounds(element: BoundsAwareModelElement, move: ElementMove): ElementAndBounds {\n        return {\n            elementId: element.id,\n            newPosition: {\n                x: move.toPosition.x,\n                y: move.toPosition.y\n            },\n            newSize: {\n                width: element.bounds.width,\n                height: element.bounds.height\n            }\n        };\n    }\n    protected isActionElement(element: SModelElement): element is BoundsAwareModelElement {\n        return isBoundsAwareMoveable(element);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { MouseTool, TYPES } from '~glsp-sprotty';\nimport { RankingMouseTool } from './mouse-tool';\n\nconst glspMouseToolModule = new ContainerModule((bind, _unbind, _isBound, rebind) => {\n    bind(RankingMouseTool).toSelf().inSingletonScope();\n    bind(TYPES.MouseTool).toService(RankingMouseTool);\n    rebind(MouseTool).toService(RankingMouseTool);\n});\n\nexport default glspMouseToolModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable, multiInject, optional } from 'inversify';\nimport { Action, MouseListener, MouseTool, SModelElement, SModelRoot, TYPES } from '~glsp-sprotty';\nimport { getRank } from '../rank/model';\n\nexport interface IMouseTool {\n    register(mouseListener: MouseListener): void;\n    deregister(mouseListener: MouseListener): void;\n}\n\n/**\n * Custom helper type to declare the explicit mouse listener methods\n * of {@link MouseListener} i.e. omitting the `decorate` method.\n */\ntype MouseListenerMethods = keyof Omit<MouseListener, 'decorate'>;\n\n@injectable()\nexport class RankingMouseTool extends MouseTool implements IMouseTool {\n    protected rankedMouseListeners: Map<number, MouseListener[]>;\n\n    constructor(@multiInject(TYPES.MouseListener) @optional() protected override mouseListeners: MouseListener[] = []) {\n        super(mouseListeners);\n        this.rankedMouseListeners = groupBy(mouseListeners, listener => getRank(listener));\n    }\n\n    override register(mouseListener: MouseListener): void {\n        super.register(mouseListener);\n        this.rankedMouseListeners = groupBy(this.mouseListeners, listener => getRank(listener));\n    }\n\n    override deregister(mouseListener: MouseListener): void {\n        super.deregister(mouseListener);\n        this.rankedMouseListeners = groupBy(this.mouseListeners, listener => getRank(listener));\n    }\n\n    protected override handleEvent<K extends MouseListenerMethods>(methodName: K, model: SModelRoot, event: MouseEvent): void {\n        this.focusOnMouseEvent(methodName, model);\n        const element = this.getTargetElement(model, event);\n        if (!element) {\n            return;\n        }\n        this.notifyListenersByRank(element, methodName, model, event);\n    }\n\n    async notifyListenersByRank<K extends MouseListenerMethods>(\n        element: SModelElement,\n        methodName: K,\n        model: SModelRoot,\n        event: MouseEvent\n    ): Promise<void> {\n        for (const rank of this.rankedMouseListeners) {\n            await this.dispatchActions(rank[1], methodName, element, event);\n        }\n    }\n\n    async dispatchActions<K extends MouseListenerMethods>(\n        mouseListeners: MouseListener[],\n        methodName: K,\n        element: SModelElement,\n        event: MouseEvent\n    ): Promise<void> {\n        const actions = mouseListeners.map(listener => listener[methodName](element, event as WheelEvent)).reduce((a, b) => a.concat(b));\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (const actionOrPromise of actions) {\n                if (Action.is(actionOrPromise)) {\n                    await this.actionDispatcher.dispatch(actionOrPromise);\n                } else {\n                    actionOrPromise.then((action: Action) => {\n                        this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    }\n}\n\nfunction groupBy<K, T>(array: Array<T>, keyFunction: (x: T) => K): Map<K, T[]> {\n    const unsortedMap = array.reduce((result: Map<K, T[]>, item: T) => {\n        const key = keyFunction(item);\n        if (!result.has(key)) {\n            result.set(key, [item]);\n        } else {\n            const entries = result.get(key);\n            if (entries) {\n                entries.push(item);\n            }\n        }\n        return result;\n    }, new Map<K, T[]>());\n    return new Map<K, T[]>([...unsortedMap.entries()].sort());\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { NavigateToExternalTargetAction, NavigateToTargetAction, configureActionHandler } from '~glsp-sprotty';\nimport { NavigateAction, NavigationActionHandler, ProcessNavigationArgumentsAction } from './navigation-action-handler';\nimport { NavigationTargetResolver } from './navigation-target-resolver';\n\nconst navigationModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(NavigationTargetResolver).toSelf().inSingletonScope();\n    bind(NavigationActionHandler).toSelf().inSingletonScope();\n    configureActionHandler({ bind, isBound }, NavigateAction.KIND, NavigationActionHandler);\n    configureActionHandler({ bind, isBound }, NavigateToTargetAction.KIND, NavigationActionHandler);\n    configureActionHandler({ bind, isBound }, ProcessNavigationArgumentsAction.KIND, NavigationActionHandler);\n    configureActionHandler({ bind, isBound }, NavigateToExternalTargetAction.KIND, NavigationActionHandler);\n});\n\nexport default navigationModule;\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    ActionHandlerRegistry,\n    Args,\n    CenterAction,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    ILogger,\n    NavigateToExternalTargetAction,\n    NavigateToTargetAction,\n    NavigationTarget,\n    RequestNavigationTargetsAction,\n    SelectAction,\n    SelectAllAction,\n    ServerMessageAction,\n    ServerSeverity,\n    ServerStatusAction,\n    SetNavigationTargetsAction,\n    SetResolvedNavigationTargetAction,\n    TYPES,\n    hasObjectProp,\n    hasStringProp\n} from '~glsp-sprotty';\nimport { EditorContextServiceProvider } from '../../base/editor-context-service';\nimport { NavigationTargetResolver } from './navigation-target-resolver';\n\n/**\n * Action for triggering a navigation of a certain target type.\n *\n * Examples for target types could be `documentation`, `implementation`, etc.\n * but this is up to the domain-specific diagram implementation to decide.\n * Such an action will eventually trigger a `RequestNavigationTargetsAction`\n * (see `NavigationActionHandler`) in order to request the navigation targets\n * from the server.\n *\n * This action is typically triggered by a user action.\n */\n\nexport interface NavigateAction extends Action {\n    kind: typeof NavigateAction.KIND;\n    /**\n     * Navigation target type, such as `documentation`, `implementation`, etc.\n     */\n    targetTypeId: string;\n    /**\n     * Additional arguments for customization.\n     */\n    args?: Args;\n}\n\nexport namespace NavigateAction {\n    export const KIND = 'navigate';\n\n    export function is(object: any): object is NavigateAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'targetTypeId');\n    }\n\n    export function create(targetTypeId: string, options: { args?: Args } = {}): NavigateAction {\n        return {\n            kind: KIND,\n            targetTypeId,\n            ...options\n        };\n    }\n}\n\n/**\n * Action to trigger the processing of additional navigation arguments.\n * The resolution of a `NavigationTarget` may entail additional arguments. In this case, this action is\n * triggered allowing the client to react to those arguments. The default `NavigationActionHandler` will\n * only process the arguments' keys `info`, `warning`, and `error` to present them to the user.\n * Customizations, however, may add domain-specific arguments and register custom handler to also process\n * other arguments and trigger some additional behavior (e.g. update other views, etc.).\n */\n\nexport interface ProcessNavigationArgumentsAction extends Action {\n    kind: typeof ProcessNavigationArgumentsAction.KIND;\n    /**\n     * The navigation arguments.\n     */\n    args: Args;\n}\n\nexport namespace ProcessNavigationArgumentsAction {\n    export const KIND = 'processNavigationArguments';\n\n    export function is(object: any): object is ProcessNavigationArgumentsAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'args');\n    }\n\n    export function create(args: Args): ProcessNavigationArgumentsAction {\n        return {\n            kind: KIND,\n            args\n        };\n    }\n}\n/**\n * Default handler for all actions that are related to the navigation.\n *\n * For a `NavigateAction` this handler triggers a `RequestNavigationTargetAction` to obtain the actual\n * navigation targets for the navigation type that is specified in the `NavigateAction`.\n * Once the navigation targets are available, it will trigger a `NavigateToTargetAction` to actually\n * perform the navigation.\n *\n * In other scenarios, clients may also trigger the `NavigateToTargetAction` directly, e.g. when opening\n * the diagram.\n *\n * Depending on the URI and arguments of the navigation target we may encounter three cases:\n *   *(a)* the navigation target already specifies element IDs, in which case this action handler navigates\n *         to the specified elements directly, by the selecting them and centering them in the viewport.\n *   *(b)* the arguments of the navigation targets don't contain element IDs, but other arguments, the\n *         navigation target needs to be resolved into actual element IDs by the `NavigationTargetResolver`.\n *         This can for instance be useful, if the navigation deals with queries or some other more complex\n *         logic that can't be dealt with on the client.\n *  *(c)* the target isn't resolved by the `NavigationTargetResolver`, e.g. because the `uri` doesn't match\n *        the URI of the current diagram. In this case, the navigation request is forwarded by dispatching\n *        a `NavigateToExternalTargetAction`.\n */\n@injectable()\nexport class NavigationActionHandler implements IActionHandler {\n    readonly notificationTimeout = 5000;\n\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    @inject(TYPES.ActionHandlerRegistryProvider) protected actionHandlerRegistryProvider: () => Promise<ActionHandlerRegistry>;\n    @inject(TYPES.IEditorContextServiceProvider) protected editorContextService: EditorContextServiceProvider;\n    @inject(NavigationTargetResolver) protected resolver: NavigationTargetResolver;\n\n    handle(action: Action): ICommand | Action | void {\n        if (NavigateAction.is(action)) {\n            this.handleNavigateAction(action);\n        } else if (NavigateToTargetAction.is(action)) {\n            this.handleNavigateToTarget(action);\n        } else if (ProcessNavigationArgumentsAction.is(action)) {\n            this.processNavigationArguments(action.args);\n        } else if (NavigateToExternalTargetAction.is(action)) {\n            this.handleNavigateToExternalTarget(action);\n        }\n    }\n\n    protected async handleNavigateAction(action: NavigateAction): Promise<void> {\n        try {\n            const editorContextService = await this.editorContextService();\n            const editorContext = editorContextService.get(action.args);\n            const response = await this.dispatcher.request(\n                RequestNavigationTargetsAction.create({ targetTypeId: action.targetTypeId, editorContext })\n            );\n            if (SetNavigationTargetsAction.is(response) && response.targets && response.targets.length === 1) {\n                if (response.targets.length > 1) {\n                    this.logger.warn(\n                        this,\n                        'Processing of multiple targets is not supported yet. ' + 'Only the first is being processed.',\n                        response.targets\n                    );\n                }\n                return this.dispatcher.dispatch(NavigateToTargetAction.create(response.targets[0]));\n            }\n            this.warnAboutFailedNavigation('No valid navigation target found');\n        } catch (reason) {\n            this.logger.error(this, 'Failed to obtain navigation target', reason, action);\n        }\n    }\n\n    protected async handleNavigateToTarget(action: NavigateToTargetAction): Promise<void> {\n        try {\n            const resolvedElements = await this.resolveElements(action);\n            if (this.containsElementIdsOrArguments(resolvedElements)) {\n                this.navigateTo(resolvedElements);\n                this.handleResolutionArguments(resolvedElements);\n                return;\n            } else {\n                this.navigateToExternal(action.target);\n                return;\n            }\n        } catch (reason) {\n            this.logger.error(this, 'Failed to navigate', reason, action);\n        }\n    }\n\n    protected resolveElements(action: NavigateToTargetAction): Promise<SetResolvedNavigationTargetAction | undefined> {\n        return this.resolver.resolve(action.target);\n    }\n\n    protected containsElementIdsOrArguments(\n        target: SetResolvedNavigationTargetAction | undefined\n    ): target is SetResolvedNavigationTargetAction {\n        return target !== undefined && (this.containsElementIds(target.elementIds) || this.containsArguments(target.args));\n    }\n\n    protected containsElementIds(elementIds: string[] | undefined): elementIds is string[] {\n        return elementIds !== undefined && elementIds.length > 0;\n    }\n\n    protected containsArguments(args: Args | undefined): args is Args {\n        return args !== undefined && args !== undefined && Object.keys(args).length > 0;\n    }\n\n    protected navigateTo(target: SetResolvedNavigationTargetAction): void {\n        const elementIds = target.elementIds;\n        if (!this.containsElementIds(elementIds)) {\n            return;\n        }\n        this.dispatcher.dispatchAll([\n            SelectAllAction.create(false),\n            SelectAction.create({ selectedElementsIDs: elementIds }),\n            CenterAction.create(elementIds)\n        ]);\n    }\n\n    protected handleResolutionArguments(target: SetResolvedNavigationTargetAction): void {\n        const args = target.args;\n        if (!this.containsArguments(args)) {\n            return;\n        }\n        this.dispatcher.dispatch(ProcessNavigationArgumentsAction.create(args));\n    }\n\n    protected navigateToExternal(target: NavigationTarget): Promise<void> {\n        return this.dispatcher.dispatch(NavigateToExternalTargetAction.create(target));\n    }\n\n    protected processNavigationArguments(args: Args): void {\n        if (args.info && args.info.toString().length > 0) {\n            this.notify('INFO', args.info.toString());\n        }\n        if (args.warning && args.warning.toString().length > 0) {\n            this.notify('WARNING', args.warning.toString());\n        }\n        if (args.error && args.error.toString().length > 0) {\n            this.notify('ERROR', args.error.toString());\n        }\n    }\n\n    protected async handleNavigateToExternalTarget(action: NavigateToExternalTargetAction): Promise<void> {\n        const registry = await this.actionHandlerRegistryProvider();\n        const handlers = registry.get(NavigateToExternalTargetAction.KIND);\n        if (handlers.length === 1) {\n            // we are the only handler so we know nobody took care of it\n            this.warnAboutFailedNavigation('Could not resolve or navigate to target', action.target);\n        }\n    }\n\n    protected warnAboutFailedNavigation(msg: string, target?: NavigationTarget): void {\n        const message = `${msg}` + (target ? `: '${target.uri}' (arguments: ${JSON.stringify(target.args)})` : '');\n        this.logger.warn(this, msg, target);\n        this.notify('WARNING', message);\n    }\n\n    private notify(severity: ServerSeverity, message: string): void {\n        const timeout = this.notificationTimeout;\n        this.dispatcher.dispatchAll([\n            ServerStatusAction.create(message, { severity, timeout }),\n            ServerMessageAction.create(message, { severity, timeout })\n        ]);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    IActionDispatcher,\n    ILogger,\n    NavigationTarget,\n    ResolveNavigationTargetAction,\n    ResponseAction,\n    SetResolvedNavigationTargetAction,\n    TYPES\n} from '~glsp-sprotty';\nimport { EditorContextServiceProvider } from '../../base/editor-context-service';\n\n/**\n * Resolves `NavigationTargets` to element ids.\n *\n * If the `NavigationTarget` doesn't have element ids itself, this resolver queries the server via a\n * `ResolveNavigationTargetAction` for element ids.\n */\n@injectable()\nexport class NavigationTargetResolver {\n    @inject(TYPES.IEditorContextServiceProvider) protected editorContextService: EditorContextServiceProvider;\n    @inject(TYPES.IActionDispatcher) protected dispatcher: IActionDispatcher;\n    @inject(TYPES.ILogger) protected readonly logger: ILogger;\n\n    async resolve(navigationTarget: NavigationTarget): Promise<SetResolvedNavigationTargetAction | undefined> {\n        const contextService = await this.editorContextService();\n        const sourceUri = await contextService.getSourceUri();\n        return this.resolveWithSourceUri(sourceUri, navigationTarget);\n    }\n\n    async resolveWithSourceUri(\n        sourceUri: string | undefined,\n        target: NavigationTarget\n    ): Promise<SetResolvedNavigationTargetAction | undefined> {\n        const targetUri = decodeURIComponent(target.uri);\n        if (sourceUri && sourceUri !== targetUri && `file://${sourceUri}` !== targetUri) {\n            // different URI, so we can't resolve it locally\n            this.logger.info(\"Source and Target URI are different. Can't resolve locally.\", sourceUri, targetUri);\n            return undefined;\n        }\n        if (NavigationTarget.getElementIds(target).length > 0) {\n            return SetResolvedNavigationTargetAction.create(NavigationTarget.getElementIds(target));\n        }\n        const response = await this.requestResolution(target);\n        if (SetResolvedNavigationTargetAction.is(response)) {\n            return response;\n        }\n        return undefined;\n    }\n\n    protected requestResolution(target: NavigationTarget): Promise<ResponseAction> {\n        return this.dispatcher.request(ResolveNavigationTargetAction.create(target));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const DEFAULT_RANK = 0;\n\nexport interface Ranked {\n    rank: number;\n}\n\nexport function isRanked(arg: any): arg is Ranked {\n    return arg !== undefined && arg.rank !== undefined && typeof arg.rank === 'number';\n}\n\nexport function getRank(arg: any): number {\n    return isRanked(arg) ? arg.rank : DEFAULT_RANK;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    edgeInProgressID,\n    edgeInProgressTargetHandleID,\n    RoutingHandleKind,\n    selectFeature,\n    SModelElement,\n    SModelExtension,\n    SRoutableElement,\n    SRoutingHandle\n} from '~glsp-sprotty';\n\nexport const reconnectFeature = Symbol('reconnectFeature');\n\nexport interface Reconnectable extends SModelExtension {}\n\nexport function isReconnectable(element: SModelElement): element is SRoutableElement & Reconnectable {\n    return element instanceof SRoutableElement && element.hasFeature(reconnectFeature);\n}\n\nconst ROUTING_HANDLE_SOURCE_INDEX = -2;\n\nexport function isReconnectHandle(element: SModelElement | undefined): element is SReconnectHandle {\n    return element !== undefined && element instanceof SReconnectHandle;\n}\n\nexport function addReconnectHandles(element: SRoutableElement): void {\n    removeReconnectHandles(element);\n    createReconnectHandle(element, 'source', ROUTING_HANDLE_SOURCE_INDEX);\n    createReconnectHandle(element, 'target', element.routingPoints.length);\n}\n\nexport function removeReconnectHandles(element: SRoutableElement): void {\n    element.removeAll(child => child instanceof SReconnectHandle);\n}\n\nexport function isSourceRoutingHandle(edge: SRoutableElement, routingHandle: SReconnectHandle): boolean {\n    return routingHandle.pointIndex === ROUTING_HANDLE_SOURCE_INDEX;\n}\n\nexport function isTargetRoutingHandle(edge: SRoutableElement, routingHandle: SReconnectHandle): boolean {\n    return routingHandle.pointIndex === edge.routingPoints.length;\n}\n\nexport function createReconnectHandle(edge: SRoutableElement, kind: RoutingHandleKind, routingPointIndex: number): SReconnectHandle {\n    const handle = new SReconnectHandle();\n    handle.kind = kind;\n    handle.pointIndex = routingPointIndex;\n    handle.type = 'routing-point';\n    if (kind === 'target' && edge.id === edgeInProgressID) {\n        handle.id = edgeInProgressTargetHandleID;\n    }\n    edge.add(handle);\n    return handle;\n}\n\nexport class SReconnectHandle extends SRoutingHandle {\n    override hasFeature(feature: symbol): boolean {\n        return feature !== selectFeature && super.hasFeature(feature);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { TYPES, bindAsService } from '~glsp-sprotty';\nimport { SaveModelKeyboardListener } from './save-keylistener';\n\n/**\n * This module is not required the diagram is deployed in Theia with the `GLSPDiagramWidget`\n * but only intended to be used in a standalone deployment of GLSP.\n */\nconst saveModule = new ContainerModule(bind => {\n    bindAsService(bind, TYPES.KeyListener, SaveModelKeyboardListener);\n});\n\nexport default saveModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { SModelElement, SModelExtension, SModelRoot } from '~glsp-sprotty';\n\nexport const saveFeature = Symbol.for('saveFeature');\n\nexport interface Saveable extends SModelExtension {\n    dirty: boolean;\n}\n\nexport function isSaveable(element: SModelElement): element is SModelRoot & Saveable {\n    return element.hasFeature(saveFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, KeyListener, SModelRoot, SaveModelAction, matchesKeystroke } from '~glsp-sprotty';\n\nexport class SaveModelKeyboardListener extends KeyListener {\n    override keyDown(_element: SModelRoot, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'KeyS', 'ctrlCmd')) {\n            return [SaveModelAction.create()];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { TYPES, bindAsService, configureCommand } from '~glsp-sprotty';\nimport { SelectFeedbackCommand } from './select-feedback-action';\nimport { RankedSelectMouseListener } from './select-mouse-listener';\nimport { SelectAllCommand, SelectCommand, SelectionService } from './selection-service';\n\nconst glspSelectModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    bindAsService(context, TYPES.SelectionService, SelectionService);\n    configureCommand(context, SelectCommand);\n    configureCommand(context, SelectAllCommand);\n    configureCommand(context, SelectFeedbackCommand);\n    bindAsService(context, TYPES.MouseListener, RankedSelectMouseListener);\n    bind(TYPES.SModelRootListener).toService(SelectionService);\n});\n\nexport default glspSelectModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    Command,\n    CommandExecutionContext,\n    SModelRoot,\n    SelectAction,\n    SprottySelectCommand,\n    TYPES,\n    hasArrayProp\n} from '~glsp-sprotty';\n\nexport interface SelectFeedbackAction extends Omit<SelectAction, 'kind'>, Action {\n    kind: typeof SelectFeedbackAction.KIND;\n}\n\nexport namespace SelectFeedbackAction {\n    export const KIND = 'selectFeedback';\n\n    export function is(object: any): object is SelectFeedbackAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'selectedElementsIDs') && hasArrayProp(object, 'deselectedElementsIDs');\n    }\n\n    export function create(options?: { selectedElementsIDs?: string[]; deselectedElementsIDs?: string[] | boolean }): SelectFeedbackAction {\n        return { ...SelectAction.create(options), kind: KIND };\n    }\n\n    export function addSelection(selectedElementsIDs: string[]): SelectFeedbackAction {\n        return { ...SelectAction.addSelection(selectedElementsIDs), kind: KIND };\n    }\n\n    export function removeSelection(deselectedElementsIDs: string[]): SelectFeedbackAction {\n        return { ...SelectAction.removeSelection(deselectedElementsIDs), kind: KIND };\n    }\n\n    export function setSelection(selectedElementsIDs: string[]): SelectFeedbackAction {\n        return { ...SelectAction.setSelection(selectedElementsIDs), kind: KIND };\n    }\n}\n\n@injectable()\nexport class SelectFeedbackCommand extends Command {\n    static readonly KIND = SelectFeedbackAction.KIND;\n    private sprottySelectCommand: SprottySelectCommand;\n\n    constructor(@inject(TYPES.Action) public action: SelectFeedbackAction) {\n        super();\n        this.sprottySelectCommand = new SprottySelectCommand({ ...action, kind: SelectAction.KIND });\n    }\n\n    execute(context: CommandExecutionContext): SModelRoot {\n        return this.sprottySelectCommand.execute(context);\n    }\n\n    undo(context: CommandExecutionContext): SModelRoot {\n        return this.sprottySelectCommand.undo(context);\n    }\n\n    redo(context: CommandExecutionContext): SModelRoot {\n        return this.sprottySelectCommand.redo(context);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Action,\n    BringToFrontAction,\n    SButton,\n    SModelElement,\n    SModelRoot,\n    SRoutableElement,\n    SRoutingHandle,\n    SelectAction,\n    SelectMouseListener,\n    SwitchEditModeAction,\n    findParentByFeature,\n    isCtrlOrCmd,\n    isSelectable,\n    toArray\n} from '~glsp-sprotty';\nimport { DEFAULT_RANK, Ranked } from '../rank/model';\n\n/**\n * Ranked select mouse listener that is executed before default mouse listeners when using the RankedMouseTool.\n * This ensures that default mouse listeners are working on a model that has selection changes already applied.\n */\nexport class RankedSelectMouseListener extends SelectMouseListener implements Ranked {\n    rank: number = DEFAULT_RANK - 1; /* we want to be executed before all default mouse listeners */\n\n    override mouseDown(target: SModelElement, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        if (this.buttonHandlerRegistry !== undefined && target instanceof SButton && target.enabled) {\n            const buttonHandler = this.buttonHandlerRegistry.get(target.type);\n            if (buttonHandler !== undefined) {\n                return buttonHandler.buttonPressed(target);\n            }\n        }\n        const selectableTarget = findParentByFeature(target, isSelectable);\n        if (selectableTarget !== undefined || target instanceof SModelRoot) {\n            this.hasDragged = false;\n            let deselect: SModelElement[] = [];\n            // multi-selection?\n            if (!isCtrlOrCmd(event)) {\n                deselect = toArray(\n                    target.root.index\n                        .all()\n                        .filter(\n                            element =>\n                                isSelectable(element) &&\n                                element.selected &&\n                                !(selectableTarget instanceof SRoutingHandle && element === (selectableTarget.parent as SModelElement))\n                        )\n                );\n            }\n            if (selectableTarget !== undefined) {\n                if (!selectableTarget.selected) {\n                    this.wasSelected = false;\n                    result.push(\n                        SelectAction.create({\n                            selectedElementsIDs: [selectableTarget.id],\n                            deselectedElementsIDs: deselect.map(e => e.id)\n                        })\n                    );\n                    result.push(BringToFrontAction.create([selectableTarget.id]));\n                    const routableDeselect = deselect.filter(e => e instanceof SRoutableElement).map(e => e.id);\n                    if (selectableTarget instanceof SRoutableElement) {\n                        result.push(\n                            SwitchEditModeAction.create({\n                                elementsToActivate: [selectableTarget.id],\n                                elementsToDeactivate: routableDeselect\n                            })\n                        );\n                    } else if (routableDeselect.length > 0) {\n                        result.push(SwitchEditModeAction.create({ elementsToDeactivate: routableDeselect }));\n                    }\n                } else if (isCtrlOrCmd(event)) {\n                    this.wasSelected = false;\n                    result.push(SelectAction.create({ deselectedElementsIDs: [selectableTarget.id] }));\n                    if (selectableTarget instanceof SRoutableElement) {\n                        result.push(SwitchEditModeAction.create({ elementsToDeactivate: [selectableTarget.id] }));\n                    }\n                } else {\n                    this.wasSelected = true;\n                }\n            } else {\n                result.push(SelectAction.create({ deselectedElementsIDs: deselect.map(e => e.id) }));\n                const routableDeselect = deselect.filter(e => e instanceof SRoutableElement).map(e => e.id);\n                if (routableDeselect.length > 0) {\n                    result.push(SwitchEditModeAction.create({ elementsToDeactivate: routableDeselect }));\n                }\n            }\n        }\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport {\n    Action,\n    Command,\n    CommandExecutionContext,\n    ILogger,\n    SChildElement,\n    SModelElement,\n    SModelRoot,\n    SelectAction,\n    SelectAllAction,\n    Selectable,\n    SprottySelectAllCommand,\n    SprottySelectCommand,\n    TYPES,\n    distinctAdd,\n    isSelectable,\n    pluck,\n    remove\n} from '~glsp-sprotty';\nimport { SModelRootListener } from '../../base/model/update-model-command';\nimport { getElements, getMatchingElements } from '../../utils/smodel-util';\nimport { IFeedbackActionDispatcher } from '../tool-feedback/feedback-action-dispatcher';\nimport { SelectFeedbackAction } from './select-feedback-action';\n\nexport interface SelectionListener {\n    selectionChanged(root: Readonly<SModelRoot>, selectedElements: string[]): void;\n}\n\n@injectable()\nexport class SelectionService implements SModelRootListener {\n    private root: Readonly<SModelRoot>;\n    private selectedElementIDs: Set<string> = new Set();\n\n    @inject(TYPES.IFeedbackActionDispatcher) protected feedbackDispatcher: IFeedbackActionDispatcher;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    constructor(@multiInject(TYPES.SelectionListener) @optional() protected selectionListeners: SelectionListener[] = []) {}\n\n    register(selectionListener: SelectionListener): void {\n        distinctAdd(this.selectionListeners, selectionListener);\n    }\n\n    deregister(selectionListener: SelectionListener): void {\n        remove(this.selectionListeners, selectionListener);\n    }\n\n    modelRootChanged(root: Readonly<SModelRoot>): void {\n        this.updateSelection(root, [], []);\n    }\n\n    updateSelection(root: Readonly<SModelRoot>, select: string[], deselect: string[]): void {\n        if (root === undefined && select.length === 0 && deselect.length === 0) {\n            return;\n        }\n        const prevRoot = this.root;\n        const prevSelectedElementIDs = new Set(this.selectedElementIDs);\n\n        // update root\n        this.root = root;\n\n        // update selected element IDs and collect deselected elements\n        // - select all elements that are not deselected at the same time (no-op)\n        // - deselect all elements that are not selected at the same time (no-op) but was selected\n        const toSelect = [...select].filter(selectId => deselect.indexOf(selectId) === -1);\n        const toDeselect = [...deselect].filter(deselectId => select.indexOf(deselectId) === -1 && this.selectedElementIDs.has(deselectId));\n        for (const id of toDeselect) {\n            this.selectedElementIDs.delete(id);\n        }\n        for (const id of toSelect) {\n            this.selectedElementIDs.add(id);\n        }\n\n        const deselectedElementIDs = new Set(toDeselect);\n        // see if selected elements still exist in the updated root\n        for (const id of this.selectedElementIDs) {\n            const element = root.index.getById(id);\n            if (element === undefined) {\n                this.selectedElementIDs.delete(id);\n                if (prevRoot !== undefined && prevRoot.index.getById(id)) {\n                    deselectedElementIDs.add(id);\n                }\n            }\n        }\n\n        // only send out changes if there actually are changes, i.e., the root or the selected elements changed\n        const selectionChanged =\n            prevSelectedElementIDs.size !== this.selectedElementIDs.size ||\n            ![...prevSelectedElementIDs].every(value => this.selectedElementIDs.has(value));\n        if (selectionChanged) {\n            // aggregate to feedback action handling all elements as only the last feedback is restored\n            this.dispatchFeedback([\n                SelectFeedbackAction.create({\n                    selectedElementsIDs: [...this.selectedElementIDs],\n                    deselectedElementsIDs: [...deselectedElementIDs]\n                })\n            ]);\n        }\n\n        const rootChanged = prevRoot !== root;\n        if (rootChanged || selectionChanged) {\n            // notify listeners after the feedback action\n            this.notifyListeners(this.root, this.selectedElementIDs);\n        }\n    }\n\n    dispatchFeedback(actions: Action[]): void {\n        this.feedbackDispatcher.registerFeedback(this, actions);\n    }\n\n    notifyListeners(root: SModelRoot, selectedElementIDs: Set<string>): void {\n        this.selectionListeners.forEach(listener => listener.selectionChanged(root, Array.from(selectedElementIDs)));\n    }\n\n    getModelRoot(): Readonly<SModelRoot> {\n        return this.root;\n    }\n\n    getSelectedElements(): Readonly<SModelElement & Selectable>[] {\n        return getElements(this.root.index, Array.from(this.selectedElementIDs), isSelectable);\n    }\n\n    /**\n     * QUERY METHODS\n     */\n\n    getSelectedElementIDs(): string[] {\n        return [...this.selectedElementIDs];\n    }\n\n    hasSelectedElements(): boolean {\n        return this.selectedElementIDs.size > 0;\n    }\n\n    isSingleSelection(): boolean {\n        return this.selectedElementIDs.size === 1;\n    }\n\n    isMultiSelection(): boolean {\n        return this.selectedElementIDs.size > 1;\n    }\n}\n\n/**\n * Handles a {@link SelectAction} and propagates the new selection to the {@link SelectionService}.\n * Other tools might be selection-sensitive which means {@link SelectAction}s must be processed as fast as possible.\n * Handling the action with a command ensures that the action is processed before the next render tick.\n */\n@injectable()\nexport class SelectCommand extends Command {\n    static readonly KIND = SprottySelectCommand.KIND;\n\n    protected selected: SModelElement[] = [];\n    protected deselected: SModelElement[] = [];\n\n    constructor(\n        @inject(TYPES.Action) public action: SelectAction,\n        @inject(TYPES.SelectionService) public selectionService: SelectionService\n    ) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRoot {\n        const model = context.root;\n        const selectionGuard = (element: any): element is SModelElement => element instanceof SChildElement && isSelectable(element);\n        const selectedElements = getElements(model.index, this.action.selectedElementsIDs, selectionGuard);\n        const deselectedElements = this.action.deselectAll\n            ? this.selectionService.getSelectedElements()\n            : getElements(model.index, this.action.deselectedElementsIDs, selectionGuard);\n\n        this.selectionService.updateSelection(model, pluck(selectedElements, 'id'), pluck(deselectedElements, 'id'));\n        return model;\n    }\n\n    // Basically no-op since client-side undo is not supported in GLSP.\n    undo(context: CommandExecutionContext): SModelRoot {\n        return context.root;\n    }\n\n    // Basically no-op since client-side redo is not supported in GLSP.\n    redo(context: CommandExecutionContext): SModelRoot {\n        return context.root;\n    }\n}\n\n/**\n * Handles a {@link SelectAllAction} and propagates the new selection to the {@link SelectionService}.\n * Other tools might be selection-sensitive which means {@link SelectionAllAction}s must be processed as fast as possible.\n * Handling the action with a command ensures that the action is processed before the next render tick.\n */\n@injectable()\nexport class SelectAllCommand extends Command {\n    static readonly KIND = SprottySelectAllCommand.KIND;\n    protected previousSelection: Map<string, boolean> = new Map<string, boolean>();\n\n    constructor(\n        @inject(TYPES.Action) public action: SelectAllAction,\n        @inject(TYPES.SelectionService) public selectionService: SelectionService\n    ) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRoot {\n        const model = context.root;\n        const selectionGuard = (element: any): element is SModelElement => element instanceof SChildElement && isSelectable(element);\n\n        const selectables = getMatchingElements(model.index, selectionGuard);\n        const selectableIds = pluck(selectables, 'id');\n        if (this.action.select) {\n            this.selectionService.updateSelection(model, selectableIds, []);\n        } else {\n            this.selectionService.updateSelection(model, [], selectableIds);\n        }\n\n        return model;\n    }\n\n    // Basically no-op since client-side undo is not supported in GLSP.\n    undo(context: CommandExecutionContext): SModelRoot {\n        return context.root;\n    }\n\n    // Basically no-op since client-side redo is not supported in GLSP.\n    redo(context: CommandExecutionContext): SModelRoot {\n        return context.root;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { SourceModelChangedAction, configureActionHandler } from '~glsp-sprotty';\nimport { SourceModelChangedActionHandler } from './source-model-changed-action-handler';\n\nconst sourceModelWatcherModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureActionHandler({ bind, isBound }, SourceModelChangedAction.KIND, SourceModelChangedActionHandler);\n});\n\nexport default sourceModelWatcherModule;\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    IActionDispatcher,\n    IActionHandler,\n    ServerMessageAction,\n    ServerStatusAction,\n    SourceModelChangedAction,\n    TYPES,\n    ViewerOptions\n} from '~glsp-sprotty';\n\n/**\n * An external handler of the source model change event.\n *\n * This allows external applications to react specifically to this event, e.g. by bringing up the diagram,\n * check their dirty state, show a dialog, etc.\n */\n@injectable()\nexport abstract class ExternalSourceModelChangedHandler {\n    /**\n     * Notifies about a change of the source model.\n     * @returns actions to be dispatched after the notification.\n     */\n    abstract notifySourceModelChange(sourceModelName: string, options: ViewerOptions): Promise<Action[]>;\n}\n\n@injectable()\nexport class SourceModelChangedActionHandler implements IActionHandler {\n    @inject(TYPES.IActionDispatcher)\n    protected dispatcher: IActionDispatcher;\n\n    @inject(TYPES.ViewerOptions)\n    protected options: ViewerOptions;\n\n    @inject(ExternalSourceModelChangedHandler)\n    @optional()\n    protected externalModelSourceChangedHandler?: ExternalSourceModelChangedHandler;\n\n    handle(action: Action): void {\n        if (SourceModelChangedAction.is(action)) {\n            if (this.externalModelSourceChangedHandler) {\n                this.externalModelSourceChangedHandler\n                    .notifySourceModelChange(action.sourceModelName, this.options)\n                    .then(actions => this.dispatcher.dispatchAll(actions));\n                return;\n            }\n            this.showSimpleNotification(action);\n        }\n    }\n\n    protected showSimpleNotification(action: SourceModelChangedAction): void {\n        const message = `The source model ${action.sourceModelName} has changed. You might want to consider reloading.`;\n        const timeout = 0;\n        const severity = 'WARNING';\n        this.dispatcher.dispatchAll([\n            ServerStatusAction.create(message, { severity, timeout }),\n            ServerMessageAction.create(message, { severity, timeout })\n        ]);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { TYPES } from '~glsp-sprotty';\nimport { MetadataPlacer } from './metadata-placer';\n\nconst svgMetadataModule = new ContainerModule(bind => {\n    bind(MetadataPlacer).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(MetadataPlacer);\n});\n\nexport default svgMetadataModule;\n","/********************************************************************************\n * Copyright (c) 2023 Business Informatics Group (TU Wien) and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { DOMHelper, IVNodePostprocessor, SChildElement, SEdge, SModelElement, SModelRoot, TYPES, setAttr } from '~glsp-sprotty';\n\n@injectable()\nexport class MetadataPlacer implements IVNodePostprocessor {\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n\n    decorate(vnode: VNode, element: SModelElement): VNode {\n        if (element instanceof SModelRoot) {\n            setAttr(vnode, 'data-svg-metadata-api', true);\n        }\n\n        setAttr(vnode, 'data-svg-metadata-type', element.type);\n\n        if (element instanceof SChildElement) {\n            setAttr(vnode, 'data-svg-metadata-parent-id', this.domHelper.createUniqueDOMElementId(element.parent));\n        }\n        if (element instanceof SEdge) {\n            if (element.source !== undefined) {\n                setAttr(vnode, 'data-svg-metadata-edge-source-id', this.domHelper.createUniqueDOMElementId(element.source));\n            }\n            if (element.target !== undefined) {\n                setAttr(vnode, 'data-svg-metadata-edge-target-id', this.domHelper.createUniqueDOMElementId(element.target));\n            }\n        }\n        return vnode;\n    }\n\n    postUpdate(): void {\n        // empty\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport {\n    Action,\n    CommandExecutionContext,\n    CommandReturn,\n    ElementMove,\n    MouseListener,\n    MoveAction,\n    Point,\n    SChildElement,\n    SModelElement,\n    SModelRoot,\n    TYPES,\n    findParentByFeature,\n    hasStringProp,\n    isMoveable,\n    isSelectable,\n    isViewport\n} from '~glsp-sprotty';\nimport { forEachElement } from '../../utils/smodel-util';\nimport { SResizeHandle, addResizeHandles, isResizable, removeResizeHandles } from '../change-bounds/model';\nimport { createMovementRestrictionFeedback, removeMovementRestrictionFeedback } from '../change-bounds/movement-restrictor';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport { ChangeBoundsTool } from '../tools/change-bounds-tool';\nimport { FeedbackCommand } from './model';\n\nexport interface ShowChangeBoundsToolResizeFeedbackAction extends Action {\n    kind: typeof ShowChangeBoundsToolResizeFeedbackAction.KIND;\n\n    elementId: string;\n}\n\nexport namespace ShowChangeBoundsToolResizeFeedbackAction {\n    export const KIND = 'showChangeBoundsToolResizeFeedback';\n\n    export function is(object: any): object is ShowChangeBoundsToolResizeFeedbackAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementId');\n    }\n\n    export function create(elementId: string): ShowChangeBoundsToolResizeFeedbackAction {\n        return {\n            kind: KIND,\n            elementId\n        };\n    }\n}\n\nexport interface HideChangeBoundsToolResizeFeedbackAction extends Action {\n    kind: typeof HideChangeBoundsToolResizeFeedbackAction.KIND;\n}\n\nexport namespace HideChangeBoundsToolResizeFeedbackAction {\n    export const KIND = 'hideChangeBoundsToolResizeFeedback';\n\n    export function is(object: any): object is HideChangeBoundsToolResizeFeedbackAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): HideChangeBoundsToolResizeFeedbackAction {\n        return { kind: KIND };\n    }\n}\n\n@injectable()\nexport class ShowChangeBoundsToolResizeFeedbackCommand extends FeedbackCommand {\n    static readonly KIND = ShowChangeBoundsToolResizeFeedbackAction.KIND;\n\n    @inject(TYPES.Action) protected action: ShowChangeBoundsToolResizeFeedbackAction;\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n\n        forEachElement(index, isResizable, removeResizeHandles);\n\n        if (this.action.elementId) {\n            const resizeElement = index.getById(this.action.elementId);\n            if (resizeElement && isResizable(resizeElement)) {\n                addResizeHandles(resizeElement);\n            }\n        }\n        return context.root;\n    }\n}\n\n@injectable()\nexport class HideChangeBoundsToolResizeFeedbackCommand extends FeedbackCommand {\n    static readonly KIND = HideChangeBoundsToolResizeFeedbackAction.KIND;\n\n    @inject(TYPES.Action) protected action: HideChangeBoundsToolResizeFeedbackAction;\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        forEachElement(index, isResizable, removeResizeHandles);\n        return context.root;\n    }\n}\n\n/**\n * This mouse listener provides visual feedback for moving by sending client-side\n * `MoveAction`s while elements are selected and dragged. This will also update\n * their bounds, which is important, as it is not only required for rendering\n * the visual feedback but also the basis for sending the change to the server\n * (see also `tools/MoveTool`).\n */\nexport class FeedbackMoveMouseListener extends MouseListener {\n    protected hasDragged = false;\n    protected startDragPosition: Point | undefined;\n    protected elementId2startPos = new Map<string, Point>();\n\n    constructor(protected tool: ChangeBoundsTool) {\n        super();\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        if (event.button === 0 && !(target instanceof SResizeHandle)) {\n            const moveable = findParentByFeature(target, isMoveable);\n            if (moveable !== undefined) {\n                this.startDragPosition = { x: event.pageX, y: event.pageY };\n            } else {\n                this.startDragPosition = undefined;\n            }\n            this.hasDragged = false;\n        }\n        return [];\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (event.buttons === 0) {\n            this.mouseUp(target, event);\n        } else if (this.startDragPosition) {\n            if (this.elementId2startPos.size === 0) {\n                this.collectStartPositions(target.root);\n            }\n            this.hasDragged = true;\n            const moveAction = this.getElementMoves(target, event, false);\n            if (moveAction) {\n                result.push(moveAction);\n                result.push(cursorFeedbackAction(CursorCSS.MOVE));\n            }\n        }\n        return result;\n    }\n\n    protected collectStartPositions(root: SModelRoot): void {\n        const selectedElements = root.index.all().filter(element => isSelectable(element) && element.selected);\n        const elementsSet = new Set(selectedElements);\n        selectedElements\n            .filter(element => !this.isChildOfSelected(elementsSet, element))\n            .forEach(element => {\n                if (isMoveable(element)) {\n                    this.elementId2startPos.set(element.id, element.position);\n                }\n            });\n    }\n\n    protected isChildOfSelected(selectedElements: Set<SModelElement>, element: SModelElement): boolean {\n        while (element instanceof SChildElement) {\n            element = element.parent;\n            if (selectedElements.has(element)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    protected getElementMoves(target: SModelElement, event: MouseEvent, finished: boolean): MoveAction | undefined {\n        if (!this.startDragPosition) {\n            return undefined;\n        }\n        const elementMoves: ElementMove[] = [];\n        const viewport = findParentByFeature(target, isViewport);\n        const zoom = viewport ? viewport.zoom : 1;\n        const delta = {\n            x: (event.pageX - this.startDragPosition.x) / zoom,\n            y: (event.pageY - this.startDragPosition.y) / zoom\n        };\n        this.elementId2startPos.forEach((startPosition, elementId) => {\n            const element = target.root.index.getById(elementId);\n            if (element) {\n                let toPosition = this.snap(\n                    {\n                        x: startPosition.x + delta.x,\n                        y: startPosition.y + delta.y\n                    },\n                    element,\n                    !event.shiftKey\n                );\n\n                if (isMoveable(element)) {\n                    toPosition = this.validateMove(startPosition, toPosition, element, finished);\n                    elementMoves.push({\n                        elementId: element.id,\n                        fromPosition: {\n                            x: element.position.x,\n                            y: element.position.y\n                        },\n                        toPosition\n                    });\n                }\n            }\n        });\n        if (elementMoves.length > 0) {\n            return MoveAction.create(elementMoves, { animate: false, finished });\n        } else {\n            return undefined;\n        }\n    }\n\n    protected validateMove(startPosition: Point, toPosition: Point, element: SModelElement, isFinished: boolean): Point {\n        let newPosition = toPosition;\n        if (this.tool.movementRestrictor) {\n            const valid = this.tool.movementRestrictor.validate(element, toPosition);\n            let action;\n            if (!valid) {\n                action = createMovementRestrictionFeedback(element, this.tool.movementRestrictor);\n\n                if (isFinished) {\n                    newPosition = startPosition;\n                }\n            } else {\n                action = removeMovementRestrictionFeedback(element, this.tool.movementRestrictor);\n            }\n\n            this.tool.dispatchFeedback([action], this);\n        }\n        return newPosition;\n    }\n\n    protected snap(position: Point, element: SModelElement, isSnap: boolean): Point {\n        if (isSnap && this.tool.snapper) {\n            return this.tool.snapper.snap(position, element);\n        } else {\n            return position;\n        }\n    }\n\n    override mouseEnter(target: SModelElement, event: MouseEvent): Action[] {\n        if (target instanceof SModelRoot && event.buttons === 0 && !this.startDragPosition) {\n            this.mouseUp(target, event);\n        }\n        return [];\n    }\n\n    override mouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (this.startDragPosition) {\n            const moveAction = this.getElementMoves(target, event, true);\n            if (moveAction) {\n                result.push(moveAction);\n            }\n            if (this.tool.movementRestrictor) {\n                this.tool.deregisterFeedback([removeMovementRestrictionFeedback(target, this.tool.movementRestrictor)], this);\n            }\n            result.push(cursorFeedbackAction(CursorCSS.DEFAULT));\n        }\n        this.hasDragged = false;\n        this.startDragPosition = undefined;\n        this.elementId2startPos.clear();\n        return result;\n    }\n\n    override decorate(vnode: VNode, _element: SModelElement): VNode {\n        return vnode;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    AnchorComputerRegistry,\n    Bounds,\n    CommandExecutionContext,\n    CommandReturn,\n    MouseListener,\n    MoveAction,\n    Point,\n    PolylineEdgeRouter,\n    SChildElement,\n    SConnectableElement,\n    SDanglingAnchor,\n    SEdgeSchema,\n    SModelElement,\n    SModelRoot,\n    SRoutableElement,\n    TYPES,\n    findChildrenAtPosition,\n    findParentByFeature,\n    isBoundsAware,\n    isConnectable\n} from '~glsp-sprotty';\nimport { BoundsAwareModelElement, isRoutable } from '../../utils/smodel-util';\nimport { getAbsolutePosition, toAbsoluteBounds, toAbsolutePosition } from '../../utils/viewpoint-util';\nimport { FeedbackCommand } from './model';\nexport interface DrawFeedbackEdgeAction extends Action {\n    kind: typeof DrawFeedbackEdgeAction.KIND;\n    elementTypeId: string;\n    sourceId: string;\n    edgeSchema?: Partial<SEdgeSchema>;\n}\n\nexport namespace DrawFeedbackEdgeAction {\n    export const KIND = 'drawFeedbackEdge';\n\n    export function is(object: any): object is DrawFeedbackEdgeAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(options: {\n        elementTypeId: string;\n        sourceId: string;\n        edgeSchema?: Partial<SEdgeSchema>;\n    }): DrawFeedbackEdgeAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport class DrawFeedbackEdgeCommand extends FeedbackCommand {\n    static readonly KIND = DrawFeedbackEdgeAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: DrawFeedbackEdgeAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        drawFeedbackEdge(context, this.action.sourceId, this.action.elementTypeId, this.action.edgeSchema);\n        return context.root;\n    }\n}\n\nexport interface RemoveFeedbackEdgeAction extends Action {\n    kind: typeof RemoveFeedbackEdgeAction.KIND;\n}\n\nexport namespace RemoveFeedbackEdgeAction {\n    export const KIND = 'removeFeedbackEdgeCommand';\n\n    export function is(object: any): object is RemoveFeedbackEdgeAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): RemoveFeedbackEdgeAction {\n        return { kind: KIND };\n    }\n}\n\n@injectable()\nexport class RemoveFeedbackEdgeCommand extends FeedbackCommand {\n    static readonly KIND = RemoveFeedbackEdgeAction.KIND;\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        removeFeedbackEdge(context.root);\n        return context.root;\n    }\n}\n\nexport class FeedbackEdgeEnd extends SDanglingAnchor {\n    static readonly TYPE = 'feedback-edge-end';\n    constructor(\n        readonly sourceId: string,\n        readonly elementTypeId: string,\n        public feedbackEdge: SRoutableElement | undefined = undefined,\n        override readonly type: string = FeedbackEdgeEnd.TYPE\n    ) {\n        super();\n    }\n}\n\nexport class FeedbackEdgeEndMovingMouseListener extends MouseListener {\n    constructor(protected anchorRegistry: AnchorComputerRegistry) {\n        super();\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        const root = target.root;\n        const edgeEnd = root.index.getById(feedbackEdgeEndId(root));\n        if (!(edgeEnd instanceof FeedbackEdgeEnd) || !edgeEnd.feedbackEdge) {\n            return [];\n        }\n\n        const edge = edgeEnd.feedbackEdge;\n        const position = getAbsolutePosition(edgeEnd, event);\n        const endAtMousePosition = findChildrenAtPosition(target.root, position)\n            .reverse()\n            .find(element => isConnectable(element) && element.canConnect(edge, 'target'));\n\n        if (endAtMousePosition instanceof SConnectableElement && edge.source && isBoundsAware(edge.source)) {\n            const anchor = this.computeAbsoluteAnchor(endAtMousePosition, Bounds.center(toAbsoluteBounds(edge.source)));\n            if (Point.euclideanDistance(anchor, edgeEnd.position) > 1) {\n                return [MoveAction.create([{ elementId: edgeEnd.id, toPosition: anchor }], { animate: false })];\n            }\n        } else {\n            return [MoveAction.create([{ elementId: edgeEnd.id, toPosition: position }], { animate: false })];\n        }\n\n        return [];\n    }\n\n    protected computeAbsoluteAnchor(element: SConnectableElement, absoluteReferencePoint: Point, offset?: number): Point {\n        const referencePointInParent = absoluteToParent(element, absoluteReferencePoint);\n        const anchorComputer = this.anchorRegistry.get(PolylineEdgeRouter.KIND, element.anchorKind);\n        let anchor = anchorComputer.getAnchor(element, referencePointInParent, offset);\n        // The anchor is computed in the local coordinate system of the element.\n        // If the element is a nested child element we have to add the absolute position of its parent to the anchor.\n        if (element.parent !== element.root) {\n            const parent = findParentByFeature(element.parent, isBoundsAware);\n            if (parent) {\n                const absoluteParentPosition = toAbsoluteBounds(parent);\n                anchor = Point.add(absoluteParentPosition, anchor);\n            }\n        }\n        return anchor;\n    }\n}\n\n/**\n * Convert a point, specified in absolute coordinates, to a point relative\n * to the parent of the specified child element.\n * @param element the child element\n * @param absolutePoint a point in absolute coordinates\n * @returns the equivalent point, relative to the element's parent coordinates\n */\nfunction absoluteToParent(element: BoundsAwareModelElement & SChildElement, absolutePoint: Point): Point {\n    if (isBoundsAware(element.parent)) {\n        return absoluteToLocal(element.parent, absolutePoint);\n    }\n    // If the parent is not bounds-aware, assume it's at 0; 0 and proceed\n    return absoluteToLocal(element, absolutePoint);\n}\n\n/**\n * Convert a point, specified in absolute coordinates, to a point relative\n * to the specified element.\n * @param element the element\n * @param absolutePoint a point in absolute coordinates\n * @returns the equivalent point, relative to the element's coordinates\n */\nfunction absoluteToLocal(element: BoundsAwareModelElement, absolutePoint: Point): Point {\n    const absoluteElementBounds = toAbsoluteBounds(element);\n    return { x: absolutePoint.x - absoluteElementBounds.x, y: absolutePoint.y - absoluteElementBounds.y };\n}\n\nexport function feedbackEdgeId(root: SModelRoot): string {\n    return root.id + '_feedback_edge';\n}\n\nexport function feedbackEdgeEndId(root: SModelRoot): string {\n    return root.id + '_feedback_anchor';\n}\n\nexport const defaultFeedbackEdgeSchema: Partial<SEdgeSchema> = {\n    cssClasses: ['feedback-edge'],\n    opacity: 0.3\n};\n\nexport function drawFeedbackEdge(\n    context: CommandExecutionContext,\n    sourceId: string,\n    elementTypeId: string,\n    edgeTemplate?: Partial<SEdgeSchema>\n): void {\n    const root = context.root;\n    const sourceChild = root.index.getById(sourceId);\n    if (!sourceChild) {\n        return;\n    }\n\n    const source = findParentByFeature(sourceChild, isConnectable);\n    if (!source || !isBoundsAware(source)) {\n        return;\n    }\n\n    const edgeEnd = new FeedbackEdgeEnd(source.id, elementTypeId);\n    edgeEnd.id = feedbackEdgeEndId(root);\n    edgeEnd.position = toAbsolutePosition(source);\n\n    const edgeSchema: SEdgeSchema = {\n        id: feedbackEdgeId(root),\n        type: elementTypeId,\n        sourceId: source.id,\n        targetId: edgeEnd.id,\n        ...defaultFeedbackEdgeSchema,\n        ...edgeTemplate\n    };\n\n    const feedbackEdge = context.modelFactory.createElement(edgeSchema);\n    if (isRoutable(feedbackEdge)) {\n        edgeEnd.feedbackEdge = feedbackEdge;\n        root.add(edgeEnd);\n        root.add(feedbackEdge);\n    }\n}\n\nexport function removeFeedbackEdge(root: SModelRoot): void {\n    const feedbackEdge = root.index.getById(feedbackEdgeId(root));\n    const feedbackEdgeEnd = root.index.getById(feedbackEdgeEndId(root));\n    if (feedbackEdge instanceof SChildElement) {\n        root.remove(feedbackEdge);\n    }\n    if (feedbackEdgeEnd instanceof SChildElement) {\n        root.remove(feedbackEdgeEnd);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { Action, CommandExecutionContext, SModelElement, SModelRoot, TYPES, hasArrayProp } from '~glsp-sprotty';\nimport { addCssClasses, getElements, removeCssClasses } from '../../utils/smodel-util';\nimport { FeedbackCommand } from './model';\n\nexport interface ModifyCSSFeedbackAction extends Action {\n    kind: typeof ModifyCSSFeedbackAction.KIND;\n\n    elementIds?: string[];\n    add?: string[];\n    remove?: string[];\n}\n\nexport namespace ModifyCSSFeedbackAction {\n    export const KIND = 'modifyCSSFeedback';\n\n    export function is(object: any): object is ModifyCSSFeedbackAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(options: { elements?: (string | SModelElement)[]; add?: string[]; remove?: string[] }): ModifyCSSFeedbackAction {\n        const { elements, ...rest } = options;\n        const elementIds = elements ? elements.map(element => (typeof element === 'string' ? element : element.id)) : undefined;\n        return {\n            kind: KIND,\n            elementIds,\n            ...rest\n        };\n    }\n}\n\n@injectable()\nexport class ModifyCssFeedbackCommand extends FeedbackCommand {\n    static readonly KIND = ModifyCSSFeedbackAction.KIND;\n\n    constructor(@inject(TYPES.Action) readonly action: ModifyCSSFeedbackAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRoot {\n        const elements = this.action.elementIds ? getElements(context.root.index, this.action.elementIds) : [context.root];\n\n        elements.forEach(e => {\n            if (this.action.remove) {\n                removeCssClasses(e, this.action.remove);\n            }\n\n            if (this.action.add) {\n                addCssClasses(e, this.action.add);\n            }\n        });\n\n        return context.root;\n    }\n}\n\nexport enum CursorCSS {\n    DEFAULT = 'default-mode',\n    OVERLAP_FORBIDDEN = 'overlap-forbidden-mode',\n    NODE_CREATION = 'node-creation-mode',\n    EDGE_CREATION_SOURCE = 'edge-creation-select-source-mode',\n    EDGE_CREATION_TARGET = 'edge-creation-select-target-mode',\n    EDGE_RECONNECT = 'edge-reconnect-select-target-mode',\n    OPERATION_NOT_ALLOWED = 'edge-modification-not-allowed-mode',\n    ELEMENT_DELETION = 'element-deletion-mode',\n    RESIZE_NESW = 'resize-nesw-mode',\n    RESIZE_NWSE = 'resize-nwse-mode',\n    MOVE = 'move-mode',\n    MARQUEE = 'marquee-mode'\n}\n\nexport function cursorFeedbackAction(cursorCss?: CursorCSS): ModifyCSSFeedbackAction {\n    const add = [];\n    if (cursorCss) {\n        add.push(cursorCss);\n    }\n    return ModifyCSSFeedbackAction.create({ add, remove: Object.values(CursorCSS) });\n}\n\nexport function applyCssClasses(element: SModelElement, ...add: string[]): ModifyCSSFeedbackAction {\n    return ModifyCSSFeedbackAction.create({ elements: [element], add });\n}\n\nexport function deleteCssClasses(element: SModelElement, ...remove: string[]): ModifyCSSFeedbackAction {\n    return ModifyCSSFeedbackAction.create({ elements: [element], remove });\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, configureCommand, configureView, LocationPostprocessor, MoveCommand, TYPES } from '~glsp-sprotty';\nimport { SResizeHandle } from '../change-bounds/model';\nimport { HideChangeBoundsToolResizeFeedbackCommand, ShowChangeBoundsToolResizeFeedbackCommand } from './change-bounds-tool-feedback';\nimport { DrawFeedbackEdgeCommand, FeedbackEdgeEnd, RemoveFeedbackEdgeCommand } from './creation-tool-feedback';\nimport { ModifyCssFeedbackCommand } from './css-feedback';\nimport {\n    DrawFeedbackEdgeSourceCommand,\n    HideEdgeReconnectHandlesFeedbackCommand,\n    ShowEdgeReconnectHandlesFeedbackCommand,\n    SwitchRoutingModeCommand\n} from './edge-edit-tool-feedback';\nimport { FeedbackActionDispatcher } from './feedback-action-dispatcher';\nimport { DrawMarqueeCommand, RemoveMarqueeCommand } from './marquee-tool-feedback';\nimport { FeedbackEdgeEndView, SResizeHandleView } from './view';\n\nconst toolFeedbackModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    bind(TYPES.IFeedbackActionDispatcher).to(FeedbackActionDispatcher).inSingletonScope();\n\n    configureCommand(context, ModifyCssFeedbackCommand);\n\n    // create node and edge tool feedback\n    configureCommand(context, DrawFeedbackEdgeCommand);\n    configureCommand(context, RemoveFeedbackEdgeCommand);\n\n    configureCommand(context, DrawMarqueeCommand);\n    configureCommand(context, RemoveMarqueeCommand);\n\n    configureView(context, FeedbackEdgeEnd.TYPE, FeedbackEdgeEndView);\n    // move tool feedback: we use sprotty's MoveCommand as client-side visual feedback\n    configureCommand(context, MoveCommand);\n\n    // resize tool feedback\n    configureCommand(context, ShowChangeBoundsToolResizeFeedbackCommand);\n    configureCommand(context, HideChangeBoundsToolResizeFeedbackCommand);\n    configureView(context, SResizeHandle.TYPE, SResizeHandleView);\n\n    // reconnect edge tool feedback\n    configureCommand(context, ShowEdgeReconnectHandlesFeedbackCommand);\n    configureCommand(context, HideEdgeReconnectHandlesFeedbackCommand);\n    configureCommand(context, DrawFeedbackEdgeSourceCommand);\n\n    configureCommand(context, SwitchRoutingModeCommand);\n\n    bindAsService(context, TYPES.IVNodePostprocessor, LocationPostprocessor);\n    bind(TYPES.HiddenVNodePostprocessor).toService(LocationPostprocessor);\n});\n\nexport default toolFeedbackModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport {\n    Action,\n    AnchorComputerRegistry,\n    Bounds,\n    CommandExecutionContext,\n    CommandReturn,\n    EdgeRouterRegistry,\n    ElementMove,\n    ISnapper,\n    MouseListener,\n    MoveAction,\n    Point,\n    PolylineEdgeRouter,\n    SConnectableElement,\n    SModelElement,\n    SRoutingHandle,\n    SwitchEditModeAction,\n    SwitchEditModeCommand,\n    TYPES,\n    findChildrenAtPosition,\n    findParentByFeature,\n    hasStringProp,\n    isBoundsAware,\n    isConnectable,\n    isSelected\n} from '~glsp-sprotty';\nimport { forEachElement, isRoutable, isRoutingHandle } from '../../utils/smodel-util';\nimport { getAbsolutePosition, toAbsoluteBounds } from '../../utils/viewpoint-util';\nimport { PointPositionUpdater } from '../change-bounds/snap';\nimport { addReconnectHandles, removeReconnectHandles } from '../reconnect/model';\nimport { FeedbackEdgeEnd, FeedbackEdgeEndMovingMouseListener, feedbackEdgeEndId, feedbackEdgeId } from './creation-tool-feedback';\nimport { FeedbackCommand } from './model';\n\n/**\n * RECONNECT HANDLES FEEDBACK\n */\nexport interface ShowEdgeReconnectHandlesFeedbackAction extends Action {\n    kind: typeof ShowEdgeReconnectHandlesFeedbackAction.KIND;\n    readonly elementId: string;\n}\n\nexport namespace ShowEdgeReconnectHandlesFeedbackAction {\n    export const KIND = 'showReconnectHandlesFeedback';\n\n    export function is(object: any): object is ShowEdgeReconnectHandlesFeedbackAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(elementId: string): ShowEdgeReconnectHandlesFeedbackAction {\n        return { kind: KIND, elementId };\n    }\n}\nexport interface HideEdgeReconnectHandlesFeedbackAction extends Action {\n    kind: typeof HideEdgeReconnectHandlesFeedbackAction.KIND;\n}\n\nexport namespace HideEdgeReconnectHandlesFeedbackAction {\n    export const KIND = 'hideReconnectHandlesFeedback';\n\n    export function is(object: any): object is HideEdgeReconnectHandlesFeedbackAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): HideEdgeReconnectHandlesFeedbackAction {\n        return { kind: KIND };\n    }\n}\n\n@injectable()\nexport class ShowEdgeReconnectHandlesFeedbackCommand extends FeedbackCommand {\n    static readonly KIND = ShowEdgeReconnectHandlesFeedbackAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: ShowEdgeReconnectHandlesFeedbackAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        forEachElement(index, isRoutable, removeReconnectHandles);\n\n        const routableElement = index.getById(this.action.elementId);\n        if (routableElement && isRoutable(routableElement)) {\n            addReconnectHandles(routableElement);\n        }\n\n        return context.root;\n    }\n}\n\n@injectable()\nexport class HideEdgeReconnectHandlesFeedbackCommand extends FeedbackCommand {\n    static readonly KIND = HideEdgeReconnectHandlesFeedbackAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: HideEdgeReconnectHandlesFeedbackAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        forEachElement(index, isRoutable, removeReconnectHandles);\n        return context.root;\n    }\n}\n/**\n * ROUTING FEEDBACK\n */\n\nexport interface SwitchRoutingModeAction extends Omit<SwitchEditModeAction, 'kind'> {\n    kind: typeof SwitchRoutingModeAction.KIND;\n}\n\nexport namespace SwitchRoutingModeAction {\n    export const KIND = 'switchRoutingMode';\n    export function create(options: { elementsToActivate?: string[]; elementsToDeactivate?: string[] }): SwitchRoutingModeAction {\n        return {\n            ...SwitchEditModeAction.create(options),\n            kind: KIND\n        };\n    }\n}\n@injectable()\nexport class SwitchRoutingModeCommand extends SwitchEditModeCommand {\n    static override KIND = SwitchRoutingModeAction.KIND;\n    constructor(@inject(TYPES.Action) action: SwitchRoutingModeAction) {\n        super({ ...action, kind: SwitchEditModeAction.KIND });\n    }\n}\n\n/**\n * SOURCE AND TARGET EDGE FEEDBACK\n */\n\nexport interface DrawFeedbackEdgeSourceAction extends Action {\n    kind: typeof DrawFeedbackEdgeSourceAction.KIND;\n    elementTypeId: string;\n    targetId: string;\n}\n\nexport namespace DrawFeedbackEdgeSourceAction {\n    export const KIND = 'drawFeedbackEdgeSource';\n\n    export function is(object: any): object is DrawFeedbackEdgeSourceAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementTypeId') && hasStringProp(object, 'targetId');\n    }\n\n    export function create(options: { elementTypeId: string; targetId: string }): DrawFeedbackEdgeSourceAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport class DrawFeedbackEdgeSourceCommand extends FeedbackCommand {\n    static readonly KIND = DrawFeedbackEdgeSourceAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: DrawFeedbackEdgeSourceAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        drawFeedbackEdgeSource(context, this.action.targetId, this.action.elementTypeId);\n        return context.root;\n    }\n}\n\n/**\n * SOURCE AND TARGET MOUSE MOVE LISTENER\n */\n\nexport class FeedbackEdgeTargetMovingMouseListener extends FeedbackEdgeEndMovingMouseListener {\n    constructor(protected override anchorRegistry: AnchorComputerRegistry) {\n        super(anchorRegistry);\n    }\n}\n\nexport class FeedbackEdgeSourceMovingMouseListener extends MouseListener {\n    constructor(protected anchorRegistry: AnchorComputerRegistry) {\n        super();\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        const root = target.root;\n        const edgeEnd = root.index.getById(feedbackEdgeEndId(root));\n        if (!(edgeEnd instanceof FeedbackEdgeEnd) || !edgeEnd.feedbackEdge) {\n            return [];\n        }\n\n        const edge = edgeEnd.feedbackEdge;\n        const position = getAbsolutePosition(edgeEnd, event);\n        const endAtMousePosition = findChildrenAtPosition(target.root, position).find(\n            e => isConnectable(e) && e.canConnect(edge, 'source')\n        );\n\n        if (endAtMousePosition instanceof SConnectableElement && edge.target && isBoundsAware(edge.target)) {\n            const anchor = this.computeAbsoluteAnchor(endAtMousePosition, Bounds.center(edge.target.bounds));\n            if (Point.euclideanDistance(anchor, edgeEnd.position) > 1) {\n                return [MoveAction.create([{ elementId: edgeEnd.id, toPosition: anchor }], { animate: false })];\n            }\n        } else {\n            return [MoveAction.create([{ elementId: edgeEnd.id, toPosition: position }], { animate: false })];\n        }\n\n        return [];\n    }\n\n    protected computeAbsoluteAnchor(element: SConnectableElement, referencePoint: Point, offset?: number): Point {\n        const anchorComputer = this.anchorRegistry.get(PolylineEdgeRouter.KIND, element.anchorKind);\n        let anchor = anchorComputer.getAnchor(element, referencePoint, offset);\n        // The anchor is computed in the local coordinate system of the element.\n        // If the element is a nested child element we have to add the absolute position of its parent to the anchor.\n        if (element.parent !== element.root) {\n            const parent = findParentByFeature(element.parent, isBoundsAware);\n            if (parent) {\n                const absoluteParentPosition = toAbsoluteBounds(parent);\n                anchor = Point.add(absoluteParentPosition, anchor);\n            }\n        }\n        return anchor;\n    }\n}\n\nexport class FeedbackEdgeRouteMovingMouseListener extends MouseListener {\n    protected pointPositionUpdater: PointPositionUpdater;\n\n    constructor(protected edgeRouterRegistry?: EdgeRouterRegistry, protected snapper?: ISnapper) {\n        super();\n        this.pointPositionUpdater = new PointPositionUpdater(snapper);\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (event.button === 0) {\n            const routingHandle = findParentByFeature(target, isRoutingHandle);\n            if (routingHandle !== undefined) {\n                result.push(SwitchRoutingModeAction.create({ elementsToActivate: [target.id] }));\n                this.pointPositionUpdater.updateLastDragPosition({ x: event.pageX, y: event.pageY });\n            } else {\n                this.pointPositionUpdater.resetPosition();\n            }\n        }\n        return result;\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (event.buttons === 0) {\n            return this.mouseUp(target, event);\n        }\n        const positionUpdate = this.pointPositionUpdater.updatePosition(target, { x: event.pageX, y: event.pageY }, !event.altKey);\n        if (positionUpdate) {\n            const moveActions = this.handleMoveOnClient(target, positionUpdate, !event.altKey);\n            result.push(...moveActions);\n        }\n        return result;\n    }\n\n    protected handleMoveOnClient(target: SModelElement, positionUpdate: Point, isSnap: boolean): Action[] {\n        const handleMoves: ElementMove[] = [];\n        target.root.index\n            .all()\n            .filter(element => isSelected(element))\n            .forEach(element => {\n                if (isRoutingHandle(element)) {\n                    const elementMove = this.toElementMove(element, positionUpdate, isSnap);\n                    if (elementMove) {\n                        handleMoves.push(elementMove);\n                    }\n                }\n            });\n        if (handleMoves.length > 0) {\n            return [MoveAction.create(handleMoves, { animate: false })];\n        }\n        return [];\n    }\n\n    protected toElementMove(element: SRoutingHandle, positionDelta: Point, isSnap: boolean): ElementMove | undefined {\n        const point = this.getHandlePosition(element);\n        if (point !== undefined) {\n            const snappedPoint = this.getSnappedHandlePosition(element, point, isSnap);\n            return {\n                elementId: element.id,\n                fromPosition: point,\n                toPosition: {\n                    x: snappedPoint.x + positionDelta.x,\n                    y: snappedPoint.y + positionDelta.y\n                }\n            };\n        }\n        return undefined;\n    }\n\n    protected getSnappedHandlePosition(element: SRoutingHandle, point: Point, isSnap: boolean): Point {\n        if (this.snapper && isSnap) {\n            return this.snapper.snap(point, element);\n        }\n        return point;\n    }\n\n    protected getHandlePosition(handle: SRoutingHandle): Point | undefined {\n        if (this.edgeRouterRegistry) {\n            const parent = handle.parent;\n            if (!isRoutable(parent)) {\n                return undefined;\n            }\n            const router = this.edgeRouterRegistry.get(parent.routerKind);\n            const route = router.route(parent);\n            return router.getHandlePosition(parent, route, handle);\n        }\n        return undefined;\n    }\n\n    override mouseUp(_target: SModelElement, _event: MouseEvent): Action[] {\n        this.pointPositionUpdater.resetPosition();\n        return [];\n    }\n\n    override decorate(vnode: VNode, _element: SModelElement): VNode {\n        return vnode;\n    }\n}\n\n/**\n * UTILITY FUNCTIONS\n */\n\nfunction drawFeedbackEdgeSource(context: CommandExecutionContext, targetId: string, elementTypeId: string): void {\n    const root = context.root;\n    const targetChild = root.index.getById(targetId);\n    if (!targetChild) {\n        return;\n    }\n\n    const target = findParentByFeature(targetChild, isConnectable);\n    if (!target || !isBoundsAware(target)) {\n        return;\n    }\n\n    const edgeEnd = new FeedbackEdgeEnd(target.id, elementTypeId);\n    edgeEnd.id = feedbackEdgeEndId(root);\n    edgeEnd.position = { x: target.bounds.x, y: target.bounds.y };\n\n    const feedbackEdgeSchema = {\n        type: 'edge',\n        id: feedbackEdgeId(root),\n        sourceId: edgeEnd.id,\n        targetId: target.id,\n        opacity: 0.3\n    };\n\n    const feedbackEdge = context.modelFactory.createElement(feedbackEdgeSchema);\n    if (isRoutable(feedbackEdge)) {\n        edgeEnd.feedbackEdge = feedbackEdge;\n        root.add(edgeEnd);\n        root.add(feedbackEdge);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { Action, IActionDispatcher, ILogger, TYPES } from '~glsp-sprotty';\n\nexport interface IFeedbackEmitter {}\n\n/**\n * Dispatcher for actions that are meant to show visual feedback on\n * the diagram that is not part of the diagram sent from the server\n * after a model update.\n *\n * The purpose of this dispatcher is to re-establish the feedback\n * after the model has been updated or reset by the server, as this would\n * overwrite the already established feedback, in case it is drawn by\n * extending the `SModelRoot`. Therefore, tools can register themselves\n * as feedback emitters with actions they want to place for showing\n * feedback. This dispatcher will then re-establish all feedback actions\n * of the registered emitters, whenever the `SModelRoot` has been set or updated.\n */\nexport interface IFeedbackActionDispatcher {\n    /**\n     * Registers `actions` to be sent out by a `feedbackEmitter`.\n     * @param feedbackEmitter the emitter sending out feedback actions.\n     * @param actions the actions to be sent out.\n     */\n    registerFeedback(feedbackEmitter: IFeedbackEmitter, actions: Action[]): void;\n\n    /**\n     * Deregisters a `feedbackEmitter` from this dispatcher and thereafter\n     * dispatches the provided `actions`.\n     * @param feedbackEmitter the emitter to be deregistered.\n     * @param actions the actions to be dispatched right after the deregistration.\n     * These actions do not have to be related to the actions sent out by the\n     * deregistered `feedbackEmitter`. The purpose of these actions typically is\n     * to reset the normal state of the diagram without the feedback (e.g., reset a\n     * CSS class that was set by a feedbackEmitter).\n     */\n    deregisterFeedback(feedbackEmitter: IFeedbackEmitter, actions: Action[]): void;\n\n    /**\n     * Retrieve all `actions` sent out by currently registered `feedbackEmitter`.\n     */\n    getRegisteredFeedback(): Action[];\n}\n\n@injectable()\nexport class FeedbackActionDispatcher implements IFeedbackActionDispatcher {\n    protected feedbackEmitters: Map<IFeedbackEmitter, Action[]> = new Map();\n\n    @inject(TYPES.IActionDispatcherProvider) protected actionDispatcher: () => Promise<IActionDispatcher>;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    registerFeedback(feedbackEmitter: IFeedbackEmitter, actions: Action[]): void {\n        this.feedbackEmitters.set(feedbackEmitter, actions);\n        this.dispatch(actions, feedbackEmitter);\n    }\n\n    deregisterFeedback(feedbackEmitter: IFeedbackEmitter, actions: Action[]): void {\n        this.feedbackEmitters.delete(feedbackEmitter);\n        this.dispatch(actions, feedbackEmitter);\n    }\n\n    private dispatch(actions: Action[], feedbackEmitter: IFeedbackEmitter): void {\n        this.actionDispatcher()\n            .then(dispatcher => dispatcher.dispatchAll(actions))\n            .then(() => this.logger.info(this, `Dispatched feedback actions for ${feedbackEmitter}`))\n            .catch(reason => this.logger.error(this, 'Failed to dispatch feedback actions', reason));\n    }\n\n    getRegisteredFeedback(): Action[] {\n        const result: Action[] = [];\n        this.feedbackEmitters.forEach((value, key) => result.push(...value));\n        return result;\n    }\n\n    getRegisteredFeedbackEmitters(action: Action): IFeedbackEmitter[] {\n        const result: IFeedbackEmitter[] = [];\n        this.feedbackEmitters.forEach((value, key) => {\n            if (value.find(a => a === action)) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    AnchorComputerRegistry,\n    CommandExecutionContext,\n    CommandReturn,\n    MouseListener,\n    Point,\n    SChildElement,\n    SModelElement,\n    SModelRoot,\n    TYPES,\n    hasObjectProp\n} from '~glsp-sprotty';\nimport { FeedbackCommand } from './model';\n\nexport interface DrawMarqueeAction extends Action {\n    kind: typeof DrawMarqueeAction.KIND;\n    startPoint: Point;\n    endPoint: Point;\n}\n\nexport namespace DrawMarqueeAction {\n    export const KIND = 'drawMarquee';\n\n    export function is(object: any): object is DrawMarqueeAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'startPoint') && hasObjectProp(object, 'endPoint');\n    }\n\n    export function create(options: { startPoint: Point; endPoint: Point }): DrawMarqueeAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n@injectable()\nexport class DrawMarqueeCommand extends FeedbackCommand {\n    static readonly KIND = DrawMarqueeAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: DrawMarqueeAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        drawMarquee(context, this.action.startPoint, this.action.endPoint);\n        return context.root;\n    }\n}\n\nexport interface RemoveMarqueeAction extends Action {\n    kind: typeof RemoveMarqueeAction.KIND;\n}\n\nexport namespace RemoveMarqueeAction {\n    export const KIND = 'removeMarquee';\n\n    export function is(object: any): object is RemoveMarqueeAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): RemoveMarqueeAction {\n        return { kind: KIND };\n    }\n}\n\n@injectable()\nexport class RemoveMarqueeCommand extends FeedbackCommand {\n    static readonly KIND = RemoveMarqueeAction.KIND;\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        removeMarquee(context.root);\n        return context.root;\n    }\n}\n\nexport class MarqueeEndMovingMouseListener extends MouseListener {\n    constructor(protected anchorRegistry: AnchorComputerRegistry) {\n        super();\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        return [];\n    }\n}\n\nexport function marqueeId(root: SModelRoot): string {\n    return root.id + '_' + MARQUEE;\n}\n\nexport const MARQUEE = 'marquee';\n\nexport function drawMarquee(context: CommandExecutionContext, startPoint: Point, endPoint: Point): void {\n    const root = context.root;\n\n    removeMarquee(root);\n\n    const marqueeSchema = {\n        type: MARQUEE,\n        id: marqueeId(root),\n        startPoint: startPoint,\n        endPoint: endPoint\n    };\n\n    const marquee = context.modelFactory.createElement(marqueeSchema);\n    root.add(marquee);\n}\n\nexport function removeMarquee(root: SModelRoot): void {\n    const marquee = root.index.getById(marqueeId(root));\n    if (marquee instanceof SChildElement) {\n        root.remove(marquee);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Command, CommandExecutionContext, CommandReturn } from '~glsp-sprotty';\n\nexport abstract class FeedbackCommand extends Command {\n    // used by the `FeedbackAwareUpdateModelCommand`\n    readonly priority: number = 0;\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { IView, Point, RenderingContext, setAttr, SModelElement, svg } from '~glsp-sprotty';\nimport { isResizable, ResizeHandleLocation, SResizeHandle } from '../change-bounds/model';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n/**\n * This view is used for the invisible end of the feedback edge.\n * A feedback edge is shown as a visual feedback when creating edges.\n */\n@injectable()\nexport class FeedbackEdgeEndView implements IView {\n    render(model: Readonly<SModelElement>, context: RenderingContext): VNode {\n        const position: Point = (model as any).position ?? Point.ORIGIN;\n        return <g x={position.x} y={position.y} />;\n    }\n}\n\n@injectable()\nexport class SResizeHandleView implements IView {\n    render(handle: SResizeHandle, context: RenderingContext): VNode {\n        const position = this.getPosition(handle);\n        if (position !== undefined) {\n            const node = (\n                <circle\n                    class-sprotty-resize-handle={true}\n                    class-mouseover={handle.hoverFeedback}\n                    cx={position.x}\n                    cy={position.y}\n                    r={this.getRadius()}\n                />\n            );\n            setAttr(node, 'data-kind', handle.location);\n            return node;\n        }\n        // Fallback: Create an empty group\n        return <g />;\n    }\n\n    protected getPosition(handle: SResizeHandle): Point | undefined {\n        const parent = handle.parent;\n        if (isResizable(parent)) {\n            if (handle.location === ResizeHandleLocation.TopLeft) {\n                return { x: 0, y: 0 };\n            } else if (handle.location === ResizeHandleLocation.TopRight) {\n                return { x: parent.bounds.width, y: 0 };\n            } else if (handle.location === ResizeHandleLocation.BottomLeft) {\n                return { x: 0, y: parent.bounds.height };\n            } else if (handle.location === ResizeHandleLocation.BottomRight) {\n                return { x: parent.bounds.width, y: parent.bounds.height };\n            }\n        }\n        return undefined;\n    }\n\n    getRadius(): number {\n        return 7;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { bindAsService, configureActionHandler, EnableDefaultToolsAction, TYPES } from '~glsp-sprotty';\nimport '../../../css/tool-palette.css';\nimport { EnableToolPaletteAction, ToolPalette } from './tool-palette';\n\nconst toolPaletteModule = new ContainerModule((bind, _unbind, isBound, _rebind) => {\n    bindAsService(bind, TYPES.IUIExtension, ToolPalette);\n    configureActionHandler({ bind, isBound }, EnableToolPaletteAction.KIND, ToolPalette);\n    configureActionHandler({ bind, isBound }, EnableDefaultToolsAction.KIND, ToolPalette);\n});\n\nexport default toolPaletteModule;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, postConstruct } from 'inversify';\nimport {\n    AbstractUIExtension,\n    Action,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    IActionHandler,\n    ICommand,\n    IToolManager,\n    MarkersReason,\n    PaletteItem,\n    RequestContextActions,\n    RequestMarkersAction,\n    SModelRoot,\n    SetContextActions,\n    SetUIExtensionVisibilityAction,\n    TYPES,\n    codiconCSSClasses,\n    matchesKeystroke\n} from '~glsp-sprotty';\nimport { GLSPActionDispatcher } from '../../base/action-dispatcher';\nimport { EditModeListener, EditorContextService } from '../../base/editor-context-service';\nimport { MouseDeleteTool } from '../tools/delete-tool';\nimport { MarqueeMouseTool } from '../tools/marquee-mouse-tool';\n\nconst CLICKED_CSS_CLASS = 'clicked';\nconst SEARCH_ICON_ID = 'search';\nconst PALETTE_ICON_ID = 'symbol-color';\nconst CHEVRON_DOWN_ICON_ID = 'chevron-right';\nconst PALETTE_HEIGHT = '500px';\n\nexport interface EnableToolPaletteAction extends Action {\n    kind: typeof EnableToolPaletteAction.KIND;\n}\n\nexport namespace EnableToolPaletteAction {\n    export const KIND = 'enableToolPalette';\n\n    export function is(object: any): object is EnableToolPaletteAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): EnableToolPaletteAction {\n        return { kind: KIND };\n    }\n}\n@injectable()\nexport class ToolPalette extends AbstractUIExtension implements IActionHandler, EditModeListener {\n    static readonly ID = 'tool-palette';\n\n    @inject(TYPES.IActionDispatcher) protected readonly actionDispatcher: GLSPActionDispatcher;\n    @inject(TYPES.IToolManager) protected readonly toolManager: IToolManager;\n    @inject(EditorContextService) protected readonly editorContext: EditorContextService;\n\n    protected paletteItems: PaletteItem[];\n    protected paletteItemsCopy: PaletteItem[] = [];\n    protected bodyDiv?: HTMLElement;\n    protected lastActivebutton?: HTMLElement;\n    protected defaultToolsButton: HTMLElement;\n    protected searchField: HTMLInputElement;\n    modelRootId: string;\n\n    id(): string {\n        return ToolPalette.ID;\n    }\n    containerClass(): string {\n        return ToolPalette.ID;\n    }\n\n    @postConstruct()\n    postConstruct(): void {\n        this.editorContext.register(this);\n    }\n\n    override initialize(): boolean {\n        if (!this.paletteItems) {\n            return false;\n        }\n        return super.initialize();\n    }\n\n    protected initializeContents(_containerElement: HTMLElement): void {\n        this.createHeader();\n        this.createBody();\n        this.lastActivebutton = this.defaultToolsButton;\n    }\n\n    protected override onBeforeShow(_containerElement: HTMLElement, root: Readonly<SModelRoot>): void {\n        this.modelRootId = root.id;\n        this.containerElement.style.maxHeight = PALETTE_HEIGHT;\n    }\n\n    protected addMinimizePaletteButton(): void {\n        const baseDiv = document.getElementById(this.options.baseDiv);\n        const minPaletteDiv = document.createElement('div');\n        minPaletteDiv.classList.add('minimize-palette-button');\n        this.containerElement.classList.add('collapsible-palette');\n        if (baseDiv) {\n            const insertedDiv = baseDiv.insertBefore(minPaletteDiv, baseDiv.firstChild);\n            const minimizeIcon = createIcon(CHEVRON_DOWN_ICON_ID);\n            this.updateMinimizePaletteButtonTooltip(minPaletteDiv);\n            minimizeIcon.onclick = _event => {\n                if (this.isPaletteMaximized()) {\n                    this.containerElement.style.maxHeight = '0px';\n                } else {\n                    this.containerElement.style.maxHeight = PALETTE_HEIGHT;\n                }\n                this.updateMinimizePaletteButtonTooltip(minPaletteDiv);\n                changeCodiconClass(minimizeIcon, PALETTE_ICON_ID);\n                changeCodiconClass(minimizeIcon, CHEVRON_DOWN_ICON_ID);\n            };\n            insertedDiv.appendChild(minimizeIcon);\n        }\n    }\n\n    protected updateMinimizePaletteButtonTooltip(button: HTMLDivElement): void {\n        if (this.isPaletteMaximized()) {\n            button.title = 'Minimize palette';\n        } else {\n            button.title = 'Maximize palette';\n        }\n    }\n\n    protected isPaletteMaximized(): boolean {\n        return this.containerElement && this.containerElement.style.maxHeight !== '0px';\n    }\n\n    protected createBody(): void {\n        const bodyDiv = document.createElement('div');\n        bodyDiv.classList.add('palette-body');\n        let tabIndex = 0;\n        this.paletteItems.sort(compare).forEach(item => {\n            if (item.children) {\n                const group = createToolGroup(item);\n                item.children.sort(compare).forEach(child => group.appendChild(this.createToolButton(child, tabIndex++)));\n                bodyDiv.appendChild(group);\n            } else {\n                bodyDiv.appendChild(this.createToolButton(item, tabIndex++));\n            }\n        });\n        if (this.paletteItems.length === 0) {\n            const noResultsDiv = document.createElement('div');\n            noResultsDiv.innerText = 'No results found.';\n            noResultsDiv.classList.add('tool-button');\n            bodyDiv.appendChild(noResultsDiv);\n        }\n        // Remove existing body to refresh filtered entries\n        if (this.bodyDiv) {\n            this.containerElement.removeChild(this.bodyDiv);\n        }\n        this.containerElement.appendChild(bodyDiv);\n        this.bodyDiv = bodyDiv;\n    }\n\n    protected createHeader(): void {\n        this.addMinimizePaletteButton();\n        const headerCompartment = document.createElement('div');\n        headerCompartment.classList.add('palette-header');\n        headerCompartment.append(this.createHeaderTitle());\n        headerCompartment.appendChild(this.createHeaderTools());\n        headerCompartment.appendChild((this.searchField = this.createHeaderSearchField()));\n        this.containerElement.appendChild(headerCompartment);\n    }\n\n    private createHeaderTools(): HTMLElement {\n        const headerTools = document.createElement('div');\n        headerTools.classList.add('header-tools');\n\n        this.defaultToolsButton = this.createDefaultToolButton();\n        headerTools.appendChild(this.defaultToolsButton);\n\n        const deleteToolButton = this.createMouseDeleteToolButton();\n        headerTools.appendChild(deleteToolButton);\n\n        const marqueeToolButton = this.createMarqueeToolButton();\n        headerTools.appendChild(marqueeToolButton);\n\n        const validateActionButton = this.createValidateButton();\n        headerTools.appendChild(validateActionButton);\n\n        // Create button for Search\n        const searchIcon = this.createSearchButton();\n        headerTools.appendChild(searchIcon);\n\n        return headerTools;\n    }\n\n    protected createDefaultToolButton(): HTMLElement {\n        const button = createIcon('inspect');\n        button.id = 'btn_default_tools';\n        button.title = 'Enable selection tool';\n        button.onclick = this.onClickStaticToolButton(this.defaultToolsButton);\n        return button;\n    }\n\n    protected createMouseDeleteToolButton(): HTMLElement {\n        const deleteToolButton = createIcon('chrome-close');\n        deleteToolButton.title = 'Enable deletion tool';\n        deleteToolButton.onclick = this.onClickStaticToolButton(deleteToolButton, MouseDeleteTool.ID);\n        return deleteToolButton;\n    }\n\n    protected createMarqueeToolButton(): HTMLElement {\n        const marqueeToolButton = createIcon('screen-full');\n        marqueeToolButton.title = 'Enable marquee tool';\n        marqueeToolButton.onclick = this.onClickStaticToolButton(marqueeToolButton, MarqueeMouseTool.ID);\n        return marqueeToolButton;\n    }\n\n    protected createValidateButton(): HTMLElement {\n        const validateActionButton = createIcon('pass');\n        validateActionButton.title = 'Validate model';\n        validateActionButton.onclick = _event => {\n            const modelIds: string[] = [this.modelRootId];\n            this.actionDispatcher.dispatch(RequestMarkersAction.create(modelIds, { reason: MarkersReason.BATCH }));\n        };\n        return validateActionButton;\n    }\n\n    protected createSearchButton(): HTMLElement {\n        const searchIcon = createIcon(SEARCH_ICON_ID);\n        searchIcon.onclick = _ev => {\n            const searchField = document.getElementById(this.containerElement.id + '_search_field');\n            if (searchField) {\n                if (searchField.style.display === 'none') {\n                    searchField.style.display = '';\n                    searchField.focus();\n                } else {\n                    searchField.style.display = 'none';\n                }\n            }\n        };\n        searchIcon.classList.add('search-icon');\n        searchIcon.title = 'Filter palette entries';\n        return searchIcon;\n    }\n\n    protected createHeaderSearchField(): HTMLInputElement {\n        const searchField = document.createElement('input');\n        searchField.classList.add('search-input');\n        searchField.id = this.containerElement.id + '_search_field';\n        searchField.type = 'text';\n        searchField.placeholder = ' Search...';\n        searchField.style.display = 'none';\n        searchField.onkeyup = () => this.requestFilterUpdate(this.searchField.value);\n        searchField.onkeydown = ev => this.clearOnEscape(ev);\n        return searchField;\n    }\n\n    protected createHeaderTitle(): HTMLElement {\n        const header = document.createElement('div');\n        header.classList.add('header-icon');\n        header.appendChild(createIcon(PALETTE_ICON_ID));\n        header.insertAdjacentText('beforeend', 'Palette');\n        return header;\n    }\n\n    protected createToolButton(item: PaletteItem, index: number): HTMLElement {\n        const button = document.createElement('div');\n        button.tabIndex = index;\n        button.classList.add('tool-button');\n        if (item.icon) {\n            button.appendChild(createIcon(item.icon));\n        }\n        button.insertAdjacentText('beforeend', item.label);\n        button.onclick = this.onClickCreateToolButton(button, item);\n        button.onkeydown = ev => this.clearToolOnEscape(ev);\n        return button;\n    }\n\n    protected onClickCreateToolButton(button: HTMLElement, item: PaletteItem) {\n        return (_ev: MouseEvent) => {\n            if (!this.editorContext.isReadonly) {\n                this.actionDispatcher.dispatchAll(item.actions);\n                this.changeActiveButton(button);\n                button.focus();\n            }\n        };\n    }\n\n    protected onClickStaticToolButton(button: HTMLElement, toolId?: string) {\n        return (_ev: MouseEvent) => {\n            if (!this.editorContext.isReadonly) {\n                const action = toolId ? EnableToolsAction.create([toolId]) : EnableDefaultToolsAction.create();\n                this.actionDispatcher.dispatch(action);\n                this.changeActiveButton(button);\n                button.focus();\n            }\n        };\n    }\n\n    changeActiveButton(button?: HTMLElement): void {\n        if (this.lastActivebutton) {\n            this.lastActivebutton.classList.remove(CLICKED_CSS_CLASS);\n        }\n        if (button) {\n            button.classList.add(CLICKED_CSS_CLASS);\n            this.lastActivebutton = button;\n        } else {\n            this.defaultToolsButton.classList.add(CLICKED_CSS_CLASS);\n            this.lastActivebutton = this.defaultToolsButton;\n        }\n    }\n\n    handle(action: Action): ICommand | Action | void {\n        if (action.kind === EnableToolPaletteAction.KIND) {\n            const requestAction = RequestContextActions.create({\n                contextId: ToolPalette.ID,\n                editorContext: {\n                    selectedElementIds: []\n                }\n            });\n            this.actionDispatcher.requestUntil(requestAction).then(response => {\n                if (SetContextActions.is(response)) {\n                    this.paletteItems = response.actions.map(e => e as PaletteItem);\n                    this.actionDispatcher.dispatch(\n                        SetUIExtensionVisibilityAction.create({ extensionId: ToolPalette.ID, visible: !this.editorContext.isReadonly })\n                    );\n                }\n            });\n        } else if (action.kind === EnableDefaultToolsAction.KIND) {\n            this.changeActiveButton();\n            this.restoreFocus();\n        }\n    }\n\n    editModeChanged(_oldValue: string, _newValue: string): void {\n        this.actionDispatcher.dispatch(\n            SetUIExtensionVisibilityAction.create({ extensionId: ToolPalette.ID, visible: !this.editorContext.isReadonly })\n        );\n    }\n\n    protected clearOnEscape(event: KeyboardEvent): void {\n        if (matchesKeystroke(event, 'Escape')) {\n            this.searchField.value = '';\n            this.requestFilterUpdate('');\n        }\n    }\n\n    protected clearToolOnEscape(event: KeyboardEvent): void {\n        if (matchesKeystroke(event, 'Escape')) {\n            this.actionDispatcher.dispatch(EnableDefaultToolsAction.create());\n        }\n    }\n\n    protected handleSetContextActions(action: SetContextActions): void {\n        this.paletteItems = action.actions.map(e => e as PaletteItem);\n        this.createBody();\n    }\n\n    protected requestFilterUpdate(filter: string): void {\n        // Initialize the copy if it's empty\n        if (this.paletteItemsCopy.length === 0) {\n            // Creating deep copy\n            this.paletteItemsCopy = JSON.parse(JSON.stringify(this.paletteItems));\n        }\n\n        // Reset the paletteItems before searching\n        this.paletteItems = JSON.parse(JSON.stringify(this.paletteItemsCopy));\n        // Filter the entries\n        const filteredPaletteItems: PaletteItem[] = [];\n        for (const itemGroup of this.paletteItems) {\n            if (itemGroup.children) {\n                // Fetch the labels according to the filter\n                const matchingChildren = itemGroup.children.filter(child => child.label.toLowerCase().includes(filter.toLowerCase()));\n                // Add the itemgroup containing the correct entries\n                if (matchingChildren.length > 0) {\n                    // Clear existing children\n                    itemGroup.children.splice(0, itemGroup.children.length);\n                    // Push the matching children\n                    matchingChildren.forEach(child => itemGroup.children!.push(child));\n                    filteredPaletteItems.push(itemGroup);\n                }\n            }\n        }\n        this.paletteItems = filteredPaletteItems;\n        this.createBody();\n    }\n}\n\nexport function compare(a: PaletteItem, b: PaletteItem): number {\n    const sortStringBased = a.sortString.localeCompare(b.sortString);\n    if (sortStringBased !== 0) {\n        return sortStringBased;\n    }\n    return a.label.localeCompare(b.label);\n}\n\nexport function createIcon(codiconId: string): HTMLElement {\n    const icon = document.createElement('i');\n    icon.classList.add(...codiconCSSClasses(codiconId));\n    return icon;\n}\n\nexport function createToolGroup(item: PaletteItem): HTMLElement {\n    const group = document.createElement('div');\n    group.classList.add('tool-group');\n    group.id = item.id;\n    const header = document.createElement('div');\n    header.classList.add('group-header');\n    if (item.icon) {\n        header.appendChild(createIcon(item.icon));\n    }\n    header.insertAdjacentText('beforeend', item.label);\n    header.ondblclick = _ev => {\n        const css = 'collapsed';\n        changeCSSClass(group, css);\n        Array.from(group.children).forEach(child => changeCSSClass(child, css));\n        window!.getSelection()!.removeAllRanges();\n    };\n\n    group.appendChild(header);\n    return group;\n}\n\nexport function changeCSSClass(element: Element, css: string): void {\n    // eslint-disable-next-line chai-friendly/no-unused-expressions\n    element.classList.contains(css) ? element.classList.remove(css) : element.classList.add(css);\n}\n\nexport function changeCodiconClass(element: Element, codiconId: string): void {\n    // eslint-disable-next-line chai-friendly/no-unused-expressions\n    element.classList.contains(codiconCSSClasses(codiconId)[1])\n        ? element.classList.remove(codiconCSSClasses(codiconId)[1])\n        : element.classList.add(codiconCSSClasses(codiconId)[1]);\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { Action, IActionDispatcher, KeyTool, TYPES } from '~glsp-sprotty';\nimport { EditorContextService } from '../../base/editor-context-service';\nimport { GLSPTool } from '../../base/tool-manager/glsp-tool-manager';\nimport { IMouseTool } from '../mouse-tool/mouse-tool';\nimport { IFeedbackActionDispatcher, IFeedbackEmitter } from '../tool-feedback/feedback-action-dispatcher';\n\n@injectable()\nexport abstract class BaseGLSPTool implements GLSPTool {\n    @inject(TYPES.IFeedbackActionDispatcher) protected feedbackDispatcher: IFeedbackActionDispatcher;\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    @inject(TYPES.MouseTool) protected mouseTool: IMouseTool;\n    @inject(KeyTool) protected keyTool: KeyTool;\n    @inject(EditorContextService) protected readonly editorContext: EditorContextService;\n\n    abstract enable(): void;\n    abstract disable(): void;\n\n    abstract id: string;\n\n    get isEditTool(): boolean {\n        return true;\n    }\n\n    dispatchActions(actions: Action[]): void {\n        this.actionDispatcher.dispatchAll(actions);\n    }\n\n    dispatchFeedback(actions: Action[], feedbackEmitter?: IFeedbackEmitter): void {\n        this.feedbackDispatcher.registerFeedback(feedbackEmitter ?? this, actions);\n    }\n\n    deregisterFeedback(actions: Action[], feedbackEmitter?: IFeedbackEmitter): void {\n        this.feedbackDispatcher.deregisterFeedback(feedbackEmitter ?? this, actions);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    Bounds,\n    BoundsAware,\n    ChangeBoundsOperation,\n    ChangeRoutingPointsOperation,\n    CompoundOperation,\n    Dimension,\n    EdgeRouterRegistry,\n    ElementAndBounds,\n    ElementAndRoutingPoints,\n    ISnapper,\n    MouseListener,\n    Operation,\n    Point,\n    SChildElement,\n    SConnectableElement,\n    SModelElement,\n    SModelRoot,\n    SParentElement,\n    SetBoundsAction,\n    TYPES,\n    findParentByFeature,\n    isSelected\n} from '~glsp-sprotty';\nimport { DragAwareMouseListener } from '../../base/drag-aware-mouse-listener';\nimport { isValidMove, isValidSize } from '../../utils/layout-utils';\nimport {\n    calcElementAndRoutingPoints,\n    forEachElement,\n    isNonRoutableSelectedMovableBoundsAware,\n    toElementAndBounds\n} from '../../utils/smodel-util';\nimport { Resizable, ResizeHandleLocation, SResizeHandle, isBoundsAwareMoveable, isResizable } from '../change-bounds/model';\nimport {\n    IMovementRestrictor,\n    createMovementRestrictionFeedback,\n    removeMovementRestrictionFeedback\n} from '../change-bounds/movement-restrictor';\nimport { PointPositionUpdater } from '../change-bounds/snap';\nimport { SelectionListener, SelectionService } from '../select/selection-service';\nimport {\n    FeedbackMoveMouseListener,\n    HideChangeBoundsToolResizeFeedbackAction,\n    ShowChangeBoundsToolResizeFeedbackAction\n} from '../tool-feedback/change-bounds-tool-feedback';\nimport { CursorCSS, applyCssClasses, cursorFeedbackAction, deleteCssClasses } from '../tool-feedback/css-feedback';\nimport { BaseGLSPTool } from './base-glsp-tool';\n\n/**\n * The change bounds tool has the license to move multiple elements or resize a single element by implementing the ChangeBounds operation.\n * In contrast to Sprotty's implementation this tool only sends a `ChangeBoundsOperationAction` when an operation has finished and does not\n * provide client-side live updates to improve performance.\n *\n * | Operation | Client Update    | Server Update\n * +-----------+------------------+----------------------------\n * | Move      | MoveAction       | ChangeBoundsOperationAction\n * | Resize    | SetBoundsAction  | ChangeBoundsOperationAction\n *\n * To provide a visual client updates during move we install the `FeedbackMoveMouseListener` and to provide visual client updates during\n * resize and send the server updates we install the `ChangeBoundsListener`.\n */\n@injectable()\nexport class ChangeBoundsTool extends BaseGLSPTool {\n    static ID = 'glsp.change-bounds-tool';\n\n    @inject(TYPES.SelectionService) protected selectionService: SelectionService;\n    @inject(EdgeRouterRegistry) @optional() readonly edgeRouterRegistry?: EdgeRouterRegistry;\n    @inject(TYPES.ISnapper) @optional() readonly snapper?: ISnapper;\n    @inject(TYPES.IMovementRestrictor) @optional() readonly movementRestrictor?: IMovementRestrictor;\n    protected feedbackMoveMouseListener: MouseListener;\n    protected changeBoundsListener: MouseListener & SelectionListener;\n\n    get id(): string {\n        return ChangeBoundsTool.ID;\n    }\n\n    enable(): void {\n        // install feedback move mouse listener for client-side move updates\n        this.feedbackMoveMouseListener = this.createMoveMouseListener();\n        this.mouseTool.register(this.feedbackMoveMouseListener);\n\n        // install change bounds listener for client-side resize updates and server-side updates\n        this.changeBoundsListener = this.createChangeBoundsListener();\n        this.mouseTool.register(this.changeBoundsListener);\n        this.selectionService.register(this.changeBoundsListener);\n    }\n\n    protected createMoveMouseListener(): MouseListener {\n        return new FeedbackMoveMouseListener(this);\n    }\n\n    protected createChangeBoundsListener(): MouseListener & SelectionListener {\n        return new ChangeBoundsListener(this);\n    }\n\n    disable(): void {\n        this.mouseTool.deregister(this.changeBoundsListener);\n        this.selectionService.deregister(this.changeBoundsListener);\n        this.mouseTool.deregister(this.feedbackMoveMouseListener);\n        this.deregisterFeedback([], this.feedbackMoveMouseListener);\n        this.deregisterFeedback([HideChangeBoundsToolResizeFeedbackAction.create()], this.changeBoundsListener);\n    }\n}\n\nexport class ChangeBoundsListener extends DragAwareMouseListener implements SelectionListener {\n    static readonly CSS_CLASS_ACTIVE = 'active';\n\n    // members for calculating the correct position change\n    protected initialBounds: Bounds | undefined;\n    protected pointPositionUpdater: PointPositionUpdater;\n\n    // members for resize mode\n    protected activeResizeElement?: SModelElement;\n    protected activeResizeHandle?: SResizeHandle;\n\n    constructor(protected tool: ChangeBoundsTool) {\n        super();\n        this.pointPositionUpdater = new PointPositionUpdater(tool.snapper);\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        super.mouseDown(target, event);\n        // If another button than the left mouse button was clicked or we are\n        // still on the root element we don't need to execute the tool behavior\n        if (event.button !== 0 || target instanceof SModelRoot) {\n            return [];\n        }\n        // check if we have a resize handle (only single-selection)\n        if (this.activeResizeElement && target instanceof SResizeHandle) {\n            this.activeResizeHandle = target;\n        } else {\n            this.setActiveResizeElement(target);\n        }\n        if (this.activeResizeElement) {\n            this.initPosition(event);\n        } else {\n            this.reset();\n        }\n        return [];\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        super.mouseMove(target, event);\n        if (this.isMouseDrag && this.activeResizeHandle) {\n            // rely on the FeedbackMoveMouseListener to update the element bounds of selected elements\n            // consider resize handles ourselves\n            const actions: Action[] = [\n                cursorFeedbackAction(this.activeResizeHandle.isNwSeResize() ? CursorCSS.RESIZE_NWSE : CursorCSS.RESIZE_NESW),\n                applyCssClasses(this.activeResizeHandle, ChangeBoundsListener.CSS_CLASS_ACTIVE)\n            ];\n            const positionUpdate = this.pointPositionUpdater.updatePosition(target, { x: event.pageX, y: event.pageY }, !event.altKey);\n            if (positionUpdate) {\n                const resizeActions = this.handleResizeOnClient(positionUpdate);\n                actions.push(...resizeActions);\n            }\n            return actions;\n        }\n        return [];\n    }\n\n    override draggingMouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        if (this.pointPositionUpdater.isLastDragPositionUndefined()) {\n            this.resetPosition();\n            return [];\n        }\n        const actions: Action[] = [];\n\n        if (this.activeResizeHandle) {\n            // Resize\n            actions.push(...this.handleResize(this.activeResizeHandle));\n        } else {\n            // Move\n            actions.push(...this.handleMoveOnServer(target));\n        }\n        this.resetPosition();\n        return actions;\n    }\n\n    protected handleMoveOnServer(target: SModelElement): Action[] {\n        const operations: Operation[] = [];\n\n        operations.push(...this.handleMoveElementsOnServer(target));\n        operations.push(...this.handleMoveRoutingPointsOnServer(target));\n        if (operations.length > 0) {\n            return [CompoundOperation.create(operations)];\n        }\n        return operations;\n    }\n\n    protected handleMoveElementsOnServer(target: SModelElement): Operation[] {\n        const result: Operation[] = [];\n        const newBounds: ElementAndBounds[] = [];\n        const selectedElements: (SModelElement & BoundsAware)[] = [];\n        forEachElement(target.index, isNonRoutableSelectedMovableBoundsAware, element => {\n            selectedElements.push(element);\n        });\n\n        const selectionSet: Set<SModelElement & BoundsAware> = new Set(selectedElements);\n        selectedElements\n            .filter(element => !this.isChildOfSelected(selectionSet, element))\n            .map(element => this.createElementAndBounds(element))\n            .forEach(bounds => newBounds.push(...bounds));\n\n        if (newBounds.length > 0) {\n            result.push(ChangeBoundsOperation.create(newBounds));\n        }\n        return result;\n    }\n\n    protected isChildOfSelected(selectedElements: Set<SModelElement>, element: SModelElement): boolean {\n        while (element instanceof SChildElement) {\n            element = element.parent;\n            if (selectedElements.has(element)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    protected handleMoveRoutingPointsOnServer(target: SModelElement): Operation[] {\n        const newRoutingPoints: ElementAndRoutingPoints[] = [];\n        const routerRegistry = this.tool.edgeRouterRegistry;\n        if (routerRegistry) {\n            //  If client routing is enabled -> delegate routingpoints of connected edges to server\n            forEachElement(target.index, isNonRoutableSelectedMovableBoundsAware, element => {\n                if (element instanceof SConnectableElement) {\n                    element.incomingEdges\n                        .map(connectable => calcElementAndRoutingPoints(connectable, routerRegistry))\n                        .forEach(ear => newRoutingPoints.push(ear));\n                    element.outgoingEdges\n                        .map(connectable => calcElementAndRoutingPoints(connectable, routerRegistry))\n                        .forEach(ear => newRoutingPoints.push(ear));\n                }\n            });\n        }\n        return newRoutingPoints.length > 0 ? [ChangeRoutingPointsOperation.create(newRoutingPoints)] : [];\n    }\n\n    protected handleResize(activeResizeHandle: SResizeHandle): Action[] {\n        const actions: Action[] = [];\n        actions.push(cursorFeedbackAction(CursorCSS.DEFAULT));\n        actions.push(deleteCssClasses(activeResizeHandle, ChangeBoundsListener.CSS_CLASS_ACTIVE));\n        const resizeElement = findParentByFeature(activeResizeHandle, isResizable);\n        if (this.isActiveResizeElement(resizeElement)) {\n            this.createChangeBoundsAction(resizeElement).forEach(action => actions.push(action));\n        }\n        return actions;\n    }\n\n    selectionChanged(root: SModelRoot, selectedElements: string[]): void {\n        if (this.activeResizeElement) {\n            if (selectedElements.includes(this.activeResizeElement.id)) {\n                // our active element is still selected, nothing to do\n                return;\n            }\n\n            // try to find some other selected element and mark that active\n            for (const elementId of selectedElements.reverse()) {\n                const element = root.index.getById(elementId);\n                if (element && this.setActiveResizeElement(element)) {\n                    return;\n                }\n            }\n            this.reset();\n        }\n    }\n\n    protected setActiveResizeElement(target: SModelElement): boolean {\n        // check if we have a selected, moveable element (multi-selection allowed)\n        const moveableElement = findParentByFeature(target, isBoundsAwareMoveable);\n        if (isSelected(moveableElement)) {\n            // only allow one element to have the element resize handles\n            this.activeResizeElement = moveableElement;\n            if (isResizable(this.activeResizeElement)) {\n                this.tool.dispatchFeedback([ShowChangeBoundsToolResizeFeedbackAction.create(this.activeResizeElement.id)], this);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    protected isActiveResizeElement(element?: SModelElement): element is SParentElement & BoundsAware {\n        return element !== undefined && this.activeResizeElement !== undefined && element.id === this.activeResizeElement.id;\n    }\n\n    protected initPosition(event: MouseEvent): void {\n        this.pointPositionUpdater.updateLastDragPosition({ x: event.pageX, y: event.pageY });\n        if (this.activeResizeHandle) {\n            const resizeElement = findParentByFeature(this.activeResizeHandle, isResizable);\n            this.initialBounds = {\n                x: resizeElement!.bounds.x,\n                y: resizeElement!.bounds.y,\n                width: resizeElement!.bounds.width,\n                height: resizeElement!.bounds.height\n            };\n        }\n    }\n\n    protected reset(): void {\n        if (this.activeResizeElement && isResizable(this.activeResizeElement)) {\n            this.tool.dispatchFeedback([HideChangeBoundsToolResizeFeedbackAction.create()], this);\n        }\n        this.tool.dispatchActions([cursorFeedbackAction(CursorCSS.DEFAULT)]);\n        this.resetPosition();\n    }\n\n    protected resetPosition(): void {\n        this.activeResizeHandle = undefined;\n        this.pointPositionUpdater.resetPosition();\n    }\n\n    protected handleResizeOnClient(positionUpdate: Point): Action[] {\n        if (!this.activeResizeHandle) {\n            return [];\n        }\n\n        const resizeElement = findParentByFeature(this.activeResizeHandle, isResizable);\n        if (this.isActiveResizeElement(resizeElement)) {\n            switch (this.activeResizeHandle.location) {\n                case ResizeHandleLocation.TopLeft:\n                    return this.handleTopLeftResize(resizeElement, positionUpdate);\n                case ResizeHandleLocation.TopRight:\n                    return this.handleTopRightResize(resizeElement, positionUpdate);\n                case ResizeHandleLocation.BottomLeft:\n                    return this.handleBottomLeftResize(resizeElement, positionUpdate);\n                case ResizeHandleLocation.BottomRight:\n                    return this.handleBottomRightResize(resizeElement, positionUpdate);\n            }\n        }\n        return [];\n    }\n\n    protected handleTopLeftResize(resizeElement: SParentElement & Resizable, positionUpdate: Point): Action[] {\n        return this.createSetBoundsAction(\n            resizeElement,\n            resizeElement.bounds.x + positionUpdate.x,\n            resizeElement.bounds.y + positionUpdate.y,\n            resizeElement.bounds.width - positionUpdate.x,\n            resizeElement.bounds.height - positionUpdate.y\n        );\n    }\n\n    protected handleTopRightResize(resizeElement: SParentElement & Resizable, positionUpdate: Point): Action[] {\n        return this.createSetBoundsAction(\n            resizeElement,\n            resizeElement.bounds.x,\n            resizeElement.bounds.y + positionUpdate.y,\n            resizeElement.bounds.width + positionUpdate.x,\n            resizeElement.bounds.height - positionUpdate.y\n        );\n    }\n\n    protected handleBottomLeftResize(resizeElement: SParentElement & Resizable, positionUpdate: Point): Action[] {\n        return this.createSetBoundsAction(\n            resizeElement,\n            resizeElement.bounds.x + positionUpdate.x,\n            resizeElement.bounds.y,\n            resizeElement.bounds.width - positionUpdate.x,\n            resizeElement.bounds.height + positionUpdate.y\n        );\n    }\n\n    protected handleBottomRightResize(resizeElement: SParentElement & Resizable, positionUpdate: Point): Action[] {\n        return this.createSetBoundsAction(\n            resizeElement,\n            resizeElement.bounds.x,\n            resizeElement.bounds.y,\n            resizeElement.bounds.width + positionUpdate.x,\n            resizeElement.bounds.height + positionUpdate.y\n        );\n    }\n\n    protected createChangeBoundsAction(element: SModelElement & BoundsAware): Action[] {\n        if (this.isValidBoundChange(element, element.bounds, element.bounds)) {\n            return [ChangeBoundsOperation.create([toElementAndBounds(element)])];\n        } else if (this.initialBounds) {\n            const actions: Action[] = [];\n            if (this.tool.movementRestrictor) {\n                actions.push(removeMovementRestrictionFeedback(element, this.tool.movementRestrictor));\n            }\n            actions.push(SetBoundsAction.create([{ elementId: element.id, newPosition: this.initialBounds, newSize: this.initialBounds }]));\n            return actions;\n        }\n        return [];\n    }\n\n    protected createElementAndBounds(element: SModelElement & BoundsAware): ElementAndBounds[] {\n        if (this.isValidBoundChange(element, element.bounds, element.bounds)) {\n            return [toElementAndBounds(element)];\n        }\n        return [];\n    }\n\n    protected createSetBoundsAction(element: SModelElement & BoundsAware, x: number, y: number, width: number, height: number): Action[] {\n        const newPosition = { x, y };\n        const newSize = { width, height };\n        const result: Action[] = [];\n\n        if (this.isValidBoundChange(element, newPosition, newSize)) {\n            if (this.tool.movementRestrictor) {\n                result.push(removeMovementRestrictionFeedback(element, this.tool.movementRestrictor));\n            }\n            result.push(SetBoundsAction.create([{ elementId: element.id, newPosition, newSize }]));\n        } else if (this.isValidSize(element, newSize)) {\n            if (this.tool.movementRestrictor) {\n                result.push(createMovementRestrictionFeedback(element, this.tool.movementRestrictor));\n            }\n            result.push(SetBoundsAction.create([{ elementId: element.id, newPosition, newSize }]));\n        }\n\n        return result;\n    }\n\n    protected snap(position: Point, element: SModelElement, isSnap: boolean): Point {\n        return isSnap && this.tool.snapper ? this.tool.snapper.snap(position, element) : { x: position.x, y: position.y };\n    }\n\n    protected isValidBoundChange(element: SModelElement & BoundsAware, newPosition: Point, newSize: Dimension): boolean {\n        return this.isValidSize(element, newSize) && this.isValidMove(element, newPosition);\n    }\n\n    protected isValidSize(element: SModelElement & BoundsAware, size: Dimension): boolean {\n        return isValidSize(element, size);\n    }\n\n    protected isValidMove(element: SModelElement & BoundsAware, newPosition: Point): boolean {\n        return isValidMove(element, newPosition, this.tool.movementRestrictor);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    DeleteElementOperation,\n    EnableDefaultToolsAction,\n    KeyListener,\n    KeyTool,\n    MouseListener,\n    SModelElement,\n    TYPES,\n    findParentByFeature,\n    isCtrlOrCmd,\n    isDeletable,\n    isSelectable,\n    matchesKeystroke\n} from '~glsp-sprotty';\nimport { GLSPTool } from '../../base/tool-manager/glsp-tool-manager';\nimport { IMouseTool } from '../mouse-tool/mouse-tool';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport { IFeedbackActionDispatcher } from '../tool-feedback/feedback-action-dispatcher';\n\n/**\n * Deletes selected elements when hitting the `Del` key.\n */\n@injectable()\nexport class DelKeyDeleteTool implements GLSPTool {\n    static ID = 'glsp.delete-keyboard';\n\n    isEditTool = true;\n    protected deleteKeyListener: DeleteKeyListener = new DeleteKeyListener();\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n\n    get id(): string {\n        return DelKeyDeleteTool.ID;\n    }\n\n    enable(): void {\n        this.keytool.register(this.deleteKeyListener);\n    }\n\n    disable(): void {\n        this.keytool.deregister(this.deleteKeyListener);\n    }\n}\n\n@injectable()\nexport class DeleteKeyListener extends KeyListener {\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'Delete')) {\n            const deleteElementIds = Array.from(\n                element.root.index\n                    .all()\n                    .filter(e => isDeletable(e) && isSelectable(e) && e.selected)\n                    .filter(e => e.id !== e.root.id)\n                    .map(e => e.id)\n            );\n            if (deleteElementIds.length > 0) {\n                return [DeleteElementOperation.create(deleteElementIds)];\n            }\n        }\n        return [];\n    }\n}\n\n/**\n * Deletes selected elements when clicking on them.\n */\n@injectable()\nexport class MouseDeleteTool implements GLSPTool {\n    static ID = 'glsp.delete-mouse';\n\n    isEditTool = true;\n\n    protected deleteToolMouseListener: DeleteToolMouseListener = new DeleteToolMouseListener();\n\n    @inject(TYPES.MouseTool) protected mouseTool: IMouseTool;\n    @inject(TYPES.IFeedbackActionDispatcher) protected readonly feedbackDispatcher: IFeedbackActionDispatcher;\n\n    get id(): string {\n        return MouseDeleteTool.ID;\n    }\n\n    enable(): void {\n        this.mouseTool.register(this.deleteToolMouseListener);\n        this.feedbackDispatcher.registerFeedback(this, [cursorFeedbackAction(CursorCSS.ELEMENT_DELETION)]);\n    }\n\n    disable(): void {\n        this.mouseTool.deregister(this.deleteToolMouseListener);\n        this.feedbackDispatcher.registerFeedback(this, [cursorFeedbackAction()]);\n    }\n}\n\n@injectable()\nexport class DeleteToolMouseListener extends MouseListener {\n    override mouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        const deletableParent = findParentByFeature(target, isDeletable);\n        if (deletableParent === undefined) {\n            return [];\n        }\n        const result: Action[] = [];\n        result.push(DeleteElementOperation.create([deletableParent.id]));\n        if (!isCtrlOrCmd(event)) {\n            result.push(EnableDefaultToolsAction.create());\n        }\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport {\n    bindAsService,\n    BindingContext,\n    bindOrRebind,\n    configureActionHandler,\n    configureModelElement,\n    ManhattanEdgeRouter,\n    TriggerEdgeCreationAction,\n    TriggerNodeCreationAction,\n    TYPES\n} from '~glsp-sprotty';\nimport { FocusStateChangedAction } from '../../base/actions/focus-change-action';\nimport { MARQUEE } from '../tool-feedback/marquee-tool-feedback';\nimport { ChangeBoundsTool } from './change-bounds-tool';\nimport { DelKeyDeleteTool, MouseDeleteTool } from './delete-tool';\nimport { EdgeCreationTool } from './edge-creation-tool';\nimport { EdgeEditTool } from './edge-edit-tool';\nimport { EnableDefaultToolsOnFocusLossHandler } from './enable-default-tools-on-focus-loss';\nimport { GLSPManhattanEdgeRouter } from './glsp-manhattan-edge-router';\nimport { MarqueeMouseTool } from './marquee-mouse-tool';\nimport { MarqueeTool } from './marquee-tool';\nimport { MarqueeNode } from './model';\nimport { NodeCreationTool } from './node-creation-tool';\nimport { MarqueeView } from './view';\n\n/**\n * Registers the default tools of GLSP (node and edge creation, changing bounds, edge editing, deletion)\n * and adds the marquee selection tool.\n */\nexport const toolsModule = new ContainerModule((bind, _unbind, isBound, rebind) => {\n    const context = { bind, isBound, rebind };\n    // Register default tools\n    bindAsService(context, TYPES.IDefaultTool, ChangeBoundsTool);\n    bindAsService(context, TYPES.IDefaultTool, EdgeEditTool);\n    bindAsService(context, TYPES.IDefaultTool, DelKeyDeleteTool);\n\n    // Register  tools\n    bindAsService(context, TYPES.ITool, MouseDeleteTool);\n    bindAsService(context, TYPES.ITool, NodeCreationTool);\n    bindAsService(context, TYPES.ITool, EdgeCreationTool);\n\n    configureMarqueeTool(context);\n    configureActionHandler(context, TriggerNodeCreationAction.KIND, NodeCreationTool);\n    configureActionHandler(context, TriggerEdgeCreationAction.KIND, EdgeCreationTool);\n\n    bind(GLSPManhattanEdgeRouter).toSelf().inSingletonScope();\n    bindOrRebind(context, ManhattanEdgeRouter).toService(GLSPManhattanEdgeRouter);\n});\n\nexport function configureMarqueeTool(context: Pick<BindingContext, 'bind' | 'isBound'>): void {\n    configureModelElement(context, MARQUEE, MarqueeNode, MarqueeView);\n    bindAsService(context, TYPES.IDefaultTool, MarqueeTool);\n    bindAsService(context, TYPES.ITool, MarqueeMouseTool);\n}\n\n/**\n * Enables the default tools in the tool manager if the diagram looses focus.\n */\nexport const enableDefaultToolsOnFocusLossModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureActionHandler({ bind, isBound }, FocusStateChangedAction.KIND, EnableDefaultToolsOnFocusLossHandler);\n});\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    AnchorComputerRegistry,\n    CreateEdgeOperation,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    IActionHandler,\n    SEdge,\n    SModelElement,\n    TriggerEdgeCreationAction,\n    findParentByFeature,\n    isConnectable,\n    isCtrlOrCmd\n} from '~glsp-sprotty';\nimport { DragAwareMouseListener } from '../../base/drag-aware-mouse-listener';\nimport {\n    DrawFeedbackEdgeAction,\n    FeedbackEdgeEndMovingMouseListener,\n    RemoveFeedbackEdgeAction\n} from '../tool-feedback/creation-tool-feedback';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport { BaseGLSPTool } from './base-glsp-tool';\n\n/**\n * Tool to create connections in a Diagram, by selecting a source and target node.\n */\n@injectable()\nexport class EdgeCreationTool extends BaseGLSPTool implements IActionHandler {\n    static ID = 'tool_create_edge';\n\n    @inject(AnchorComputerRegistry) protected anchorRegistry: AnchorComputerRegistry;\n\n    protected triggerAction: TriggerEdgeCreationAction;\n    protected creationToolMouseListener: EdgeCreationToolMouseListener;\n    protected feedbackEndMovingMouseListener: FeedbackEdgeEndMovingMouseListener;\n\n    get id(): string {\n        return EdgeCreationTool.ID;\n    }\n\n    enable(): void {\n        if (this.triggerAction === undefined) {\n            throw new TypeError(`Could not enable tool ${this.id}.The triggerAction cannot be undefined.`);\n        }\n        this.creationToolMouseListener = new EdgeCreationToolMouseListener(this.triggerAction, this);\n        this.mouseTool.register(this.creationToolMouseListener);\n        this.feedbackEndMovingMouseListener = new FeedbackEdgeEndMovingMouseListener(this.anchorRegistry);\n        this.mouseTool.register(this.feedbackEndMovingMouseListener);\n        this.dispatchFeedback([cursorFeedbackAction(CursorCSS.OPERATION_NOT_ALLOWED)]);\n    }\n\n    disable(): void {\n        this.mouseTool.deregister(this.creationToolMouseListener);\n        this.mouseTool.deregister(this.feedbackEndMovingMouseListener);\n        this.deregisterFeedback([RemoveFeedbackEdgeAction.create(), cursorFeedbackAction()]);\n    }\n\n    handle(action: Action): Action | void {\n        if (TriggerEdgeCreationAction.is(action)) {\n            this.triggerAction = action;\n            return EnableToolsAction.create([this.id]);\n        }\n    }\n}\n\n@injectable()\nexport class EdgeCreationToolMouseListener extends DragAwareMouseListener {\n    protected source?: string;\n    protected target?: string;\n    protected currentTarget?: SModelElement;\n    protected allowedTarget = false;\n    protected proxyEdge: SEdge;\n\n    constructor(protected triggerAction: TriggerEdgeCreationAction, protected tool: EdgeCreationTool) {\n        super();\n        this.proxyEdge = new SEdge();\n        this.proxyEdge.type = triggerAction.elementTypeId;\n    }\n\n    protected reinitialize(): void {\n        this.source = undefined;\n        this.target = undefined;\n        this.currentTarget = undefined;\n        this.allowedTarget = false;\n        this.tool.dispatchFeedback([RemoveFeedbackEdgeAction.create()]);\n    }\n\n    override nonDraggingMouseUp(_element: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (event.button === 0) {\n            if (!this.isSourceSelected()) {\n                if (this.currentTarget && this.allowedTarget) {\n                    this.source = this.currentTarget.id;\n                    this.tool.dispatchFeedback([\n                        DrawFeedbackEdgeAction.create({ elementTypeId: this.triggerAction.elementTypeId, sourceId: this.source })\n                    ]);\n                }\n            } else {\n                if (this.currentTarget && this.allowedTarget) {\n                    this.target = this.currentTarget.id;\n                }\n            }\n            if (this.source && this.target) {\n                result.push(\n                    CreateEdgeOperation.create({\n                        elementTypeId: this.triggerAction.elementTypeId,\n                        sourceElementId: this.source,\n                        targetElementId: this.target,\n                        args: this.triggerAction.args\n                    })\n                );\n                if (!isCtrlOrCmd(event)) {\n                    result.push(EnableDefaultToolsAction.create());\n                } else {\n                    this.reinitialize();\n                }\n            }\n        } else if (event.button === 2) {\n            result.push(EnableDefaultToolsAction.create());\n        }\n        return result;\n    }\n\n    protected isSourceSelected(): boolean {\n        return this.source !== undefined;\n    }\n\n    protected isTargetSelected(): boolean {\n        return this.target !== undefined;\n    }\n\n    override mouseOver(target: SModelElement, event: MouseEvent): Action[] {\n        const newCurrentTarget = findParentByFeature(target, isConnectable);\n        if (newCurrentTarget !== this.currentTarget) {\n            this.currentTarget = newCurrentTarget;\n            if (this.currentTarget) {\n                if (!this.isSourceSelected()) {\n                    this.allowedTarget = this.isAllowedSource(newCurrentTarget);\n                } else if (!this.isTargetSelected()) {\n                    this.allowedTarget = this.isAllowedTarget(newCurrentTarget);\n                }\n                if (this.allowedTarget) {\n                    const action = !this.isSourceSelected()\n                        ? cursorFeedbackAction(CursorCSS.EDGE_CREATION_SOURCE)\n                        : cursorFeedbackAction(CursorCSS.EDGE_CREATION_TARGET);\n                    return [action];\n                }\n            }\n            return [cursorFeedbackAction(CursorCSS.OPERATION_NOT_ALLOWED)];\n        }\n        return [];\n    }\n\n    protected isAllowedSource(element: SModelElement | undefined): boolean {\n        return element !== undefined && isConnectable(element) && element.canConnect(this.proxyEdge, 'source');\n    }\n\n    protected isAllowedTarget(element: SModelElement | undefined): boolean {\n        return element !== undefined && isConnectable(element) && element.canConnect(this.proxyEdge, 'target');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    AnchorComputerRegistry,\n    ChangeRoutingPointsOperation,\n    Connectable,\n    EdgeRouterRegistry,\n    ISnapper,\n    ReconnectEdgeOperation,\n    SModelElement,\n    SModelRoot,\n    SRoutableElement,\n    SRoutingHandle,\n    TYPES,\n    canEditRouting,\n    findParentByFeature,\n    isConnectable,\n    isSelected\n} from '~glsp-sprotty';\nimport { DragAwareMouseListener } from '../../base/drag-aware-mouse-listener';\nimport { calcElementAndRoutingPoints, isRoutable, isRoutingHandle } from '../../utils/smodel-util';\nimport { SReconnectHandle, isReconnectHandle, isReconnectable, isSourceRoutingHandle, isTargetRoutingHandle } from '../reconnect/model';\nimport { SelectionListener, SelectionService } from '../select/selection-service';\nimport { DrawFeedbackEdgeAction, RemoveFeedbackEdgeAction, feedbackEdgeId } from '../tool-feedback/creation-tool-feedback';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport {\n    DrawFeedbackEdgeSourceAction,\n    FeedbackEdgeRouteMovingMouseListener,\n    FeedbackEdgeSourceMovingMouseListener,\n    FeedbackEdgeTargetMovingMouseListener,\n    HideEdgeReconnectHandlesFeedbackAction,\n    ShowEdgeReconnectHandlesFeedbackAction,\n    SwitchRoutingModeAction\n} from '../tool-feedback/edge-edit-tool-feedback';\nimport { BaseGLSPTool } from './base-glsp-tool';\n\n@injectable()\nexport class EdgeEditTool extends BaseGLSPTool {\n    static ID = 'glsp.edge-edit-tool';\n\n    @inject(TYPES.SelectionService) protected selectionService: SelectionService;\n    @inject(AnchorComputerRegistry) protected anchorRegistry: AnchorComputerRegistry;\n    @inject(EdgeRouterRegistry) @optional() readonly edgeRouterRegistry?: EdgeRouterRegistry;\n    @inject(TYPES.ISnapper) @optional() readonly snapper?: ISnapper;\n\n    protected feedbackEdgeSourceMovingListener: FeedbackEdgeSourceMovingMouseListener;\n    protected feedbackEdgeTargetMovingListener: FeedbackEdgeTargetMovingMouseListener;\n    protected feedbackMovingListener: FeedbackEdgeRouteMovingMouseListener;\n    protected edgeEditListener: EdgeEditListener;\n\n    get id(): string {\n        return EdgeEditTool.ID;\n    }\n\n    enable(): void {\n        this.edgeEditListener = new EdgeEditListener(this);\n        this.mouseTool.register(this.edgeEditListener);\n        this.selectionService.register(this.edgeEditListener);\n\n        // install feedback move mouse listener for client-side move updates\n        this.feedbackEdgeSourceMovingListener = new FeedbackEdgeSourceMovingMouseListener(this.anchorRegistry);\n        this.feedbackEdgeTargetMovingListener = new FeedbackEdgeTargetMovingMouseListener(this.anchorRegistry);\n        this.feedbackMovingListener = new FeedbackEdgeRouteMovingMouseListener(this.edgeRouterRegistry, this.snapper);\n    }\n\n    registerFeedbackListeners(): void {\n        this.mouseTool.register(this.feedbackMovingListener);\n        this.mouseTool.register(this.feedbackEdgeSourceMovingListener);\n        this.mouseTool.register(this.feedbackEdgeTargetMovingListener);\n    }\n\n    deregisterFeedbackListeners(): void {\n        this.mouseTool.deregister(this.feedbackEdgeSourceMovingListener);\n        this.mouseTool.deregister(this.feedbackEdgeTargetMovingListener);\n        this.mouseTool.deregister(this.feedbackMovingListener);\n    }\n\n    disable(): void {\n        this.edgeEditListener.reset();\n        this.selectionService.deregister(this.edgeEditListener);\n        this.deregisterFeedbackListeners();\n        this.mouseTool.deregister(this.edgeEditListener);\n    }\n}\n\nclass EdgeEditListener extends DragAwareMouseListener implements SelectionListener {\n    // active selection data\n    protected edge?: SRoutableElement;\n    protected routingHandle?: SRoutingHandle;\n\n    // new connectable (source or target) for edge\n    protected newConnectable?: SModelElement & Connectable;\n\n    // active reconnect handle data\n    protected reconnectMode?: 'NEW_SOURCE' | 'NEW_TARGET';\n\n    constructor(protected tool: EdgeEditTool) {\n        super();\n    }\n\n    protected isValidEdge(edge?: SRoutableElement): edge is SRoutableElement {\n        return edge !== undefined && edge.id !== feedbackEdgeId(edge.root) && isSelected(edge);\n    }\n\n    protected setEdgeSelected(edge: SRoutableElement): void {\n        if (this.edge && this.edge.id !== edge.id) {\n            // reset from a previously selected edge\n            this.reset();\n        }\n\n        this.edge = edge;\n        // note: order is important here as we want the reconnect handles to cover the routing handles\n        const feedbackActions = [];\n        if (canEditRouting(edge)) {\n            feedbackActions.push(SwitchRoutingModeAction.create({ elementsToActivate: [this.edge.id] }));\n        }\n        if (isReconnectable(edge)) {\n            feedbackActions.push(ShowEdgeReconnectHandlesFeedbackAction.create(this.edge.id));\n        }\n        this.tool.dispatchFeedback(feedbackActions);\n    }\n\n    protected isEdgeSelected(): boolean {\n        return this.edge !== undefined && isSelected(this.edge);\n    }\n\n    protected setReconnectHandleSelected(edge: SRoutableElement, reconnectHandle: SReconnectHandle): void {\n        if (this.edge && this.edge.target && this.edge.source) {\n            if (isSourceRoutingHandle(edge, reconnectHandle)) {\n                this.tool.dispatchFeedback([\n                    HideEdgeReconnectHandlesFeedbackAction.create(),\n                    cursorFeedbackAction(CursorCSS.EDGE_RECONNECT),\n                    DrawFeedbackEdgeSourceAction.create({ elementTypeId: this.edge.type, targetId: this.edge.targetId })\n                ]);\n                this.reconnectMode = 'NEW_SOURCE';\n            } else if (isTargetRoutingHandle(edge, reconnectHandle)) {\n                this.tool.dispatchFeedback([\n                    HideEdgeReconnectHandlesFeedbackAction.create(),\n                    cursorFeedbackAction(CursorCSS.EDGE_CREATION_TARGET),\n                    DrawFeedbackEdgeAction.create({ elementTypeId: this.edge.type, sourceId: this.edge.sourceId })\n                ]);\n                this.reconnectMode = 'NEW_TARGET';\n            }\n        }\n    }\n\n    protected isReconnecting(): boolean {\n        return this.reconnectMode !== undefined;\n    }\n\n    protected isReconnectingNewSource(): boolean {\n        return this.reconnectMode === 'NEW_SOURCE';\n    }\n\n    protected setRoutingHandleSelected(edge: SRoutableElement, routingHandle: SRoutingHandle): void {\n        if (this.edge && this.edge.target && this.edge.source) {\n            this.routingHandle = routingHandle;\n        }\n    }\n\n    protected requiresReconnect(sourceId: string, targetId: string): boolean {\n        return this.edge !== undefined && (this.edge.sourceId !== sourceId || this.edge.targetId !== targetId);\n    }\n\n    protected setNewConnectable(connectable?: SModelElement & Connectable): void {\n        this.newConnectable = connectable;\n    }\n\n    protected isReadyToReconnect(): boolean | undefined {\n        return this.edge && this.isReconnecting() && this.newConnectable !== undefined;\n    }\n\n    protected isReadyToReroute(): boolean {\n        return this.routingHandle !== undefined;\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = super.mouseDown(target, event);\n        if (event.button === 0) {\n            const reconnectHandle = findParentByFeature(target, isReconnectHandle);\n            const routingHandle = !reconnectHandle ? findParentByFeature(target, isRoutingHandle) : undefined;\n            const edge = findParentByFeature(target, isRoutable);\n            if (this.isEdgeSelected() && edge && reconnectHandle) {\n                // PHASE 2 Reconnect: Select reconnect handle on selected edge\n                this.setReconnectHandleSelected(edge, reconnectHandle);\n            } else if (this.isEdgeSelected() && edge && routingHandle) {\n                // PHASE 2 Reroute: Select routing handle on selected edge\n                this.setRoutingHandleSelected(edge, routingHandle);\n            } else if (this.isValidEdge(edge)) {\n                // PHASE 1: Select edge\n                this.tool.registerFeedbackListeners();\n                this.setEdgeSelected(edge);\n            }\n        } else if (event.button === 2) {\n            this.reset();\n        }\n        return result;\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        const result = super.mouseMove(target, event);\n        if (this.isMouseDrag) {\n            // reset any selected connectables when we are dragging, maybe the user is just panning\n            this.setNewConnectable(undefined);\n        }\n        return result;\n    }\n\n    override mouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        const result = super.mouseUp(target, event);\n        if (!this.isReadyToReconnect() && !this.isReadyToReroute()) {\n            return result;\n        }\n\n        if (this.edge && this.newConnectable) {\n            const sourceElementId = this.isReconnectingNewSource() ? this.newConnectable.id : this.edge.sourceId;\n            const targetElementId = this.isReconnectingNewSource() ? this.edge.targetId : this.newConnectable.id;\n            if (this.requiresReconnect(sourceElementId, targetElementId)) {\n                result.push(ReconnectEdgeOperation.create({ edgeElementId: this.edge.id, sourceElementId, targetElementId }));\n            }\n            this.reset();\n        } else if (this.edge && this.routingHandle) {\n            // we need to re-retrieve the edge as it might have changed due to a server update since we do not reset the state between\n            // reroute actions\n            const latestEdge = target.index.getById(this.edge.id);\n            if (latestEdge && isRoutable(latestEdge)) {\n                const newRoutingPoints = calcElementAndRoutingPoints(latestEdge, this.tool.edgeRouterRegistry);\n                result.push(ChangeRoutingPointsOperation.create([newRoutingPoints]));\n                this.routingHandle = undefined;\n            }\n        }\n        return result;\n    }\n\n    override mouseOver(target: SModelElement, _event: MouseEvent): Action[] {\n        if (this.edge && this.isReconnecting()) {\n            const currentTarget = findParentByFeature(target, isConnectable);\n            if (!this.newConnectable || currentTarget !== this.newConnectable) {\n                this.setNewConnectable(currentTarget);\n                if (currentTarget) {\n                    if (\n                        (this.reconnectMode === 'NEW_SOURCE' && currentTarget.canConnect(this.edge, 'source')) ||\n                        (this.reconnectMode === 'NEW_TARGET' && currentTarget.canConnect(this.edge, 'target'))\n                    ) {\n                        this.tool.dispatchFeedback([cursorFeedbackAction(CursorCSS.EDGE_RECONNECT)]);\n                        return [];\n                    }\n                }\n                this.tool.dispatchFeedback([cursorFeedbackAction(CursorCSS.OPERATION_NOT_ALLOWED)]);\n            }\n        }\n        return [];\n    }\n\n    selectionChanged(root: Readonly<SModelRoot>, selectedElements: string[]): void {\n        if (this.edge) {\n            if (selectedElements.indexOf(this.edge.id) > -1) {\n                // our active edge is still selected, nothing to do\n                return;\n            }\n\n            if (this.isReconnecting()) {\n                // we are reconnecting, so we may have clicked on a potential target\n                return;\n            }\n\n            // try to find some other selected element and mark that active\n            for (const elementId of selectedElements.reverse()) {\n                const element = root.index.getById(elementId);\n                if (element) {\n                    const edge = findParentByFeature(element, isRoutable);\n                    if (this.isValidEdge(edge)) {\n                        // PHASE 1: Select edge\n                        this.setEdgeSelected(edge);\n                        return;\n                    }\n                }\n            }\n\n            this.reset();\n        }\n    }\n\n    public reset(): void {\n        this.resetFeedback();\n        this.resetData();\n    }\n\n    protected resetData(): void {\n        this.edge = undefined;\n        this.reconnectMode = undefined;\n        this.newConnectable = undefined;\n        this.routingHandle = undefined;\n    }\n\n    protected resetFeedback(): void {\n        const result: Action[] = [];\n        if (this.edge) {\n            result.push(SwitchRoutingModeAction.create({ elementsToDeactivate: [this.edge.id] }));\n        }\n        result.push(...[HideEdgeReconnectHandlesFeedbackAction.create(), cursorFeedbackAction(), RemoveFeedbackEdgeAction.create()]);\n        this.tool.deregisterFeedback(result);\n        this.tool.deregisterFeedbackListeners();\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Action, EnableDefaultToolsAction, IActionHandler, ICommand } from '~glsp-sprotty';\nimport { FocusStateChangedAction } from '../../base/actions/focus-change-action';\n\n/**\n * Action handler that enables the default tools when the diagram lost focus.\n * @see FocusTracker\n * @see FocusStateChangedAction\n */\n@injectable()\nexport class EnableDefaultToolsOnFocusLossHandler implements IActionHandler {\n    handle(action: Action): void | Action | ICommand {\n        if (FocusStateChangedAction.is(action) && !action.hasFocus) {\n            return EnableDefaultToolsAction.create();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ManhattanEdgeRouter, ResolvedHandleMove, SRoutableElement, almostEquals } from '~glsp-sprotty';\n\nexport class GLSPManhattanEdgeRouter extends ManhattanEdgeRouter {\n    protected override applyInnerHandleMoves(edge: SRoutableElement, moves: ResolvedHandleMove[]): void {\n        const route = this.route(edge);\n        const routingPoints = edge.routingPoints;\n        const minimalPointDistance = this.getOptions(edge).minimalPointDistance;\n        moves.forEach(move => {\n            const handle = move.handle;\n            const index = handle.pointIndex;\n            const correctedX = this.correctX(routingPoints, index, move.toPosition.x, minimalPointDistance);\n            const correctedY = this.correctY(routingPoints, index, move.toPosition.y, minimalPointDistance);\n            switch (handle.kind) {\n                case 'manhattan-50%':\n                    if (index < 0) {\n                        if (routingPoints.length === 0) {\n                            routingPoints.push({ x: correctedX, y: correctedY });\n                            move.handle.pointIndex = 0;\n                        } else if (almostEquals(route[0].x, route[1].x)) {\n                            this.alignX(routingPoints, 0, correctedX);\n                        } else {\n                            this.alignY(routingPoints, 0, correctedY);\n                        }\n                    } else if (index < routingPoints.length - 1) {\n                        if (almostEquals(routingPoints[index].x, routingPoints[index + 1].x)) {\n                            this.alignX(routingPoints, index, correctedX);\n                            this.alignX(routingPoints, index + 1, correctedX);\n                        } else {\n                            this.alignY(routingPoints, index, correctedY);\n                            this.alignY(routingPoints, index + 1, correctedY);\n                        }\n                    } else {\n                        if (almostEquals(route[route.length - 2].x, route[route.length - 1].x)) {\n                            this.alignX(routingPoints, routingPoints.length - 1, correctedX);\n                        } else {\n                            this.alignY(routingPoints, routingPoints.length - 1, correctedY);\n                        }\n                    }\n                    break;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Point, PointToPointLine } from '~glsp-sprotty';\nimport { DrawMarqueeAction } from '../tool-feedback/marquee-tool-feedback';\n\nexport interface IMarqueeBehavior {\n    readonly entireElement: boolean;\n    readonly entireEdge: boolean;\n}\n\nexport class MarqueeUtil {\n    protected startPoint: Point;\n    protected currentPoint: Point;\n    protected marqueeBehavior: IMarqueeBehavior;\n\n    constructor(marqueeBehavior?: IMarqueeBehavior) {\n        if (marqueeBehavior) {\n            this.marqueeBehavior = marqueeBehavior;\n        } else {\n            this.marqueeBehavior = { entireElement: false, entireEdge: false };\n        }\n    }\n\n    updateStartPoint(position: Point): void {\n        this.startPoint = position;\n    }\n\n    updateCurrentPoint(position: Point): void {\n        this.currentPoint = position;\n    }\n\n    drawMarqueeAction(): DrawMarqueeAction {\n        return DrawMarqueeAction.create({ startPoint: this.startPoint, endPoint: this.currentPoint });\n    }\n\n    isEdgePathMarked(path: string | null): boolean {\n        if (!path) {\n            return false;\n        }\n        const points = path\n            .split(/M|L/)\n            .filter(p => p)\n            .map(p => {\n                const coord = p.split(',');\n                return { x: parseInt(coord[0], 10), y: parseInt(coord[1], 10) };\n            });\n        return this.isEdgeMarked(points);\n    }\n\n    isEdgeMarked(points: Point[]): boolean {\n        return this.marqueeBehavior.entireEdge ? this.isEntireEdgeMarked(points) : this.isPartOfEdgeMarked(points);\n    }\n\n    isNodeMarked(elementBounds: Bounds): boolean {\n        const horizontallyIn =\n            this.startPoint.x < this.currentPoint.x\n                ? this.isElementBetweenXAxis(elementBounds, this.startPoint.x, this.currentPoint.x)\n                : this.isElementBetweenXAxis(elementBounds, this.currentPoint.x, this.startPoint.x);\n        const verticallyIn =\n            this.startPoint.y < this.currentPoint.y\n                ? this.isElementBetweenYAxis(elementBounds, this.startPoint.y, this.currentPoint.y)\n                : this.isElementBetweenYAxis(elementBounds, this.currentPoint.y, this.startPoint.y);\n        return horizontallyIn && verticallyIn;\n    }\n\n    private isEntireEdgeMarked(points: Point[]): boolean {\n        for (let i = 0; i < points.length; i++) {\n            if (!this.pointInRect(points[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private isPartOfEdgeMarked(points: Point[]): boolean {\n        for (let i = 0; i < points.length - 1; i++) {\n            if (this.isLineMarked(points[i], points[i + 1])) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    private isLineMarked(point1: Point, point2: Point): boolean {\n        const line = new PointToPointLine(point1, point2);\n        return (\n            this.pointInRect(point1) ||\n            this.pointInRect(point2) ||\n            this.lineIntersect(line, this.startPoint, { x: this.startPoint.x, y: this.currentPoint.y }) ||\n            this.lineIntersect(line, this.startPoint, { x: this.currentPoint.x, y: this.startPoint.y }) ||\n            this.lineIntersect(line, { x: this.currentPoint.x, y: this.startPoint.y }, this.currentPoint) ||\n            this.lineIntersect(line, { x: this.startPoint.x, y: this.currentPoint.y }, this.currentPoint)\n        );\n    }\n\n    private lineIntersect(line: PointToPointLine, p1: Point, p2: Point): boolean {\n        return line.intersection(new PointToPointLine(p1, p2)) !== undefined;\n    }\n\n    private pointInRect(point: Point): boolean {\n        const boolX =\n            this.startPoint.x <= this.currentPoint.x\n                ? this.isBetween(point.x, this.startPoint.x, this.currentPoint.x)\n                : this.isBetween(point.x, this.currentPoint.x, this.startPoint.x);\n        const boolY =\n            this.startPoint.y <= this.currentPoint.y\n                ? this.isBetween(point.y, this.startPoint.y, this.currentPoint.y)\n                : this.isBetween(point.y, this.currentPoint.y, this.startPoint.y);\n        return boolX && boolY;\n    }\n\n    private isElementBetweenXAxis(elementBounds: Bounds, marqueeLeft: number, marqueeRight: number): boolean {\n        const leftEdge = this.isBetween(elementBounds.x, marqueeLeft, marqueeRight);\n        const rightEdge = this.isBetween(elementBounds.x + elementBounds.width, marqueeLeft, marqueeRight);\n        if (this.marqueeBehavior.entireElement) {\n            return leftEdge && rightEdge;\n        }\n        return (\n            leftEdge ||\n            rightEdge ||\n            this.isBetween(marqueeLeft, elementBounds.x, elementBounds.x + elementBounds.width) ||\n            this.isBetween(marqueeRight, elementBounds.x, elementBounds.x + elementBounds.width)\n        );\n    }\n\n    private isElementBetweenYAxis(elementBounds: Bounds, marqueeTop: number, marqueeBottom: number): boolean {\n        const topEdge = this.isBetween(elementBounds.y, marqueeTop, marqueeBottom);\n        const bottomEdge = this.isBetween(elementBounds.y + elementBounds.height, marqueeTop, marqueeBottom);\n        if (this.marqueeBehavior.entireElement) {\n            return topEdge && bottomEdge;\n        }\n        return (\n            topEdge ||\n            bottomEdge ||\n            this.isBetween(marqueeTop, elementBounds.y, elementBounds.y + elementBounds.height) ||\n            this.isBetween(marqueeBottom, elementBounds.y, elementBounds.y + elementBounds.height)\n        );\n    }\n\n    private isBetween(x: number, lower: number, upper: number): boolean {\n        return lower <= x && x <= upper;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    BoundsAware,\n    DOMHelper,\n    EnableDefaultToolsAction,\n    KeyListener,\n    SEdge,\n    SModelElement,\n    SModelRoot,\n    SNode,\n    SelectAction,\n    TYPES,\n    isSelectable,\n    isSelected\n} from '~glsp-sprotty';\nimport { DragAwareMouseListener } from '../../base/drag-aware-mouse-listener';\nimport { getAbsolutePosition, toAbsoluteBounds } from '../../utils/viewpoint-util';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport { RemoveMarqueeAction } from '../tool-feedback/marquee-tool-feedback';\nimport { BaseGLSPTool } from './base-glsp-tool';\nimport { IMarqueeBehavior, MarqueeUtil } from './marquee-behavior';\n\n@injectable()\nexport class MarqueeMouseTool extends BaseGLSPTool {\n    static ID = 'glsp.marquee-mouse-tool';\n\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n    @inject(TYPES.IMarqueeBehavior) @optional() protected marqueeBehavior: IMarqueeBehavior;\n\n    protected marqueeMouseListener: MarqueeMouseListener;\n    protected shiftKeyListener: ShiftKeyListener = new ShiftKeyListener();\n\n    get id(): string {\n        return MarqueeMouseTool.ID;\n    }\n\n    enable(): void {\n        this.marqueeMouseListener = new MarqueeMouseListener(this.domHelper, this.editorContext.modelRoot, this.marqueeBehavior);\n        this.mouseTool.register(this.marqueeMouseListener);\n        this.keyTool.register(this.shiftKeyListener);\n        this.dispatchFeedback([cursorFeedbackAction(CursorCSS.MARQUEE)]);\n    }\n\n    disable(): void {\n        this.mouseTool.deregister(this.marqueeMouseListener);\n        this.keyTool.deregister(this.shiftKeyListener);\n        this.deregisterFeedback([cursorFeedbackAction()]);\n    }\n}\n\nexport class MarqueeMouseListener extends DragAwareMouseListener {\n    protected domHelper: DOMHelper;\n    protected marqueeUtil: MarqueeUtil;\n    protected nodes: (SModelElement & BoundsAware)[];\n    protected edges: SVGGElement[];\n    protected previouslySelected: string[];\n    protected isActive = false;\n\n    constructor(domHelper: DOMHelper, root: SModelRoot, marqueeBehavior: IMarqueeBehavior | undefined) {\n        super();\n        this.domHelper = domHelper;\n        this.marqueeUtil = new MarqueeUtil(marqueeBehavior);\n        this.nodes = Array.from(\n            root.index\n                .all()\n                .map(e => e as SModelElement & BoundsAware)\n                .filter(e => isSelectable(e))\n                .filter(e => e instanceof SNode)\n        );\n        const sEdges = Array.from(\n            root.index\n                .all()\n                .filter(e => e instanceof SEdge)\n                .filter(e => isSelectable(e))\n                .map(e => e.id)\n        );\n        this.edges = Array.from(document.querySelectorAll('g')).filter(e => sEdges.includes(this.domHelper.findSModelIdByDOMElement(e)));\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): Action[] {\n        this.isActive = true;\n        this.marqueeUtil.updateStartPoint(getAbsolutePosition(target, event));\n        if (event.ctrlKey) {\n            this.previouslySelected = Array.from(\n                target.root.index\n                    .all()\n                    .map(e => e as SModelElement & BoundsAware)\n                    .filter(e => isSelected(e))\n                    .map(e => e.id)\n            );\n        }\n        return [];\n    }\n\n    override mouseMove(target: SModelElement, event: MouseEvent): Action[] {\n        this.marqueeUtil.updateCurrentPoint(getAbsolutePosition(target, event));\n        if (this.isActive) {\n            const nodeIdsSelected = this.nodes.filter(e => this.marqueeUtil.isNodeMarked(toAbsoluteBounds(e))).map(e => e.id);\n            const edgeIdsSelected = this.edges.filter(e => this.isEdgeMarked(e)).map(e => this.domHelper.findSModelIdByDOMElement(e));\n            const selected = nodeIdsSelected.concat(edgeIdsSelected);\n            return [SelectAction.setSelection(selected.concat(this.previouslySelected)), this.marqueeUtil.drawMarqueeAction()];\n        }\n        return [];\n    }\n\n    override mouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        this.isActive = false;\n        if (event.shiftKey) {\n            return [RemoveMarqueeAction.create()];\n        }\n        return [RemoveMarqueeAction.create(), EnableDefaultToolsAction.create()];\n    }\n\n    isEdgeMarked(element: SVGElement): boolean {\n        if (!element.getAttribute('transform')) {\n            if (element.children[0]) {\n                const path = element.children[0].getAttribute('d');\n                return this.marqueeUtil.isEdgePathMarked(path);\n            }\n        }\n        return false;\n    }\n}\n\n@injectable()\nexport class ShiftKeyListener extends KeyListener {\n    override keyUp(element: SModelElement, event: KeyboardEvent): Action[] {\n        if (event.shiftKey) {\n            return [];\n        }\n        return [RemoveMarqueeAction.create(), EnableDefaultToolsAction.create()];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport { Action, EnableToolsAction, KeyListener, KeyTool, SModelElement } from '~glsp-sprotty';\nimport { BaseGLSPTool } from '../tools/base-glsp-tool';\nimport { MarqueeMouseTool } from './marquee-mouse-tool';\n\n@injectable()\nexport class MarqueeTool extends BaseGLSPTool {\n    static ID = 'glsp.marquee-tool';\n\n    protected marqueeKeyListener: MarqueeKeyListener = new MarqueeKeyListener();\n\n    @inject(KeyTool) protected readonly keytool: KeyTool;\n\n    get id(): string {\n        return MarqueeTool.ID;\n    }\n\n    enable(): void {\n        this.keyTool.register(this.marqueeKeyListener);\n    }\n\n    disable(): void {\n        this.keyTool.deregister(this.marqueeKeyListener);\n    }\n}\n\n@injectable()\nexport class MarqueeKeyListener extends KeyListener {\n    override keyDown(element: SModelElement, event: KeyboardEvent): Action[] {\n        if (event.shiftKey) {\n            return [EnableToolsAction.create([MarqueeMouseTool.ID])];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { boundsFeature, Point, RectangularNode } from '~glsp-sprotty';\n\nexport class MarqueeNode extends RectangularNode {\n    static override readonly DEFAULT_FEATURES = [boundsFeature];\n    startPoint: Point;\n    endPoint: Point;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    CreateNodeOperation,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    IActionHandler,\n    ISnapper,\n    SModelElement,\n    SNode,\n    TYPES,\n    TriggerNodeCreationAction,\n    findParentByFeature,\n    isCtrlOrCmd\n} from '~glsp-sprotty';\nimport { DragAwareMouseListener } from '../../base/drag-aware-mouse-listener';\nimport { getAbsolutePosition } from '../../utils/viewpoint-util';\nimport { Containable, isContainable } from '../hints/model';\nimport { CursorCSS, cursorFeedbackAction } from '../tool-feedback/css-feedback';\nimport { BaseGLSPTool } from './base-glsp-tool';\n\n@injectable()\nexport class NodeCreationTool extends BaseGLSPTool implements IActionHandler {\n    static ID = 'tool_create_node';\n\n    @inject(TYPES.ISnapper) @optional() readonly snapper?: ISnapper;\n\n    protected creationToolMouseListener: NodeCreationToolMouseListener;\n    protected triggerAction: TriggerNodeCreationAction;\n\n    get id(): string {\n        return NodeCreationTool.ID;\n    }\n\n    enable(): void {\n        if (this.triggerAction === undefined) {\n            throw new TypeError(`Could not enable tool ${this.id}.The triggerAction cannot be undefined.`);\n        }\n        this.creationToolMouseListener = new NodeCreationToolMouseListener(this.triggerAction, this);\n        this.mouseTool.register(this.creationToolMouseListener);\n        this.dispatchFeedback([cursorFeedbackAction(CursorCSS.NODE_CREATION)]);\n    }\n\n    disable(): void {\n        this.mouseTool.deregister(this.creationToolMouseListener);\n        this.deregisterFeedback([cursorFeedbackAction()]);\n    }\n\n    handle(action: Action): Action | void {\n        if (TriggerNodeCreationAction.is(action)) {\n            this.triggerAction = action;\n            return EnableToolsAction.create([this.id]);\n        }\n    }\n}\n\n@injectable()\nexport class NodeCreationToolMouseListener extends DragAwareMouseListener {\n    protected container?: SModelElement & Containable;\n\n    constructor(protected triggerAction: TriggerNodeCreationAction, protected tool: NodeCreationTool) {\n        super();\n    }\n\n    protected creationAllowed(elementTypeId: string): boolean | undefined {\n        return this.container && this.container.isContainableElement(elementTypeId);\n    }\n\n    get elementTypeId(): string {\n        return this.triggerAction.elementTypeId;\n    }\n\n    override nonDraggingMouseUp(target: SModelElement, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (this.creationAllowed(this.elementTypeId)) {\n            const containerId = this.container ? this.container.id : undefined;\n            let location = getAbsolutePosition(target, event);\n            if (this.tool.snapper) {\n                // Create a 0-bounds proxy element for snapping\n                const elementProxy = new SNode();\n                elementProxy.size = { width: 0, height: 0 };\n                location = this.tool.snapper.snap(location, elementProxy);\n            }\n            result.push(CreateNodeOperation.create(this.elementTypeId, { location, containerId, args: this.triggerAction.args }));\n            if (!isCtrlOrCmd(event)) {\n                result.push(EnableDefaultToolsAction.create());\n            }\n        }\n        return result;\n    }\n\n    override mouseOver(target: SModelElement, event: MouseEvent): Action[] {\n        const currentContainer = findParentByFeature(target, isContainable);\n        if (!this.container || currentContainer !== this.container) {\n            this.container = currentContainer;\n            const feedback = this.creationAllowed(this.elementTypeId)\n                ? cursorFeedbackAction(CursorCSS.NODE_CREATION)\n                : cursorFeedbackAction(CursorCSS.OPERATION_NOT_ALLOWED);\n            this.tool.dispatchFeedback([feedback]);\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { RectangularNodeView, RenderingContext, svg } from '~glsp-sprotty';\nimport { MarqueeNode } from './model';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class MarqueeView extends RectangularNodeView {\n    override render(node: MarqueeNode, context: RenderingContext): VNode {\n        const graph = (\n            <g>\n                <rect\n                    class-sprotty-node={true}\n                    class-marquee={true}\n                    x={node.startPoint.x - node.endPoint.x <= 0 ? node.startPoint.x : node.endPoint.x}\n                    y={node.startPoint.y - node.endPoint.y <= 0 ? node.startPoint.y : node.endPoint.y}\n                    rx={0}\n                    ry={0}\n                    width={Math.abs(node.startPoint.x - node.endPoint.x)}\n                    height={Math.abs(node.startPoint.y - node.endPoint.y)}\n                ></rect>\n            </g>\n        );\n        return graph;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport { SetMarkersAction, TYPES, bindAsService, configureActionHandler, configureCommand } from '~glsp-sprotty';\nimport {\n    LeftToRightTopToBottomComparator,\n    MarkerNavigator,\n    MarkerNavigatorContextMenuItemProvider,\n    MarkerNavigatorKeyListener,\n    NavigateToMarkerAction,\n    NavigateToMarkerActionHandler,\n    SModelElementComparator\n} from './marker-navigator';\nimport { ApplyMarkersCommand, DeleteMarkersCommand, SetMarkersActionHandler, ValidationFeedbackEmitter } from './validate';\n\nexport const validationModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    configureActionHandler(context, SetMarkersAction.KIND, SetMarkersActionHandler);\n    configureCommand(context, ApplyMarkersCommand);\n    configureCommand(context, DeleteMarkersCommand);\n    bind(ValidationFeedbackEmitter).toSelf().inSingletonScope();\n});\n\nexport const markerNavigatorModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(SModelElementComparator).to(LeftToRightTopToBottomComparator).inSingletonScope();\n    bind(MarkerNavigator).toSelf().inSingletonScope();\n    configureActionHandler({ bind, isBound }, NavigateToMarkerAction.KIND, NavigateToMarkerActionHandler);\n});\n\n/**\n * This module is not required if the diagram is deployed in Theia but only intended to be used\n * in a standalone deployment of GLSP. If the GLSP diagram is in Theia use the Theia-native\n * `registerMarkerNavigationCommands()` in `glsp-theia-integration` instead.\n */\nexport const markerNavigatorContextMenuModule = new ContainerModule(bind => {\n    bindAsService(bind, TYPES.IContextMenuProvider, MarkerNavigatorContextMenuItemProvider);\n    bindAsService(bind, TYPES.KeyListener, MarkerNavigatorKeyListener);\n});\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Bounds,\n    Marker,\n    MarkerKind,\n    Projectable,\n    SDecoration,\n    SIssue,\n    SIssueMarker,\n    SIssueSeverity,\n    SParentElement,\n    isBoundsAware\n} from '~glsp-sprotty';\n\nexport class GIssueMarker extends SIssueMarker implements Projectable {\n    constructor() {\n        super();\n        this.features = new Set<symbol>(SDecoration.DEFAULT_FEATURES);\n    }\n    projectionCssClasses: string[];\n    projectedBounds?: Bounds;\n    override issues: SIssue[] = [];\n    override type = 'marker';\n\n    computeProjectionCssClasses(): void {\n        const severityCss = getSeverity(this);\n        this.projectionCssClasses = ['sprotty-issue', 'sprotty-' + severityCss];\n    }\n}\n\n/**\n * Retrieves the `SIssueMarker` contained by the provided model element as\n * direct child or a newly instantiated `SIssueMarker` if no child\n * `SIssueMarker` exists.\n * @param modelElement for which the `SIssueMarker` should be retrieved or created.\n * @returns the child `SIssueMarker` or a new `SIssueMarker` if no such child exists.\n */\nexport function getOrCreateSIssueMarker(modelElement: SParentElement): SIssueMarker {\n    let issueMarker: GIssueMarker | undefined;\n\n    issueMarker = getSIssueMarker(modelElement);\n\n    if (issueMarker === undefined) {\n        issueMarker = new GIssueMarker();\n        if (isBoundsAware(modelElement)) {\n            issueMarker.projectedBounds = modelElement.parentToLocal(modelElement.bounds);\n        }\n        modelElement.add(issueMarker);\n    }\n\n    return issueMarker;\n}\n\n/**\n * Retrieves the `SIssueMarker` contained by the provided model element as\n * direct child or `undefined` if such an `SIssueMarker` does not exist.\n * @param modelElement for which the `SIssueMarker` should be retrieved.\n * @returns the child `SIssueMarker` or `undefined` if no such child exists.\n */\nexport function getSIssueMarker(modelElement: SParentElement): GIssueMarker | undefined {\n    let issueMarker: GIssueMarker | undefined;\n\n    for (const child of modelElement.children) {\n        if (child instanceof GIssueMarker) {\n            issueMarker = child;\n        }\n    }\n\n    return issueMarker;\n}\n\n/**\n * Creates an `SIssue` with `severity` and `message` set according to\n * the `kind` and `description` of the provided `Marker`.\n * @param marker `Marker` for that an `SIssue` should be created.\n * @returns the created `SIssue`.\n */\nexport function createSIssue(marker: Marker, parent?: SParentElement): SIssue {\n    const issue = new SIssue();\n    issue.message = marker.description;\n\n    switch (marker.kind) {\n        case MarkerKind.ERROR: {\n            issue.severity = 'error';\n            break;\n        }\n        case MarkerKind.INFO: {\n            issue.severity = 'info';\n            break;\n        }\n        case MarkerKind.WARNING: {\n            issue.severity = 'warning';\n            break;\n        }\n    }\n    return issue;\n}\n\nexport function getSeverity(marker: SIssueMarker): SIssueSeverity {\n    let currentSeverity: SIssueSeverity = 'info';\n    for (const severity of marker.issues.map(s => s.severity)) {\n        if (severity === 'error') {\n            return severity;\n        }\n        if (severity === 'warning' && currentSeverity === 'info') {\n            currentSeverity = severity;\n        }\n    }\n    return currentSeverity;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from 'inversify';\nimport {\n    Action,\n    ActionDispatcher,\n    BoundsAware,\n    CenterAction,\n    IActionHandler,\n    IContextMenuItemProvider,\n    KeyListener,\n    MenuItem,\n    Point,\n    SIssueMarker,\n    SIssueSeverity,\n    SModelElement,\n    SModelRoot,\n    SelectAction,\n    Selectable,\n    TYPES,\n    findParentByFeature,\n    hasArrayProp,\n    hasStringProp,\n    isBoundsAware,\n    isSelectable,\n    matchesKeystroke\n} from '~glsp-sprotty';\nimport { MarkerPredicates, collectIssueMarkers } from '../../utils/marker';\nimport { getElements, isSelectableAndBoundsAware } from '../../utils/smodel-util';\nimport { SelectionService } from '../select/selection-service';\n\nexport interface NavigateToMarkerAction extends Action {\n    kind: typeof NavigateToMarkerAction.KIND;\n\n    direction: MarkerNavigationDirection;\n    selectedElementIds?: string[];\n    severities: SIssueSeverity[];\n}\n\nexport type MarkerNavigationDirection = 'next' | 'previous';\n\nexport namespace NavigateToMarkerAction {\n    export const KIND = 'navigateToMarker';\n\n    export function is(object: any): object is NavigateToMarkerAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'direction') && hasArrayProp(object, 'severities');\n    }\n\n    export function create(options: {\n        direction?: MarkerNavigationDirection;\n        selectedElementIds?: string[];\n        severities?: SIssueSeverity[];\n    }): NavigateToMarkerAction {\n        return {\n            kind: KIND,\n            direction: 'next',\n            severities: MarkerNavigator.ALL_SEVERITIES,\n            ...options\n        };\n    }\n}\nexport class SModelElementComparator {\n    compare(_one: SModelElement, _other: SModelElement): number {\n        return 0;\n    }\n}\n\n/** Specifies the order of two selectable and bounds-aware elements left-to-right and top-to-bottom. */\n@injectable()\nexport class LeftToRightTopToBottomComparator {\n    compare(one: SModelElement, other: SModelElement): number {\n        const boundsOne = findParentByFeature(one, isSelectableAndBoundsAware);\n        const boundsOther = findParentByFeature(other, isSelectableAndBoundsAware);\n        if (boundsOne && boundsOther) {\n            if (boundsOne.bounds.y !== boundsOther.bounds.y) {\n                return boundsOne.bounds.y - boundsOther.bounds.y;\n            }\n            if (boundsOne.bounds.x !== boundsOther.bounds.x) {\n                return boundsOne.bounds.x - boundsOther.bounds.x;\n            }\n        }\n        return 0;\n    }\n}\n\n/**\n * Specifies the next/previous marker in a graph model.\n *\n * This navigator uses a `MarkerComparator` to determine the order of markers. It can also return next/previous\n */\n@injectable()\nexport class MarkerNavigator {\n    static readonly ALL_SEVERITIES: SIssueSeverity[] = ['error', 'warning', 'info'];\n\n    @inject(SModelElementComparator)\n    protected markerComparator: SModelElementComparator;\n\n    next(\n        root: Readonly<SModelRoot>,\n        current?: SModelElement & BoundsAware,\n        predicate: (marker: SIssueMarker) => boolean = MarkerPredicates.ALL\n    ): SIssueMarker | undefined {\n        const markers = this.getMarkers(root, predicate);\n        if (current === undefined) {\n            return markers.length > 0 ? markers[0] : undefined;\n        }\n        return markers[this.getNextIndex(current, markers) % markers.length];\n    }\n\n    previous(\n        root: Readonly<SModelRoot>,\n        current?: SModelElement & BoundsAware,\n        predicate: (marker: SIssueMarker) => boolean = MarkerPredicates.ALL\n    ): SIssueMarker | undefined {\n        const markers = this.getMarkers(root, predicate);\n        if (current === undefined) {\n            return markers.length > 0 ? markers[0] : undefined;\n        }\n        return markers[this.getPreviousIndex(current, markers) % markers.length];\n    }\n\n    protected getMarkers(root: Readonly<SModelRoot>, predicate: (marker: SIssueMarker) => boolean): SIssueMarker[] {\n        const markers = collectIssueMarkers(root);\n        return markers.filter(predicate).sort(this.markerComparator.compare);\n    }\n\n    protected getNextIndex(current: SModelElement & BoundsAware, markers: SIssueMarker[]): number {\n        for (let index = 0; index < markers.length; index++) {\n            if (this.markerComparator.compare(markers[index], current) > 0) {\n                return index;\n            }\n        }\n        return 0;\n    }\n\n    protected getPreviousIndex(current: SModelElement & BoundsAware, markers: SIssueMarker[]): number {\n        for (let index = markers.length - 1; index >= 0; index--) {\n            if (this.markerComparator.compare(markers[index], current) < 0) {\n                return index;\n            }\n        }\n        return markers.length - 1;\n    }\n}\n\n@injectable()\nexport class NavigateToMarkerActionHandler implements IActionHandler {\n    @inject(SModelElementComparator)\n    protected markerComparator: SModelElementComparator;\n\n    @inject(MarkerNavigator)\n    protected markerNavigator: MarkerNavigator;\n\n    @inject(TYPES.SelectionService)\n    protected selectionService: SelectionService;\n\n    @inject(TYPES.IActionDispatcher)\n    protected actionDispatcher: ActionDispatcher;\n\n    handle(action: NavigateToMarkerAction): void {\n        const selected = this.getSelectedElements(action);\n        const target = this.getTarget(action, selected);\n\n        const selectableTarget = target ? findParentByFeature(target, isSelectable) : undefined;\n        if (selectableTarget) {\n            const deselectedElementsIDs = selected.map(e => e.id).filter(id => id !== selectableTarget.id);\n            this.actionDispatcher.dispatch(SelectAction.create({ selectedElementsIDs: [selectableTarget.id], deselectedElementsIDs }));\n            this.actionDispatcher.dispatch(CenterAction.create([selectableTarget.id]));\n        }\n    }\n\n    protected getSelectedElements(action: NavigateToMarkerAction): (SModelElement & Selectable)[] {\n        if (action.selectedElementIds && action.selectedElementIds.length > 0) {\n            return getElements(this.selectionService.getModelRoot().index, action.selectedElementIds, isSelectable);\n        }\n        return this.selectionService.getSelectedElements();\n    }\n\n    protected getTarget(action: NavigateToMarkerAction, selected: SModelElement[]): SIssueMarker | undefined {\n        const root = this.selectionService.getModelRoot();\n        const target = selected.sort(this.markerComparator.compare).find(isBoundsAware);\n        if (action.direction === 'previous') {\n            return this.markerNavigator.previous(root, target, marker => this.matchesSeverities(action, marker));\n        } else {\n            return this.markerNavigator.next(root, target, marker => this.matchesSeverities(action, marker));\n        }\n    }\n\n    protected matchesSeverities(action: NavigateToMarkerAction, marker: SIssueMarker): boolean {\n        return marker.issues.find(issue => action.severities.includes(issue.severity)) !== undefined;\n    }\n}\n\n@injectable()\nexport class MarkerNavigatorContextMenuItemProvider implements IContextMenuItemProvider {\n    @inject(TYPES.SelectionService) protected selectionService: SelectionService;\n\n    getItems(root: Readonly<SModelRoot>, lastMousePosition?: Point): Promise<MenuItem[]> {\n        const selectedElementIds = Array.from(this.selectionService.getSelectedElementIDs());\n        const hasMarkers = collectIssueMarkers(root).length > 0;\n        return Promise.resolve([\n            {\n                id: 'navigate',\n                label: 'Go to',\n                group: 'navigate',\n                actions: [],\n                children: [\n                    {\n                        id: 'next-marker',\n                        label: 'Next marker',\n                        group: 'marker',\n                        actions: [NavigateToMarkerAction.create({ direction: 'next', selectedElementIds })],\n                        isEnabled: () => hasMarkers\n                    },\n                    {\n                        id: 'previous-marker',\n                        label: 'Previous marker',\n                        group: 'marker',\n                        actions: [NavigateToMarkerAction.create({ direction: 'previous', selectedElementIds })],\n                        isEnabled: () => hasMarkers\n                    }\n                ]\n            }\n        ]);\n    }\n}\n\n@injectable()\nexport class MarkerNavigatorKeyListener extends KeyListener {\n    override keyDown(_element: SModelElement, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'Period', 'ctrl')) {\n            return [NavigateToMarkerAction.create({ direction: 'next' })];\n        } else if (matchesKeystroke(event, 'Comma', 'ctrl')) {\n            return [NavigateToMarkerAction.create({ direction: 'previous' })];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action,\n    CommandExecutionContext,\n    CommandReturn,\n    DeleteMarkersAction,\n    IActionDispatcher,\n    IActionHandler,\n    ICommand,\n    Marker,\n    SIssueMarker,\n    SParentElement,\n    SetMarkersAction,\n    TYPES,\n    hasArrayProp\n} from '~glsp-sprotty';\nimport { EditorContextService } from '../../base/editor-context-service';\nimport { removeCssClasses } from '../../utils/smodel-util';\nimport { IFeedbackActionDispatcher, IFeedbackEmitter } from '../tool-feedback/feedback-action-dispatcher';\nimport { FeedbackCommand } from '../tool-feedback/model';\nimport { GIssueMarker, createSIssue, getOrCreateSIssueMarker, getSIssueMarker, getSeverity } from './issue-marker';\n\n/**\n * Feedback emitter sending actions for visualizing model validation feedback and\n * re-establishing this feedback visualization after the model has been updated.\n */\n@injectable()\nexport class ValidationFeedbackEmitter implements IFeedbackEmitter {\n    @inject(TYPES.IFeedbackActionDispatcher) protected feedbackActionDispatcher: IFeedbackActionDispatcher;\n\n    @inject(TYPES.IActionDispatcherProvider) protected actionDispatcher: () => Promise<IActionDispatcher>;\n\n    protected registeredFeedbackByReason: Map<string, ApplyMarkersAction> = new Map();\n\n    /**\n     * Register the action that should be emitted for visualizing validation feedback.\n     * @param action the action that should be emitted when the model is updated and that will visualize the model validation feedback.\n     * @param reason the reason for this validation feedback.\n     */\n    registerValidationFeedbackAction(action: ApplyMarkersAction, reason = ''): void {\n        // De-register feedback and clear existing markers with the same reason\n        const previousFeedbackWithSameReason = this.registeredFeedbackByReason.get(reason);\n        if (previousFeedbackWithSameReason) {\n            this.feedbackActionDispatcher.deregisterFeedback(this, [previousFeedbackWithSameReason]);\n            const deleteMarkersAction = DeleteMarkersAction.create(previousFeedbackWithSameReason.markers);\n            this.actionDispatcher().then(dispatcher => dispatcher.dispatch(deleteMarkersAction));\n        }\n\n        // Register new action responsible for applying markers and re-applying them when the model is updated\n        this.registeredFeedbackByReason.set(reason, action);\n        this.feedbackActionDispatcher.registerFeedback(this, [...this.registeredFeedbackByReason.values()]);\n    }\n}\n\n/**\n * Manages current markers for the outside of the GLSP.\n *\n * Typically this is rebound by the surrounding tool, e.g. Theia, to be aware of\n * and propagate current markers.\n */\n@injectable()\nexport abstract class ExternalMarkerManager {\n    languageLabel: string;\n\n    protected actionDispatcher?: IActionDispatcher;\n\n    connect(actionDispatcher: IActionDispatcher): void {\n        this.actionDispatcher = actionDispatcher;\n    }\n\n    removeMarkers(markers: Marker[]): void {\n        if (this.actionDispatcher) {\n            this.actionDispatcher.dispatch(DeleteMarkersAction.create(markers));\n        }\n    }\n\n    abstract setMarkers(markers: Marker[], reason?: string, sourceUri?: string): void;\n}\n\n@injectable()\nexport class SetMarkersActionHandler implements IActionHandler {\n    @inject(ValidationFeedbackEmitter)\n    protected validationFeedbackEmitter: ValidationFeedbackEmitter;\n\n    @inject(ExternalMarkerManager)\n    @optional()\n    protected externalMarkerManager?: ExternalMarkerManager;\n\n    @inject(EditorContextService)\n    protected editorContextService: EditorContextService;\n\n    handle(action: SetMarkersAction): void | Action | ICommand {\n        const markers: Marker[] = action.markers;\n        this.setMarkers(markers, action.reason);\n    }\n\n    async setMarkers(markers: Marker[], reason: string | undefined): Promise<void> {\n        const uri = await this.editorContextService.getSourceUri();\n        this.externalMarkerManager?.setMarkers(markers, reason, uri);\n        const applyMarkersAction = ApplyMarkersAction.create(markers);\n        this.validationFeedbackEmitter.registerValidationFeedbackAction(applyMarkersAction, reason);\n    }\n}\n\n/**\n * Action for applying makers to the graphical model.\n */\nexport interface ApplyMarkersAction extends Action {\n    kind: typeof ApplyMarkersAction.KIND;\n    markers: Marker[];\n}\n\nexport namespace ApplyMarkersAction {\n    export const KIND = 'applyMarkers';\n\n    export function is(object: any): object is ApplyMarkersAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'markers');\n    }\n\n    export function create(markers: Marker[]): ApplyMarkersAction {\n        return {\n            kind: KIND,\n            markers\n        };\n    }\n}\n\n/**\n * Handles {@link ApplyMarkersAction}s by creating the corresponding {@link SIssueMarker}s and\n * adding them to the graphical model.\n */\n@injectable()\nexport class ApplyMarkersCommand extends FeedbackCommand {\n    static KIND = ApplyMarkersAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: ApplyMarkersAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.action.markers.forEach(marker => {\n            const modelElement = context.root.index.getById(marker.elementId);\n            if (modelElement instanceof SParentElement) {\n                const issueMarker = getOrCreateSIssueMarker(modelElement);\n                const issue = createSIssue(marker);\n                issueMarker.issues.push(issue);\n                if (issueMarker instanceof GIssueMarker) {\n                    issueMarker.computeProjectionCssClasses();\n                }\n                addMaxSeverityCSSClassToIssueParent(modelElement, issueMarker);\n            }\n        });\n        return context.root;\n    }\n}\n\nfunction addMaxSeverityCSSClassToIssueParent(modelElement: SParentElement, issueMarker: SIssueMarker): void {\n    const maxSeverityCSSClass = getSeverity(issueMarker);\n    if (!modelElement.cssClasses) {\n        modelElement.cssClasses = [maxSeverityCSSClass];\n    } else {\n        modelElement.cssClasses = modelElement.cssClasses.filter((value: string) => !value.match('info|warning|error'));\n        modelElement.cssClasses.push(maxSeverityCSSClass);\n    }\n}\n\nfunction removeCSSClassFromIssueParent(modelElement: SParentElement, issueMarker: SIssueMarker): void {\n    const severity = getSeverity(issueMarker);\n    removeCssClasses(modelElement, [severity]);\n}\n\n/**\n * Command for handling `DeleteMarkersAction`\n */\n@injectable()\nexport class DeleteMarkersCommand extends FeedbackCommand {\n    static KIND = DeleteMarkersAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: DeleteMarkersAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.action.markers.forEach(marker => {\n            const modelElement = context.root.index.getById(marker.elementId);\n            if (modelElement instanceof SParentElement) {\n                const issueMarker = getSIssueMarker(modelElement);\n                if (issueMarker) {\n                    removeCSSClassFromIssueParent(modelElement, issueMarker);\n                    for (let index = 0; index < issueMarker.issues.length; ++index) {\n                        const issue = issueMarker.issues[index];\n                        if (issue.message === marker.description) {\n                            issueMarker.issues.splice(index--, 1);\n                        }\n                    }\n                    if (issueMarker.issues.length === 0) {\n                        modelElement.remove(issueMarker);\n                    } else {\n                        addMaxSeverityCSSClassToIssueParent(modelElement, issueMarker);\n                    }\n                }\n            }\n        });\n\n        return context.root;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport {\n    bindAsService,\n    CenterCommand,\n    CenterKeyboardListener,\n    configureActionHandler,\n    configureCommand,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    FitToScreenCommand,\n    GetViewportCommand,\n    SetViewportCommand,\n    TYPES,\n    ZoomMouseListener\n} from '~glsp-sprotty';\nimport { GLSPScrollMouseListener } from './glsp-scroll-mouse-listener';\n\nconst glspViewportModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    configureCommand(context, CenterCommand);\n    configureCommand(context, FitToScreenCommand);\n    configureCommand(context, GetViewportCommand);\n    configureCommand(context, SetViewportCommand);\n\n    bindAsService(context, TYPES.KeyListener, CenterKeyboardListener);\n    bindAsService(context, TYPES.MouseListener, ZoomMouseListener);\n    bindAsService(context, TYPES.MouseListener, GLSPScrollMouseListener);\n\n    configureActionHandler(context, EnableToolsAction.KIND, GLSPScrollMouseListener);\n    configureActionHandler(context, EnableDefaultToolsAction.KIND, GLSPScrollMouseListener);\n});\n\nexport default glspViewportModule;\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Action,\n    EnableDefaultToolsAction,\n    EnableToolsAction,\n    IActionHandler,\n    ICommand,\n    ScrollMouseListener,\n    SModelElement\n} from '~glsp-sprotty';\nimport { MarqueeMouseTool } from '../tools/marquee-mouse-tool';\n\n@injectable()\nexport class GLSPScrollMouseListener extends ScrollMouseListener implements IActionHandler {\n    preventScrolling = false;\n\n    handle(action: Action): void | Action | ICommand {\n        if (action.kind === EnableToolsAction.KIND) {\n            if ((action as EnableToolsAction).toolIds.includes(MarqueeMouseTool.ID)) {\n                this.preventScrolling = true;\n            }\n        } else if (action.kind === EnableDefaultToolsAction.KIND) {\n            this.preventScrolling = false;\n        }\n    }\n\n    override mouseDown(target: SModelElement, event: MouseEvent): (Action | Promise<Action>)[] {\n        if (this.preventScrolling) {\n            return [];\n        }\n        return super.mouseDown(target, event);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable-next-line no-restricted-imports*/\nimport { Action, hasArrayProp } from '@eclipse-glsp/protocol';\nimport { SetBoundsAction } from 'sprotty-protocol/lib/actions';\nimport { EnableDefaultToolsAction, EnableToolsAction } from 'sprotty/lib/base/tool-manager/tool';\n\n/**\n * Use module augmentation to add namespaces and  the `is` utility function to sprotty actions that directly reused by GLSP\n */\ndeclare module 'sprotty-protocol/lib/actions' {\n    namespace SetBoundsAction {\n        export function is(object: any): object is SetBoundsAction;\n    }\n}\n\nSetBoundsAction.is = (object: any): object is SetBoundsAction =>\n    Action.hasKind(object, SetBoundsAction.KIND) && hasArrayProp(object, 'bounds');\n\ndeclare module 'sprotty/lib/base/tool-manager/tool' {\n    export namespace EnableDefaultToolsAction {\n        export function is(object: any): object is EnableDefaultToolsAction;\n    }\n    export namespace EnableToolsAction {\n        export function is(object: any): object is EnableToolsAction;\n    }\n}\n\nEnableDefaultToolsAction.is = (object: any): object is EnableDefaultToolsAction => Action.hasKind(object, EnableDefaultToolsAction.KIND);\n\nEnableToolsAction.is = (object: any): object is EnableToolsAction =>\n    Action.hasKind(object, EnableToolsAction.KIND) && hasArrayProp(object, 'toolIds');\n\nexport { EnableDefaultToolsAction, EnableToolsAction };\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/**\n * Sprotty still keeps the old class based action definitions as deprecated API.\n * This causes name clashes with the GLSP protocol actions when reexport sprotty.\n * The deprecated definitions are planned to be removed with Sprotty 1.0.0.\n * Until then we have to manually reexport the sprotty main index and exclude the clashing types.\n */\n/* eslint-disable no-restricted-imports */\n\n/**\n * @eclipse-glsp/protocol\n */\nexport * from '@eclipse-glsp/protocol';\n/*\n * sprotty-protocol\n */\nexport {\n    BringToFrontAction,\n    CollapseExpandAction,\n    CollapseExpandAllAction,\n    ElementAndAlignment,\n    GetSelectionAction,\n    GetViewportAction,\n    HoverFeedbackAction,\n    MoveAction,\n    SelectionResult,\n    SetBoundsAction,\n    ViewportResult\n} from 'sprotty-protocol/lib/actions';\nexport { Viewport } from 'sprotty-protocol/lib/model';\n/*\n * sprotty\n */\n// ------------------ Base ------------------\nexport * from 'sprotty/lib/base/actions/action-dispatcher';\nexport * from 'sprotty/lib/base/actions/action-handler';\nexport * from 'sprotty/lib/base/actions/diagram-locker';\nexport * from 'sprotty/lib/base/animations/animation';\nexport * from 'sprotty/lib/base/animations/animation-frame-syncer';\nexport * from 'sprotty/lib/base/animations/easing';\nexport * from 'sprotty/lib/base/commands/command';\nexport * from 'sprotty/lib/base/commands/command-registration';\nexport * from 'sprotty/lib/base/commands/command-stack';\nexport * from 'sprotty/lib/base/commands/command-stack-options';\nexport * from 'sprotty/lib/base/features/initialize-canvas';\nexport { SetModelCommand } from 'sprotty/lib/base/features/set-model';\nexport {\n    FeatureSet,\n    IModelIndex,\n    ModelIndexImpl,\n    SChildElementImpl as SChildElement,\n    SModelElementImpl as SModelElement,\n    SModelRootImpl as SModelRoot,\n    SParentElementImpl as SParentElement,\n    createRandomId,\n    isParent\n} from 'sprotty/lib/base/model/smodel';\nexport * from 'sprotty/lib/base/model/smodel-extension';\nexport * from 'sprotty/lib/base/model/smodel-factory';\nexport {\n    containsSome,\n    findParent,\n    findParentByFeature,\n    registerModelElement,\n    translateBounds,\n    translatePoint\n} from 'sprotty/lib/base/model/smodel-utils';\nexport * from 'sprotty/lib/base/tool-manager/tool';\nexport * from 'sprotty/lib/base/tool-manager/tool-manager';\nexport * from 'sprotty/lib/base/ui-extensions/ui-extension';\nexport * from 'sprotty/lib/base/ui-extensions/ui-extension-registry';\nexport * from 'sprotty/lib/base/views/dom-helper';\nexport * from 'sprotty/lib/base/views/key-tool';\nexport * from 'sprotty/lib/base/views/mouse-tool';\nexport * from 'sprotty/lib/base/views/thunk-view';\nexport * from 'sprotty/lib/base/views/view';\nexport * from 'sprotty/lib/base/views/viewer';\nexport * from 'sprotty/lib/base/views/viewer-cache';\nexport * from 'sprotty/lib/base/views/viewer-options';\nexport * from 'sprotty/lib/base/views/vnode-postprocessor';\nexport * from 'sprotty/lib/base/views/vnode-utils';\nexport * from 'sprotty/lib/features/bounds/abstract-layout';\n// ------------------ Features ------------------\nexport {\n    RequestBoundsCommand,\n    ResolvedElementAndAlignment,\n    ResolvedElementAndBounds,\n    SetBoundsCommand\n} from 'sprotty/lib/features/bounds/bounds-manipulation';\nexport * from 'sprotty/lib/features/bounds/hbox-layout';\nexport * from 'sprotty/lib/features/bounds/hidden-bounds-updater';\nexport * from 'sprotty/lib/features/bounds/layout';\nexport * from 'sprotty/lib/features/bounds/layout-options';\nexport {\n    Alignable,\n    BoundsAware,\n    LayoutContainer,\n    LayoutableChild,\n    ModelLayoutOptions,\n    SShapeElementImpl as SShapeElement,\n    alignFeature,\n    boundsFeature,\n    findChildrenAtPosition,\n    getAbsoluteBounds,\n    getAbsoluteClientBounds,\n    isAlignable,\n    isBoundsAware,\n    isLayoutContainer,\n    isLayoutableChild,\n    isSizeable,\n    layoutContainerFeature,\n    layoutableChildFeature\n} from 'sprotty/lib/features/bounds/model';\nexport * from 'sprotty/lib/features/bounds/stack-layout';\nexport * from 'sprotty/lib/features/bounds/vbox-layout';\nexport * from 'sprotty/lib/features/bounds/views';\nexport {\n    ButtonHandlerRegistry,\n    IButtonHandler,\n    IButtonHandlerRegistration,\n    configureButtonHandler\n} from 'sprotty/lib/features/button/button-handler';\nexport * from 'sprotty/lib/features/button/model';\nexport * from 'sprotty/lib/features/command-palette/action-providers';\nexport * from 'sprotty/lib/features/command-palette/command-palette';\nexport { Anchor, IContextMenuService, IContextMenuServiceProvider } from 'sprotty/lib/features/context-menu/context-menu-service';\nexport * from 'sprotty/lib/features/context-menu/menu-providers';\nexport * from 'sprotty/lib/features/context-menu/mouse-listener';\nexport * from 'sprotty/lib/features/decoration/decoration-placer';\nexport * from 'sprotty/lib/features/decoration/model';\nexport * from 'sprotty/lib/features/decoration/views';\nexport * from 'sprotty/lib/features/edge-intersection/intersection-finder';\nexport * from 'sprotty/lib/features/edge-intersection/sweepline';\nexport * from 'sprotty/lib/features/edge-layout/di.config';\nexport * from 'sprotty/lib/features/edge-layout/edge-layout';\nexport * from 'sprotty/lib/features/edge-layout/model';\nexport * from 'sprotty/lib/features/edit/create';\nexport * from 'sprotty/lib/features/edit/create-on-drag';\nexport * from 'sprotty/lib/features/edit/delete';\nexport * from 'sprotty/lib/features/edit/di.config';\nexport * from 'sprotty/lib/features/edit/edit-label';\nexport * from 'sprotty/lib/features/edit/edit-label-ui';\nexport * from 'sprotty/lib/features/edit/edit-routing';\nexport * from 'sprotty/lib/features/edit/model';\nexport * from 'sprotty/lib/features/edit/reconnect';\nexport * from 'sprotty/lib/features/expand/expand';\nexport * from 'sprotty/lib/features/expand/model';\nexport * from 'sprotty/lib/features/expand/views';\nexport { ExportSvgCommand, ExportSvgKeyListener, ExportSvgPostprocessor, RequestExportSvgAction } from 'sprotty/lib/features/export/export';\nexport * from 'sprotty/lib/features/export/model';\nexport { ExportSvgAction, SvgExporter } from 'sprotty/lib/features/export/svg-exporter';\nexport * from 'sprotty/lib/features/fade/fade';\nexport * from 'sprotty/lib/features/fade/model';\nexport {\n    AbstractHoverMouseListener,\n    ClosePopupActionHandler,\n    HoverFeedbackCommand,\n    HoverKeyListener,\n    HoverMouseListener,\n    HoverState,\n    PopupHoverMouseListener,\n    SetPopupModelCommand\n} from 'sprotty/lib/features/hover/hover';\nexport * from 'sprotty/lib/features/hover/model';\nexport { PopupPositionUpdater } from 'sprotty/lib/features/hover/popup-position-updater';\nexport * from 'sprotty/lib/features/move/model';\nexport {\n    ElementMove,\n    LocationPostprocessor,\n    MorphEdgesAnimation,\n    MoveAnimation,\n    MoveCommand,\n    MoveMouseListener,\n    ResolvedElementMove,\n    ResolvedHandleMove\n} from 'sprotty/lib/features/move/move';\nexport * from 'sprotty/lib/features/move/snap';\nexport * from 'sprotty/lib/features/nameable/model';\nexport * from 'sprotty/lib/features/open/model';\nexport * from 'sprotty/lib/features/open/open';\nexport * from 'sprotty/lib/features/projection/model';\nexport * from 'sprotty/lib/features/projection/views';\nexport * from 'sprotty/lib/features/routing/abstract-edge-router';\nexport * from 'sprotty/lib/features/routing/anchor';\nexport * from 'sprotty/lib/features/routing/bezier-anchors';\nexport * from 'sprotty/lib/features/routing/bezier-edge-router';\nexport * from 'sprotty/lib/features/routing/manhattan-anchors';\nexport * from 'sprotty/lib/features/routing/manhattan-edge-router';\nexport {\n    Connectable,\n    RoutingHandleKind,\n    SConnectableElementImpl as SConnectableElement,\n    SDanglingAnchorImpl as SDanglingAnchor,\n    SRoutableElementImpl as SRoutableElement,\n    SRoutingHandleImpl as SRoutingHandle,\n    connectableFeature,\n    edgeInProgressID,\n    edgeInProgressTargetHandleID,\n    getAbsoluteRouteBounds,\n    getRouteBounds,\n    isConnectable\n} from 'sprotty/lib/features/routing/model';\nexport * from 'sprotty/lib/features/routing/polyline-anchors';\nexport * from 'sprotty/lib/features/routing/polyline-edge-router';\nexport * from 'sprotty/lib/features/routing/routing';\nexport * from 'sprotty/lib/features/routing/views';\nexport * from 'sprotty/lib/features/select/model';\nexport {\n    GetSelectionCommand,\n    SelectKeyboardListener,\n    SelectMouseListener,\n    SelectAllCommand as SprottySelectAllCommand,\n    SelectCommand as SprottySelectCommand\n} from 'sprotty/lib/features/select/select';\nexport { UndoRedoKeyListener } from 'sprotty/lib/features/undo-redo/undo-redo';\nexport * from 'sprotty/lib/features/update/model-matching';\nexport { UpdateAnimationData, UpdateModelCommand } from 'sprotty/lib/features/update/update-model';\nexport {\n    BoundsAwareViewportCommand,\n    CenterCommand,\n    CenterKeyboardListener,\n    FitToScreenCommand\n} from 'sprotty/lib/features/viewport/center-fit';\nexport * from 'sprotty/lib/features/viewport/model';\nexport * from 'sprotty/lib/features/viewport/scroll';\nexport { GetViewportCommand, SetViewportCommand, ViewportAnimation } from 'sprotty/lib/features/viewport/viewport';\nexport * from 'sprotty/lib/features/viewport/viewport-root';\nexport * from 'sprotty/lib/features/viewport/zoom';\nexport { BringToFrontCommand, ZOrderElement } from 'sprotty/lib/features/zorder/zorder';\nexport {\n    SCompartmentImpl as SCompartment,\n    SEdgeImpl as SEdge,\n    SGraphImpl as SGraph,\n    SGraphIndex,\n    SLabelImpl as SLabel,\n    SNodeImpl as SNode,\n    SPortImpl as SPort\n} from 'sprotty/lib/graph/sgraph';\nexport * from 'sprotty/lib/lib/virtualize';\n// ------------------ Graph ------------------\nexport * from 'sprotty/lib/graph/sgraph-factory';\nexport * from 'sprotty/lib/graph/views';\nexport * from 'sprotty/lib/lib/generic-views';\nexport * from 'sprotty/lib/lib/html-views';\nexport * from 'sprotty/lib/lib/jsx';\nexport {\n    CircularNode,\n    CircularPort,\n    DiamondNode,\n    ForeignObjectElementImpl as ForeignObjectElement,\n    HtmlRootImpl as HtmlRoot,\n    PreRenderedElementImpl as PreRenderedElement,\n    RectangularNode,\n    RectangularPort,\n    ShapedPreRenderedElementImpl as ShapedPreRenderedElement\n} from 'sprotty/lib/lib/model';\n// ------------------ Library ------------------\nexport * from 'sprotty/lib/lib/modules';\nexport * from 'sprotty/lib/lib/svg-views';\n// ------------------ Model Source ------------------\nexport * from 'sprotty/lib/model-source/commit-model';\nexport { DiagramServerProxy } from 'sprotty/lib/model-source/diagram-server';\nexport * from 'sprotty/lib/model-source/local-model-source';\nexport * from 'sprotty/lib/model-source/logging';\nexport * from 'sprotty/lib/model-source/model-source';\nexport * from 'sprotty/lib/model-source/websocket';\n// ------------------ Utilities ------------------\nexport * from 'sprotty/lib/utils/browser';\nexport * from 'sprotty/lib/utils/codicon';\nexport * from 'sprotty/lib/utils/color';\nexport { Diamond, Insets, Line, Orientation, PointToPointLine, intersection } from 'sprotty/lib/utils/geometry';\nexport * from 'sprotty/lib/utils/inversify';\nexport * from 'sprotty/lib/utils/iterable';\nexport * from 'sprotty/lib/utils/keyboard';\nexport * from 'sprotty/lib/utils/logging';\nexport * from 'sprotty/lib/utils/registry';\n/**\n * Misc glsp adaptions/augmentations\n */\nexport * from './augmented-actions';\nexport * from './types';\n/**\n * Modules\n */\nexport {\n    boundsModule,\n    buttonModule,\n    commandPaletteModule,\n    contextMenuModule,\n    decorationModule,\n    defaultModule,\n    edgeIntersectionModule,\n    edgeLayoutModule,\n    expandModule,\n    exportModule,\n    fadeModule,\n    graphModule,\n    hoverModule,\n    modelSourceModule,\n    moveModule,\n    openModule,\n    routingModule,\n    selectModule,\n    undoRedoModule,\n    updateModule,\n    viewportModule,\n    zorderModule\n};\nimport defaultModule from 'sprotty/lib/base/di.config';\nimport boundsModule from 'sprotty/lib/features/bounds/di.config';\nimport buttonModule from 'sprotty/lib/features/button/di.config';\nimport commandPaletteModule from 'sprotty/lib/features/command-palette/di.config';\nimport contextMenuModule from 'sprotty/lib/features/context-menu/di.config';\nimport decorationModule from 'sprotty/lib/features/decoration/di.config';\nimport edgeIntersectionModule from 'sprotty/lib/features/edge-intersection/di.config';\nimport edgeLayoutModule from 'sprotty/lib/features/edge-layout/di.config';\nimport expandModule from 'sprotty/lib/features/expand/di.config';\nimport exportModule from 'sprotty/lib/features/export/di.config';\nimport fadeModule from 'sprotty/lib/features/fade/di.config';\nimport hoverModule from 'sprotty/lib/features/hover/di.config';\nimport moveModule from 'sprotty/lib/features/move/di.config';\nimport openModule from 'sprotty/lib/features/open/di.config';\nimport routingModule from 'sprotty/lib/features/routing/di.config';\nimport selectModule from 'sprotty/lib/features/select/di.config';\nimport undoRedoModule from 'sprotty/lib/features/undo-redo/di.config';\nimport updateModule from 'sprotty/lib/features/update/di.config';\nimport viewportModule from 'sprotty/lib/features/viewport/di.config';\nimport zorderModule from 'sprotty/lib/features/zorder/di.config';\nimport graphModule from 'sprotty/lib/graph/di.config';\nimport modelSourceModule from 'sprotty/lib/model-source/di.config';\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// eslint-disable-next-line no-restricted-imports\nimport { TYPES as SprottyTYPES } from 'sprotty';\n/**\n * Reexport of the TYPES namespace of sprotty augments with additional GLSP specific service\n * identifiers.\n */\nexport const TYPES = {\n    ...SprottyTYPES,\n    IAsyncClipboardService: Symbol('IAsyncClipboardService'),\n    IEditorContextServiceProvider: Symbol('IEditorContextProvider'),\n    IFeedbackActionDispatcher: Symbol('IFeedbackActionDispatcher'),\n    IToolFactory: Symbol('Factory<Tool>'),\n    ITypeHintProvider: Symbol('ITypeHintProvider'),\n    IMovementRestrictor: Symbol('IMovementRestrictor'),\n    SelectionService: Symbol('SelectionService'),\n    SelectionListener: Symbol('SelectionListener'),\n    SModelRootListener: Symbol('SModelRootListener'),\n    MouseTool: Symbol('MouseTool'),\n    IContextMenuProvider: Symbol('IContextMenuProvider'),\n    ICopyPasteHandler: Symbol('ICopyPasteHandler'),\n    ITool: Symbol('ITool'),\n    IDefaultTool: Symbol('IDefaultTool'),\n    IEditModeListener: Symbol('IEditModeListener'),\n    IMarqueeBehavior: Symbol('IMarqueeBehavior')\n};\n\n/**\n * Keep a reexport under the old deprecated namespace to avoid hard API breaks.\n * This gives adopters a grace period but all deprecated API will be removed before the 1.0.0 release.\n * @deprecated Please use `TYPES` from `@eclipse-glsp/client` instead\n */\nexport const GLSP_TYPES = TYPES;\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport defaultGLSPModule from './base/di.config';\nimport { glspAccessibilityModule } from './features/accessibility/di.config';\nimport { glspMoveZoomModule } from './features/accessibility/move-zoom/di.config';\nimport { glspResizeKeyModule } from './features/accessibility/resize-key-tool/di.config';\nimport { glspSearchPaletteModule } from './features/accessibility/search/di.config';\nimport { glspViewKeyToolsModule } from './features/accessibility/view-key-tools/di.config';\nimport glspCommandPaletteModule from './features/command-palette/di.config';\nimport glspContextMenuModule from './features/context-menu/di.config';\nimport { copyPasteContextMenuModule, glspServerCopyPasteModule } from './features/copy-paste/di.config';\nimport glspDecorationModule from './features/decoration/di.config';\nimport glspEditLabelModule from './features/edit-label/di.config';\nimport modelHintsModule from './features/hints/di.config';\nimport glspHoverModule from './features/hover/di.config';\nimport layoutModule from './features/layout/di.config';\nimport glspMouseToolModule from './features/mouse-tool/di.config';\nimport navigationModule from './features/navigation/di.config';\nimport saveModule from './features/save/di.config';\nimport glspSelectModule from './features/select/di.config';\nimport sourceModelWatcherModule from './features/source-model-watcher/di.config';\nimport svgMetadataModule from './features/svg-metadata/di.config';\nimport toolFeedbackModule from './features/tool-feedback/di.config';\nimport paletteModule from './features/tool-palette/di.config';\nimport { enableDefaultToolsOnFocusLossModule, toolsModule } from './features/tools/di.config';\nimport { markerNavigatorContextMenuModule, markerNavigatorModule, validationModule } from './features/validation/di.config';\nimport glspViewportModule from './features/viewport/di.config';\n\n// ------------------ Base ------------------\nexport * from './base/action-dispatcher';\nexport * from './base/actions/focus-change-action';\nexport * from './base/argumentable';\nexport * from './base/auto-complete/auto-complete-actions';\nexport * from './base/auto-complete/auto-complete-widget';\nexport * from './base/auto-complete/validation-decorator';\nexport * from './base/command-stack';\nexport * from './base/container-modules';\nexport { configureServerActions } from './base/di.config';\nexport * from './base/drag-aware-mouse-listener';\nexport * from './base/editor-context-service';\nexport * from './base/focus-tracker';\nexport * from './base/model-initialization-constraint';\nexport * from './base/model/model-registry';\nexport * from './base/model/update-model-command';\nexport * from './base/selection-clearing-mouse-listener';\nexport * from './base/source-uri-aware';\nexport * from './base/tool-manager/glsp-tool-manager';\nexport * from './base/view/view-registry';\nexport * from './features/accessibility/resize-key-tool/resize-key-tool';\nexport * from './features/accessibility/view-key-tools/deselect-key-tool';\nexport * from './features/accessibility/view-key-tools/movement-key-tool';\nexport * from './features/accessibility/view-key-tools/zoom-key-tool';\n//\n// ------------------ Features ------------------\nexport * from './features/bounds/freeform-layout';\nexport * from './features/bounds/glsp-hidden-bounds-updater';\nexport * from './features/bounds/hbox-layout';\nexport * from './features/bounds/layouter';\nexport * from './features/bounds/vbox-layout';\nexport * from './features/change-bounds/model';\nexport * from './features/change-bounds/movement-restrictor';\nexport * from './features/change-bounds/snap';\nexport * from './features/command-palette/command-palette-tool';\nexport * from './features/command-palette/server-command-palette-provider';\nexport * from './features/context-menu/delete-element-context-menu';\nexport * from './features/context-menu/selection-service-aware-context-menu-mouse-listener';\nexport * from './features/context-menu/server-context-menu-provider';\nexport * from './features/copy-paste/copy-paste-context-menu';\nexport * from './features/copy-paste/copy-paste-handler';\nexport * from './features/decoration/decoration-placer';\nexport * from './features/edit-label/edit-label-tool';\nexport * from './features/edit-label/edit-label-validator';\nexport * from './features/export/glsp-svg-exporter';\nexport * from './features/hints/model';\nexport * from './features/hints/type-hints';\nexport * from './features/hover/hover';\nexport * from './features/layout/layout-elements-action';\nexport * from './features/mouse-tool/mouse-tool';\nexport * from './features/navigation/navigation-action-handler';\nexport * from './features/navigation/navigation-target-resolver';\nexport * from './features/rank/model';\nexport * from './features/reconnect/model';\nexport * from './features/save/model';\nexport * from './features/save/save-keylistener';\nexport * from './features/select/select-feedback-action';\nexport * from './features/select/select-mouse-listener';\nexport * from './features/select/selection-service';\nexport * from './features/source-model-watcher/source-model-changed-action-handler';\nexport * from './features/svg-metadata/metadata-placer';\nexport * from './features/tool-feedback/change-bounds-tool-feedback';\nexport * from './features/tool-feedback/creation-tool-feedback';\nexport * from './features/tool-feedback/css-feedback';\nexport * from './features/tool-feedback/edge-edit-tool-feedback';\nexport * from './features/tool-feedback/feedback-action-dispatcher';\nexport * from './features/tool-feedback/marquee-tool-feedback';\nexport * from './features/tool-feedback/model';\nexport * from './features/tool-feedback/view';\nexport * from './features/tool-palette/tool-palette';\nexport * from './features/tools/base-glsp-tool';\nexport * from './features/tools/change-bounds-tool';\nexport * from './features/tools/delete-tool';\nexport { configureMarqueeTool } from './features/tools/di.config';\nexport * from './features/tools/edge-creation-tool';\nexport * from './features/tools/edge-edit-tool';\nexport * from './features/tools/enable-default-tools-on-focus-loss';\nexport * from './features/tools/glsp-manhattan-edge-router';\nexport * from './features/tools/marquee-behavior';\nexport * from './features/tools/model';\nexport * from './features/tools/node-creation-tool';\nexport * from './features/validation/issue-marker';\nexport * from './features/validation/marker-navigator';\nexport * from './features/validation/validate';\nexport * from './features/viewport/glsp-scroll-mouse-listener';\nexport * from './glsp-sprotty';\nexport * from './glsp-sprotty/types';\n//\n// ------------------ Misc ------------------\nexport * from './lib/model';\nexport * from './model-source/glsp-diagram-server';\nexport * from './utils/argument-utils';\nexport * from './utils/html-utils';\nexport * from './utils/layout-utils';\nexport * from './utils/marker';\nexport * from './utils/smodel-util';\nexport * from './utils/viewpoint-util';\nexport * from './views';\n// ------------------ DI Modules ------------------\nexport {\n    validationModule,\n    saveModule,\n    paletteModule,\n    toolFeedbackModule,\n    defaultGLSPModule,\n    modelHintsModule,\n    glspCommandPaletteModule,\n    glspContextMenuModule,\n    glspServerCopyPasteModule,\n    copyPasteContextMenuModule,\n    glspSelectModule,\n    glspMouseToolModule,\n    layoutModule,\n    glspEditLabelModule,\n    glspHoverModule,\n    toolsModule,\n    enableDefaultToolsOnFocusLossModule,\n    navigationModule,\n    markerNavigatorModule,\n    glspDecorationModule,\n    sourceModelWatcherModule,\n    markerNavigatorContextMenuModule,\n    glspViewportModule,\n    svgMetadataModule,\n    glspResizeKeyModule,\n    glspSearchPaletteModule,\n    glspAccessibilityModule,\n    glspViewKeyToolsModule,\n    glspMoveZoomModule\n};\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Bounds,\n    exportFeature,\n    getRouteBounds,\n    isBounds,\n    Point,\n    SEdge,\n    SGraph,\n    SModelElement,\n    SModelElementSchema,\n    viewportFeature\n} from '~glsp-sprotty';\nimport { Containable, containerFeature } from '../features/hints/model';\nimport { Saveable, saveFeature } from '../features/save/model';\n\nexport class GLSPGraph extends SGraph implements Saveable, Containable {\n    static override readonly DEFAULT_FEATURES = [viewportFeature, exportFeature, saveFeature, containerFeature];\n    dirty = false;\n    isContainableElement(input: string | SModelElement | SModelElementSchema): boolean {\n        return true;\n    }\n}\n\nexport class GEdge extends SEdge {\n    override localToParent(point: Point | Bounds): Bounds {\n        const bounds = getRouteBounds(this.routingPoints);\n        const result = {\n            x: point.x + bounds.x,\n            y: point.y + bounds.y,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    }\n\n    override parentToLocal(point: Point | Bounds): Bounds {\n        const bounds = getRouteBounds(this.routingPoints);\n        const result = {\n            x: point.x - bounds.x,\n            y: point.y - bounds.y,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport {\n    Action,\n    ActionHandlerRegistry,\n    ActionMessage,\n    ComputedBoundsAction,\n    DiagramServerProxy,\n    ExportSvgAction,\n    GLSPClient,\n    ICommand,\n    RequestModelAction,\n    ServerMessageAction,\n    ServerStatusAction,\n    SetEditModeAction,\n    SwitchEditModeCommand\n} from '~glsp-sprotty';\nimport { SourceUriAware } from '../base/source-uri-aware';\n\nconst receivedFromServerProperty = '__receivedFromServer';\n\n@injectable()\nexport class GLSPDiagramServer extends DiagramServerProxy implements SourceUriAware {\n    protected _sourceUri: string;\n    protected _glspClient?: GLSPClient;\n    protected ready = false;\n\n    async connect(client: GLSPClient): Promise<GLSPClient> {\n        await client.start();\n        client.onActionMessage(message => this.messageReceived(message));\n        this._glspClient = client;\n        return this._glspClient;\n    }\n\n    public get glspClient(): GLSPClient | undefined {\n        return this._glspClient;\n    }\n\n    protected sendMessage(message: ActionMessage): void {\n        if (this.glspClient) {\n            this.glspClient.sendActionMessage(message);\n        } else {\n            throw new Error('GLSPClient is not connected');\n        }\n    }\n\n    override initialize(registry: ActionHandlerRegistry): void {\n        registerDefaultGLSPServerActions(registry, this);\n        if (!this.clientId) {\n            this.clientId = this.viewerOptions.baseDiv;\n        }\n    }\n\n    override handle(action: Action): void | ICommand | Action {\n        if (RequestModelAction.is(action) && action.options) {\n            this._sourceUri = action.options.sourceUri as string;\n        }\n        return super.handle(action);\n    }\n\n    override handleLocally(action: Action): boolean {\n        if (ServerMessageAction.is(action)) {\n            return this.handleServerMessageAction(action);\n        }\n        if (SetEditModeAction.is(action)) {\n            return this.handleSetEditModeAction(action);\n        }\n        return super.handleLocally(action);\n    }\n\n    protected handleServerMessageAction(action: ServerMessageAction): boolean {\n        this.logger.log('GLSPDiagramServer', `[${action.severity}] -${action.message}`);\n        return false;\n    }\n\n    protected override handleComputedBounds(_action: ComputedBoundsAction): boolean {\n        return true;\n    }\n\n    protected handleSetEditModeAction(action: SetEditModeAction): boolean {\n        return !isReceivedFromServer(action);\n    }\n\n    public get sourceURI(): string {\n        return this._sourceUri;\n    }\n}\n\nexport function isReceivedFromServer(action: Action): boolean {\n    return (action as any)[receivedFromServerProperty] === true;\n}\n\nexport function registerDefaultGLSPServerActions(registry: ActionHandlerRegistry, diagramServer: DiagramServerProxy): void {\n    registry.register(ServerMessageAction.KIND, diagramServer);\n    registry.register(ServerStatusAction.KIND, diagramServer);\n    registry.register(ExportSvgAction.KIND, diagramServer);\n\n    // Register an empty handler for SwitchEditMode, to avoid runtime exceptions.\n    // We don't support SwitchEditMode, but Sprotty still sends those actions, so ignore them.\n    registry.register(SwitchEditModeCommand.KIND, { handle: action => undefined });\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { SModelElement } from '~glsp-sprotty';\nimport { hasArguments } from '../base/argumentable';\n\nexport namespace GArgument {\n    export function asNumber(argValue: string | number | boolean): number | undefined {\n        return typeof argValue === 'number' ? argValue : undefined;\n    }\n\n    export function asNumbers(argValues: (string | number | boolean)[]): (number | undefined)[] {\n        return argValues.map(asNumber);\n    }\n\n    export function asString(argValue: string | number | boolean): string | undefined {\n        return typeof argValue === 'string' ? argValue : undefined;\n    }\n\n    export function asStrings(argValues: (string | number | boolean)[]): (string | undefined)[] {\n        return argValues.map(asString);\n    }\n\n    export function asBoolean(argValue: string | number | boolean): boolean | undefined {\n        return typeof argValue === 'boolean' ? argValue : undefined;\n    }\n\n    export function asBooleans(argValues: (string | number | boolean)[]): (boolean | undefined)[] {\n        return argValues.map(asBoolean);\n    }\n\n    export function getArgument(element: SModelElement | undefined, key: string): string | number | boolean | undefined {\n        return hasArguments(element) ? element.args[key] : undefined;\n    }\n\n    export function getNumber(element: SModelElement | undefined, key: string): number | undefined {\n        return hasArguments(element) ? asNumber(element.args[key]) : undefined;\n    }\n\n    export function getString(element: SModelElement | undefined, key: string): string | undefined {\n        return hasArguments(element) ? asString(element.args[key]) : undefined;\n    }\n\n    export function getBoolean(element: SModelElement | undefined, key: string): boolean | undefined {\n        return hasArguments(element) ? asBoolean(element.args[key]) : undefined;\n    }\n\n    export function getArguments(element: SModelElement | undefined, ...keys: string[]): (number | boolean | string)[] | undefined {\n        if (!hasArguments(element)) {\n            return undefined;\n        }\n        const values = [];\n        for (const key of keys) {\n            const value = element.args[key];\n            if (value) {\n                values.push(value);\n            }\n        }\n        return values;\n    }\n\n    export function getNumbers(element: SModelElement | undefined, ...keys: string[]): (number | undefined)[] | undefined {\n        const values = getArguments(element, ...keys);\n        return values ? asNumbers(values) : undefined;\n    }\n\n    export function getStrings(element: SModelElement | undefined, ...keys: string[]): (string | undefined)[] | undefined {\n        const values = getArguments(element, ...keys);\n        return values ? asStrings(values) : undefined;\n    }\n\n    export function getBooleans(element: SModelElement | undefined, ...keys: string[]): (boolean | undefined)[] | undefined {\n        const values = getArguments(element, ...keys);\n        return values ? asBooleans(values) : undefined;\n    }\n\n    export function hasNValues<T>(values: (T | undefined)[], length: number): values is T[] {\n        return values.length === length && values.filter(e => e === undefined).length === 0;\n    }\n}\n\nexport namespace EdgePadding {\n    const KEY = 'edgePadding';\n\n    export function from(element: SModelElement | undefined): number | undefined {\n        return GArgument.getNumber(element, KEY);\n    }\n}\n\nexport class CornerRadius {\n    static NO_RADIUS = new CornerRadius(0);\n\n    static KEY_RADIUS_TOP_LEFT = 'radiusTopLeft';\n    static KEY_RADIUS_TOP_RIGHT = 'radiusTopRight';\n    static KEY_RADIUS_BOTTOM_RIGHT = 'radiusBottomRight';\n    static KEY_RADIUS_BOTTOM_LEFT = 'radiusBottomLeft';\n\n    constructor(\n        public readonly topLeft: number = 0,\n        public readonly topRight: number = topLeft,\n        public readonly bottomRight: number = topLeft,\n        public readonly bottomLeft: number = topRight\n    ) {}\n\n    static from(element: SModelElement | undefined): CornerRadius | undefined {\n        const radius = GArgument.getNumbers(\n            element,\n            this.KEY_RADIUS_TOP_LEFT,\n            this.KEY_RADIUS_TOP_RIGHT,\n            this.KEY_RADIUS_BOTTOM_RIGHT,\n            this.KEY_RADIUS_BOTTOM_LEFT\n        );\n        if (radius === undefined || radius[0] === undefined) {\n            return undefined;\n        }\n        return GArgument.hasNValues(radius, 4) ? new CornerRadius(radius[0], radius[1], radius[2], radius[3]) : new CornerRadius(radius[0]);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport function createElementFromHTML(html: string): HTMLElement | undefined {\n    const template = document.createElement('template');\n    html = html.trim(); // Never return a text node of whitespace as the result\n    template.innerHTML = html;\n    const node = template.content.firstChild;\n    if (node && node instanceof HTMLElement) {\n        return node as HTMLElement;\n    }\n    return undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { BoundsAware, Dimension, ElementAndBounds, ElementMove, ModelLayoutOptions, Point, SModelElement, Writable } from '~glsp-sprotty';\nimport { IMovementRestrictor } from '../features/change-bounds/movement-restrictor';\n\nexport function minWidth(element: SModelElement & BoundsAware): number {\n    const layoutOptions = getLayoutOptions(element);\n    if (layoutOptions !== undefined && typeof layoutOptions.minWidth === 'number') {\n        return layoutOptions.minWidth;\n    }\n    return 1;\n}\n\nexport function minHeight(element: SModelElement & BoundsAware): number {\n    const layoutOptions = getLayoutOptions(element);\n    if (layoutOptions !== undefined && typeof layoutOptions.minHeight === 'number') {\n        return layoutOptions.minHeight;\n    }\n    return 1;\n}\n\nexport function getLayoutOptions(element: SModelElement): ModelLayoutOptions | undefined {\n    const layoutOptions = (element as any).layoutOptions;\n    if (layoutOptions !== undefined) {\n        return layoutOptions as ModelLayoutOptions;\n    }\n    return undefined;\n}\n\nexport function isValidSize(element: SModelElement & BoundsAware, size: Dimension): boolean {\n    return size.width >= minWidth(element) && size.height >= minHeight(element);\n}\n\nexport function isValidMove(element: SModelElement & BoundsAware, newPosition?: Point, movementRestrictor?: IMovementRestrictor): boolean {\n    if (movementRestrictor) {\n        return movementRestrictor.validate(element, newPosition);\n    }\n    return true;\n}\n\nexport function toValidElementMove(\n    element: SModelElement & BoundsAware,\n    move: ElementMove,\n    movementRestrictor?: IMovementRestrictor\n): ElementMove | undefined {\n    if (!isValidMove(element, move.toPosition, movementRestrictor)) {\n        return;\n    }\n    return move;\n}\n\nexport function toValidElementAndBounds(\n    element: SModelElement & BoundsAware,\n    bounds: Writable<ElementAndBounds>,\n    movementRestrictor?: IMovementRestrictor\n): ElementAndBounds | undefined {\n    if (!isValidMove(element, bounds.newPosition, movementRestrictor)) {\n        return;\n    }\n    const elementMinWidth = minWidth(element);\n    if (bounds.newSize.width < elementMinWidth) {\n        bounds.newSize.width = elementMinWidth;\n    }\n    const elementMinHeight = minHeight(element);\n    if (bounds.newSize.height < elementMinHeight) {\n        bounds.newSize.height = elementMinHeight;\n    }\n    return bounds;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MarkerKind, SIssueMarker, SParentElement } from '~glsp-sprotty';\n\nexport namespace MarkerPredicates {\n    export const ALL = (): boolean => true;\n    export const ERRORS = (marker: SIssueMarker): boolean => hasIssueWithSeverity(marker, MarkerKind.ERROR);\n    export const WARNINGS = (marker: SIssueMarker): boolean => hasIssueWithSeverity(marker, MarkerKind.WARNING);\n    export const INFOS = (marker: SIssueMarker): boolean => hasIssueWithSeverity(marker, MarkerKind.INFO);\n\n    export function hasIssueWithSeverity(marker: SIssueMarker, severity: 'info' | 'warning' | 'error'): boolean {\n        return marker.issues.find(issue => issue.severity === severity) !== undefined;\n    }\n}\n\nexport function collectIssueMarkers(root: SParentElement): SIssueMarker[] {\n    const markers = [];\n    for (const child of root.children) {\n        if (child instanceof SIssueMarker) {\n            markers.push(child);\n        }\n        markers.push(...collectIssueMarkers(child));\n    }\n    return markers;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    BoundsAware,\n    distinctAdd,\n    EdgeRouterRegistry,\n    ElementAndBounds,\n    ElementAndRoutingPoints,\n    FluentIterable,\n    isBoundsAware,\n    isMoveable,\n    isSelectable,\n    isSelected,\n    ModelIndexImpl,\n    Point,\n    remove,\n    RoutedPoint,\n    Selectable,\n    SModelElement,\n    SModelElementSchema,\n    SRoutableElement,\n    SRoutingHandle,\n    TypeGuard\n} from '~glsp-sprotty';\n\n/**\n * Helper type to represent a filter predicate for {@link SModelElement}s. This is used to retrieve\n * elements from the {@link ModelIndexImpl} that also conform to a second type `T`. Its mainly used for\n * retrieving elements that also implement a certain model features (e.g. selectable)\n */\nexport type ModelFilterPredicate<T> = (modelElement: SModelElement) => modelElement is SModelElement & T;\n\n/**\n * Retrieves all elements from the given {@link ModelIndexImpl} that match the given {@link ModelFilterPredicate}\n * @param index The {@link ModelIndexImpl}.\n * @param predicate The {@link ModelFilterPredicate} that should be used.\n * @returns A {@link FluentIterable} of all indexed element that match the predicate\n * (correctly casted to also include the additional type of the predicate).\n */\nexport function filter<T>(index: ModelIndexImpl, predicate: ModelFilterPredicate<T>): FluentIterable<SModelElement & T> {\n    return index.all().filter(predicate) as FluentIterable<SModelElement & T>;\n}\n\n/**\n * Retrieves all elements from the given {@link ModelIndexImpl} that match the given {@link ModelFilterPredicate} and executes\n * the given runnable for each element of the result set.\n * @param index The {@link ModelIndexImpl}.\n * @param predicate The {@link ModelFilterPredicate} that should be used.\n * @param runnable The runnable that should be executed for each matching element.\n */\nexport function forEachElement<T>(\n    index: ModelIndexImpl,\n    predicate: ModelFilterPredicate<T>,\n    runnable: (modelElement: SModelElement & T) => void\n): void {\n    filter(index, predicate).forEach(runnable);\n}\n\n/**\n * Retrieves an array of all elements that match the given {@link ModelFilterPredicate} from the given {@link ModelIndexImpl}.\n * @param index The {@link ModelIndexImpl}.\n * @param predicate The {@link ModelFilterPredicate} that should be used.\n * @returns An array of all indexed element that match the predicate\n * (correctly casted to also include the additional type of the predicate).\n */\nexport function getMatchingElements<T>(index: ModelIndexImpl, predicate: ModelFilterPredicate<T>): (SModelElement & T)[] {\n    return Array.from(filter(index, predicate));\n}\n\n/**\n * Invokes the given model index to retrieve the corresponding model elements for the given set of ids. Ids that\n * have no corresponding element in the index will be ignored.\n * @param index THe model index.\n * @param elementsIDs The element ids.\n * @param guard Optional typeguard. If defined only elements that match the guard will be returned.\n * @returns An array of the model elements that correspond to the given ids and filter predicate.\n */\nexport function getElements<S extends SModelElement>(index: ModelIndexImpl, elementsIDs: string[], guard?: TypeGuard<S>): S[] {\n    // Internal filter function that filters out undefined model elements and runs an optional typeguard check.\n    const filterFn = (element?: SModelElement): element is S => {\n        if (element !== undefined) {\n            return guard ? guard(element) : true;\n        }\n        return false;\n    };\n    return elementsIDs.map(id => index.getById(id)).filter(filterFn);\n}\n/**\n * Retrieves the amount of currently selected elements in the given {@link ModelIndexImpl}.\n * @param index The {@link ModelIndexImpl}.\n * @returns The amount of selected elements.\n */\nexport function getSelectedElementCount(index: ModelIndexImpl): number {\n    let selected = 0;\n    forEachElement(index, isSelected, element => selected++);\n    return selected;\n}\n\n/**\n * Helper function to check wether an any element is selected in the given {@link ModelIndexImpl}.\n * @param index The {@link ModelIndexImpl}.\n * @returns `true` if at least one element is selected, `false` otherwise.\n */\nexport function hasSelectedElements(index: ModelIndexImpl): boolean {\n    return getSelectedElementCount(index) > 0;\n}\n\n/**\n * Helper function to check wether an element is defined. Can be used as {@link ModelFilterPredicate}.\n * @param element The element that should be checked.\n * @returns the type predicate for `T`\n */\nexport function isNotUndefined<T>(element: T | undefined): element is T {\n    return element !== undefined;\n}\n\n/**\n * Adds a set of css classes to the given {@link SModelElement}.\n * @param element The element to which the css classes should be added.\n * @param cssClasses The set of css classes as string array.\n */\nexport function addCssClasses(element: SModelElement, cssClasses: string[]): void {\n    const elementCssClasses: string[] = element.cssClasses ?? [];\n    distinctAdd(elementCssClasses, ...cssClasses);\n    element.cssClasses = elementCssClasses;\n}\n\n/**\n * Removes a set of css classes from the given {@link SModelElement}.\n * @param element The element from which the css classes should be removed.\n * @param cssClasses The set of css classes as string array.\n */\nexport function removeCssClasses(root: SModelElement, cssClasses: string[]): void {\n    if (!root.cssClasses || root.cssClasses.length === 0) {\n        return;\n    }\n    remove(root.cssClasses, ...cssClasses);\n}\n\nexport function isNonRoutableSelectedMovableBoundsAware(element: SModelElement): element is SelectableBoundsAware {\n    return isNonRoutableSelectedBoundsAware(element) && isMoveable(element);\n}\n\n/**\n * A typeguard function to check wether a given {@link SModelElement} implements the {@link BoundsAware} model feature,\n * the {@link Selectable} model feature and is actually selected. In addition, the element must not be a {@link SRoutableElement}.\n * @param element The element to check.\n * @returns A type predicate indicating wether the element is of type {@link SelectableBoundsAware}.\n */\nexport function isNonRoutableSelectedBoundsAware(element: SModelElement): element is SelectableBoundsAware {\n    return isBoundsAware(element) && isSelected(element) && !isRoutable(element);\n}\n\n/**\n * A type guard function to check wether a given {@link SModelElement} is a {@link SRoutableElement}.\n * @param element The element to check.\n * @returns A type predicate indicating wether the element is a {@link SRoutableElement}.\n */\nexport function isRoutable<T extends SModelElement>(element: T): element is T & SRoutableElement {\n    return element instanceof SRoutableElement && (element as any).routingPoints !== undefined;\n}\n\n/**\n * A typeguard function to check wether a given {@link SModelElement} is a {@link SRoutingHandle}.\n * @param element The element to check.\n * @returns A type predicate indicating wether the element is a {@link SRoutingHandle}\n */\nexport function isRoutingHandle(element: SModelElement | undefined): element is SRoutingHandle {\n    return element !== undefined && element instanceof SRoutingHandle;\n}\n\n/**\n * A typeguard function to check wether a given {@link SModelElement} implements the {@link Selectable} model feature and\n * the {@link BoundsAware} model feature.\n * @returns A type predicate indicating wether the element is of type {@link SelectableBoundsAware}.\n */\nexport function isSelectableAndBoundsAware(element: SModelElement): element is SelectableBoundsAware {\n    return isSelectable(element) && isBoundsAware(element);\n}\n\n/**\n * Union type to describe {@link SModelElement}s that implement the {@link Selectable} and {@link BoundsAware} feature.\n */\nexport type SelectableBoundsAware = SModelElement & BoundsAware & Selectable;\n\n/**\n * Union type to describe {@link SModelElement}s that implement the {@link BoundsAware} feature.\n */\nexport type BoundsAwareModelElement = SModelElement & BoundsAware;\n\n/**\n * Helper function to translate a given {@link SModelElement} into its corresponding {@link ElementAndBounds} representation.\n * @param element The element to translate.\n * @returns The corresponding {@link ElementAndBounds} for the given element.\n */\nexport function toElementAndBounds(element: BoundsAwareModelElement): ElementAndBounds {\n    return {\n        elementId: element.id,\n        newPosition: {\n            x: element.bounds.x,\n            y: element.bounds.y\n        },\n        newSize: {\n            width: element.bounds.width,\n            height: element.bounds.height\n        }\n    };\n}\n\n/**\n * Helper function to translate a given {@link SRoutableElement} into its corresponding\n * {@link ElementAndRoutingPoints} representation.\n * @param element The element to translate.\n * @returns The corresponding {@link ElementAndRoutingPoints} for the given element.\n */\nexport function toElementAndRoutingPoints(element: SRoutableElement): ElementAndRoutingPoints {\n    return {\n        elementId: element.id,\n        newRoutingPoints: element.routingPoints\n    };\n}\n/** All routing points. */\nexport const ALL_ROUTING_POINTS = undefined;\n\n/** Pure routing point data kinds. */\nexport const ROUTING_POINT_KINDS = ['linear', 'bezier-junction'];\n\n/** Pure route data kinds. */\nexport const ROUTE_KINDS = [...ROUTING_POINT_KINDS, 'source', 'target'];\n\n/**\n * Helper function to calculate the {@link ElementAndRoutingPoints} for a given {@link SRoutableElement}.\n * If client layout is activated, i.e., the edge routing registry is given and has a router for the element, then the routing\n * points from the calculated route are used, otherwise we use the already specified routing points of the {@link SRoutableElement}.\n * @param element The element to translate.\n * @param routerRegistry the edge router registry.\n * @returns The corresponding {@link ElementAndRoutingPoints} for the given element.\n */\nexport function calcElementAndRoutingPoints(element: SRoutableElement, routerRegistry?: EdgeRouterRegistry): ElementAndRoutingPoints {\n    const newRoutingPoints = routerRegistry ? calcRoute(element, routerRegistry, ROUTING_POINT_KINDS) : element.routingPoints;\n    return { elementId: element.id, newRoutingPoints };\n}\n\n/**\n * Helper function to calculate the route for a given {@link SRoutableElement}.\n * If client layout is activated, i.e., the edge routing registry is given and has a router for the element, then the points\n * from the calculated route are used, otherwise we use the already specified routing points of the {@link SRoutableElement}.\n * @param element The element to translate.\n * @param routerRegistry the edge router registry.\n * @returns The corresponding route for the given element.\n */\nexport function calcElementAndRoute(element: SRoutableElement, routerRegistry?: EdgeRouterRegistry): ElementAndRoutingPoints {\n    let route: Point[] | undefined = routerRegistry ? calcRoute(element, routerRegistry, ROUTE_KINDS) : undefined;\n    if (!route) {\n        // add source and target to the routing points\n        route = [...element.routingPoints];\n        route.splice(0, 0, element.source?.position || Point.ORIGIN);\n        route.push(element.target?.position || Point.ORIGIN);\n    }\n    return { elementId: element.id, newRoutingPoints: route };\n}\n\n/**\n * Helper function to calculate the route for a given {@link SRoutableElement} by filtering duplicate points.\n * @param element The element to translate.\n * @param routerRegistry the edge router registry.\n * @param pointKinds the routing point kinds that should be considered.\n * @param tolerance the tolerance applied to a point's coordinates to determine duplicates.\n * @returns The corresponding route for the given element.\n */\nexport function calcRoute(\n    element: SRoutableElement,\n    routerRegistry: EdgeRouterRegistry,\n    pointKinds: string[] | undefined = ALL_ROUTING_POINTS,\n    tolerance = Number.EPSILON\n): RoutedPoint[] | undefined {\n    const route = routerRegistry.get(element.routerKind).route(element);\n    const calculatedRoute: RoutedPoint[] = [];\n    for (const point of route) {\n        // only include points we are actually interested in\n        if (pointKinds && !pointKinds.includes(point.kind)) {\n            continue;\n        }\n        // check if we are a duplicate based on coordinates in the already calculated route\n        if (\n            ROUTING_POINT_KINDS.includes(point.kind) &&\n            calculatedRoute.find(calculatedPoint => Point.maxDistance(point, calculatedPoint) < tolerance)\n        ) {\n            continue;\n        }\n        calculatedRoute.push(point);\n    }\n    return calculatedRoute;\n}\n\n/**\n * Checks if the model is compatible with the passed type string.\n * (either has the same type or a subtype of this type)\n */\nexport function hasCompatibleType(input: SModelElement | SModelElementSchema | string, type: string): boolean {\n    const inputType = getElementTypeId(input);\n    return inputType === type ? true : inputType.split(':').includes(type);\n}\n\n/**\n * Convenience function to retrieve the model element type from a given input. The input\n * can either be a {@link SModelElement}, {@link SModelElementSchema} or a string.\n * @param input The type input.\n * @returns The corresponding model type as string.\n */\nexport function getElementTypeId(input: SModelElement | SModelElementSchema | string): string {\n    if (typeof input === 'string') {\n        return input as string;\n    } else {\n        return (input as any)['type'] as string;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    Bounds,\n    BoundsAware,\n    Dimension,\n    Point,\n    SModelElement,\n    Viewport,\n    findParentByFeature,\n    isAlignable,\n    isViewport,\n    translateBounds\n} from '~glsp-sprotty';\n\n/**\n * Return the position corresponding to this mouse event (Browser coordinates)\n * in the diagram coordinates system (i.e. relative to the Diagram's 0;0 point)\n *\n * This functions takes into account the following transformations:\n * - Location of the Diagram Canvas inside of the browser's page\n * - Current viewport Scroll and Zoom\n *\n * @param target\n *  An element from the diagram\n * @param mouseEvent\n *  A mouseEvent\n */\nexport function getAbsolutePosition(target: SModelElement, mouseEvent: MouseEvent): Point {\n    let xPos = mouseEvent.pageX;\n    let yPos = mouseEvent.pageY;\n    const canvasBounds = target.root.canvasBounds;\n    xPos -= canvasBounds.x;\n    yPos -= canvasBounds.y;\n\n    const viewport: Viewport | undefined = findParentByFeature(target, isViewport);\n    const zoom = viewport ? viewport.zoom : 1;\n    if (viewport) {\n        const scroll: Point = { x: viewport.scroll.x, y: viewport.scroll.y };\n        xPos += scroll.x * zoom;\n        yPos += scroll.y * zoom;\n\n        xPos /= zoom;\n        yPos /= zoom;\n    }\n\n    return {\n        x: xPos,\n        y: yPos\n    };\n}\n\n/**\n * Translates the bounds of the diagram element (local coordinates) into the diagram coordinates system\n * (i.e. relative to the Diagram's 0;0 point)\n *\n * @param target  A bounds-aware element from the diagram\n */\nexport function toAbsoluteBounds(element: SModelElement & BoundsAware): Bounds {\n    const location = isAlignable(element) ? element.alignment : Point.ORIGIN;\n    const x = location.x;\n    const y = location.y;\n    const width = element.bounds.width;\n    const height = element.bounds.height;\n    return translateBounds({ x, y, width, height }, element, element.root);\n}\n\n/**\n * Translates the position of the diagram element (local coordinates) into the diagram coordinates system\n * (i.e. relative to the Diagram's 0;0 point)\n *\n * @param target  A bounds-aware element from the diagram\n */\nexport function toAbsolutePosition(target: SModelElement & BoundsAware): Point {\n    return toAbsoluteBounds(target);\n}\n\n/**\n * Translates the size of the diagram element (local coordinates) into the diagram coordinates system\n * (i.e. relative to the Diagram's 0;0 point)\n *\n * @param target  A bounds-aware element from the diagram\n */\nexport function toAbsoluteSize(target: SModelElement & BoundsAware): Dimension {\n    return toAbsoluteBounds(target);\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from 'inversify';\nimport {\n    BindingContext,\n    CircularNode,\n    CircularNodeView,\n    DefaultTypes,\n    DiamondNode,\n    DiamondNodeView,\n    ExpandButtonView,\n    ForeignObjectElement,\n    ForeignObjectView,\n    HtmlRoot,\n    HtmlRootView,\n    PreRenderedElement,\n    PreRenderedView,\n    RectangularNode,\n    RectangularNodeView,\n    SButton,\n    SCompartment,\n    SCompartmentView,\n    SEdge,\n    SGraphView,\n    SIssueMarker,\n    SLabel,\n    SLabelView,\n    SNode,\n    SPort,\n    SRoutingHandle,\n    SRoutingHandleView,\n    ShapedPreRenderedElement,\n    SvgViewportView,\n    ViewportRootElement,\n    configureModelElement,\n    moveFeature,\n    selectFeature\n} from '~glsp-sprotty';\nimport { GLSPGraph } from '../lib/model';\nimport { GEdgeView } from './glsp-edge-view';\nimport { GIssueMarkerView } from './issue-marker-view';\nimport { RoundedCornerNodeView } from './rounded-corner-view';\n\nconst baseViewModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    const context = { bind, unbind, isBound, rebind };\n    configureDefaultModelElements(context);\n});\n\nexport function configureDefaultModelElements(context: Pick<BindingContext, 'bind' | 'isBound'>): void {\n    // HTML elements\n    configureModelElement(context, DefaultTypes.HTML, HtmlRoot, HtmlRootView);\n\n    // generic elements\n    configureModelElement(context, DefaultTypes.FOREIGN_OBJECT, ForeignObjectElement, ForeignObjectView, {\n        disable: [selectFeature, moveFeature]\n    });\n    configureModelElement(context, DefaultTypes.PRE_RENDERED, PreRenderedElement, PreRenderedView);\n    configureModelElement(context, DefaultTypes.SHAPE_PRE_RENDERED, ShapedPreRenderedElement, PreRenderedView);\n\n    // SVG elements\n    configureModelElement(context, DefaultTypes.SVG, ViewportRootElement, SvgViewportView);\n\n    // graph elements\n    configureModelElement(context, DefaultTypes.GRAPH, GLSPGraph, SGraphView);\n    configureModelElement(context, DefaultTypes.NODE, SNode, RoundedCornerNodeView);\n    configureModelElement(context, DefaultTypes.COMPARTMENT, SCompartment, SCompartmentView);\n    configureModelElement(context, DefaultTypes.COMPARTMENT_HEADER, SCompartment, SCompartmentView);\n    configureModelElement(context, DefaultTypes.EDGE, SEdge, GEdgeView);\n    configureModelElement(context, DefaultTypes.PORT, SPort, RectangularNodeView);\n    configureModelElement(context, DefaultTypes.ROUTING_POINT, SRoutingHandle, SRoutingHandleView);\n    configureModelElement(context, DefaultTypes.VOLATILE_ROUTING_POINT, SRoutingHandle, SRoutingHandleView);\n    configureModelElement(context, DefaultTypes.LABEL, SLabel, SLabelView);\n\n    // UI elements\n    configureModelElement(context, DefaultTypes.BUTTON_EXPAND, SButton, ExpandButtonView);\n    configureModelElement(context, DefaultTypes.ISSUE_MARKER, SIssueMarker, GIssueMarkerView);\n\n    // shapes\n    configureModelElement(context, DefaultTypes.NODE_CIRCLE, CircularNode, CircularNodeView);\n    configureModelElement(context, DefaultTypes.NODE_DIAMOND, DiamondNode, DiamondNodeView);\n    configureModelElement(context, DefaultTypes.NODE_RECTANGLE, RectangularNode, RectangularNodeView);\n}\n\nexport default baseViewModule;\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { BoundsAware, RenderingContext, SChildElement, SCompartment, ShapeView, svg } from '~glsp-sprotty';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class StructureCompartmentView extends ShapeView {\n    render(model: Readonly<SCompartment & SChildElement & BoundsAware>, context: RenderingContext): VNode | undefined {\n        if (!this.isVisible(model, context)) {\n            return undefined;\n        }\n\n        return (\n            <g>\n                <rect class-sprotty-comp={true} class-debug={false} x='0' y='0' width={model.size.width} height={model.size.height}></rect>\n                {context.renderChildren(model)}\n            </g>\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Classes, VNode } from 'snabbdom';\nimport { Point, PolylineEdgeView, RenderingContext, SEdge, svg } from '~glsp-sprotty';\nimport { EdgePadding } from '../utils/argument-utils';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class GEdgeView extends PolylineEdgeView {\n    override render(edge: Readonly<SEdge>, context: RenderingContext): VNode {\n        const router = this.edgeRouterRegistry.get(edge.routerKind);\n        const route = router.route(edge);\n        if (route.length === 0) {\n            return this.renderDanglingEdge('Cannot compute route', edge, context);\n        }\n\n        return (\n            <g class-sprotty-edge={true} class-mouseover={edge.hoverFeedback} {...this.additionalClasses(edge, context)}>\n                {this.renderLine(edge, route, context)}\n                {this.renderAdditionals(edge, route, context)}\n                {context.renderChildren(edge, { route })}\n            </g>\n        );\n    }\n\n    protected additionalClasses(_edge: Readonly<SEdge>, _context: RenderingContext): Classes {\n        return {};\n    }\n\n    protected override renderLine(_edge: SEdge, segments: Point[], _context: RenderingContext): VNode {\n        return <path d={this.createPathForSegments(segments)} />;\n    }\n\n    protected override renderAdditionals(edge: SEdge, segments: Point[], _context: RenderingContext): VNode[] {\n        // for additional padding we draw another transparent path with larger stroke width\n        const edgePadding = EdgePadding.from(edge);\n        return edgePadding ? [this.renderMouseHandle(segments, edgePadding)] : [];\n    }\n\n    protected renderMouseHandle(segments: Point[], padding: number): VNode {\n        return (\n            <path\n                class-mouse-handle\n                d={this.createPathForSegments(segments)}\n                style-stroke-width={padding * 2}\n                style-stroke='transparent'\n                style-stroke-dasharray='none'\n                style-stroke-dashoffset='0'\n            />\n        );\n    }\n\n    protected createPathForSegments(segments: Point[]): string {\n        const firstPoint = segments[0];\n        let path = `M ${firstPoint.x},${firstPoint.y}`;\n        for (let i = 1; i < segments.length; i++) {\n            const p = segments[i];\n            path += ` L ${p.x},${p.y}`;\n        }\n        return path;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { h, VNode, VNodeStyle } from 'snabbdom';\nimport {\n    Bounds,\n    html,\n    IViewArgs,\n    ProjectedViewportView,\n    ProjectionParams,\n    RenderingContext,\n    setAttr,\n    setClass,\n    ViewportRootElement,\n    ViewProjection\n} from '~glsp-sprotty';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: html };\n\n/**\n * Special viewport root view that renders horizontal and vertical projection bars for quick navigation.\n */\n@injectable()\nexport class GLSPProjectionView extends ProjectedViewportView {\n    override render(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode {\n        const svgElem = this.renderSvg(model, context, args);\n        if (svgElem.data) {\n            svgElem.data!.class = { 'sprotty-graph': true };\n        }\n        const rootNode: VNode = (\n            <div class-sprotty-graph={false} style={{ width: '100%', height: '100%' }}>\n                {svgElem}\n                {this.renderProjections(model, context, args)}\n            </div>\n        );\n        setAttr(rootNode, 'tabindex', 0);\n        return rootNode;\n    }\n\n    protected override renderSvg(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode {\n        const transform = `scale(${model.zoom}) translate(${-model.scroll.x},${-model.scroll.y})`;\n        const ns = 'http://www.w3.org/2000/svg';\n        const svg = h('svg', { ns, style: { height: '100%' } }, h('g', { ns, attrs: { transform } }, context.renderChildren(model)));\n        return svg;\n    }\n\n    protected override renderProjectionBar(\n        projections: ViewProjection[],\n        model: Readonly<ViewportRootElement>,\n        modelBounds: Bounds,\n        orientation: 'horizontal' | 'vertical'\n    ): VNode {\n        const params: ProjectionParams = { modelBounds, orientation } as ProjectionParams;\n        // NOTE: Here we assume that the projection bars have the same size as the diagram canvas,\n        // i.e. they are drawn as overlay above the canvas.\n        params.factor =\n            orientation === 'horizontal' ? model.canvasBounds.width / modelBounds.width : model.canvasBounds.height / modelBounds.height;\n        params.zoomedFactor = params.factor / model.zoom;\n        return (\n            <div\n                class-sprotty-projection-bar={true}\n                class-horizontal={orientation === 'horizontal'}\n                class-vertical={orientation === 'vertical'}\n                class-bordered-projection-bar={true}\n            >\n                {this.renderViewport(model, params)}\n                {projections.map(p => this.renderProjection(p, model, params))}\n            </div>\n        );\n    }\n\n    protected override renderViewport(model: Readonly<ViewportRootElement>, params: ProjectionParams): VNode {\n        let canvasSize;\n        let viewportPos: number;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            viewportPos = (model.scroll.x - params.modelBounds.x) * params.factor;\n        } else {\n            canvasSize = model.canvasBounds.height;\n            viewportPos = (model.scroll.y - params.modelBounds.y) * params.factor;\n        }\n        let viewportSize = canvasSize * params.zoomedFactor;\n        if (viewportPos < 0) {\n            viewportSize += viewportPos;\n            viewportPos = 0;\n        } else if (viewportPos > canvasSize) {\n            viewportPos = canvasSize;\n        }\n        if (viewportSize < 0) {\n            viewportSize = 0;\n        } else if (viewportPos + viewportSize > canvasSize) {\n            viewportSize = canvasSize - viewportPos;\n        }\n        if (Math.abs(viewportSize - canvasSize) < 1) {\n            viewportSize = 0;\n        }\n        const style: VNodeStyle =\n            params.orientation === 'horizontal'\n                ? {\n                      left: `${viewportPos}px`,\n                      width: `${viewportSize}px`,\n                      border: 'none'\n                  }\n                : {\n                      top: `${viewportPos}px`,\n                      height: `${viewportSize}px`,\n                      border: 'none'\n                  };\n        return <div class-sprotty-viewport={viewportSize !== 0} class-projection-scroll-bar={true} style={style} />;\n    }\n\n    protected override renderProjection(projection: ViewProjection, model: Readonly<ViewportRootElement>, params: ProjectionParams): VNode {\n        let canvasSize;\n        let projPos;\n        let projSize: number;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            projPos = (projection.projectedBounds.x - params.modelBounds.x) * params.factor;\n            projSize = projection.projectedBounds.width * params.factor;\n        } else {\n            canvasSize = model.canvasBounds.height;\n            projPos = (projection.projectedBounds.y - params.modelBounds.y) * params.factor;\n            projSize = projection.projectedBounds.height * params.factor;\n        }\n        if (projPos < 0) {\n            projSize += projPos;\n            projPos = 0;\n        } else if (projPos > canvasSize) {\n            projPos = canvasSize;\n        }\n        if (projSize < 0) {\n            projSize = 0;\n        } else if (projPos + projSize > canvasSize) {\n            projSize = canvasSize - projPos;\n        }\n        const style: VNodeStyle =\n            params.orientation === 'horizontal'\n                ? {\n                      left: `${projPos}px`,\n                      width: `${projSize}px`,\n                      height: '60%'\n                  }\n                : {\n                      top: `${projPos}px`,\n                      height: `${projSize}px`,\n                      width: '60%'\n                  };\n        const result = (\n            <div\n                id={`${params.orientation}-projection:${projection.elementId}`}\n                class-sprotty-projection={true}\n                class-glsp-projection={true}\n                style={style}\n            />\n        );\n        projection.cssClasses.forEach(cl => setClass(result, cl, true));\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './base-view-module';\nexport * from './compartments';\nexport * from './glsp-edge-view';\nexport * from './glsp-projection-view';\nexport * from './issue-marker-view';\nexport * from './rounded-corner';\nexport * from './rounded-corner-view';\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/* eslint-disable max-len */\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { IssueMarkerView, RenderingContext, setClass, SIssueMarker, SIssueSeverity, svg } from '~glsp-sprotty';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class GIssueMarkerView extends IssueMarkerView {\n    override render(marker: SIssueMarker, _context: RenderingContext): VNode {\n        const maxSeverity = super.getMaxSeverity(marker);\n        const group = (\n            <g class-sprotty-issue={true}>\n                <g>\n                    {this.getGlspIssueMarkerBackground(maxSeverity)}\n                    <path d={this.getGlspIssueMarkerPath(maxSeverity)} />\n                </g>\n            </g>\n        );\n        setClass(group, 'sprotty-' + maxSeverity, true);\n        return group;\n    }\n\n    protected getGlspIssueMarkerBackground(severity: SIssueSeverity): VNode {\n        switch (severity) {\n            case 'warning':\n                return <polygon class-sprotty-issue-background={true} points='8 2, 15.9 14.9, 0.2 14.9' />;\n            case 'error':\n            case 'info':\n                return <circle class-sprotty-issue-background={true} r={this.radius} cx={this.radius} cy={this.radius} />;\n        }\n    }\n\n    protected get radius(): number {\n        return 8; // var(--theia-icon-size)=16px => 16/2=8\n    }\n\n    protected getGlspIssueMarkerPath(severity: SIssueSeverity): string {\n        switch (severity) {\n            // paths used here are svg versions of codicons, resized to var(--theia-icon-size) 16px\n            case 'error': // 'codicon-error'\n                return 'm 8.8527788,0.00699568 c 1.8523692,0.115773 3.5889642,1.04195762 4.8624692,2.31546152 1.505048,1.620823 2.31546,3.5889653 2.31546,5.9044268 0,1.852369 -0.694637,3.588965 -1.852367,5.094015 -1.157733,1.389277 -2.778554,2.431235 -4.6309235,2.778554 C 7.6950478,16.446772 5.8426784,16.215226 4.2218552,15.289042 2.6010319,14.362857 1.3275281,12.97358 0.63288942,11.236984 -0.06174907,9.5003878 -0.17752216,7.5322456 0.4013433,5.7956494 0.98020876,3.9432802 2.0221665,2.4382302 3.6429898,1.3962725 5.14804,0.35431486 7.0004094,-0.10877742 8.8527788,0.00699568 Z M 9.4316445,14.941722 c 1.5050505,-0.347319 2.8943275,-1.15773 3.9362845,-2.431234 0.926185,-1.273504 1.50505,-2.778554 1.389277,-4.3993771 0,-1.8523692 -0.69464,-3.7047384 -1.968142,-4.9782422 C 11.631331,1.9751379 10.242054,1.2804995 8.6212324,1.1647264 7.1161824,1.0489533 5.4953592,1.3962725 4.2218552,2.3224572 2.9483511,3.2486418 2.0221665,4.5221456 1.5590742,6.1429686 c -0.4630923,1.50505 -0.4630923,3.1258731 0.2315462,4.6309234 0.6946384,1.50505 1.7365963,2.66278 3.1258734,3.473192 1.3892769,0.810411 3.0101002,1.041958 4.5151507,0.694638 z M 8.042367,7.5322456 10.82092,4.6379187 11.631331,5.4483302 8.8527788,8.3426571 11.631331,11.236984 10.82092,12.047395 8.042367,9.1530686 5.2638128,12.047395 4.4534013,11.236984 7.2319555,8.3426571 4.4534013,5.4483302 5.2638128,4.6379187 Z';\n            case 'warning': // 'codicon-warning'\n                return 'M 7.5587159,0.61312771 H 8.565869 L 16.050847,14.644601 15.54727,15.491525 H 0.55442396 L 0.05084746,14.644601 Z M 8.0622924,2.0780776 1.5157974,14.347033 H 14.585897 Z M 8.7776,13.202541 V 12.058049 H 7.3469848 v 1.144492 z M 7.3469848,10.913557 V 6.3355883 H 8.7776 v 4.5779687 z';\n            case 'info': // 'codicon-info'\n                return 'M 8.7624795,0.01729008 A 7.8878137,7.8878137 0 0 1 13.625085,2.3592747 8.1894066,8.1894066 0 0 1 14.158672,13.251418 7.9458123,7.9458123 0 0 1 4.2061071,15.26977 8.1198082,8.1198082 0 0 1 0.58699265,11.209866 8.259005,8.259005 0 0 1 0.32019895,5.7463948 8.1198082,8.1198082 0 0 1 3.533323,1.3500986 7.8878137,7.8878137 0 0 1 8.7624795,0.01729008 Z M 9.3099868,14.921778 A 6.8322386,6.8322386 0 0 0 13.265493,12.520635 7.0410337,7.0410337 0 0 0 12.801504,3.1712556 6.7510406,6.7510406 0 0 0 4.1829077,2.3128758 7.029434,7.029434 0 0 0 4.762894,14.248994 6.7394408,6.7394408 0 0 0 9.3099868,14.921778 Z M 7.3786322,5.7811939 H 8.8285979 V 4.6212213 H 7.3786322 Z M 8.8285979,6.9411665 V 11.581057 H 7.3786322 V 6.9411665 Z';\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Classes, VNode } from 'snabbdom';\nimport { Hoverable, RectangularNodeView, RenderingContext, SNode, SPort, SShapeElement, Selectable, svg } from '~glsp-sprotty';\nimport { CornerRadius } from '../utils/argument-utils';\nimport { RoundedCornerWrapper } from './rounded-corner';\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst JSX = { createElement: svg };\n\n@injectable()\nexport class RoundedCornerNodeView extends RectangularNodeView {\n    override render(node: Readonly<SShapeElement & Hoverable & Selectable>, context: RenderingContext): VNode | undefined {\n        const cornerRadius = CornerRadius.from(node);\n        if (!cornerRadius) {\n            return this.renderWithoutRadius(node, context);\n        }\n\n        const wrapper = new RoundedCornerWrapper(node, cornerRadius);\n        return (\n            <g class-node={true}>\n                <defs>\n                    <clipPath id={toClipPathId(node)}>\n                        <path d={this.renderPath(wrapper, context, this.getClipPathInsets() || 0)}></path>\n                    </clipPath>\n                </defs>\n                {this.renderPathNode(wrapper, context)}\n                {context.renderChildren(node)}\n            </g>\n        );\n    }\n\n    protected renderWithoutRadius(node: Readonly<SShapeElement & Hoverable & Selectable>, context: RenderingContext): VNode | undefined {\n        return super.render(node, context);\n    }\n\n    protected getClipPathInsets(): number | undefined {\n        return 2;\n    }\n\n    protected renderPathNode(wrapper: Readonly<RoundedCornerWrapper>, context: RenderingContext): VNode {\n        return (\n            <path\n                d={this.renderPath(wrapper, context, 0)}\n                class-sprotty-node={wrapper.element instanceof SNode}\n                class-sprotty-port={wrapper.element instanceof SPort}\n                class-mouseover={wrapper.element.hoverFeedback}\n                class-selected={wrapper.element.selected}\n                {...this.additionalClasses(wrapper.element, context)}\n            />\n        );\n    }\n\n    protected additionalClasses(_node: Readonly<SShapeElement & Hoverable & Selectable>, _context: RenderingContext): Classes {\n        return {};\n    }\n\n    protected renderPath(wrapper: Readonly<RoundedCornerWrapper>, _context: RenderingContext, inset: number): string {\n        // Calculate length of straight line segments\n        const topLineLength = Math.max(0, wrapper.size.width - wrapper.cornerRadius.topLeft - wrapper.cornerRadius.topRight);\n        const rightLineLength = Math.max(0, wrapper.size.height - wrapper.cornerRadius.topRight - wrapper.cornerRadius.bottomRight);\n        const bottomLineLength = Math.max(0, wrapper.size.width - wrapper.cornerRadius.bottomLeft - wrapper.cornerRadius.bottomRight);\n\n        const path =\n            `M${0 + inset},${0 + wrapper.topLeftCorner.radiusY}` +\n            `q${0},${-(wrapper.topLeftCorner.radiusY - inset)} ${wrapper.topLeftCorner.radiusX - inset},${-(\n                wrapper.topLeftCorner.radiusY - inset\n            )}` +\n            `h${topLineLength}` +\n            `q${wrapper.topRightCorner.radiusX - inset},0 ${wrapper.topRightCorner.radiusX - inset},${\n                wrapper.topRightCorner.radiusY - inset\n            }` +\n            `v${rightLineLength}` +\n            `q0,${wrapper.bottomRightCorner.radiusY - inset} ${-(wrapper.bottomRightCorner.radiusX - inset)},${\n                wrapper.bottomRightCorner.radiusY - inset\n            }` +\n            `h${-bottomLineLength}` +\n            `q${-(wrapper.bottomLeftCorner.radiusX - inset)},0 ${-(wrapper.bottomLeftCorner.radiusX - inset)},${-(\n                wrapper.bottomLeftCorner.radiusY - inset\n            )}` +\n            'z ';\n        return path;\n    }\n}\n\nexport function toClipPathId(node: Readonly<SShapeElement & Hoverable & Selectable>): string {\n    return `${node.id}_clip_path`;\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Dimension, Hoverable, Selectable, SShapeElement } from '~glsp-sprotty';\nimport { CornerRadius } from '../utils/argument-utils';\n\nexport interface RoundedCorner {\n    radiusX: number;\n    radiusY: number;\n}\n\nexport class RoundedCornerWrapper {\n    protected _topLeftCorner: RoundedCorner;\n    protected _topRightCorner: RoundedCorner;\n    protected _bottomRightCorner: RoundedCorner;\n    protected _bottomLeftCorner: RoundedCorner;\n\n    constructor(public readonly element: SShapeElement & Hoverable & Selectable, public readonly cornerRadius: CornerRadius) {}\n\n    get size(): Dimension {\n        return this.element.size;\n    }\n\n    get topLeftCorner(): RoundedCorner {\n        if (!this._topLeftCorner) {\n            this._topLeftCorner = {\n                radiusX: scaledRadius(this.cornerRadius.topLeft, this.element.size.width / 2),\n                radiusY: scaledRadius(this.cornerRadius.topLeft, this.element.size.height / 2)\n            };\n        }\n        return this._topLeftCorner;\n    }\n\n    get topRightCorner(): RoundedCorner {\n        if (!this._topRightCorner) {\n            this._topRightCorner = {\n                radiusX: scaledRadius(this.cornerRadius.topRight, this.element.size.width / 2),\n                radiusY: scaledRadius(this.cornerRadius.topRight, this.element.size.height / 2)\n            };\n        }\n        return this._topRightCorner;\n    }\n\n    get bottomRightCorner(): RoundedCorner {\n        if (!this._bottomRightCorner) {\n            this._bottomRightCorner = {\n                radiusX: scaledRadius(this.cornerRadius.bottomRight, this.element.size.width / 2),\n                radiusY: scaledRadius(this.cornerRadius.bottomRight, this.element.size.height / 2)\n            };\n        }\n        return this._bottomRightCorner;\n    }\n\n    get bottomLeftCorner(): RoundedCorner {\n        if (!this._bottomLeftCorner) {\n            this._bottomLeftCorner = {\n                radiusX: scaledRadius(this.cornerRadius.bottomLeft, this.element.size.width / 2),\n                radiusY: scaledRadius(this.cornerRadius.bottomLeft, this.element.size.height / 2)\n            };\n        }\n        return this._bottomLeftCorner;\n    }\n}\n\n/*\n * Scales the radius if necessary. (Percentile down scaling if the radius is bigger then the maximal allowed length)\n */\nexport function scaledRadius(radius: number, maximalLength: number): number {\n    if (radius <= maximalLength) {\n        return radius;\n    } else {\n        return radius * (maximalLength / radius);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonPrimitive } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { AnyObject, hasArrayProp, hasStringProp, TypeGuard } from '../utils/type-util';\n\n/**\n * An action is a declarative description of a behavior that shall be invoked by the receiver upon receipt of the action.\n * It is a plain data structure, and as such transferable between server and client. An action must never contain actual\n * SModelElement instances, but either refer to them via their ids or contain serializable schema for model elements.\n * Additional typeguard functions are provided via the corresponding namespace.\n */\nexport interface Action extends sprotty.Action {\n    /**\n     * Unique identifier specifying the kind of action to process.\n     */\n    kind: string;\n}\n\nexport namespace Action {\n    export function is(object: any): object is Action {\n        return AnyObject.is(object) && hasStringProp(object, 'kind');\n    }\n    /**\n     * Typeguard function to check wether the given object is an {@link Action} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected action kind.\n     * @returns A type literal indicating wether the given object is an action with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is Action {\n        return Action.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * A general message serves as an envelope carrying an action to be transmitted between the client and the server via a DiagramServer.\n * @typeParam A the {@link Action} type that is contained by this message.\n * A typeguard function is provided via the corresponding namespace.\n */\nexport interface ActionMessage<A extends Action = Action> extends sprotty.ActionMessage {\n    /**\n     * The unique client id\n     *  */\n    clientId: string;\n\n    /**\n     * The action to execute.\n     */\n    action: A;\n}\n\nexport namespace ActionMessage {\n    export function is<A extends Action>(object: any, typeguard?: TypeGuard<A>): object is ActionMessage<A> {\n        const actionGuard = typeguard ?? Action.is;\n        return AnyObject.is(object) && hasStringProp(object, 'clientId') && 'action' in object && actionGuard(object.action);\n    }\n}\n\n/**\n * A request action is tied to the expectation of receiving a corresponding response action. The requestId property is used to match the\n * received response with the original request. Typically its not necessary to create an explicit requestId. The requestId can be set\n * to an empty string. The action dispatcher than auto generates an request id if needed (i.e. the action was dispatched as request).\n *\n\n * A typeguard function, and a generic helper function to generate a request id are provided via the corresponding namespace.\n */\nexport interface RequestAction<Res extends ResponseAction> extends Action, sprotty.RequestAction<Res> {\n    /**\n     * Unique id for this request. In order to match a response to this request, the response needs to have the same id.\n     */\n    requestId: string;\n}\n\nexport namespace RequestAction {\n    export function is(object: any): object is RequestAction<ResponseAction> {\n        return Action.is(object) && hasStringProp(object, 'requestId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link RequestAction} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected action kind.\n     * @returns A type literal indicating wether the given object is a request action with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is Action {\n        return RequestAction.is(object) && object.kind === kind;\n    }\n\n    export function generateRequestId(): string {\n        return sprotty.generateRequestId();\n    }\n}\n\n/**\n * A response action is sent to respond to a request action. The responseId must match the requestId of the preceding request.\n * In case the responseId is empty, the action is handled as standalone, i.e. it was fired without a preceding request.\n * The action dispatcher of the GLSP server has a special handling for {@link RequestAction} handlers\n * and automatically sets the `responseId` of the corresponding responseAction. So on the server side its typically enough\n * to set the `responseId` to an empty string and rely on the `ActionDispatcher` for assigning the correct `responseId.\n * Additional typeguard functions are provided via the corresponding namespace.\n */\nexport interface ResponseAction extends Action, sprotty.ResponseAction {\n    /**\n     * Id corresponding to the request this action responds to.\n     */\n    responseId: string;\n}\n\nexport namespace ResponseAction {\n    export function is(object: any): object is ResponseAction {\n        return Action.is(object) && hasStringProp(object, 'responseId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link ResponseAction} with a non-empty response id.\n     * @param object The object to check.\n     * @returns A type literal indicating wether the given object is a response action with a non-empty response id.\n     */\n    export function hasValidResponseId(object: any): object is ResponseAction {\n        return ResponseAction.is(object) && object.responseId !== '';\n    }\n}\n\n/**\n * A reject action is a {@link ResponseAction} fired to indicate that a certain {@link ResponseAction}\n * has been rejected.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RejectActions`.\n */\nexport interface RejectAction extends ResponseAction, sprotty.RejectAction {\n    kind: typeof RejectAction.KIND;\n    /**\n     * A human-readable description of the reject reason. Typically this is an error message\n     * that has been thrown when handling the corresponding {@link RequestAction}.\n     */\n    message: string;\n    /**\n     * Optional additional details.\n     */\n    detail?: JsonPrimitive;\n}\n\nexport namespace RejectAction {\n    export const KIND = 'rejectRequest';\n\n    export function is(object: any): object is RejectAction {\n        return Action.hasKind(object, RejectAction.KIND) && hasStringProp(object, 'message');\n    }\n\n    export function create(message: string, options: { detail?: JsonPrimitive; responseId?: string } = {}): RejectAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            message,\n            ...options\n        };\n    }\n}\n\n/**\n * Operations are actions that denote requests from the client to _modify_ the model. Model modifications are always performed by the\n * server. After a successful modification, the server sends the updated model back to the client using the `UpdateModelAction`.\n * An operation contains a dedicated `isOperation` property that is used as a discriminator. This is necessary so that the server\n * can distinguish between plain actions and operations.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface Operation extends Action {\n    /**\n     * Discriminator property to make operations distinguishable from plain {@link Action}s.\n     */\n    isOperation: true;\n}\n\nexport namespace Operation {\n    export function is(object: any): object is Operation {\n        return Action.is(object) && (object as any).isOperation === true;\n    }\n\n    /**\n     * Typeguard function to check wether the given object is an {@link Operation} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected operation kind.\n     * @returns A type literal indicating wether the given object is an operation with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is Operation {\n        return Operation.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * An operation that executes a list of sub-operations.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CompoundOperations`.\n */\nexport interface CompoundOperation extends Operation {\n    kind: typeof CompoundOperation.KIND;\n    /**\n     * List of operations that should be executed.\n     */\n    operationList: Operation[];\n}\n\nexport namespace CompoundOperation {\n    export const KIND = 'compound';\n\n    export function is(object: any): object is CompoundOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'operationList');\n    }\n\n    export function create(operationList: Operation[]): CompoundOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            operationList\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Sent by the server to signal a state change.\n * If a timeout is given the respective status should disappear after the timeout is reached.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ServerStatusActions`.\n */\nexport interface ServerStatusAction extends Action {\n    kind: typeof ServerStatusAction.KIND;\n    /**\n     * The severity of the status.\n     */\n    severity: ServerSeverity;\n\n    /**\n     * The user-facing message describing the status.\n     */\n    message: string;\n\n    /**\n     * Timeout after which a displayed status should disappear.\n     */\n    timeout?: number;\n}\n\nexport namespace ServerStatusAction {\n    export const KIND = 'serverStatus';\n\n    export function is(object: any): object is ServerStatusAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'severity') && hasStringProp(object, 'message');\n    }\n\n    export function create(message: string, options: { severity?: ServerSeverity; timeout?: number } = {}): ServerStatusAction {\n        return {\n            kind: KIND,\n            severity: 'INFO',\n            message,\n            ...options\n        };\n    }\n}\n\n/**\n * The possible server status severity levels.\n */\n\nexport type ServerSeverity = 'NONE' | 'INFO' | 'WARNING' | 'ERROR' | 'FATAL' | 'OK';\n\n/**\n * Sent by the server to notify the user about something of interest. Typically this message is handled by\n * the client by showing a message to the user with the application's message service.\n * If a timeout is given the respective message should disappear after the timeout is reached.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ServerMessageActions`.\n */\nexport interface ServerMessageAction extends Action {\n    kind: typeof ServerMessageAction.KIND;\n\n    severity: ServerSeverity;\n\n    /**\n     * The message that shall be shown to the user.\n     */\n    message: string;\n\n    /**\n     * Further details on the message.\n     */\n    details?: string;\n\n    /**\n     * Timeout after which a displayed message disappears.\n     */\n    timeout?: number;\n}\n\nexport namespace ServerMessageAction {\n    export const KIND = 'serverMessage';\n\n    export function is(object: any): object is ServerMessageAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'message') && hasStringProp(object, 'severity');\n    }\n\n    export function create(\n        message: string,\n        options: {\n            severity?: ServerSeverity;\n            details?: string;\n            timeout?: number;\n        } = {}\n    ): ServerMessageAction {\n        return {\n            kind: KIND,\n            message,\n            severity: 'INFO',\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasObjectProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { EditorContext } from './types';\n\n/**\n * Requests the clipboard data for the current editor context, i.e., the selected elements, in a clipboard-compatible format.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestClipboardDataActions`.\n */\nexport interface RequestClipboardDataAction extends RequestAction<SetClipboardDataAction> {\n    kind: typeof RequestClipboardDataAction.KIND;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestClipboardDataAction {\n    export const KIND = 'requestClipboardData';\n\n    export function is(object: any): object is RequestClipboardDataAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(editorContext: EditorContext, options: { requestId?: string } = {}): RequestClipboardDataAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            editorContext,\n            ...options\n        };\n    }\n}\n\n/**\n * Server response to a {@link RequestClipboardDataAction} containing the selected elements as clipboard-compatible format.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetClipboardDataActions`.\n */\nexport interface SetClipboardDataAction extends ResponseAction {\n    kind: typeof SetClipboardDataAction.KIND;\n\n    /**\n     * The data to be added into the clipboard. This data will be sent back to the server on paste.\n     */\n    clipboardData: ClipboardData;\n}\n\nexport namespace SetClipboardDataAction {\n    export const KIND = 'setClipboardData';\n\n    export function is(object: any): object is SetClipboardDataAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'clipboardData');\n    }\n\n    export function create(clipboardData: ClipboardData, options: { responseId?: string } = {}): SetClipboardDataAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            clipboardData,\n            ...options\n        };\n    }\n}\n\n/**\n * Requests a cut operation from the server, i.e., deleting the selected elements from the model. Before submitting a `CutOperation`\n * a client should ensure that the cut elements are put into the clipboard.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CutOperations`.\n */\nexport interface CutOperation extends Operation {\n    kind: typeof CutOperation.KIND;\n\n    editorContext: EditorContext;\n}\n\nexport namespace CutOperation {\n    export const KIND = 'cut';\n\n    export function is(object: any): object is CutOperation {\n        return Operation.hasKind(object, KIND) && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(editorContext: EditorContext): CutOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            editorContext\n        };\n    }\n}\n\n/**\n * Requests a paste operation from the server by providing the current clipboard data. Typically this means that elements should be created\n *  based on the data in the clipboard.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `PasteOperations`.\n */\nexport interface PasteOperation extends Operation {\n    kind: typeof PasteOperation.KIND;\n\n    editorContext: EditorContext;\n\n    /**\n     * The clipboard data that should be pasted to the editor's last recorded mouse position (see `editorContext`).\n     */\n    clipboardData: ClipboardData;\n}\n\nexport namespace PasteOperation {\n    export const KIND = 'paste';\n\n    export function is(object: any): object is PasteOperation {\n        return Operation.hasKind(object, KIND) && hasObjectProp(object, 'clipboardData') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: { editorContext: EditorContext; clipboardData: ClipboardData }): PasteOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n/**\n * In GLSP the clipboard needs to be managed by the client but the conversion from the selection to be copied into a\n * clipboard-compatible format is handled by the server. By default, GLSP use application/json as exchange format.\n */\nexport interface ClipboardData {\n    [format: string]: string;\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasArrayProp, hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, EditorContext, LabeledAction } from './types';\n\n/**\n * The `RequestContextActions` is sent from the client to the server to request the available actions for the context with id contextId.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestContextActions`.\n */\nexport interface RequestContextActions extends RequestAction<SetContextActions> {\n    kind: typeof RequestContextActions.KIND;\n\n    /**\n     * The identifier for the context.\n     */\n    contextId: string;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestContextActions {\n    export const KIND = 'requestContextActions';\n\n    export function is(object: any): object is RequestContextActions {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'contextId') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: { contextId: string; editorContext: EditorContext; requestId?: string }): RequestContextActions {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * The `SetContextActions` is the response to a {@link RequestContextActions} containing all actions for the queried context.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetContextsActions`.\n */\nexport interface SetContextActions extends ResponseAction {\n    kind: typeof SetContextActions.KIND;\n\n    /**\n     * The actions available in the queried context.\n     */\n    readonly actions: LabeledAction[];\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace SetContextActions {\n    export const KIND = 'setContextActions';\n\n    export function is(object: any): object is SetContextActions {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'actions');\n    }\n\n    export function create(actions: LabeledAction[], options: { args?: Args; responseId?: string } = {}): SetContextActions {\n        return {\n            kind: KIND,\n            responseId: '',\n            actions,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { Args, ElementAndRoutingPoints } from './types';\n\n/**\n * If the source and/or target element of an edge should be adapted, the client can send a `ReconnectEdgeOperation` to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ReconnectEdgeOperations`.\n */\nexport interface ReconnectEdgeOperation extends Operation {\n    kind: typeof ReconnectEdgeOperation.KIND;\n\n    /**\n     * The edge element that should be reconnected.\n     */\n    edgeElementId: string;\n\n    /**\n     * The (new) source element of the edge.\n     */\n    sourceElementId: string;\n\n    /**\n     * The (new) target element of the edge.\n     */\n    targetElementId: string;\n\n    /*\n     * Additional arguments for custom behavior.\n     */\n    args?: Args;\n}\n\nexport namespace ReconnectEdgeOperation {\n    export const KIND = 'reconnectEdge';\n\n    export function is(object: any): object is ReconnectEdgeOperation {\n        return (\n            Operation.hasKind(object, KIND) &&\n            hasStringProp(object, 'edgeElementId') &&\n            hasStringProp(object, 'sourceElementId') &&\n            hasStringProp(object, 'targetElementId')\n        );\n    }\n\n    export function create(options: {\n        edgeElementId: string;\n        sourceElementId: string;\n        targetElementId: string;\n        args?: Args;\n    }): ReconnectEdgeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n\n/**\n * An edge may have zero or more routing points that \"re-direct\" the edge between the source and the target element. In order to set these\n * routing points the client may send a `ChangeRoutingPointsOperation`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeRoutingPointsOperations`.\n */\nexport interface ChangeRoutingPointsOperation extends Operation {\n    kind: typeof ChangeRoutingPointsOperation.KIND;\n\n    /**\n     * The routing points of the edge (may be empty).\n     */\n    newRoutingPoints: ElementAndRoutingPoints[];\n}\n\nexport namespace ChangeRoutingPointsOperation {\n    export const KIND = 'changeRoutingPoints';\n\n    export function is(object: any): object is ChangeRoutingPointsOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'newRoutingPoints');\n    }\n\n    export function create(newRoutingPoints: ElementAndRoutingPoints[]): ChangeRoutingPointsOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            newRoutingPoints\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Common interface for all create {@link Operation}s in GLSP.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface CreateOperation extends Operation {\n    /**\n     * The type of the element that should be created.\n     */\n    elementTypeId: string;\n    /**\n     * Optional additional arguments for the server to execute the create operation.\n     */\n    args?: Args;\n}\n\nexport namespace CreateOperation {\n    export function is(object: any): object is CreateOperation {\n        return Operation.is(object) && hasStringProp(object, 'elementTypeId');\n    }\n\n    /**\n     * Typeguard function to check wether the given object is a {@link CreateOperation} with the given `kind`.\n     * @param object The object to check.\n     * @param kind  The expected operation kind.\n     * @returns A type literal indicating wether the given object is a create operation with the given kind.\n     */\n    export function hasKind(object: any, kind: string): object is CreateOperation {\n        return CreateOperation.is(object) && object.kind === kind;\n    }\n}\n\n/**\n * In order to create a node in the model the client can send a CreateNodeOperation with the necessary information to create\n * the element that corresponds to that node in the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CreateNodeOperations`.\n */\nexport interface CreateNodeOperation extends CreateOperation {\n    kind: typeof CreateNodeOperation.KIND;\n\n    /*\n     * The location at which the operation shall be executed.\n     */\n    location?: Point;\n\n    /*\n     * The id of container element in which the node should be created. If not defined\n     * the root element will be used.\n     */\n    containerId?: string;\n}\n\nexport namespace CreateNodeOperation {\n    export const KIND = 'createNode';\n\n    export function is(object: any): object is CreateNodeOperation {\n        return CreateOperation.hasKind(object, KIND);\n    }\n\n    export function create(\n        elementTypeId: string,\n        options: { location?: Point; containerId?: string; args?: Args } = {}\n    ): CreateNodeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n/**\n * In order to create an edge in the model the client can send a `CreateEdgeOperation` with the necessary information to create\n * the element that corresponds to that edge in the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CreateEdgeOperations`.\n */\nexport interface CreateEdgeOperation extends CreateOperation {\n    kind: typeof CreateEdgeOperation.KIND;\n\n    sourceElementId: string;\n\n    targetElementId: string;\n}\n\nexport namespace CreateEdgeOperation {\n    export const KIND = 'createEdge';\n\n    export function is(object: any): object is CreateEdgeOperation {\n        return (\n            CreateOperation.hasKind(object, KIND) && hasStringProp(object, 'sourceElementId') && hasStringProp(object, 'targetElementId')\n        );\n    }\n\n    export function create(options: {\n        elementTypeId: string;\n        sourceElementId: string;\n        targetElementId: string;\n        args?: Args;\n    }): CreateEdgeOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n/**\n * The client sends a `DeleteElementOperation` to the server to request the deletion of an element from the source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `DeleteElementOperations`.\n */\nexport interface DeleteElementOperation extends Operation, Omit<sprotty.DeleteElementAction, 'kind'> {\n    kind: typeof DeleteElementOperation.KIND;\n\n    /**\n     * The ids of the elements to be deleted.\n     */\n    elementIds: string[];\n}\n\nexport namespace DeleteElementOperation {\n    export const KIND = 'deleteElement';\n\n    export function is(object: any): object is DeleteElementOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds: string[]): DeleteElementOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementIds\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Bounds } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { SModelRootSchema } from './model-structure';\n\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on that element.\n * This action is sent from the client to the server. The response is a `SetPopupModelAction`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestPopupModelActions`.\n */\nexport interface RequestPopupModelAction extends RequestAction<SetPopupModelAction>, sprotty.RequestPopupModelAction {\n    kind: typeof RequestPopupModelAction.KIND;\n\n    /**\n     * The identifier of the elements for which a popup is requested.\n     */\n    elementId: string;\n\n    /**\n     * The popup bounds declaring the position of the popup. Optionally the desired dimension.\n     */\n    bounds: Bounds;\n}\n\nexport namespace RequestPopupModelAction {\n    export const KIND = 'requestPopupModel';\n\n    export function is(object: any): object is RequestPopupModelAction {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'elementId') && hasObjectProp(object, 'bounds');\n    }\n\n    export function create(options: { elementId: string; bounds: Bounds; requestId?: string }): RequestPopupModelAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client to display a popup in response to a RequestPopupModelAction. This action can also be used to remove\n * any existing popup by choosing EMPTY_ROOT as root element.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetPopupModelActions`.\n */\nexport interface SetPopupModelAction extends ResponseAction, sprotty.SetPopupModelAction {\n    kind: typeof SetPopupModelAction.KIND;\n\n    newRoot: SModelRootSchema;\n}\n\nexport namespace SetPopupModelAction {\n    export const KIND = 'setPopupModel';\n\n    export function is(object: any): object is SetPopupModelAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: SModelRootSchema, options: { responseId?: string } = {}): SetPopupModelAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { JsonPrimitive } from 'sprotty-protocol';\nimport { hasArrayProp, hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { Args, EditorContext } from './types';\n\n/**\n * A `NavigationTarget` identifies the object we want to navigate to via its uri and may further provide a label to display to the user.\n * The corresponding namespace offers a set of utility function to interact with `NavigationTargets`.\n */\nexport interface NavigationTarget {\n    /**\n     * URI to identify the object we want to navigate to.\n     */\n    uri: string;\n\n    /**\n     * Optional label to display to the user.\n     */\n    label?: string;\n\n    /**\n     * Domain-specific arguments that may be interpreted directly or resolved further.\n     */\n    args?: Args;\n}\n\nexport namespace NavigationTarget {\n    export function is(object: any): object is NavigationTarget {\n        return object !== undefined && hasStringProp(object, 'uri');\n    }\n    /**\n     *  Generic key to store element ids as additional argument\n     */\n    export const ELEMENT_IDS = 'elementIds';\n    /**\n     * The separator that is used to store he values for the {@link ELEMENT_IDS} as a single string.\n     */\n    export const ELEMENT_IDS_SEPARATOR = '&';\n    /**\n     *  Generic key ot store the line property of a {@link TextPosition} as additional argument.\n     */\n    export const TEXT_LINE = 'line';\n    /**\n     *  Generic key ot store the character property of a {@link TextPosition} as additional argument.\n     */\n    export const TEXT_COLUMN = 'column';\n\n    /**\n     * Denotes the position of the cursor in a text element.\n     */\n    export interface TextPosition {\n        line: number;\n        /**\n         * The character number within the line. Also refereed to as column.\n         */\n        character: number;\n    }\n\n    /**\n     * Utility function to check wether the given {@link NavigationTarget} has additional arguments defined.\n     * @param target The navigation target to check.\n     * @returns `true` if the navigation target has a non-empty `args` property, `false`\n     */\n    export function hasArguments(target: NavigationTarget): boolean {\n        return target.args !== undefined && Object.keys(target.args).length > 0;\n    }\n\n    /**\n     * Adds a new key-value pair to the additional arguments of the given {@link NavigationTarget}.\n     * @param target The navigation target.\n     * @param key The key of the new argument.\n     * @param value The (primitive) value of the new argument.\n     */\n    export function addArgument(target: NavigationTarget, key: string, value: JsonPrimitive): void {\n        if (!target.args) {\n            target.args = {};\n        }\n        target.args[key] = value;\n    }\n\n    /**\n     * Retrieves the element ids that have been stored with the generic {@link ELEMENT_IDS} key from the args of the\n     * given target.\n     * @param target The navigation target.\n     * @returns An array with the parsed element ids. The array is empty if no {@link ELEMENT_IDS} key is present in the args\n     * of the navigation target.\n     */\n    export function getElementIds(target: NavigationTarget): string[] {\n        if (!target?.args?.[ELEMENT_IDS]) {\n            return [];\n        }\n        const elementIdsValue = target.args[ELEMENT_IDS].toString();\n        return elementIdsValue.split(ELEMENT_IDS_SEPARATOR);\n    }\n\n    /**\n     * Stores the given element ids in the given {@link NavigationTarget} as additional arguments using the generic {@link ELEMENT_IDS} key.\n     * @param target The navigation target.\n     * @param elementIds The element ids that should be stored.\n     * @returns the value of the {@link ELEMENT_IDS} key after storing the given element ids.\n     */\n    export function setElementIds(target: NavigationTarget, ...elementIds: string[]): string {\n        if (target.args === undefined) {\n            target.args = {};\n        }\n        return (target.args[ELEMENT_IDS] = elementIds.join(ELEMENT_IDS_SEPARATOR));\n    }\n\n    /**\n     * Stores the given {@link TextPosition} in the given {@link NavigationTarget} as additional arguments using\n     * the generic {@link TEXT_LINE} & {@link TEXT_COLUMN} keys.\n     * @param target The navigation target.\n     * @param position The text position that should be stored.\n     */\n    export function setTextPosition(target: NavigationTarget, position: TextPosition | undefined): void {\n        if (position) {\n            if (target.args === undefined) {\n                target.args = {};\n            }\n            target.args[TEXT_LINE] = position.line;\n            target.args[TEXT_COLUMN] = position.character;\n        }\n    }\n\n    /**\n     * Retrieves the {@link TextPosition} that have been stored with the generic {@link TEXT_LINE} & {@link TEXT_COLUMN} keys\n     * from the args of the given target.\n     * @param target The navigation target.\n     * @returns The parsed text position or `undefined` if one of the generic text keys is not present in the args\n     * of the navigation target.\n     */\n    export function getTextPosition(target: NavigationTarget): TextPosition | undefined {\n        if (!target.args || !target.args[TEXT_LINE] || !target.args[TEXT_COLUMN]) {\n            return undefined;\n        }\n        return {\n            line: Number(target.args[TEXT_LINE]),\n            character: Number(target.args[TEXT_COLUMN])\n        };\n    }\n}\n\n/**\n * Action that is usually sent from the client to the server to request navigation targets for a specific navigation type such as\n * `documentation` or `implementation` in the given editor context.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestNavigationTargetsActions`.\n */\nexport interface RequestNavigationTargetsAction extends RequestAction<SetNavigationTargetsAction> {\n    kind: typeof RequestNavigationTargetsAction.KIND;\n\n    /**\n     * Identifier of the type of navigation targets we want to retrieve, e.g., 'documentation', 'implementation', etc.\n     */\n    targetTypeId: string;\n\n    editorContext: EditorContext;\n}\n\nexport namespace RequestNavigationTargetsAction {\n    export const KIND = 'requestNavigationTargets';\n\n    export function is(object: any): object is RequestNavigationTargetsAction {\n        return RequestAction.hasKind(object, KIND) && hasStringProp(object, 'targetTypeId') && hasObjectProp(object, 'editorContext');\n    }\n\n    export function create(options: {\n        targetTypeId: string;\n        editorContext: EditorContext;\n        requestId?: string;\n    }): RequestNavigationTargetsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Response action from the server following a {@link RequestNavigationTargetsAction}. It contains all available navigation targets for the\n * queried target type in the provided editor context. The server may also provide additional information using the arguments, e.g.,\n * warnings, that can be interpreted by the client.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetNavigationTargetsActions`.\n */\nexport interface SetNavigationTargetsAction extends ResponseAction {\n    kind: typeof SetNavigationTargetsAction.KIND;\n\n    targets: NavigationTarget[];\n\n    /**\n     * Custom arguments that may be interpreted by the client.\n     */\n    args?: Args;\n}\n\nexport namespace SetNavigationTargetsAction {\n    export const KIND = 'setNavigationTargets';\n\n    export function is(object: any): object is SetNavigationTargetsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'targets');\n    }\n\n    export function create(targets: NavigationTarget[], options: { args?: Args; responseId?: string } = {}): SetNavigationTargetsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            targets,\n            ...options\n        };\n    }\n}\n\n/**\n * Action that triggers the navigation to a particular navigation target, such as element IDs, queries, etc..\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NavigateToTargetActions`.\n */\nexport interface NavigateToTargetAction extends Action {\n    kind: typeof NavigateToTargetAction.KIND;\n\n    target: NavigationTarget;\n}\n\nexport namespace NavigateToTargetAction {\n    export const KIND = 'navigateToTarget';\n\n    export function is(object: any): object is NavigateToTargetAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'target');\n    }\n\n    export function create(target: NavigationTarget): NavigateToTargetAction {\n        return {\n            kind: KIND,\n            target\n        };\n    }\n}\n\n/**\n * If a client cannot navigate to a target directly, a {@link ResolveNavigationTargetAction} may be sent to the server to resolve the\n * navigation target to one or more model elements. This may be useful in cases where the resolution of each target is expensive or the\n * client architecture requires an indirection.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ResolveNavigationTargetActions`.\n */\nexport interface ResolveNavigationTargetAction extends RequestAction<SetResolvedNavigationTargetAction> {\n    kind: typeof ResolveNavigationTargetAction.KIND;\n\n    /**\n     * The navigation target to resolve.\n     */\n    navigationTarget: NavigationTarget;\n}\n\nexport namespace ResolveNavigationTargetAction {\n    export const KIND = 'resolveNavigationTarget';\n\n    export function is(object: any): object is ResolveNavigationTargetAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'navigationTarget');\n    }\n\n    export function create(navigationTarget: NavigationTarget, options: { requestId?: string } = {}): ResolveNavigationTargetAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            navigationTarget,\n            ...options\n        };\n    }\n}\n\n/**\n * An action sent from the server in response to a {@link ResolveNavigationTargetAction}. The response contains the resolved element ids\n * for the given target and may contain additional information in the args property.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetResolvedNavigationTargetActions`.\n */\nexport interface SetResolvedNavigationTargetAction extends ResponseAction {\n    kind: typeof SetResolvedNavigationTargetAction.KIND;\n\n    /**\n     * The element ids of the resolved navigation target.\n     */\n    elementIds: string[];\n\n    /**\n     * Custom arguments that may be interpreted by the client.\n     */\n    args?: Args;\n}\n\nexport namespace SetResolvedNavigationTargetAction {\n    export const KIND = 'setResolvedNavigationTarget';\n\n    export function is(object: any): object is SetResolvedNavigationTargetAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds: string[], options: { args?: Args; responseId?: string } = {}): SetResolvedNavigationTargetAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            elementIds,\n            ...options\n        };\n    }\n}\n\n/**\n * If a {@link NavigationTarget} cannot be resolved or the resolved target is something that is not part of our source model, e.g.,\n * a separate documentation file, a {@link NavigateToExternalTargetAction} may be sent. Since the target it outside of the model scope such\n * an action would be typically handled by an integration layer (such as the surrounding IDE).\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NavigateToExternalTargetActions`.\n */\nexport interface NavigateToExternalTargetAction extends Action {\n    kind: typeof NavigateToExternalTargetAction.KIND;\n\n    /**\n     * The diagram-external target to which the client shall navigate.\n     */\n    target: NavigationTarget;\n}\n\nexport namespace NavigateToExternalTargetAction {\n    export const KIND = 'navigateToExternalTarget';\n\n    export function is(object: any): object is NavigateToExternalTargetAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'target');\n    }\n\n    export function create(target: NavigationTarget): NavigateToExternalTargetAction {\n        return {\n            kind: KIND,\n            target\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { isStringArray } from '../utils/array-util';\nimport { hasArrayProp, hasBooleanProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The action should trigger a change in the\n * selected state accordingly, so the elements can be rendered differently. The server can send such an action to the client in order to\n * change the selection remotely.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SelectActions`.\n */\nexport interface SelectAction extends Action, sprotty.SelectAction {\n    kind: typeof SelectAction.KIND;\n\n    /**\n     * The identifiers of the elements to mark as selected.\n     */\n    selectedElementsIDs: string[];\n\n    /**\n     * The identifiers of the elements to mark as not selected.\n     */\n    deselectedElementsIDs: string[];\n\n    /**\n     * Whether all currently selected elements should be deselected.\n     */\n    deselectAll?: boolean;\n}\n\nexport namespace SelectAction {\n    export const KIND = 'elementSelected';\n\n    export function is(object: any): object is SelectAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'selectedElementsIDs') && hasArrayProp(object, 'deselectedElementsIDs');\n    }\n\n    export function create(options: { selectedElementsIDs?: string[]; deselectedElementsIDs?: string[] | boolean } = {}): SelectAction {\n        const deselectedElementsIDs = options.deselectedElementsIDs ?? [];\n        return {\n            kind: KIND,\n            selectedElementsIDs: options.selectedElementsIDs ?? [],\n            deselectedElementsIDs: isStringArray(deselectedElementsIDs, true) ? deselectedElementsIDs : [],\n            deselectAll: typeof deselectedElementsIDs === 'boolean' ? deselectedElementsIDs : false\n        };\n    }\n\n    export function addSelection(selectedElementsIDs: string[]): SelectAction {\n        return create({ selectedElementsIDs });\n    }\n\n    export function removeSelection(deselectedElementsIDs: string[]): SelectAction {\n        return create({ deselectedElementsIDs });\n    }\n\n    export function setSelection(selectedElementsIDs: string[]): SelectAction {\n        return create({ selectedElementsIDs, deselectedElementsIDs: true });\n    }\n}\n\n/**\n * Programmatic action for selecting or deselecting all elements.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SelectAllActions`.\n */\nexport interface SelectAllAction extends Action, sprotty.SelectAllAction {\n    kind: typeof SelectAllAction.KIND;\n\n    /**\n     * If `select` is true, all elements are selected, otherwise they are deselected.\n     */\n    select: boolean;\n}\n\nexport namespace SelectAllAction {\n    export const KIND = 'allSelected';\n\n    export function is(object: any): object is SelectAllAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'select');\n    }\n\n    export function create(select = true): SelectAllAction {\n        return {\n            kind: KIND,\n            select\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Requests the validation of the given text in the context of the provided model element. Typically sent from the client to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `NewActions`.\n */\nexport interface RequestEditValidationAction extends RequestAction<SetEditValidationResultAction> {\n    kind: typeof RequestEditValidationAction.KIND;\n\n    /**\n     * Context in which the text is validated, e.g., 'label-edit'.\n     */\n    contextId: string;\n\n    /**\n     * Model element that is being edited.\n     */\n    modelElementId: string;\n\n    /**\n     * Text that should be validated for the given context and the model element.\n     */\n    text: string;\n}\n\nexport namespace RequestEditValidationAction {\n    export const KIND = 'requestEditValidation';\n\n    export function is(object: any): object is RequestEditValidationAction {\n        return (\n            RequestAction.hasKind(object, KIND) &&\n            hasStringProp(object, 'contextId') &&\n            hasStringProp(object, 'modelElementId') &&\n            hasStringProp(object, 'text')\n        );\n    }\n\n    export function create(options: {\n        contextId: string;\n        modelElementId: string;\n        text: string;\n        requestId?: string;\n    }): RequestEditValidationAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Response to a {@link RequestEditValidationAction} containing the validation result for applying a text on a certain model element.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetEditValidationResultActions`.\n */\nexport interface SetEditValidationResultAction extends ResponseAction {\n    kind: typeof SetEditValidationResultAction.KIND;\n\n    status: ValidationStatus;\n\n    /*\n     * Additional arguments for custom behavior.\n     */\n    args?: Args;\n}\n\nexport namespace SetEditValidationResultAction {\n    export const KIND = 'setEditValidationResult';\n\n    export function is(object: any): object is SetEditValidationResultAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'status');\n    }\n\n    export function create(status: ValidationStatus, options: { args?: Args; responseId?: string } = {}): SetEditValidationResultAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            status,\n            ...options\n        };\n    }\n}\n\n/**\n * A very common use case in domain models is the support of labels that display textual information to the user.\n * To apply new text to such a label element the client may send an ApplyLabelEditOperation to the server. Typically this is\n * done by the client after it has received a error free validation result via {@link SetEditValidationResultAction} from the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ApplyLabelEditOperations`.\n */\nexport interface ApplyLabelEditOperation extends Operation, sprotty.ApplyLabelEditAction {\n    kind: typeof ApplyLabelEditOperation.KIND;\n\n    /**\n     * Identifier of the label model element.\n     */\n    labelId: string;\n\n    /**\n     * Text that should be applied on the label.\n     */\n    text: string;\n}\n\nexport namespace ApplyLabelEditOperation {\n    export const KIND = 'applyLabelEdit';\n\n    export function is(object: any): object is ApplyLabelEditOperation {\n        return Operation.hasKind(object, KIND) && hasStringProp(object, 'labelId') && hasStringProp(object, 'text');\n    }\n\n    export function create(options: { labelId: string; text: string }): ApplyLabelEditOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n\n/**\n * The serializable result of an an validation request.\n * Tje corresponding namespace offers the default severity values\n * and other utility functions.\n */\nexport interface ValidationStatus {\n    /**\n     * The severity of the validation returned by the server.\n     */\n    readonly severity: ValidationStatus.Severity;\n\n    /**\n     * The validation status message which may be rendered in the view.\n     */\n    readonly message?: string;\n\n    /**\n     * A potential error that encodes more details.\n     */\n    readonly error?: ResponseError;\n}\n\nexport namespace ValidationStatus {\n    /**\n     * The default {@link ValidationStatus} severity levels used in GLSP.\n     */\n    export enum Severity {\n        FATAL,\n        ERROR,\n        WARNING,\n        INFO,\n        OK,\n        NONE\n    }\n\n    /**\n     * An empty {@link ValidationStatus}.\n     */\n    export const NONE: ValidationStatus = {\n        severity: Severity.NONE,\n        message: '',\n        error: { code: -1, message: '', data: {} }\n    };\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * a severity that is considered to be OK.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a non critical severity, `false` otherwise.\n     */\n    export function isOk(validationStatus: ValidationStatus): boolean {\n        return (\n            validationStatus.severity === Severity.OK ||\n            validationStatus.severity === Severity.INFO ||\n            validationStatus.severity === Severity.NONE\n        );\n    }\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * a `warning` severity.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a `warning` severity, `false` otherwise.\n     */\n    export function isWarning(validationStatus: ValidationStatus): boolean {\n        return validationStatus.severity === Severity.WARNING;\n    }\n\n    /**\n     * Utility function to check wether the given {@link ValidationStatus} has\n     * an `error` or `fatal` severity.\n     * @param validationStatus The validation status to check.\n     * @returns `true` if the given status has a `error` or `fatal` severity, `false` otherwise.\n     */\n    export function isError(validationStatus: ValidationStatus): boolean {\n        return validationStatus.severity === Severity.ERROR || validationStatus.severity === Severity.FATAL;\n    }\n}\n\n/**\n * The serializable format of an error that occurred during validation.\n */\nexport interface ResponseError {\n    /**\n     * Code identifying the error kind.\n     */\n    readonly code: number;\n\n    /**\n     * Error message.\n     */\n    readonly message: string;\n\n    /**\n     * Additional custom data, e.g., a serialized stacktrace.\n     */\n    readonly data: Record<string, any>;\n}\n","/********************************************************************************\n * Copyright (c) 2019-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasArrayProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Type hints are used to define what modifications are supported on the different element types.\n * The rationale is to avoid a client-server round-trip for user feedback of each synchronous user interaction.\n */\nexport interface TypeHint {\n    /**\n     * The id of the element.\n     */\n    readonly elementTypeId: string;\n\n    /**\n     * Specifies whether the element can be relocated.\n     */\n    readonly repositionable: boolean;\n\n    /**\n     * Specifies whether the element can be deleted\n     */\n    readonly deletable: boolean;\n}\n\n/**\n * A {@link TypeHint} with additional modification properties for shape elements.\n */\nexport interface ShapeTypeHint extends TypeHint {\n    /**\n     * Specifies whether the element can be resized.\n     */\n    readonly resizable: boolean;\n\n    /**\n     * Specifies whether the element can be moved to another parent\n     */\n    readonly reparentable: boolean;\n\n    /**\n     * The types of elements that can be contained by this element (if any)\n     */\n    readonly containableElementTypeIds?: string[];\n}\n\n/**\n * A {@link TypeHint} with additional modification properties for edge elements.\n */\nexport interface EdgeTypeHint extends TypeHint {\n    /**\n     * Specifies whether the routing of this element can be changed.\n     */\n    readonly routable: boolean;\n\n    /**\n     * Allowed source element types for this edge type\n     */\n    readonly sourceElementTypeIds: string[];\n\n    /**\n     * Allowed targe element types for this edge type\n     */\n    readonly targetElementTypeIds: string[];\n}\n\n/**\n * Sent from the client to the server in order to request hints on whether certain modifications are allowed for a specific element type.\n * The `RequestTypeHintsAction` is optional, but should usually be among the first messages sent from the client to the server after\n * receiving the model via RequestModelAction. The response is a {@link SetTypeHintsAction}.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestTypeHintsActions`.\n */\nexport interface RequestTypeHintsAction extends RequestAction<SetTypeHintsAction> {\n    kind: typeof RequestTypeHintsAction.KIND;\n}\n\nexport namespace RequestTypeHintsAction {\n    export const KIND = 'requestTypeHints';\n\n    export function is(object: any): object is RequestTypeHintsAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { requestId?: string } = {}): RequestTypeHintsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to provide hints certain modifications are allowed for a specific element type.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetTypeHintsActions`.\n */\nexport interface SetTypeHintsAction extends ResponseAction {\n    kind: typeof SetTypeHintsAction.KIND;\n\n    shapeHints: ShapeTypeHint[];\n\n    edgeHints: EdgeTypeHint[];\n}\n\nexport namespace SetTypeHintsAction {\n    export const KIND = 'setTypeHints';\n\n    export function is(object: any): object is SetTypeHintsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'shapeHints') && hasArrayProp(object, 'edgeHints');\n    }\n\n    export function create(options: { shapeHints: ShapeTypeHint[]; edgeHints: EdgeTypeHint[]; responseId?: string }): SetTypeHintsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasArrayProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Validation in GLSP is performed by using validation markers. A marker represents the validation result for a single model element\n */\nexport interface Marker {\n    /**\n     * Short label describing this marker message, e.g., short validation message\n     */\n    readonly label: string;\n    /**\n     * Full description of this marker, e.g., full validation message\n     */\n    readonly description: string;\n    /**\n     * Id of the model element this marker refers to\n     */\n    readonly elementId: string;\n    /**\n     * Marker kind, e.g., info, warning, error or custom kind\n     */\n    readonly kind: string;\n}\n\n/**\n * The default marker kinds used in GLSP\n */\nexport namespace MarkerKind {\n    export const INFO = 'info';\n    export const WARNING = 'warning';\n    export const ERROR = 'error';\n}\n\n/**\n * The default reasons for markers.\n */\nexport namespace MarkersReason {\n    /** Markers resulting from a batch validation */\n    export const BATCH = 'batch';\n    /** Markers resulting from a live validation */\n    export const LIVE = 'live';\n}\n\n/**\n * Action to retrieve markers for the specified model elements. Sent from the client to the server.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestMarkersActions`.\n */\nexport interface RequestMarkersAction extends RequestAction<SetMarkersAction> {\n    kind: typeof RequestMarkersAction.KIND;\n\n    /**\n     * The elements for which markers are requested, may be just the root element.\n     */\n    elementsIDs: string[];\n\n    /**\n     * The reason for this request, such as `batch` or `live` validation. `batch` by default.\n     */\n    reason?: string;\n}\n\nexport namespace RequestMarkersAction {\n    export const KIND = 'requestMarkers';\n\n    export function is(object: any): object is RequestMarkersAction {\n        return RequestAction.hasKind(object, KIND) && hasArrayProp(object, 'elementsIDs');\n    }\n\n    export function create(elementsIDs: string[], options: { requestId?: string; reason?: string } = {}): RequestMarkersAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            elementsIDs,\n            reason: MarkersReason.BATCH,\n            ...options\n        };\n    }\n}\n\n/**\n * Instructs the client to add markers to the diagram.\n * Typically, this is a response to the {@link RequestMarkersAction} containing all validation markers, but can be sent by the server at\n * any time.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetMarkersActions`.\n */\nexport interface SetMarkersAction extends ResponseAction {\n    kind: typeof SetMarkersAction.KIND;\n\n    /**\n     * The list of markers to be added to the diagram.\n     */\n    readonly markers: Marker[];\n\n    /**\n     * The reason for message, such as `batch` or `live` validation.\n     */\n    reason?: string;\n}\n\nexport namespace SetMarkersAction {\n    export const KIND = 'setMarkers';\n\n    export function is(object: any): object is SetMarkersAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'markers');\n    }\n\n    export function create(markers: Marker[], options: { responseId?: string; reason?: string } = {}): SetMarkersAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            markers,\n            reason: MarkersReason.BATCH,\n            ...options\n        };\n    }\n}\n\n/**\n * Action for clearing makers of a model\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `DeleteMarkersActions`. Can be sent by either the client or the server.\n */\nexport interface DeleteMarkersAction extends Action {\n    kind: typeof DeleteMarkersAction.KIND;\n\n    /**\n     * The list of markers that has been requested by the `RequestMarkersAction`.\n     */\n    markers: Marker[];\n}\n\nexport namespace DeleteMarkersAction {\n    export const KIND = 'deleteMarkers';\n\n    export function is(object: any): object is DeleteMarkersAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'markers');\n    }\n\n    export function create(markers: Marker[]): DeleteMarkersAction {\n        return {\n            kind: KIND,\n            markers\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './base-protocol';\nexport * from './client-notification';\nexport * from './clipboard';\nexport * from './contexts';\nexport * from './edge-modification';\nexport * from './element-creation';\nexport * from './element-hover';\nexport * from './element-navigation';\nexport * from './element-selection';\nexport * from './element-text-editing';\nexport * from './element-type-hints';\nexport * from './element-validation';\nexport * from './model-data';\nexport * from './model-edit-mode';\nexport * from './model-layout';\nexport * from './model-saving';\nexport * from './model-structure';\nexport * from './node-modification';\nexport * from './tool-palette';\nexport * from './types';\nexport * from './undo-redo';\nexport * from './viewport';\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasObjectProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\nimport { SModelRootSchema } from './model-structure';\nimport { Args } from './types';\n\n/**\n * Sent from the server to the client in order to set the model. If a model is already present, it is replaced.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestModelActions`.\n */\nexport interface RequestModelAction extends RequestAction<SetModelAction>, sprotty.RequestModelAction {\n    kind: typeof RequestModelAction.KIND;\n\n    /**\n     * Additional options used to compute the graphical model.\n     */\n    options?: Args;\n}\n\nexport namespace RequestModelAction {\n    export const KIND = 'requestModel';\n\n    export function is(object: any): object is RequestModelAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { options?: Args; requestId?: string } = {}): RequestModelAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to set the model. If a model is already present, it is replaced.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetModelActions`.\n */\nexport interface SetModelAction extends ResponseAction, sprotty.SetModelAction {\n    kind: typeof SetModelAction.KIND;\n    /**\n     * The new graphical model root.\n     */\n    newRoot: SModelRootSchema;\n}\n\nexport namespace SetModelAction {\n    export const KIND = 'setModel';\n\n    export function is(object: any): object is SetModelAction {\n        return Action.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: SModelRootSchema, options: { responseId?: string } = {}): SetModelAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to update the model. If no model is present yet, this behaves the same as\n * a {@link SetModelAction}. The transition from the old model to the new one can be animated.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `UpdateModelActions`.\n */\nexport interface UpdateModelAction extends Action, Omit<sprotty.UpdateModelAction, 'matches' | 'cause'> {\n    kind: typeof UpdateModelAction.KIND;\n\n    newRoot: SModelRootSchema;\n    /**\n     * Boolean flag to indicate wether updated/changed elements should be animated in the diagram.\n     */\n    animate?: boolean;\n}\n\nexport namespace UpdateModelAction {\n    export const KIND = 'updateModel';\n\n    export function is(action: any): action is UpdateModelAction {\n        return Action.hasKind(action, KIND) && hasObjectProp(action, 'newRoot');\n    }\n\n    export function create(newRoot: SModelRootSchema, options: { animate?: boolean } = {}): UpdateModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            animate: true,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the server to the client in order to indicate that the source model has changed.\n * The source model denotes the data source from which the diagram has been originally derived (such as a file, a database, etc.).\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SourceModelChangedActions`.\n */\nexport interface SourceModelChangedAction extends Action {\n    kind: typeof SourceModelChangedAction.KIND;\n\n    /**\n     * A human readable name of the source model (e.g. the file name).\n     */\n    sourceModelName: string;\n}\n\nexport namespace SourceModelChangedAction {\n    export const KIND = 'sourceModelChanged';\n\n    export function is(object: any): object is SourceModelChangedAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'sourceModelName');\n    }\n\n    export function create(sourceModelName: string): SourceModelChangedAction {\n        return {\n            kind: KIND,\n            sourceModelName: sourceModelName\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Sent from the client to the server to set the model into a specific editor mode, allowing the server to react to certain\n * requests differently depending on the mode. A client may also listen to this action to prevent certain user interactions preemptively.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetEditModeActions`.\n */\nexport interface SetEditModeAction extends Action {\n    kind: typeof SetEditModeAction.KIND;\n\n    /**\n     * The new edit mode of the diagram.\n     */\n    editMode: string;\n}\n\nexport namespace SetEditModeAction {\n    export const KIND = 'setEditMode';\n\n    export function is(object: any): object is SetEditModeAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'editMode');\n    }\n\n    export function create(editMode: string): SetEditModeAction {\n        return {\n            kind: KIND,\n            editMode\n        };\n    }\n}\n\n/**\n * The potential default values for the `editMode` property of  a {@link SetEditModeAction}.\n */\nexport namespace EditMode {\n    export const READONLY = 'readonly';\n    export const EDITABLE = 'editable';\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasArrayProp, hasObjectProp } from '../utils/type-util';\nimport { Action, Operation, RequestAction, ResponseAction } from './base-protocol';\nimport { SModelRootSchema } from './model-structure';\nimport { ElementAndAlignment, ElementAndBounds, ElementAndRoutingPoints } from './types';\n\n/**\n * Sent from the server to the client to request bounds for the given model. The model is rendered invisibly so the bounds can\n * derived from the DOM. The response is a ComputedBoundsAction. This hidden rendering round-trip is necessary if the client is responsible\n * for parts of the layout.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RequestBoundsActions`.\n */\nexport interface RequestBoundsAction extends RequestAction<ComputedBoundsAction>, sprotty.RequestBoundsAction {\n    kind: typeof RequestBoundsAction.KIND;\n\n    /**\n     * The model root element for which to compute the bounds.\n     */\n    newRoot: SModelRootSchema;\n}\n\nexport namespace RequestBoundsAction {\n    export const KIND = 'requestBounds';\n\n    export function is(object: any): object is RequestBoundsAction {\n        return RequestAction.hasKind(object, KIND) && hasObjectProp(object, 'newRoot');\n    }\n\n    export function create(newRoot: SModelRootSchema, options: { requestId?: string } = {}): RequestBoundsAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            newRoot,\n            ...options\n        };\n    }\n}\n\n/**\n * Sent from the client to the server to transmit the result of bounds computation as a response to a {@link RequestBoundsAction}.\n * If the server is responsible for parts of the layout, it can do so after applying the computed bounds received with this action.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ComputedBoundsActions`.\n */\nexport interface ComputedBoundsAction extends ResponseAction, sprotty.ComputedBoundsAction {\n    kind: typeof ComputedBoundsAction.KIND;\n    /**\n     * The new bounds of the model elements.\n     */\n    bounds: ElementAndBounds[];\n\n    /*\n     * The revision number.\n     */\n    revision?: number;\n\n    /**\n     * The new alignment of the model elements.\n     */\n    alignments?: ElementAndAlignment[];\n\n    /**\n     * The route of the model elements.\n     */\n    routes?: ElementAndRoutingPoints[];\n}\n\nexport namespace ComputedBoundsAction {\n    export const KIND = 'computedBounds';\n\n    export function is(object: any): object is ComputedBoundsAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'bounds');\n    }\n\n    export function create(\n        bounds: ElementAndBounds[],\n        options: {\n            revision?: number;\n            responseId?: string;\n            alignments?: ElementAndAlignment[];\n            routes?: ElementAndRoutingPoints[];\n        } = {}\n    ): ComputedBoundsAction {\n        return {\n            kind: KIND,\n            responseId: '',\n            bounds,\n            ...options\n        };\n    }\n}\n\n/**\n * Request a layout of the diagram or the selected elements only.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `LayoutOperations`.\n */\nexport interface LayoutOperation extends Operation, Omit<sprotty.LayoutAction, 'layoutType'> {\n    kind: typeof LayoutOperation.KIND;\n\n    /**\n     * The identifiers of the elements that should be layouted, will default to the root element if not defined.\n     */\n    elementIds?: string[];\n}\n\nexport namespace LayoutOperation {\n    export const KIND = 'layout';\n\n    export function is(object: any): object is LayoutOperation {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds');\n    }\n\n    export function create(elementIds?: string[]): LayoutOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            elementIds\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { hasBooleanProp, hasStringProp } from '../utils/type-util';\nimport { Action, RequestAction, ResponseAction } from './base-protocol';\n\n/**\n * Sent from the client to the server in order to persist the current model state back to the source model.\n * A new fileUri can be defined to save the model to a new destination different from its original source model.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SaveModelActions`.\n */\nexport interface SaveModelAction extends Action {\n    kind: typeof SaveModelAction.KIND;\n    /**\n     *  The optional destination file uri.\n     */\n    fileUri?: string;\n}\n\nexport namespace SaveModelAction {\n    export const KIND = 'saveModel';\n\n    export function is(object: any): object is SaveModelAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(options: { fileUri?: string } = {}): SaveModelAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n/**\n * The server sends this action to indicate to the client that the current model state on the server does not correspond\n * to the persisted model state of the source model. A client may ignore such an action or use it to indicate to the user the dirty state.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `SetDirtyStateActions`.\n */\nexport interface SetDirtyStateAction extends Action {\n    kind: typeof SetDirtyStateAction.KIND;\n    /**\n     * True if the current model state is dirty\n     */\n    isDirty: boolean;\n\n    /**\n     * A string indicating the reason for the dirty state change e.g 'operation', 'undo',...\n     */\n    reason?: DirtyStateChangeReason;\n}\n\nexport type DirtyStateChangeReason = 'operation' | 'undo' | 'redo' | 'save' | 'external';\n\nexport namespace SetDirtyStateAction {\n    export const KIND = 'setDirtyState';\n\n    export function is(object: any): object is SetDirtyStateAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'isDirty');\n    }\n\n    export function create(isDirty: boolean, options: { reason?: DirtyStateChangeReason } = {}): SetDirtyStateAction {\n        return {\n            kind: KIND,\n            isDirty,\n            ...options\n        };\n    }\n}\n\n/**\n * A `RequestExportSvgAction` is sent by the client (or the server) to initiate the SVG export of the current diagram.\n * The handler of this action is expected to retrieve the diagram SVG and should send a {@link ExportSvgAction} as response.\n * Typically the {@link ExportSvgAction} is handled directly on client side.\n */\nexport interface RequestExportSvgAction extends RequestAction<ExportSvgAction> {\n    kind: typeof RequestExportSvgAction.KIND;\n}\nexport namespace RequestExportSvgAction {\n    export const KIND = 'requestExportSvg';\n\n    export function is(object: any): object is RequestExportSvgAction {\n        return RequestAction.hasKind(object, KIND);\n    }\n\n    export function create(options: { requestId?: string } = {}): RequestExportSvgAction {\n        return {\n            kind: KIND,\n            requestId: '',\n            ...options\n        };\n    }\n}\n\n/**\n * The client sends an `ExportSvgAction` to indicate that the diagram, which represents the current model state,\n * should be exported in SVG format. The action only provides the diagram SVG as plain string. The expected result of executing\n * an `ExportSvgAction` is a new file in SVG-format on the underlying filesystem. However, other details like the target destination,\n * concrete file name, file extension etc. are not specified in the protocol. So it is the responsibility of the action handler to\n * process this information accordingly and export the result to the underlying filesystem.\n */\nexport interface ExportSvgAction extends ResponseAction {\n    kind: typeof ExportSvgAction.KIND;\n    svg: string;\n    responseId: string;\n}\nexport namespace ExportSvgAction {\n    export const KIND = 'exportSvg';\n\n    export function is(object: any): object is RequestExportSvgAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'svg');\n    }\n\n    export function create(svg: string, options: { responseId?: string } = {}): ExportSvgAction {\n        return {\n            kind: KIND,\n            svg,\n            responseId: '',\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Bounds } from 'sprotty-protocol';\nimport * as sprotty from 'sprotty-protocol/lib/model';\nimport { hasStringProp } from '../utils/type-util';\n\n/**\n * The schema of an SModelElement describes its serializable form. The actual class-based model is derived\n * its schema whenever the client or server deserializes a received schema`.\n * Each model element must have a unique ID and a type that is used on the client to  look up its view.\n */\nexport interface SModelElementSchema extends sprotty.SModelElement {\n    id: string;\n    /**\n     * Type to look up the graphical representation of this element.\n     */\n    type: string;\n\n    children?: SModelElementSchema[];\n\n    /**\n     * CSS classes that should be applied on the rendered SVG element representing this element.\n     */\n    cssClasses?: string[];\n}\n\nexport namespace SModelElementSchema {\n    /**\n     * Typeguard function to check wether the given object is an {@link SModelElementSchema}.\n     * @param object The object to check.\n     * @returns A type literal indicating wether the given object is of type {@link SModelElementSchema}.\n     */\n    export function is(object: any): object is SModelElementSchema {\n        return typeof object === 'object' && hasStringProp(object, 'type') && hasStringProp(object, 'id');\n    }\n}\n\n/**\n * Serializable schema for the root element of the model tree.\n */\nexport interface SModelRootSchema extends SModelElementSchema {\n    /**\n     * Bounds of this element in the canvas.\n     */\n    canvasBounds?: Bounds;\n\n    /**\n     * The revision number identifies single versions of the models sent by the server.\n     */\n    revision?: number;\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol';\nimport { hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Operation } from './base-protocol';\nimport { ElementAndBounds } from './types';\n\n/**\n * Triggers the position or size change of elements. This action concerns only the element's graphical size and position.\n * Whether an element can be resized or repositioned may be specified by the server with a `TypeHint` to allow for immediate user feedback\n * before resizing or repositioning.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeBoundsOperations`.\n */\nexport interface ChangeBoundsOperation extends Operation {\n    kind: typeof ChangeBoundsOperation.KIND;\n\n    newBounds: ElementAndBounds[];\n}\n\nexport namespace ChangeBoundsOperation {\n    export const KIND = 'changeBounds';\n\n    export function is(object: any): object is ChangeBoundsOperation {\n        return Operation.hasKind(object, KIND) && hasArrayProp(object, 'newBounds');\n    }\n\n    export function create(newBounds: ElementAndBounds[]): ChangeBoundsOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            newBounds\n        };\n    }\n}\n\n/**\n * The client sends a `ChangeContainerOperation` to the server to request the a semantic move i.e. the corresponding element\n * should be moved form its current container to the target container.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `ChangeContainerOperations`.\n */\nexport interface ChangeContainerOperation extends Operation {\n    kind: typeof ChangeContainerOperation.KIND;\n\n    /**\n     * The element to be changed.\n     */\n    elementId: string;\n\n    /**\n     * The element container of the changeContainer operation.\n     */\n    targetContainerId: string;\n\n    /**\n     * The graphical location.\n     */\n    location?: Point;\n}\n\nexport namespace ChangeContainerOperation {\n    export const KIND = 'changeContainer';\n\n    export function is(object: any): object is ChangeContainerOperation {\n        return Operation.hasKind(object, KIND) && hasStringProp(object, 'elementId') && hasStringProp(object, 'targetContainerId');\n    }\n\n    export function create(options: { elementId: string; targetContainerId: string; location?: Point }): ChangeContainerOperation {\n        return {\n            kind: KIND,\n            isOperation: true,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\nimport { Args } from './types';\n\n/**\n * Triggers the enablement of the tool that is responsible for creating nodes and initializes it with the creation of nodes of the given\n * `elementTypeId`.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `TriggerNodeCreationActions`.\n */\nexport interface TriggerNodeCreationAction extends Action {\n    kind: typeof TriggerNodeCreationAction.KIND;\n\n    /**\n     * The type of edge that should be created by the nodes creation tool.\n     */\n    elementTypeId: string;\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace TriggerNodeCreationAction {\n    export const KIND = 'triggerNodeCreation';\n\n    export function is(object: any): object is TriggerNodeCreationAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementTypeId');\n    }\n\n    export function create(elementTypeId: string, options: { args?: Args } = {}): TriggerNodeCreationAction {\n        return {\n            kind: KIND,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggers the enablement of the tool that is responsible for creating edges and initializes it with the creation of edges of the given\n * `elementTypeId`.\n * <Insert documentation>\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `TriggerEdgeCreationActions`.\n */\nexport interface TriggerEdgeCreationAction extends Action {\n    kind: typeof TriggerEdgeCreationAction.KIND;\n\n    /**\n     * The type of edge that should be created by the edge creation tool.\n     */\n    elementTypeId: string;\n\n    /**\n     * Custom arguments.\n     */\n    args?: Args;\n}\n\nexport namespace TriggerEdgeCreationAction {\n    export const KIND = 'triggerEdgeCreation';\n\n    export function is(object: any): object is TriggerEdgeCreationAction {\n        return Action.hasKind(object, KIND) && hasStringProp(object, 'elementTypeId');\n    }\n\n    export function create(elementTypeId: string, options: { args?: Args } = {}): TriggerEdgeCreationAction {\n        return {\n            kind: KIND,\n            elementTypeId,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol';\nimport { Dimension, Point } from 'sprotty-protocol';\nimport { AnyObject, hasArrayProp, hasStringProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\nimport { TriggerEdgeCreationAction, TriggerNodeCreationAction } from './tool-palette';\n// A collection of convenience and utility types that are used in the GLSP action protocol.\n\n/**\n * A key-value pair structure for primitive typed custom arguments.\n */\nexport interface Args {\n    [key: string]: sprotty.JsonPrimitive;\n}\n\n/**\n * The ElementAndBounds type is used to associate new bounds with a model element, which is referenced via its id.\n */\nexport interface ElementAndBounds extends sprotty.ElementAndBounds {\n    /**\n     * The identifier of the element.\n     */\n    elementId: string;\n    /**\n     * The new size of the element.\n     */\n    newSize: Dimension;\n    /**\n     * The new position of the element.\n     */\n    newPosition?: Point;\n}\n\n/**\n * The `ElementAndAlignment` type is used to associate a new alignment with a model element, which is referenced via its id.\n * Typically used to align label relative to their parent element.\n */\nexport interface ElementAndAlignment extends sprotty.ElementAndAlignment {\n    /**\n     * The identifier of the element.\n     */\n    elementId: string;\n    /**\n     * The new alignment of the element.\n     */\n    newAlignment: Point;\n}\n\n/**\n * The `ElementAndRoutingPoints` type is used to associate an edge with specific routing points.\n */\nexport interface ElementAndRoutingPoints {\n    /**\n     * The identifier of an element.\n     */\n    elementId: string;\n\n    /**\n     * The new list of routing points.\n     */\n    newRoutingPoints?: Point[];\n}\n\n/**\n * The `EditorContext` may be used to represent the current state of the editor for particular actions.\n * It encompasses the last recorded mouse position, the list of selected elements, and may contain\n * custom arguments to encode additional state information.\n */\nexport interface EditorContext {\n    /**\n     * The list of selected element identifiers.\n     */\n    readonly selectedElementIds: string[];\n\n    /**\n     * The last recorded mouse position.\n     */\n    readonly lastMousePosition?: Point;\n\n    /**\n     * Custom arguments.\n     */\n    readonly args?: Args;\n}\n\nexport namespace EditorContext {\n    export function is(object: any): object is EditorContext {\n        return object !== undefined && hasArrayProp(object, 'selectedElementIds');\n    }\n}\n/**\n * Labeled actions are used to denote a group of actions in a user-interface context, e.g., to define an entry in the command palette or\n * in the context menu.\n * The corresponding namespace offers a helper function for type guard checks.\n */\nexport interface LabeledAction {\n    /**\n     * Group label.\n     */\n    label: string;\n\n    /**\n     * Actions in the group.\n     */\n    actions: Action[];\n    /**\n     * Optional group icon.\n     */\n    icon?: string;\n}\n\nexport namespace LabeledAction {\n    export function is(object: any): object is LabeledAction {\n        return AnyObject.is(object) && hasStringProp(object, 'label') && hasArrayProp(object, 'actions');\n    }\n\n    export function toActionArray(input: LabeledAction | Action[] | Action): Action[] {\n        if (Array.isArray(input)) {\n            return input;\n        } else if (LabeledAction.is(input)) {\n            return input.actions;\n        }\n        return [input];\n    }\n}\n\n/**\n * A special {@link LabeledAction} that is used to denote actions that should be triggered when the user\n * click a tool palette item (e.g. a button to create a new node).,\n */\nexport interface PaletteItem extends LabeledAction {\n    /** Technical id of the palette item. */\n    readonly id: string;\n    /** String indicating the order. */\n    readonly sortString: string;\n    /** Children of this item. If this item has children, the client will know to render them as sub group. */\n    readonly children?: PaletteItem[];\n}\n\nexport namespace PaletteItem {\n    export function is(object: any): object is PaletteItem {\n        return LabeledAction.is(object) && hasStringProp(object, 'id') && hasStringProp(object, 'sortString');\n    }\n\n    export function getTriggerAction(item?: PaletteItem): TriggerElementCreationAction | undefined {\n        if (item) {\n            const initialActions = item.actions\n                .filter(a => isTriggerElementCreationAction(a))\n                .map(action => action as TriggerElementCreationAction);\n            return initialActions.length > 0 ? initialActions[0] : undefined;\n        }\n        return undefined;\n    }\n\n    export type TriggerElementCreationAction = TriggerEdgeCreationAction | TriggerNodeCreationAction;\n\n    export function isTriggerElementCreationAction(object: any): object is TriggerElementCreationAction {\n        return TriggerNodeCreationAction.is(object) || TriggerEdgeCreationAction.is(object);\n    }\n}\n\n/**\n * A special {@link LabeledAction} that is used to denote items in a menu.\n */\nexport interface MenuItem extends LabeledAction {\n    /** Technical id of the menu item. */\n    readonly id: string;\n    /** String indicating the order. */\n    readonly sortString?: string;\n    /** String indicating the grouping (separators). Items with equal group will be in the same group. */\n    readonly group?: string;\n    /**\n     * The optional parent id can be used to add this element as a child of another element provided by another menu provider.\n     * The `parentId` must be fully qualified in the form of `a.b.c`, whereas `a`, `b` and `c` are referring to the IDs of other elements.\n     * Note that this attribute will only be considered for root items of a provider and not for children of provided items.\n     */\n    readonly parentId?: string;\n    /** Function determining whether the element is enabled. */\n    readonly isEnabled?: () => boolean;\n    /** Function determining whether the element is visible. */\n    readonly isVisible?: () => boolean;\n    /** Function determining whether the element is toggled on or off. */\n    readonly isToggled?: () => boolean;\n    /** Children of this item. If this item has children, they will be added into a submenu of this item. */\n    children?: MenuItem[];\n}\n\nexport namespace MenuItem {\n    export function is(object: any): object is MenuItem {\n        return LabeledAction.is(object) && hasStringProp(object, 'id');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { Action } from './base-protocol';\n/**\n * Trigger an undo of the latest executed command.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `UndoAction`.\n */\nexport interface UndoAction extends Omit<sprotty.UndoAction, 'kind'> {\n    kind: typeof UndoAction.KIND;\n}\n\nexport namespace UndoAction {\n    export const KIND = 'glspUndo';\n\n    export function is(object: any): object is UndoAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): UndoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Trigger a redo of the latest undone command.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `RedoAction`.\n */\nexport interface RedoAction extends Omit<sprotty.RedoAction, 'kind'> {\n    kind: typeof RedoAction.KIND;\n}\n\nexport namespace RedoAction {\n    export const KIND = 'glspRedo';\n\n    export function is(object: any): object is RedoAction {\n        return Action.hasKind(object, KIND);\n    }\n\n    export function create(): RedoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021-2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as sprotty from 'sprotty-protocol/lib/actions';\nimport { hasArrayProp, hasBooleanProp } from '../utils/type-util';\nimport { Action } from './base-protocol';\n\n/**\n * Centers the viewport on the elements with the given identifiers. It changes the scroll setting of the viewport accordingly and resets\n * the zoom to its default. This action is usually be created on the client but it can also be sent by the server in order to perform such\n * a viewport change remotely.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CenterActions`.\n */\nexport interface CenterAction extends Action, sprotty.CenterAction {\n    kind: typeof CenterAction.KIND;\n\n    /**\n     * The identifier of the elements on which the viewport should be centered.\n     * If empty the root element will be used.\n     */\n    elementIds: string[];\n\n    /**\n     * Indicate if the modification of the viewport should be realized with or without support of animations.\n     */\n    animate: boolean;\n\n    /**\n     * Indicates whether the zoom level should be kept.\n     */\n    retainZoom: boolean;\n}\n\nexport namespace CenterAction {\n    export const KIND = 'center';\n\n    export function is(object: any): object is CenterAction {\n        return Action.hasKind(object, KIND) && hasBooleanProp(object, 'animate') && hasBooleanProp(object, 'retainZoom');\n    }\n\n    export function create(elementIds: string[], options: { animate?: boolean; retainZoom?: boolean } = {}): CenterAction {\n        return {\n            kind: KIND,\n            animate: true,\n            retainZoom: false,\n            elementIds,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggers to fit all or a list of elements into the available diagram canvas.\n * The corresponding namespace declares the action kind as constant and offers helper functions for type guard checks\n * and creating new `CenterActions`.\n */\nexport interface FitToScreenAction extends Action, sprotty.FitToScreenAction {\n    kind: typeof FitToScreenAction.KIND;\n\n    /**\n     * The identifier of the elements to fit on screen.\n     */\n    elementIds: string[];\n\n    /**\n     * The padding that should be visible on the viewport.\n     */\n    padding?: number;\n\n    /**\n     * The max zoom level authorized.\n     */\n    maxZoom?: number;\n\n    /**\n     * Indicate if the action should be performed with animation support or not.\n     */\n    animate: boolean;\n}\n\nexport namespace FitToScreenAction {\n    export const KIND = 'fit';\n\n    export function is(object: any): object is FitToScreenAction {\n        return Action.hasKind(object, KIND) && hasArrayProp(object, 'elementIds') && hasBooleanProp(object, 'animate');\n    }\n\n    export function create(\n        elementIds: string[],\n        options: { padding?: number; maxZoom?: number; animate?: boolean } = {}\n    ): FitToScreenAction {\n        return {\n            kind: KIND,\n            animate: true,\n            elementIds,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Deferred } from 'sprotty-protocol';\nimport { Disposable } from 'vscode-jsonrpc';\nimport { Action, ActionMessage } from '../action-protocol';\nimport { distinctAdd, remove } from '../utils/array-util';\nimport { ActionMessageHandler, ClientState, GLSPClient } from './glsp-client';\nimport { GLSPClientProxy, GLSPServer } from './glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\n/**\n * A simple {@link GLSPClient} implementation for use cases where the client & server are running\n * in the same context/process without a communication layer (like json-rpc) between. The client\n * directly communicates with a given {@link GLSPServer} instance.\n */\nexport class BaseGLSPClient implements GLSPClient {\n    protected state: ClientState;\n    protected _server?: GLSPServer;\n    protected serverDeferred = new Deferred<GLSPServer>();\n    protected onStartDeferred = new Deferred<void>();\n    protected onStopDeferred = new Deferred<void>();\n    readonly proxy: GLSPClientProxy;\n    protected startupTimeout = 1500;\n    protected actionMessageHandlers: ActionMessageHandler[] = [];\n\n    constructor(protected options: GLSPClient.Options) {\n        this.state = ClientState.Initial;\n        this.proxy = this.createProxy();\n    }\n\n    protected createProxy(): GLSPClientProxy {\n        return {\n            process: message => {\n                if (this.actionMessageHandlers.length === 0) {\n                    console.warn('No ActionMessageHandler is configured- Cannot process server message', message);\n                    return;\n                }\n                [...this.actionMessageHandlers].forEach(handler => handler(message));\n            }\n        };\n    }\n\n    configureServer(server: GLSPServer): void {\n        if (this.state === ClientState.Running) {\n            throw new Error('Could not configure new server. The GLSPClient is already running');\n        }\n        this.serverDeferred.resolve(server);\n    }\n\n    start(): Promise<void> {\n        if (this.state !== ClientState.Initial) {\n            return this.onStartDeferred.promise;\n        }\n\n        this.state = ClientState.Starting;\n        const timeOut = new Promise<GLSPServer>((_, reject) =>\n            setTimeout(() => {\n                reject(new Error('Could not start client. No server is configured'));\n            }, this.startupTimeout)\n        );\n        Promise.race([this.serverDeferred.promise, timeOut])\n            .then(server => {\n                this._server = server;\n                this.state = ClientState.Running;\n                this.onStartDeferred.resolve();\n            })\n            .catch(error => {\n                this.state = ClientState.StartFailed;\n                this.onStartDeferred.reject(error);\n            });\n\n        return this.onStartDeferred.promise;\n    }\n\n    initializeServer(params: InitializeParameters): Promise<InitializeResult> {\n        return this.checkedServer.initialize(params);\n    }\n\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void> {\n        return this.checkedServer.initializeClientSession(params);\n    }\n\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void> {\n        return this.checkedServer.disposeClientSession(params);\n    }\n\n    shutdownServer(): void {\n        this.checkedServer.shutdown();\n    }\n\n    async stop(): Promise<void> {\n        if (this.state === ClientState.Stopped || this.state === ClientState.Stopping) {\n            return this.onStop();\n        }\n\n        this.state = ClientState.Stopping;\n        try {\n            if (this._server) {\n                this._server.shutdown();\n            }\n        } finally {\n            this.state = ClientState.Stopped;\n            this.onStopDeferred.resolve();\n        }\n    }\n\n    sendActionMessage(message: ActionMessage<Action>): void {\n        this.checkedServer.process(message);\n    }\n\n    onActionMessage(handler: ActionMessageHandler): Disposable {\n        distinctAdd(this.actionMessageHandlers, handler);\n        return Disposable.create(() => remove(this.actionMessageHandlers, handler));\n    }\n\n    get currentState(): ClientState {\n        return this.state;\n    }\n\n    onStart(): Promise<void> {\n        return this.onStartDeferred.promise;\n    }\n\n    onStop(): Promise<void> {\n        return this.onStopDeferred.promise;\n    }\n\n    get id(): string {\n        return this.options.id;\n    }\n\n    protected checkState(): void | never {\n        if (this.state !== ClientState.Running) {\n            throw new Error(`Client with id '${this.id}' is not in 'Running' state`);\n        }\n    }\n\n    protected get checkedServer(): GLSPServer {\n        this.checkState();\n        if (!this._server) {\n            throw new Error(`No server is configured for GLSPClient with id '${this.id}'`);\n        }\n        return this._server;\n    }\n\n    setStartupTimeout(ms: number): void {\n        this.startupTimeout = ms;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport * as uuid from 'uuid';\n\nimport { ActionMessage } from '../action-protocol';\nimport { Disposable } from '../disposable/disposable';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\nexport class ApplicationIdProvider {\n    private static _applicationId?: string;\n    static get(): string {\n        if (!ApplicationIdProvider._applicationId) {\n            ApplicationIdProvider._applicationId = uuid.v4();\n        }\n        return ApplicationIdProvider._applicationId;\n    }\n}\n\nexport type ActionMessageHandler = (message: ActionMessage) => void;\n\nexport enum ClientState {\n    /**\n     * The client has been created.\n     */\n    Initial,\n    /**\n     * `Start` has been called on the client and the start process is still on-going.\n     */\n    Starting,\n    /**\n     * The client failed to complete the start process.\n     */\n    StartFailed,\n    /**\n     * The client was successfully started and is now running.\n     */\n    Running,\n    /**\n     * `Stop` has been called on the client and the stop process is still on-going.\n     */\n    Stopping,\n    /**\n     * The client stopped and disposed the server connection. Thus, action messages can no longer be sent.\n     */\n    Stopped,\n    /**\n     * An error was encountered while connecting to the server. No action messages can be sent.\n     */\n    ServerError\n}\n\nexport interface GLSPClient {\n    /**\n     * Unique client Id.\n     */\n    readonly id: string;\n\n    /**\n     * Current client state.\n     */\n    readonly currentState: ClientState;\n\n    /**\n     * Initializes the client and the server connection. During the start procedure the client is in the\n     * `Starting` state and will transition to either `Running` or `StartFailed`.\n     *\n     * @returns A promise that resolves if the startup was successful.\n     */\n    start(): Promise<void>;\n\n    /**\n     * Send an `initialize` request to the server. The server needs to be initialized in order to accept and\n     * process other requests and notifications.\n     *\n     * @param params Initialize parameters\n     * @returns A promise of the {@link InitializeResult}.\n     */\n    initializeServer(params: InitializeParameters): Promise<InitializeResult>;\n\n    /**\n     * Send an `initializeClientSession` request to the server. One client application may open several session.\n     * Each individual diagram on the client side counts as one session and has to provide\n     * a unique clientId.\n     *\n     * @param params InitializeClientSession parameters\n     * @returns A promise that resolves if the initialization was successful\n     */\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void>;\n\n    /**\n     * Sends a `disposeClientSession` request to the server. This request has to be sent at the end of client session lifecycle\n     * e.g. when an editor widget is closed.\n     *\n     * @param params DisposeClientSession parameters\n     * @returns A promise that resolves if the disposal was successful\n     */\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void>;\n\n    /**\n     * Send a `shutdown` notification to the server.\n     */\n    shutdownServer(): void;\n\n    /**\n     * Stops the client and disposes any resources. During the stop procedure the client is in the `Stopping` state and will\n     * transition to either `Stopped` or `ServerError`.\n     *\n     * @returns A promise that resolves after the server was stopped and disposed.\n     */\n    stop(): Promise<void>;\n\n    /**\n     * Send an action message to the server.\n     *\n     * @param message The message\n     */\n    sendActionMessage(message: ActionMessage): void;\n\n    /**\n     * Sets a handler/listener for action messages received from the server.\n     *\n     * @param handler The action message handler\n     * @returns A {@link Disposable} that can be used to unregister the handler\n     */\n    onActionMessage(handler: ActionMessageHandler): Disposable;\n}\nexport namespace GLSPClient {\n    export interface Options {\n        id: string;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    export function isOptions(object: any): object is Options {\n        return typeof object === 'object' && 'id' in object && typeof object['id'] === 'string';\n    }\n\n    export const protocolVersion = '1.0.0';\n}\n","/********************************************************************************\n * Copyright (c) 2022-2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ActionMessage } from '../action-protocol';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from './types';\n\n/**\n * Interface for implementations of a ts server component.\n * Based on the specification of the Graphical Language Server Protocol:\n * https://www.eclipse.org/glsp/documentation/protocol/\n */\nexport interface GLSPServer {\n    /**\n     *\n     * The `initialize` request has to be the first request from the client to the server. Until the server has responded\n     * with an {@link InitializeResult} no other request or notification can be handled and is expected to throw an\n     * error. A client is uniquely identified by an `applicationId` and has to specify on which `protocolVersion` it is\n     * based on. In addition, custom arguments can be provided in the `args` map to allow for custom initialization\n     * behavior on the server.\n     *\n     * After successfully initialization all {@link GLSPServerListener}s are notified via the\n     * {@link GLSPServerListener.serverInitialized} method.\n     *\n     * @param params the {@link InitializeParameters}.\n     * @returns A promise of the {@link InitializeResult} .\n     *\n     * @throws {@link Error} Subsequent initialize requests return the {@link InitializeResult} of the initial request\n     * if the given application id and protocol version are matching, otherwise the promise rejects with an error.\n     *\n     */\n    initialize(params: InitializeParameters): Promise<InitializeResult>;\n\n    /**\n     * The `initializeClientSession` request is sent to the server whenever a new graphical representation (diagram) is\n     * created. Each individual diagram on the client side counts as one session and has to provide a unique\n     * `clientSessionId` and its `diagramType`. In addition, custom arguments can be provided in the `args` map to allow\n     * for custom initialization behavior on the server. Subsequent `initializeClientSession` requests for the same\n     * client id and diagram type are expected to resolve successfully but don't have an actual effect because the\n     * corresponding client session is  already initialized.\n     *\n     * @param params the {@link InitializeClientSessionParameters}.\n     * @returns A promise that completes when the initialization was successful.\n     */\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void>;\n\n    /**\n     * The 'DisposeClientSession' request is sent to the server when a graphical representation (diagram) is no longer\n     * needed, e.g. the tab containing the diagram widget has been closed. The session is identified by its unique\n     * `clientSessionId`. In addition, custom arguments can be provided in the `args` map to allow for custom dispose\n     * behavior on the server.\n     *\n     * @param params the {@link DisposeClientSessionParameters}.\n     * @returns A `void` promise that completes if the disposal was successful.\n     *\n     */\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void>;\n\n    /**\n     * A `process` notification is sent from the client to server when the server should handle i.e. process a specific\n     * {@link ActionMessage}. Any communication that is performed between initialization and shutdown is handled by\n     * sending action messages, either from the client to the server or from the server to the client. This is the core\n     * part of the Graphical Language Server Protocol.\n     *\n     * @param message The {@link ActionMessage} that should be processed.\n     */\n    process(message: ActionMessage): void;\n\n    /**\n     * The `shutdown` notification is sent from the client to the server if the client disconnects from the server (e.g.\n     * the client application has been closed).\n     * This gives the server a chance to clean up and dispose any resources dedicated to the client and its sessions.\n     * All {@link GLSPServerListener}s are notified via the {@link GLSPServerListener.serverShutDown} method.\n     * Afterwards the server instance is considered to be disposed and can no longer be used for handling requests.\n     *\n     */\n    shutdown(): void;\n\n    /**\n     * Register a new {@link GLSPServerListener}.\n     *\n     * @param listener The listener that should be registered.\n     * @returns `true` if the listener was registered successfully, `false` otherwise (e.g. listener is already\n     *         registered).\n     */\n    addListener(listener: GLSPServerListener): boolean;\n\n    /**\n     * Unregister a {@link GLSPServerListener}.\n     *\n     * @param listener The listener that should be removed\n     * @returns 'true' if the listener was unregistered successfully, `false` otherwise (e.g. listener is was not\n     *         registered in the first place).\n     */\n    removeListener(listener: GLSPServerListener): boolean;\n}\n\nexport const GLSPServer = Symbol('GLSPServer');\n\n/**\n * A listener to track the connection status of {@link GLSPClient}s (i.e. client applications).\n * Gets notified when a new GLSP client connects or disconnects.\n */\nexport interface GLSPServerListener {\n    /**\n     * Triggered after a GLSPServer has been initialized via the {@link GLSPServer.initialize()}\n     * method.\n     *\n     * @param server The GLSPServer which has been initialized.\n     */\n    serverInitialized?(server: GLSPServer): void;\n\n    /**\n     * Triggered after the {@link GLSPServer.shutdown()} method has been invoked.\n     *\n     * @param glspServer The glspServer which has been shut down.\n     */\n    serverShutDown?(server: GLSPServer): void;\n}\nexport const GLSPServerListener = Symbol('GLSPServerListener');\n\n/**\n * Communication proxy interface used by the GLSP servers to send action messages to clients.\n * The default `JsonrpcClientProxy` used an underlying jsonrpc message connection for sending the action messages.\n */\nexport interface GLSPClientProxy {\n    /**\n     * A `process` notification is sent from the server to server to the client when the client should handle i.e.\n     * process a specific {@link ActionMessage}. Any communication that is performed between initialization and shutdown\n     * is handled by sending action messages, either from the client to the server or from the server to the client. This\n     * is the core part of the Graphical Language Server Protocol.\n     *\n     * @param message The {@link ActionMessage} that should be processed.\n     */\n    process(message: ActionMessage): void;\n}\nexport const GLSPClientProxy = Symbol('GLSPClientProxy');\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\nimport { Disposable, Message, MessageConnection } from 'vscode-jsonrpc';\nimport { ActionMessage } from '../../action-protocol';\nimport { ActionMessageHandler, ClientState, GLSPClient } from '../glsp-client';\nimport { GLSPClientProxy } from '../glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from '../types';\nimport { ConnectionProvider, JsonrpcGLSPClient } from './glsp-jsonrpc-client';\n\nexport class BaseJsonrpcGLSPClient implements GLSPClient {\n    readonly id: string;\n    protected readonly connectionProvider: ConnectionProvider;\n    protected connectionPromise?: Promise<MessageConnection>;\n    protected resolvedConnection?: MessageConnection;\n    protected state: ClientState;\n    protected onStop?: Promise<void>;\n\n    constructor(options: JsonrpcGLSPClient.Options) {\n        Object.assign(this, options);\n        this.state = ClientState.Initial;\n    }\n\n    shutdownServer(): void {\n        this.checkedConnection.sendNotification(JsonrpcGLSPClient.ShutdownNotification);\n    }\n\n    initializeServer(params: InitializeParameters): Promise<InitializeResult> {\n        return this.checkedConnection.sendRequest(JsonrpcGLSPClient.InitializeRequest, params);\n    }\n\n    initializeClientSession(params: InitializeClientSessionParameters): Promise<void> {\n        return this.checkedConnection.sendRequest(JsonrpcGLSPClient.InitializeClientSessionRequest, params);\n    }\n\n    disposeClientSession(params: DisposeClientSessionParameters): Promise<void> {\n        return this.checkedConnection.sendRequest(JsonrpcGLSPClient.DisposeClientSessionRequest, params);\n    }\n\n    onActionMessage(handler: ActionMessageHandler): Disposable {\n        return this.checkedConnection.onNotification(JsonrpcGLSPClient.ActionMessageNotification, handler);\n    }\n\n    sendActionMessage(message: ActionMessage): void {\n        this.checkedConnection.sendNotification(JsonrpcGLSPClient.ActionMessageNotification, message);\n    }\n\n    protected get checkedConnection(): MessageConnection {\n        if (!this.isConnectionActive()) {\n            throw new Error(JsonrpcGLSPClient.ClientNotReadyMsg);\n        }\n        return this.resolvedConnection!;\n    }\n\n    /**\n     * @Deprecated use {@link checkConnection} instead\n     */\n    protected checkConnectionState(): boolean {\n        return this.checkedConnection !== undefined;\n    }\n\n    async start(): Promise<void> {\n        try {\n            this.state = ClientState.Starting;\n            const connection = await this.resolveConnection();\n            connection.listen();\n            this.resolvedConnection = connection;\n            this.state = ClientState.Running;\n        } catch (error) {\n            JsonrpcGLSPClient.error('Failed to start connection to server', error);\n            this.state = ClientState.StartFailed;\n        }\n    }\n\n    stop(): Promise<void> {\n        if (!this.connectionPromise) {\n            this.state = ClientState.Stopped;\n            return Promise.resolve();\n        }\n        if (this.state === ClientState.Stopping && this.onStop) {\n            return this.onStop;\n        }\n        this.state = ClientState.Stopping;\n        return (this.onStop = this.resolveConnection().then(connection => {\n            connection.dispose();\n            this.state = ClientState.Stopped;\n            this.onStop = undefined;\n            this.connectionPromise = undefined;\n            this.resolvedConnection = undefined;\n        }));\n    }\n\n    protected resolveConnection(): Promise<MessageConnection> {\n        if (!this.connectionPromise) {\n            this.connectionPromise = this.doCreateConnection();\n        }\n        return this.connectionPromise;\n    }\n\n    protected async doCreateConnection(): Promise<MessageConnection> {\n        const connection = typeof this.connectionProvider === 'function' ? await this.connectionProvider() : this.connectionProvider;\n        connection.onError(data => this.handleConnectionError(data[0], data[1], data[2]));\n        connection.onClose(() => this.handleConnectionClosed());\n        return connection;\n    }\n\n    protected handleConnectionError(error: Error, message: Message | undefined, count: number | undefined): void {\n        JsonrpcGLSPClient.error('Connection to server is erroring. Shutting down server.', error);\n        this.stop();\n        this.state = ClientState.ServerError;\n    }\n\n    protected handleConnectionClosed(): void {\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this.resolvedConnection) {\n                this.resolvedConnection.dispose();\n                this.connectionPromise = undefined;\n                this.resolvedConnection = undefined;\n            }\n        } catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n\n        JsonrpcGLSPClient.error('Connection to server got closed. Server will not be restarted.');\n        this.state = ClientState.ServerError;\n    }\n\n    isConnectionActive(): boolean {\n        return this.state === ClientState.Running && !!this.resolvedConnection;\n    }\n\n    get currentState(): ClientState {\n        return this.state;\n    }\n}\n\n/**\n * Default {@link GLSPClientProxy} implementation for jsonrpc-based client-server communication with typescript based servers.\n */\n@injectable()\nexport class JsonrpcClientProxy implements GLSPClientProxy {\n    protected clientConnection?: MessageConnection;\n    protected enableLogging: boolean;\n\n    initialize(clientConnection: MessageConnection, enableLogging = false): void {\n        this.clientConnection = clientConnection;\n        this.enableLogging = enableLogging;\n    }\n\n    process(message: ActionMessage): void {\n        if (this.enableLogging) {\n            console.log(`Send action '${message.action.kind}' to client '${message.clientId}'`);\n        }\n        this.clientConnection?.sendNotification(JsonrpcGLSPClient.ActionMessageNotification, message);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { MessageConnection, NotificationType, NotificationType0, RequestType } from 'vscode-jsonrpc';\nimport { ActionMessage } from '../../action-protocol/base-protocol';\nimport { MaybePromise } from '../../utils/type-util';\nimport { GLSPClient } from '../glsp-client';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters, InitializeResult } from '../types';\n\nexport type ConnectionProvider = MessageConnection | (() => MaybePromise<MessageConnection>);\n\nexport namespace JsonrpcGLSPClient {\n    export interface Options extends GLSPClient.Options {\n        connectionProvider: ConnectionProvider;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n    export function isOptions(object: any): object is Options {\n        return GLSPClient.isOptions(object) && 'connectionProvider' in object;\n    }\n\n    export const ActionMessageNotification = new NotificationType<ActionMessage>('process');\n    export const InitializeRequest = new RequestType<InitializeParameters, InitializeResult, void>('initialize');\n    export const InitializeClientSessionRequest = new RequestType<InitializeClientSessionParameters, void, void>('initializeClientSession');\n    export const DisposeClientSessionRequest = new RequestType<DisposeClientSessionParameters, void, void>('disposeClientSession');\n\n    export const ShutdownNotification = new NotificationType0('shutdown');\n    export const ClientNotReadyMsg = 'JsonrpcGLSPClient is not ready yet';\n\n    export function error(message: string, ...optionalParams: any[]): void {\n        console.error(`[JsonrpcGLSPClient] ${message}`, optionalParams);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MessageConnection } from 'vscode-jsonrpc';\nimport { GLSPServer } from '../glsp-server';\nimport { DisposeClientSessionParameters, InitializeClientSessionParameters, InitializeParameters } from '../types';\nimport { JsonrpcGLSPClient } from './glsp-jsonrpc-client';\n\n/**\n * Configure the given client connection to forward the requests and notifications to the given {@link GLSPServer} instance.\n * @param clientConnection JSON-RPC client connection.\n * @param glspServer The GLSP Server which should react to requests & notifications.\n */\nexport function configureClientConnection(clientConnection: MessageConnection, glspServer: GLSPServer): void {\n    clientConnection.onRequest(JsonrpcGLSPClient.InitializeRequest.method, (params: InitializeParameters) => glspServer.initialize(params));\n    clientConnection.onRequest(JsonrpcGLSPClient.InitializeClientSessionRequest, (params: InitializeClientSessionParameters) =>\n        glspServer.initializeClientSession(params)\n    );\n    clientConnection.onRequest(JsonrpcGLSPClient.DisposeClientSessionRequest, (params: DisposeClientSessionParameters) =>\n        glspServer.disposeClientSession(params)\n    );\n    clientConnection.onNotification(JsonrpcGLSPClient.ActionMessageNotification, message => glspServer.process(message));\n\n    clientConnection.listen();\n}\n","/********************************************************************************\n * Copyright (c) 2023 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// based on https://github.com/TypeFox/monaco-languageclient/blob/vwj-2.0.1/packages/vscode-ws-jsonrpc/src/socket/reader.ts\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018-2022 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport {\n    AbstractMessageReader,\n    AbstractMessageWriter,\n    createMessageConnection,\n    DataCallback,\n    Disposable,\n    Logger,\n    Message,\n    MessageConnection\n} from 'vscode-jsonrpc';\n\n/**\n * A wrapper interface that enables the reuse of the {@link WebSocketMessageReader} and {@link WebSocketMessageWriter}\n * independent of the underlying WebSocket implementation/library. e.g. one could use Socket.io instead of plain WebSockets\n */\nexport interface WebSocketWrapper extends Disposable {\n    send(content: string | ArrayBufferLike | ArrayBufferView): void;\n    onMessage(cb: (data: any) => void): void;\n    onError(cb: (reason: any) => void): void;\n    onClose(cb: (code: number, reason: string) => void): void;\n}\n\n/**\n * Creates a {@link WebSocketWrapper} for the given plain WebSocket\n * @param socket The socket to wrap\n */\nexport function wrap(socket: WebSocket): WebSocketWrapper {\n    return {\n        send: content => socket.send(content),\n        onMessage: cb => (socket.onmessage = event => cb(event.data)),\n        onClose: cb => (socket.onclose = event => cb(event.code, event.reason)),\n        onError: cb =>\n            (socket.onerror = event => {\n                if ('error' in event) {\n                    cb(event.error);\n                }\n            }),\n        dispose: () => socket.close()\n    };\n}\n\n/**\n * A `vscode-jsonrpc` {@link MessageReader} that reads messages from an underlying {@link WebSocketWrapper}.\n */\nexport class WebSocketMessageReader extends AbstractMessageReader {\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback?: DataCallback;\n    protected eventQueue: Array<{ message?: unknown; error?: any }> = [];\n\n    constructor(protected readonly socket: WebSocketWrapper) {\n        super();\n        this.socket.onMessage(message => this.handleMessage(message));\n        this.socket.onError(error => this.fireError(error));\n        this.socket.onClose(() => this.fireClose());\n    }\n\n    listen(callback: DataCallback): Disposable {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            this.eventQueue.forEach(event => {\n                if (event.message) {\n                    this.handleMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            });\n            this.eventQueue = [];\n        }\n        return Disposable.create(() => {\n            this.callback = undefined;\n            this.eventQueue = [];\n        });\n    }\n\n    protected handleMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({ message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected override fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({ error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    protected override fireClose(): void {\n        if (this.state === 'initial') {\n            this.eventQueue.push({});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n}\n\n/**\n * A `vscode-jsonrpc` {@link MessageReader} that writes messages to an underlying {@link WebSocketWrapper}.\n */\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\n    protected errorCount = 0;\n\n    constructor(protected readonly socket: WebSocketWrapper) {\n        super();\n    }\n\n    end(): void {\n        /** no-op */\n    }\n\n    async write(msg: Message): Promise<void> {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n}\n\n/**\n * Create a `vscode-jsonrpc` {@link MessageConnection} on top of a given {@link WebSocketWrapper}.\n */\nexport function createWebSocketConnection(socket: WebSocketWrapper, logger?: Logger): MessageConnection {\n    const reader = new WebSocketMessageReader(socket);\n    const writer = new WebSocketMessageWriter(socket);\n    return createMessageConnection(reader, writer, logger);\n}\n\n/**\n * Creates a new {@link MessageConnection} on top of the given websocket on open.\n * @param webSocket The target webSocket\n * @param onConnection Optional callback that is invoked after the connection has been created\n * @param logger Optional connection logger\n * @returns A promise of the created connection\n */\nexport function listen(\n    webSocket: WebSocket,\n    onConnection?: (connection: MessageConnection) => void,\n    logger?: Logger\n): Promise<MessageConnection> {\n    return new Promise(resolve => {\n        webSocket.onopen = () => {\n            const socket = wrap(webSocket);\n            const connection = createWebSocketConnection(socket, logger);\n            onConnection?.(connection);\n            resolve(connection);\n        };\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Args } from '../action-protocol';\n\n/**\n * A key-value pair structure to map a diagramType to its server-handled action kinds.\n */\nexport interface ServerActions {\n    [key: string]: string[];\n}\n\nexport interface InitializeParameters {\n    /**\n     * Unique identifier for the current client application.\n     */\n    applicationId: string;\n\n    /**\n     * GLSP protocol version that this client is implementing.\n     */\n    protocolVersion: string;\n\n    /**\n     * Additional custom arguments e.g. application specific parameters.\n     */\n    args?: Args;\n}\n\nexport interface InitializeResult {\n    /**\n     * GLSP protocol version that the server is implementing.\n     */\n    protocolVersion: string;\n\n    /**\n     * The actions (grouped by diagramType) that the server can handle.\n     */\n    serverActions: ServerActions;\n}\n\n/**\n * Known server actions i.e. action kinds that the server can handle for a specific diagram type.\n */\nexport interface InitializeClientSessionParameters {\n    /**\n     * Unique identifier for the new client session.\n     */\n    clientSessionId: string;\n\n    /**\n     * Unique identifier of the diagram type for which the session should be configured.\n     */\n    diagramType: string;\n\n    /**\n     * Additional custom arguments.\n     */\n    args?: Args;\n}\n\nexport interface DisposeClientSessionParameters {\n    /**\n     * Unique identifier of the client session that should be disposed.\n     */\n    clientSessionId: string;\n\n    /**\n     * Additional custom arguments.\n     */\n    args?: Args;\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { remove } from '../utils/array-util';\nimport { AnyObject, hasFunctionProp } from '../utils/type-util';\n\n/**\n * Interface for objects that can or need to be disposed properly.\n */\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function is(value: unknown): value is Disposable {\n        return AnyObject.is(value) && hasFunctionProp(value, 'dispose');\n    }\n\n    /**\n     * Creates a new empty i.e. no-op {@link Disposable}.\n     * @returns the newly created disposable\n     */\n    export function empty(): Disposable {\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        return { dispose: () => {} };\n    }\n\n    /**\n     * Creates a new {@link Disposable} that delegates to the given callback.\n     * @param cb The callback that should be invoked on dispose\n     * @returns the newly created disposable\n     */\n    export function create(cb: () => void): Disposable {\n        return { dispose: cb };\n    }\n}\n\n/**\n * Reusable base class to manage a collection of {@link Disposable}s.\n */\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n    errorHandler?: (err: any) => void;\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n        this.errorHandler = err => console.error(err);\n    }\n\n    dispose(): void {\n        if (this.disposed) {\n            return;\n        }\n        try {\n            while (!this.disposed) {\n                this.disposables.pop()?.dispose();\n            }\n        } catch (err) {\n            this.errorHandler?.(err);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    /**\n     * Pushes the given disposables to the collection.\n     * @param disposables The disposables that should be added\n     * @returns A disposable that removes the previously pushed values from the collection when invoked\n     */\n    push(...disposables: Disposable[]): Disposable {\n        this.disposables.push(...disposables);\n        return Disposable.create(() => remove(this.disposables, ...disposables));\n    }\n\n    get isDisposed(): boolean {\n        return this.disposed;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { SetBoundsAction, SetViewportAction } from 'sprotty-protocol/lib/actions';\nimport { Action } from './action-protocol';\nimport { hasBooleanProp, hasObjectProp, hasStringProp } from './utils/type-util';\n\n// Add the is() function to the namespace declarations of sprotty-protocol actions\ndeclare module 'sprotty-protocol/lib/actions' {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    namespace SetViewportAction {\n        export function is(object: any): object is SetViewportAction;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    namespace SetBoundsAction {\n        export function is(object: any): object is SetBoundsAction;\n    }\n}\n\nSetViewportAction.is = (object: any): object is SetViewportAction =>\n    Action.hasKind(object, SetViewportAction.KIND) &&\n    hasStringProp(object, 'elementId') &&\n    hasObjectProp(object, 'newViewport') &&\n    hasBooleanProp(object, 'animate');\n\nSetBoundsAction.is = (object: any): object is SetBoundsAction =>\n    Action.hasKind(object, SetBoundsAction.KIND) && hasObjectProp(object, 'bounds');\n\n// Partial reexport of sprotty-protocol\nexport { Viewport } from 'sprotty-protocol/lib/model';\nexport * from 'sprotty-protocol/lib/utils/async';\nexport * from 'sprotty-protocol/lib/utils/geometry';\nexport * from 'sprotty-protocol/lib/utils/json';\nexport * from 'sprotty-protocol/lib/utils/model-utils';\n// Default export of @eclipse-glsp/protocol\nexport * from './action-protocol';\nexport * from './client-server-protocol/base-glsp-client';\nexport * from './client-server-protocol/glsp-client';\nexport * from './client-server-protocol/glsp-server';\nexport * from './client-server-protocol/jsonrpc/base-jsonrpc-glsp-client';\nexport * from './client-server-protocol/jsonrpc/glsp-jsonrpc-client';\nexport * from './client-server-protocol/jsonrpc/glsp-jsonrpc-server';\nexport * from './client-server-protocol/jsonrpc/websocket-connection';\nexport * from './client-server-protocol/types';\nexport * from './disposable/disposable';\nexport * from './model/default-types';\nexport * from './model/model-schema';\nexport * from './utils/array-util';\nexport * from './utils/di-util';\nexport * from './utils/type-util';\nexport { SetBoundsAction, SetViewportAction };\n","/********************************************************************************\n * Copyright (c) 2021-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * The default types for graphical model elements available in GLSP.\n */\nexport namespace DefaultTypes {\n    // HTML elements\n    export const HTML = 'html';\n\n    // generic types\n    export const FOREIGN_OBJECT = 'foreign-object';\n    export const PRE_RENDERED = 'pre-rendered';\n    export const SHAPE_PRE_RENDERED = 'shape-pre-rendered';\n\n    // SVG elements\n    export const SVG = 'svg';\n\n    // graph types\n    export const GRAPH = 'graph';\n    export const NODE = 'node';\n    export const COMPARTMENT = 'comp';\n    export const COMPARTMENT_HEADER = 'comp:header';\n    export const EDGE = 'edge';\n    export const PORT = 'port';\n    export const ROUTING_POINT = 'routing-point';\n    export const VOLATILE_ROUTING_POINT = `volatile-${ROUTING_POINT}`;\n    export const LABEL = 'label';\n\n    // UI elements\n    export const BUTTON = 'button';\n    export const BUTTON_EXPAND = 'button:expand';\n    export const ISSUE_MARKER = 'marker';\n\n    // shapes\n    export const NODE_CIRCLE = 'node:circle';\n    export const NODE_RECTANGLE = 'node:rectangle';\n    export const NODE_DIAMOND = 'node:diamond';\n}\n","/********************************************************************************\n * Copyright (c) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/**\n * Reexport of the sprotty-protocol model definitions with a `Schema` suffix. We use a class based\n * model representation on client and server side. The `Schema` suffix is used for type that represent\n * the serializable description of these graphical model elements.\n * The basic types `SModelElementSchema` and `SRootElementSchema` are already exported by the base action protocol so\n * we only have to reexport the advanced model element interfaces from sprotty-protocol.\n */\nexport {\n    HtmlRoot as HtmlRootSchema,\n    PreRenderedElement as PreRenderedElementSchema,\n    SCompartment as SCompartmentSchema,\n    SEdge as SEdgeSchema,\n    SGraph as SGraphSchema,\n    ShapedPreRenderedElement as ShapedPreRenderedElementSchema,\n    SLabel as SLabelSchema,\n    SNode as SNodeSchema,\n    SPort as SPortSchema,\n    SShapeElement as SShapeElementSchema\n} from 'sprotty-protocol/lib/model';\n","/********************************************************************************\n * Copyright (c) 2019-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Constructor, Primitive } from './type-util';\n\n/**\n * A union type for for objects that can either be a single element or and array of elements.\n */\nexport type MaybeArray<T> = T | T[];\n\n/**\n * Returns the first element of the given array.\n * @param array the array.\n * @returns the element at index 0.\n */\nexport function first<T>(array: T[]): T;\n\n/**\n * Returns the first n elements of the given array.\n * @param array The array.\n * @param n The number of elements that should be returned\n * @returns The first n elements of the array\n */\nexport function first<T>(array: T[], n: number): T[];\nexport function first<T>(array: T[], n?: number): T[] | T {\n    if (n) {\n        return array.filter((_, index) => index < n);\n    }\n    return array[0];\n}\n\n/**\n * Returns the last element of the given array.\n * @param array The array.\n * @returns The last element in the array.\n */\nexport function last<T>(array: T[]): T;\n\n/**\n * Returns the last n elements of the given array.\n * @param array The array.\n * @param n The number of elements that should be returned\n * @returns The last n elements of the array\n */\nexport function last<T>(array: T[], n: number): T[];\nexport function last<T>(array: T[], n?: number): T[] | T {\n    if (n) {\n        return array.filter((_, index) => array.length - index <= n);\n    }\n    return array[array.length - 1];\n}\n\n/**\n * Plucks (i.e. extracts) the property value that corresponds to the given key from all objects of the array.\n * @param array The array which should be plucked.\n * @param key  The key of the property that should be extracted.\n * @returns A new array containing the plugged property for each element of the array.\n */\nexport function pluck<T, K extends keyof T>(array: T[], key: K): Array<T[K]> {\n    return array.map(element => element[key]);\n}\n\n/**\n * Removes the given values from the given array (if present).\n * @param array The array to execute the remove operation on.\n * @param values The values that should be removed from the array.\n */\nexport function remove<T>(array: T[], ...values: T[]): void {\n    values.forEach(value => {\n        const index = array.indexOf(value);\n        if (index >= 0) {\n            array.splice(index, 1);\n        }\n    });\n}\n\n/**\n * Push an array of values to the given array. The values can either be single objects of a concrete type `T`\n * or can also be nested arrays of T. If nested arrays are passed the they will be destructured (i.e. flattened)\n * so that they can be pushed to the given array.\n * @param array The array to push to.\n * @param toPush The values of {@link MaybeArray}s that should be pushed.\n */\nexport function flatPush<T>(array: T[], toPush: MaybeArray<T>[]): void {\n    toPush.forEach(value => (Array.isArray(value) ? array.push(...value) : array.push(value)));\n}\n\n/**\n * Helper function to convert a {@link MaybeArray} into an array.\n * @param maybe The MaybeArray to convert\n * @returns The corresponding array\n */\nexport function asArray<T>(maybe: MaybeArray<T>): T[] {\n    if (Array.isArray(maybe)) {\n        return maybe;\n    }\n    return [maybe];\n}\n/**\n * Adds the given values to the given array. The add operation is executed distinct meaning\n * a value will not be pushed to the array if its already present in the array.\n * @param array The array to push to.\n * @param values The values that should be added distinctively.\n */\nexport function distinctAdd<T>(array: T[], ...values: T[]): void {\n    values.forEach(value => {\n        if (!array.includes(value)) {\n            array.push(value);\n        }\n    });\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a specific type `T`. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param typeGuard A typeguard to check the type of the individual elements.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfType<T>(object: any, typeGuard: (elem: any) => elem is T, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => typeGuard(element), supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a class`T`. As it checks the wether each individual element\n * is an instance of the given class this  guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param constructor The constructor for the class under test.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfClass<T>(object: any, constructor: Constructor<T>, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => element instanceof constructor, supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a {@link PrimitiveType} `T. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param primitiveType The expected primitive type of the elements.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isArrayOfPrimitive<T>(object: any, primitiveType: Primitive, supportEmpty = false): object is T[] {\n    return isArrayMatching(object, element => typeof element === primitiveType, supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array of a strings. As it checks the type of each individual\n * array element this guard check is expensive and should only be used in cases where complete type-safety is required.\n * @param object The object to check.\n * @param supportEmpty A flag to determine wether empty arrays should pass the typeguard check.\n * @returns A type predicate indicating wether the given object has passed the type guard check.\n */\nexport function isStringArray(object: any, supportEmpty = false): object is string[] {\n    return isArrayOfPrimitive(object, 'string', supportEmpty);\n}\n\n/**\n * A typeguard function to check wether a given object is an array where each element matches the given predicate.\n * @param object The object to check.\n * @param predicate The predicate to test with.\n * @param supportEmpty A flag to determine wether empty arrays be matched by the predicate..\n * @returns `true` if the given object is an array and all elements match the given predicate. `false` otherwise.\n */\nexport function isArrayMatching(object: any, predicate: (elem: any) => boolean, supportEmpty = false): boolean {\n    return Array.isArray(object) && object.every(predicate) && (supportEmpty || object.length > 0);\n}\n","/********************************************************************************\n * Copyright (c) 2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Container, ContainerModule, interfaces } from 'inversify';\nimport { MaybeArray, asArray, distinctAdd, remove } from './array-util';\nimport { hasFunctionProp, hasNumberProp } from './type-util';\n\n/**\n * A wrapper interface to get access to the binding related functions\n * for an inversify container.\n */\nexport interface BindingContext {\n    bind: interfaces.Bind;\n    unbind: interfaces.Unbind;\n    isBound: interfaces.IsBound;\n    rebind: interfaces.Rebind;\n}\n\n/**\n * Initializes a container with the given {@link ContainerConfiguration}. The container configuration\n * consists of the set of {@link ContainerModule}s that should be loaded in the container.\n * In addition, for more fine-grained control {@link ModuleConfiguration}s can be passed as part fo the container configuration\n * Module loading is distinct,this means each module will only get loaded once even if it is configured multiple times.\n  @param containerConfiguration\n *          Custom modules to be loaded in addition to the default modules and/or default modules that should be excluded.\n  @returns The initialized container.\n */\nexport function initializeContainer(container: Container, ...containerConfiguration: ContainerConfiguration): Container {\n    const modules: ContainerModule[] = [];\n    containerConfiguration.forEach(config => {\n        if (isContainerModule(config)) {\n            distinctAdd(modules, config);\n        } else {\n            if (config.remove) {\n                remove(modules, ...asArray(config.remove));\n            }\n            if (config.add) {\n                distinctAdd(modules, ...asArray(config.add));\n            }\n        }\n    });\n    container.load(...modules);\n    return container;\n}\n\n/**\n * The container modules might originate form different inversify contexts (e.g. `inversify` vs. `@theia/core/shared/inversify`).\n * If this is the case an instanceof check can return  false negative.\n * => use a simple typeguard instead.\n */\nfunction isContainerModule(config: ContainerModule | ModuleConfiguration): config is ContainerModule {\n    return hasNumberProp(config, 'id') && hasFunctionProp(config, 'registry');\n}\n\n/**\n * Union type for the set of {@link ContainerModule}s and addition {@link ModuleConfiguration}s\n * used to configure a DI container.\n */\nexport type ContainerConfiguration = Array<ContainerModule | ModuleConfiguration>;\n\n/**\n * Can be passed to create DI container utility functions to configure additional modules or\n * remove (i.e. not load) default modules.\n */\nexport interface ModuleConfiguration {\n    /** Set of modules that should be loaded into the container. Loading */\n    add?: MaybeArray<ContainerModule>;\n    /** Set of modules that should be loaded into the container */\n    remove?: MaybeArray<ContainerModule>;\n}\n\n/**\n * Checks wether the given service identifier is already bound in the given context\n * then either calls  the `bind` or `rebind` function respectively.\n *\n * As this is just a convenience function\n * ```ts\n * bindOrRebind({bind,isBound,rebind}, MyService).to(SomeOtherService);\n * ```\n * is equivalent to:\n * ```\n * if (isBound(MyService)) {\n *    rebind(MyService).to(SomeOtherService);\n * } else {\n *    bind(MyService).to(SomeOtherService);\n * }\n * ```\n * @param context The binding context\n * @param serviceIdentifier The service identifier\n * @returns The result of the `bind` or `rebind` function\n */\nexport function bindOrRebind<T>(\n    context: Omit<BindingContext, 'unbind'>,\n    serviceIdentifier: interfaces.ServiceIdentifier<T>\n): interfaces.BindingToSyntax<T> {\n    if (context.isBound(serviceIdentifier)) {\n        return context.rebind(serviceIdentifier);\n    }\n    return context.bind(serviceIdentifier);\n}\n\n/**\n * Only binds the given service identifier if it's not already bound in the given context.\n *\n * As this is just a convenience function\n * ```ts\n * lazyBind({bind,isBound}, MyService)?.to(SomeOtherService);\n * ```\n * is equivalent to:\n * ```\n * if (!isBound(MyService)) {\n *    bind(MyService).to(SomeOtherService);\n * }\n * ```\n * @param context The binding context\n * @param serviceIdentifier The service identifier\n * @returns The result of the `bind` function or `undefined` if the service was already bound\n */\nexport function lazyBind<T>(\n    context: Pick<BindingContext, 'bind' | 'isBound'>,\n    serviceIdentifier: interfaces.ServiceIdentifier<T>\n): interfaces.BindingToSyntax<T> | undefined {\n    if (context.isBound(serviceIdentifier)) {\n        return undefined;\n    }\n    return context.bind(serviceIdentifier);\n}\n\n/**\n * Binds the given service identifier to the given target service in the given context.\n * In addition, the target service is bound to itself in singleton scope. This ensures\n * that services can be rebound individually even if they are multi-injected.\n *\n * As this is just a convenience function\n * ```ts\n * bindAsService(bind,SomeOtherService,MyServiceImpl);\n * ```\n * is equivalent to:\n * ```ts\n * bind(MyServiceImpl).toSelf.inSingletonScope():\n * bind(SomeOtherService).toService(MyServiceImpl);\n * ```\n * @param serviceIdentifier\n * @param toServiceIdentifier\n */\nexport function bindAsService<S, T extends S>(\n    context: Pick<BindingContext, 'bind'> | interfaces.Bind,\n    serviceIdentifier: interfaces.ServiceIdentifier<S>,\n    targetService: interfaces.ServiceIdentifier<T>\n): void {\n    const bind = typeof context === 'object' ? context.bind.bind(context) : context;\n    bind(targetService).toSelf().inSingletonScope();\n    bind(serviceIdentifier).toService(targetService);\n}\n","/********************************************************************************\n * Copyright (c) 2021-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport type AnyObject = object;\n\nexport namespace AnyObject {\n    /**\n     * Type guard to check wether a given object is of type {@link AnyObject}.\n     * @param object The object to check.\n     * @returns The given object as {@link AnyObject} or `false`.\n     */\n    export function is(object: unknown): object is AnyObject {\n        // eslint-disable-next-line no-null/no-null\n        return object !== null && typeof object === 'object';\n    }\n}\n\n/**\n * Utility type to capture all primitive types.\n */\nexport type Primitive = string | number | boolean | bigint | symbol | undefined | null;\n\n/**\n * Utility type to describe objects that have a constructor function i.e. classes.\n */\nexport interface Constructor<T> {\n    new (...args: any[]): T;\n}\n\n/**\n * Utility type to declare a given type `T` as writable. Essentially this removes\n * all readonly modifiers of the type`s properties. Please use with care and only in instances\n * where you know that overwriting a readonly property is safe and doesn't cause any unintended side effects.\n */\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type Writable<T> = { -readonly [P in keyof T]: Writable<T[P]> };\n\n/**\n * Utility type to describe a value as might be provided as a promise.\n */\nexport type MaybePromise<T> = T | PromiseLike<T>;\n\n/**\n * Utility type to describe typeguard functions.\n */\nexport type TypeGuard<T> = (element: any) => element is T;\n\n/**\n * Utility function that create a typeguard function for a given class constructor.\n * Essentially this wraps an instance of check as typeguard function.\n * @param constructor The constructor of the class for which the typeguard should be created.\n * @returns The typeguard for this class.\n */\nexport function toTypeGuard<G>(constructor: Constructor<G>): TypeGuard<G> {\n    return (element: unknown): element is G => element instanceof constructor;\n}\n\n/**\n * Validates whether the given object has a property of type `string` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `string`.\n */\nexport function hasStringProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? typeof (object as any)[propertyKey] === 'string' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `boolean` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `boolean`.\n */\nexport function hasBooleanProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? typeof (object as any)[propertyKey] === 'boolean' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `number` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `number`.\n */\nexport function hasNumberProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? typeof (object as any)[propertyKey] === 'number' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `object` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `object`.\n */\nexport function hasObjectProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? AnyObject.is((object as any)[propertyKey]) : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `function` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `function`.\n */\nexport function hasFunctionProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? typeof (object as any)[propertyKey] === 'function' : optional;\n}\n\n/**\n * Validates whether the given object has a property of type `Array` with the given key.\n * @param object The object that should be validated\n * @param propertyKey The key of the property\n * @param optional Flag to indicate wether the property can be optional i.e. also return true if the given key is undefined\n * @returns `true` if the object has property with matching key of type `Array`.\n */\nexport function hasArrayProp(object: AnyObject, propertyKey: string, optional = false): boolean {\n    return propertyKey in object ? Array.isArray((object as any)[propertyKey]) : optional;\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex; // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n\n  return [bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], '-', bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]], bth[buf[i++]]].join('');\n}\n\nexport default bytesToUuid;","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes == 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Array(msg.length);\n\n    for (var i = 0; i < msg.length; i++) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var i;\n  var x;\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n  var hex;\n\n  for (i = 0; i < length32; i += 8) {\n    x = input[i >> 5] >>> i % 32 & 0xff;\n    hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[(len + 64 >>> 9 << 4) + 14] = len;\n  var i;\n  var olda;\n  var oldb;\n  var oldc;\n  var oldd;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (i = 0; i < x.length; i += 16) {\n    olda = a;\n    oldb = b;\n    oldc = c;\n    oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  var i;\n  var output = [];\n  output[(input.length >> 2) - 1] = undefined;\n\n  for (i = 0; i < output.length; i += 1) {\n    output[i] = 0;\n  }\n\n  var length8 = input.length * 8;\n\n  for (i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n// find the complete implementation of crypto (msCrypto) on IE11.\nvar getRandomValues = typeof crypto != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto);\nvar rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\nexport default function rng() {\n  if (!getRandomValues) {\n    throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes == 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Array(msg.length);\n\n    for (var i = 0; i < msg.length; i++) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var i = 0; i < N; i++) {\n    M[i] = new Array(16);\n\n    for (var j = 0; j < 16; j++) {\n      M[i][j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var i = 0; i < N; i++) {\n    var W = new Array(80);\n\n    for (var t = 0; t < 16; t++) {\n      W[t] = M[i][t];\n    }\n\n    for (var t = 16; t < 80; t++) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var t = 0; t < 80; t++) {\n      var s = Math.floor(t / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import bytesToUuid from './bytesToUuid.js';\n\nfunction uuidToBytes(uuid) {\n  // Note: We assume we're being passed a valid uuid string\n  var bytes = [];\n  uuid.replace(/[a-fA-F0-9]{2}/g, function (hex) {\n    bytes.push(parseInt(hex, 16));\n  });\n  return bytes;\n}\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = new Array(str.length);\n\n  for (var i = 0; i < str.length; i++) {\n    bytes[i] = str.charCodeAt(i);\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  var generateUUID = function generateUUID(value, namespace, buf, offset) {\n    var off = buf && offset || 0;\n    if (typeof value == 'string') value = stringToBytes(value);\n    if (typeof namespace == 'string') namespace = uuidToBytes(namespace);\n    if (!Array.isArray(value)) throw TypeError('value must be an array of bytes');\n    if (!Array.isArray(namespace) || namespace.length !== 16) throw TypeError('namespace must be uuid string or an Array of 16 byte values'); // Per 4.3\n\n    var bytes = hashfunc(namespace.concat(value));\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      for (var idx = 0; idx < 16; ++idx) {\n        buf[off + idx] = bytes[idx];\n      }\n    }\n\n    return buf || bytesToUuid(bytes);\n  }; // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name;\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport bytesToUuid from './bytesToUuid.js';\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;"," /*\r\n  * https://github.com/kraaden/autocomplete\r\n  * Copyright (c) 2016 Denys Krasnoshchok\r\n  * MIT License\r\n  */\r\n\r\nexport const enum EventTrigger {\r\n    Keyboard = 0,\r\n    Focus = 1\r\n}\r\n\r\nexport interface AutocompleteItem {\r\n    label?: string;\r\n    group?: string;\r\n}\r\n\r\nexport interface AutocompleteSettings<T extends AutocompleteItem> {\r\n    input: HTMLInputElement;\r\n    render?: (item: T, currentValue: string) => HTMLDivElement | undefined;\r\n    renderGroup?: (name: string, currentValue: string) => HTMLDivElement | undefined;\r\n    className?: string;\r\n    minLength?: number;\r\n    emptyMsg?: string;\r\n    onSelect: (item: T, input: HTMLInputElement) => void;\r\n    /**\r\n     * Show autocomplete on focus event. Focus event will ignore the `minLength` property and will always call `fetch`.\r\n     */\r\n    showOnFocus?: boolean;\r\n    fetch: (text: string, update: (items: T[] | false) => void, trigger: EventTrigger) => void;\r\n    debounceWaitMs?: number;\r\n    /**\r\n     * Callback for additional autocomplete customization\r\n     * @param {HTMLInputElement} input - input box associated with autocomplete\r\n     * @param {ClientRect | DOMRect} inputRect - size of the input box and its position relative to the viewport\r\n     * @param {HTMLDivElement} container - container with suggestions\r\n     * @param {number} maxHeight - max height that can be used by autocomplete\r\n     */\r\n    customize?: (input: HTMLInputElement, inputRect: ClientRect | DOMRect, container: HTMLDivElement, maxHeight: number) => void;\r\n    /**\r\n     * Prevents automatic form submit when ENTER is pressed\r\n     */\r\n    preventSubmit?: boolean;\r\n}\r\n\r\nexport interface AutocompleteResult {\r\n    destroy: () => void;\r\n}\r\n\r\nconst enum Keys {\r\n    Enter = 13,\r\n    Esc = 27,\r\n    Up = 38,\r\n    Down = 40,\r\n    Left = 37,\r\n    Right = 39,\r\n    Shift = 16,\r\n    Ctrl = 17,\r\n    Alt = 18,\r\n    CapsLock = 20,\r\n    WindowsKey = 91,\r\n    Tab = 9\r\n}\r\n\r\nexport default function autocomplete<T extends AutocompleteItem>(settings: AutocompleteSettings<T>): AutocompleteResult {\r\n\r\n    // just an alias to minimize JS file size\r\n    const doc = document;\r\n\r\n    const container: HTMLDivElement = doc.createElement(\"div\");\r\n    const containerStyle = container.style;\r\n    const userAgent = navigator.userAgent;\r\n    const mobileFirefox = userAgent.indexOf(\"Firefox\") !== -1 && userAgent.indexOf(\"Mobile\") !== -1;\r\n    const debounceWaitMs = settings.debounceWaitMs || 0;\r\n    const preventSubmit = settings.preventSubmit || false;\r\n    \r\n    // 'keyup' event will not be fired on Mobile Firefox, so we have to use 'input' event instead\r\n    const keyUpEventName = mobileFirefox ? \"input\" : \"keyup\";\r\n    \r\n    let items: T[] = [];\r\n    let inputValue = \"\";\r\n    let minLen = 2;\r\n    const showOnFocus = settings.showOnFocus;\r\n    let selected: T | undefined;\r\n    let keypressCounter = 0;\r\n    let debounceTimer : number | undefined;\r\n\r\n    if (settings.minLength !== undefined) {\r\n        minLen = settings.minLength;\r\n    }\r\n\r\n    if (!settings.input) {\r\n        throw new Error(\"input undefined\");\r\n    }\r\n\r\n    const input: HTMLInputElement = settings.input;\r\n\r\n    container.className = \"autocomplete \" + (settings.className || \"\");\r\n    containerStyle.position = \"fixed\";\r\n\r\n    /**\r\n     * Detach the container from DOM\r\n     */\r\n    function detach(): void {\r\n        const parent = container.parentNode;\r\n        if (parent) {\r\n            parent.removeChild(container);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clear debouncing timer if assigned\r\n     */\r\n    function clearDebounceTimer(): void {\r\n        if (debounceTimer) {\r\n            window.clearTimeout(debounceTimer);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Attach the container to DOM\r\n     */\r\n    function attach(): void {\r\n        if (!container.parentNode) {\r\n            doc.body.appendChild(container);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if container for autocomplete is displayed\r\n     */\r\n    function containerDisplayed(): boolean {\r\n        return !!container.parentNode;\r\n    }\r\n\r\n    /**\r\n     * Clear autocomplete state and hide container\r\n     */\r\n    function clear(): void {\r\n        keypressCounter++;\r\n        items = [];\r\n        inputValue = \"\";\r\n        selected = undefined;\r\n        detach();\r\n    }\r\n\r\n    /**\r\n     * Update autocomplete position\r\n     */\r\n    function updatePosition(): void {\r\n        if (!containerDisplayed()) {\r\n            return;\r\n        }\r\n\r\n        containerStyle.height = \"auto\";\r\n        containerStyle.width = input.offsetWidth + \"px\";\r\n\r\n        const inputRect = input.getBoundingClientRect();\r\n        const top = inputRect.top + input.offsetHeight;\r\n        let maxHeight = window.innerHeight - top;\r\n\r\n        if (maxHeight < 0) {\r\n            maxHeight = 0;\r\n        }\r\n\r\n        containerStyle.top = top + \"px\";\r\n        containerStyle.bottom = \"\";\r\n        containerStyle.left = inputRect.left + \"px\";\r\n        containerStyle.maxHeight = maxHeight + \"px\";\r\n\r\n        if (settings.customize) {\r\n            settings.customize(input, inputRect, container, maxHeight);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Redraw the autocomplete div element with suggestions\r\n     */\r\n    function update(): void {\r\n        \r\n        // delete all children from autocomplete DOM container\r\n        while (container.firstChild) {\r\n            container.removeChild(container.firstChild);\r\n        }\r\n\r\n        // function for rendering autocomplete suggestions\r\n        let render = function(item: T, currentValue: string): HTMLDivElement | undefined {\r\n            const itemElement = doc.createElement(\"div\");\r\n            itemElement.textContent = item.label || \"\";\r\n            return itemElement;\r\n        };\r\n        if (settings.render) {\r\n            render = settings.render;\r\n        }\r\n\r\n        // function to render autocomplete groups\r\n        let renderGroup = function(groupName: string, currentValue: string): HTMLDivElement | undefined {\r\n            const groupDiv = doc.createElement(\"div\");\r\n            groupDiv.textContent = groupName;\r\n            return groupDiv;\r\n        };\r\n        if (settings.renderGroup) {\r\n            renderGroup = settings.renderGroup;\r\n        }\r\n\r\n        const fragment = doc.createDocumentFragment();\r\n        let prevGroup = \"#9?$\";\r\n\r\n        items.forEach(function(item: T): void {\r\n            if (item.group && item.group !== prevGroup) {\r\n                prevGroup = item.group;\r\n                const groupDiv = renderGroup(item.group, inputValue);\r\n                if (groupDiv) {\r\n                    groupDiv.className += \" group\";\r\n                    fragment.appendChild(groupDiv);\r\n                }\r\n            }\r\n            const div = render(item, inputValue);\r\n            if (div) {\r\n                div.addEventListener(\"click\", function(ev: MouseEvent): void {\r\n                    settings.onSelect(item, input);\r\n                    clear();\r\n                    ev.preventDefault();\r\n                    ev.stopPropagation();\r\n                });\r\n                if (item === selected) {\r\n                    div.className += \" selected\";\r\n                }\r\n                fragment.appendChild(div);\r\n            }\r\n        });\r\n        container.appendChild(fragment);\r\n        if (items.length < 1) {\r\n            if (settings.emptyMsg) {\r\n                const empty = doc.createElement(\"div\");\r\n                empty.className = \"empty\";\r\n                empty.textContent = settings.emptyMsg;\r\n                container.appendChild(empty);\r\n            } else {\r\n                clear();\r\n                return;\r\n            }\r\n        }\r\n\r\n        attach();\r\n        updatePosition();\r\n\r\n        updateScroll();\r\n    }\r\n\r\n    function updateIfDisplayed(): void {\r\n        if (containerDisplayed()) {\r\n            update();\r\n        }\r\n    }\r\n\r\n    function resizeEventHandler(): void {\r\n        updateIfDisplayed();\r\n    }\r\n\r\n    function scrollEventHandler(e: Event): void {\r\n        if (e.target !== container) {\r\n            updateIfDisplayed();\r\n        } else {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function keyupEventHandler(ev: KeyboardEvent): void {\r\n        const keyCode = ev.which || ev.keyCode || 0;\r\n\r\n        const ignore = [Keys.Up, Keys.Enter, Keys.Esc, Keys.Right, Keys.Left, Keys.Shift, Keys.Ctrl, Keys.Alt, Keys.CapsLock, Keys.WindowsKey, Keys.Tab];\r\n        for (const key of ignore) {\r\n            if (keyCode === key) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        // the down key is used to open autocomplete\r\n        if (keyCode === Keys.Down && containerDisplayed()) {\r\n            return;\r\n        }\r\n\r\n        startFetch(EventTrigger.Keyboard);\r\n    }\r\n\r\n    /**\r\n     * Automatically move scroll bar if selected item is not visible\r\n     */\r\n    function updateScroll(): void {\r\n        const elements = container.getElementsByClassName(\"selected\");\r\n        if (elements.length > 0) {\r\n            let element = elements[0] as HTMLDivElement;\r\n            \r\n            // make group visible\r\n            const previous = element.previousElementSibling as HTMLDivElement;\r\n            if (previous && previous.className.indexOf(\"group\") !== -1 && !previous.previousElementSibling) {\r\n                element = previous;\r\n            }\r\n\r\n            if (element.offsetTop < container.scrollTop) {\r\n                container.scrollTop = element.offsetTop;\r\n            } else {\r\n                const selectBottom = element.offsetTop + element.offsetHeight;\r\n                const containerBottom = container.scrollTop + container.offsetHeight;\r\n                if (selectBottom > containerBottom) {\r\n                    container.scrollTop += selectBottom - containerBottom;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select the previous item in suggestions\r\n     */\r\n    function selectPrev(): void {\r\n        if (items.length < 1) {\r\n            selected = undefined;\r\n        } else {\r\n            if (selected === items[0]) {\r\n                selected = items[items.length - 1];\r\n            } else {\r\n                for (let i = items.length - 1; i > 0; i--) {\r\n                    if (selected === items[i] || i === 1) {\r\n                        selected = items[i - 1];\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Select the next item in suggestions\r\n     */\r\n    function selectNext(): void {\r\n        if (items.length < 1) {\r\n            selected = undefined;\r\n        }\r\n        if (!selected || selected === items[items.length - 1]) {\r\n            selected = items[0];\r\n            return;\r\n        }\r\n        for (let i = 0; i < (items.length - 1); i++) {\r\n            if (selected === items[i]) {\r\n                selected = items[i + 1];\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    function keydownEventHandler(ev: KeyboardEvent): void {\r\n        const keyCode = ev.which || ev.keyCode || 0;\r\n\r\n        if (keyCode === Keys.Up || keyCode === Keys.Down || keyCode === Keys.Esc) {\r\n            const containerIsDisplayed = containerDisplayed();\r\n\r\n            if (keyCode === Keys.Esc) {\r\n                clear();\r\n            } else {\r\n                if (!containerDisplayed || items.length < 1) {\r\n                    return;\r\n                }\r\n                keyCode === Keys.Up\r\n                    ? selectPrev()\r\n                    : selectNext();\r\n                update();\r\n            }\r\n\r\n            ev.preventDefault();\r\n            if (containerIsDisplayed) {\r\n                ev.stopPropagation();\r\n            }\r\n\r\n            return;\r\n        }\r\n\r\n        if (keyCode === Keys.Enter) {\r\n            if (selected) {\r\n                settings.onSelect(selected, input);\r\n                clear();\r\n            }\r\n    \r\n            if (preventSubmit) {\r\n                ev.preventDefault();\r\n            }\r\n        }\r\n    }\r\n\r\n    function focusEventHandler(): void {\r\n        if (showOnFocus) {\r\n            startFetch(EventTrigger.Focus);\r\n        }\r\n    }\r\n\r\n    function startFetch(trigger: EventTrigger) {\r\n        // if multiple keys were pressed, before we get update from server,\r\n        // this may cause redrawing our autocomplete multiple times after the last key press.\r\n        // to avoid this, the number of times keyboard was pressed will be\r\n        // saved and checked before redraw our autocomplete box.\r\n        const savedKeypressCounter = ++keypressCounter;\r\n\r\n        const val = input.value;\r\n        if (val.length >= minLen || trigger === EventTrigger.Focus) {\r\n            clearDebounceTimer();\r\n            debounceTimer = window.setTimeout(function(): void {\r\n                settings.fetch(val, function(elements: T[] | false): void {\r\n                    if (keypressCounter === savedKeypressCounter && elements) {\r\n                        items = elements;\r\n                        inputValue = val;\r\n                        selected = items.length > 0 ? items[0] : undefined;\r\n                        update();\r\n                    }\r\n                }, EventTrigger.Keyboard);\r\n            }, trigger === EventTrigger.Keyboard ? debounceWaitMs : 0);\r\n        } else {\r\n            clear();\r\n        }\r\n    }\r\n\r\n    function blurEventHandler(): void {\r\n        // we need to delay clear, because when we click on an item, blur will be called before click and remove items from DOM\r\n        setTimeout(() => {\r\n            if (doc.activeElement !== input) {\r\n                clear();\r\n            }\r\n        }, 200);\r\n    }\r\n\r\n    /**\r\n     * Fixes #26: on long clicks focus will be lost and onSelect method will not be called\r\n     */\r\n    container.addEventListener(\"mousedown\", function(evt: Event) {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n    });\r\n\r\n    /**\r\n     * This function will remove DOM elements and clear event handlers\r\n     */\r\n    function destroy(): void {\r\n        input.removeEventListener(\"focus\", focusEventHandler);\r\n        input.removeEventListener(\"keydown\", keydownEventHandler);\r\n        input.removeEventListener(keyUpEventName, keyupEventHandler as EventListenerOrEventListenerObject);\r\n        input.removeEventListener(\"blur\", blurEventHandler);\r\n        window.removeEventListener(\"resize\", resizeEventHandler);\r\n        doc.removeEventListener(\"scroll\", scrollEventHandler, true);\r\n        clearDebounceTimer();\r\n        clear();\r\n\r\n        // prevent the update call if there are pending AJAX requests\r\n        keypressCounter++;\r\n    }\r\n\r\n    // setup event handlers\r\n    input.addEventListener(\"keydown\", keydownEventHandler);\r\n    input.addEventListener(keyUpEventName, keyupEventHandler as EventListenerOrEventListenerObject);\r\n    input.addEventListener(\"blur\", blurEventHandler);\r\n    input.addEventListener(\"focus\", focusEventHandler);\r\n    window.addEventListener(\"resize\", resizeEventHandler);\r\n    doc.addEventListener(\"scroll\", scrollEventHandler, true);\r\n\r\n    return {\r\n        destroy\r\n    };\r\n}\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","import { vnode, VNode, VNodeData } from \"./vnode\";\nimport * as is from \"./is\";\n\nexport type VNodes = VNode[];\nexport type VNodeChildElement =\n  | VNode\n  | string\n  | number\n  | String\n  | Number\n  | undefined\n  | null;\nexport type ArrayOrElement<T> = T | T[];\nexport type VNodeChildren = ArrayOrElement<VNodeChildElement>;\n\nexport function addNS(\n  data: any,\n  children: Array<VNode | string> | undefined,\n  sel: string | undefined\n): void {\n  data.ns = \"http://www.w3.org/2000/svg\";\n  if (sel !== \"foreignObject\" && children !== undefined) {\n    for (let i = 0; i < children.length; ++i) {\n      const child = children[i];\n      if (typeof child === \"string\") continue;\n      const childData = child.data;\n      if (childData !== undefined) {\n        addNS(childData, child.children as VNodes, child.sel);\n      }\n    }\n  }\n}\n\nexport function h(sel: string): VNode;\nexport function h(sel: string, data: VNodeData | null): VNode;\nexport function h(sel: string, children: VNodeChildren): VNode;\nexport function h(\n  sel: string,\n  data: VNodeData | null,\n  children: VNodeChildren\n): VNode;\nexport function h(sel: any, b?: any, c?: any): VNode {\n  let data: VNodeData = {};\n  let children: any;\n  let text: any;\n  let i: number;\n  if (c !== undefined) {\n    if (b !== null) {\n      data = b;\n    }\n    if (is.array(c)) {\n      children = c;\n    } else if (is.primitive(c)) {\n      text = c.toString();\n    } else if (c && c.sel) {\n      children = [c];\n    }\n  } else if (b !== undefined && b !== null) {\n    if (is.array(b)) {\n      children = b;\n    } else if (is.primitive(b)) {\n      text = b.toString();\n    } else if (b && b.sel) {\n      children = [b];\n    } else {\n      data = b;\n    }\n  }\n  if (children !== undefined) {\n    for (i = 0; i < children.length; ++i) {\n      if (is.primitive(children[i]))\n        children[i] = vnode(\n          undefined,\n          undefined,\n          undefined,\n          children[i],\n          undefined\n        );\n    }\n  }\n  if (\n    sel[0] === \"s\" &&\n    sel[1] === \"v\" &&\n    sel[2] === \"g\" &&\n    (sel.length === 3 || sel[3] === \".\" || sel[3] === \"#\")\n  ) {\n    addNS(data, children, sel);\n  }\n  return vnode(sel, data, children, text, undefined);\n}\n\n/**\n * @experimental\n */\nexport function fragment(children: VNodeChildren): VNode {\n  let c: any;\n  let text: any;\n\n  if (is.array(children)) {\n    c = children;\n  } else if (is.primitive(c)) {\n    text = children;\n  } else if (c && c.sel) {\n    c = [children];\n  }\n\n  if (c !== undefined) {\n    for (let i = 0; i < c.length; ++i) {\n      if (is.primitive(c[i]))\n        c[i] = vnode(undefined, undefined, undefined, c[i], undefined);\n    }\n  }\n\n  return vnode(undefined, {}, c, text, undefined);\n}\n","import { VNode, VNodeData } from \"../vnode\";\n\nexport interface AttachData {\n  [key: string]: any;\n  [i: number]: any;\n  placeholder?: any;\n  real?: Node;\n}\n\ninterface VNodeDataWithAttach extends VNodeData {\n  attachData: AttachData;\n}\n\ninterface VNodeWithAttachData extends VNode {\n  data: VNodeDataWithAttach;\n}\n\nfunction pre(vnode: VNodeWithAttachData, newVnode: VNodeWithAttachData): void {\n  const attachData = vnode.data.attachData;\n  // Copy created placeholder and real element from old vnode\n  newVnode.data.attachData.placeholder = attachData.placeholder;\n  newVnode.data.attachData.real = attachData.real;\n  // Mount real element in vnode so the patch process operates on it\n  vnode.elm = vnode.data.attachData.real;\n}\n\nfunction post(_: any, vnode: VNodeWithAttachData): void {\n  // Mount dummy placeholder in vnode so potential reorders use it\n  vnode.elm = vnode.data.attachData.placeholder;\n}\n\nfunction destroy(vnode: VNodeWithAttachData): void {\n  // Remove placeholder\n  if (vnode.elm !== undefined) {\n    (vnode.elm.parentNode as HTMLElement).removeChild(vnode.elm);\n  }\n  // Remove real element from where it was inserted\n  vnode.elm = vnode.data.attachData.real;\n}\n\nfunction create(_: any, vnode: VNodeWithAttachData): void {\n  const real = vnode.elm;\n  const attachData = vnode.data.attachData;\n  const placeholder = document.createElement(\"span\");\n  // Replace actual element with dummy placeholder\n  // Snabbdom will then insert placeholder instead\n  vnode.elm = placeholder;\n  attachData.target.appendChild(real);\n  attachData.real = real;\n  attachData.placeholder = placeholder;\n}\n\nexport function attachTo(target: Element, vnode: VNode): VNode {\n  if (vnode.data === undefined) vnode.data = {};\n  if (vnode.data.hook === undefined) vnode.data.hook = {};\n  const data = vnode.data;\n  const hook = vnode.data.hook;\n  data.attachData = { target: target, placeholder: undefined, real: undefined };\n  hook.create = create;\n  hook.prepatch = pre;\n  hook.postpatch = post;\n  hook.destroy = destroy;\n  return vnode;\n}\n","export interface SnabbdomFragment extends DocumentFragment {\n  parent: Node | null;\n  firstChildNode: ChildNode | null;\n  lastChildNode: ChildNode | null;\n}\n\nexport interface DOMAPI {\n  createElement: (\n    tagName: any,\n    options?: ElementCreationOptions\n  ) => HTMLElement;\n  createElementNS: (\n    namespaceURI: string,\n    qualifiedName: string,\n    options?: ElementCreationOptions\n  ) => Element;\n  /**\n   * @experimental\n   * @todo Make it required when the fragment is considered stable.\n   */\n  createDocumentFragment?: () => SnabbdomFragment;\n  createTextNode: (text: string) => Text;\n  createComment: (text: string) => Comment;\n  insertBefore: (\n    parentNode: Node,\n    newNode: Node,\n    referenceNode: Node | null\n  ) => void;\n  removeChild: (node: Node, child: Node) => void;\n  appendChild: (node: Node, child: Node) => void;\n  parentNode: (node: Node) => Node | null;\n  nextSibling: (node: Node) => Node | null;\n  tagName: (elm: Element) => string;\n  setTextContent: (node: Node, text: string | null) => void;\n  getTextContent: (node: Node) => string | null;\n  isElement: (node: Node) => node is Element;\n  isText: (node: Node) => node is Text;\n  isComment: (node: Node) => node is Comment;\n  /**\n   * @experimental\n   * @todo Make it required when the fragment is considered stable.\n   */\n  isDocumentFragment?: (node: Node) => node is DocumentFragment;\n}\n\nfunction createElement(\n  tagName: any,\n  options?: ElementCreationOptions\n): HTMLElement {\n  return document.createElement(tagName, options);\n}\n\nfunction createElementNS(\n  namespaceURI: string,\n  qualifiedName: string,\n  options?: ElementCreationOptions\n): Element {\n  return document.createElementNS(namespaceURI, qualifiedName, options);\n}\n\nfunction createDocumentFragment(): SnabbdomFragment {\n  return parseFragment(document.createDocumentFragment());\n}\n\nfunction createTextNode(text: string): Text {\n  return document.createTextNode(text);\n}\n\nfunction createComment(text: string): Comment {\n  return document.createComment(text);\n}\n\nfunction insertBefore(\n  parentNode: Node,\n  newNode: Node,\n  referenceNode: Node | null\n): void {\n  if (isDocumentFragment(parentNode)) {\n    let node: Node | null = parentNode;\n    while (node && isDocumentFragment(node)) {\n      const fragment = parseFragment(node);\n      node = fragment.parent;\n    }\n    parentNode = node ?? parentNode;\n  }\n  if (isDocumentFragment(newNode)) {\n    newNode = parseFragment(newNode, parentNode);\n  }\n  if (referenceNode && isDocumentFragment(referenceNode)) {\n    referenceNode = parseFragment(referenceNode).firstChildNode;\n  }\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild(node: Node, child: Node): void {\n  node.removeChild(child);\n}\n\nfunction appendChild(node: Node, child: Node): void {\n  if (isDocumentFragment(child)) {\n    child = parseFragment(child, node);\n  }\n  node.appendChild(child);\n}\n\nfunction parentNode(node: Node): Node | null {\n  if (isDocumentFragment(node)) {\n    while (node && isDocumentFragment(node)) {\n      const fragment = parseFragment(node);\n      node = fragment.parent as Node;\n    }\n    return node ?? null;\n  }\n  return node.parentNode;\n}\n\nfunction nextSibling(node: Node): Node | null {\n  if (isDocumentFragment(node)) {\n    const fragment = parseFragment(node);\n    const parent = parentNode(fragment);\n    if (parent && fragment.lastChildNode) {\n      const children = Array.from(parent.childNodes);\n      const index = children.indexOf(fragment.lastChildNode);\n      return children[index + 1] ?? null;\n    }\n    return null;\n  }\n  return node.nextSibling;\n}\n\nfunction tagName(elm: Element): string {\n  return elm.tagName;\n}\n\nfunction setTextContent(node: Node, text: string | null): void {\n  node.textContent = text;\n}\n\nfunction getTextContent(node: Node): string | null {\n  return node.textContent;\n}\n\nfunction isElement(node: Node): node is Element {\n  return node.nodeType === 1;\n}\n\nfunction isText(node: Node): node is Text {\n  return node.nodeType === 3;\n}\n\nfunction isComment(node: Node): node is Comment {\n  return node.nodeType === 8;\n}\n\nfunction isDocumentFragment(node: Node): node is DocumentFragment {\n  return node.nodeType === 11;\n}\n\nfunction parseFragment(\n  fragmentNode: DocumentFragment,\n  parentNode?: Node | null\n): SnabbdomFragment {\n  const fragment = fragmentNode as SnabbdomFragment;\n  fragment.parent ??= parentNode ?? null;\n  fragment.firstChildNode ??= fragmentNode.firstChild;\n  fragment.lastChildNode ??= fragmentNode.lastChild;\n  return fragment;\n}\n\nexport const htmlDomApi: DOMAPI = {\n  createElement,\n  createElementNS,\n  createTextNode,\n  createDocumentFragment,\n  createComment,\n  insertBefore,\n  removeChild,\n  appendChild,\n  parentNode,\n  nextSibling,\n  tagName,\n  setTextContent,\n  getTextContent,\n  isElement,\n  isText,\n  isComment,\n  isDocumentFragment,\n};\n","// core\nexport { DOMAPI, htmlDomApi } from \"./htmldomapi\";\nexport { init, Options } from \"./init\";\nexport { ThunkData, Thunk, ThunkFn, thunk } from \"./thunk\";\nexport { Key, VNode, VNodeData, vnode } from \"./vnode\";\n\n// helpers\nexport { AttachData, attachTo } from \"./helpers/attachto\";\nexport { array, primitive } from \"./is\";\nexport { toVNode } from \"./tovnode\";\nexport {\n  VNodes,\n  VNodeChildElement,\n  ArrayOrElement,\n  VNodeChildren,\n  h,\n  fragment,\n} from \"./h\";\n\n// types\nexport * from \"./hooks\";\nexport { Module } from \"./modules/module\";\n\n// modules\nexport { Attrs, attributesModule } from \"./modules/attributes\";\nexport { Classes, classModule } from \"./modules/class\";\nexport { Dataset, datasetModule } from \"./modules/dataset\";\nexport { On, eventListenersModule } from \"./modules/eventlisteners\";\nexport { Props, propsModule } from \"./modules/props\";\nexport { VNodeStyle, styleModule } from \"./modules/style\";\n\n// JSX\nexport {\n  JsxVNodeChild,\n  JsxVNodeChildren,\n  FunctionComponent,\n  jsx,\n  Fragment,\n} from \"./jsx\";\n","import { Module } from \"./modules/module\";\nimport { vnode, VNode } from \"./vnode\";\nimport * as is from \"./is\";\nimport { htmlDomApi, DOMAPI } from \"./htmldomapi\";\n\ntype NonUndefined<T> = T extends undefined ? never : T;\n\nfunction isUndef(s: any): boolean {\n  return s === undefined;\n}\nfunction isDef<A>(s: A): s is NonUndefined<A> {\n  return s !== undefined;\n}\n\ntype VNodeQueue = VNode[];\n\nconst emptyNode = vnode(\"\", {}, [], undefined, undefined);\n\nfunction sameVnode(vnode1: VNode, vnode2: VNode): boolean {\n  const isSameKey = vnode1.key === vnode2.key;\n  const isSameIs = vnode1.data?.is === vnode2.data?.is;\n  const isSameSel = vnode1.sel === vnode2.sel;\n  const isSameTextOrFragment =\n    !vnode1.sel && vnode1.sel === vnode2.sel\n      ? typeof vnode1.text === typeof vnode2.text\n      : true;\n\n  return isSameSel && isSameKey && isSameIs && isSameTextOrFragment;\n}\n\n/**\n * @todo Remove this function when the document fragment is considered stable.\n */\nfunction documentFragmentIsNotSupported(): never {\n  throw new Error(\"The document fragment is not supported on this platform.\");\n}\n\nfunction isElement(\n  api: DOMAPI,\n  vnode: Element | DocumentFragment | VNode\n): vnode is Element {\n  return api.isElement(vnode as any);\n}\n\nfunction isDocumentFragment(\n  api: DOMAPI,\n  vnode: DocumentFragment | VNode\n): vnode is DocumentFragment {\n  return api.isDocumentFragment!(vnode as any);\n}\n\ntype KeyToIndexMap = { [key: string]: number };\n\ntype ArraysOf<T> = {\n  [K in keyof T]: Array<T[K]>;\n};\n\ntype ModuleHooks = ArraysOf<Required<Module>>;\n\nfunction createKeyToOldIdx(\n  children: VNode[],\n  beginIdx: number,\n  endIdx: number\n): KeyToIndexMap {\n  const map: KeyToIndexMap = {};\n  for (let i = beginIdx; i <= endIdx; ++i) {\n    const key = children[i]?.key;\n    if (key !== undefined) {\n      map[key as string] = i;\n    }\n  }\n  return map;\n}\n\nconst hooks: Array<keyof Module> = [\n  \"create\",\n  \"update\",\n  \"remove\",\n  \"destroy\",\n  \"pre\",\n  \"post\",\n];\n\n// TODO Should `domApi` be put into this in the next major version bump?\nexport type Options = {\n  experimental?: {\n    fragments?: boolean;\n  };\n};\n\nexport function init(\n  modules: Array<Partial<Module>>,\n  domApi?: DOMAPI,\n  options?: Options\n) {\n  const cbs: ModuleHooks = {\n    create: [],\n    update: [],\n    remove: [],\n    destroy: [],\n    pre: [],\n    post: [],\n  };\n\n  const api: DOMAPI = domApi !== undefined ? domApi : htmlDomApi;\n\n  for (const hook of hooks) {\n    for (const module of modules) {\n      const currentHook = module[hook];\n      if (currentHook !== undefined) {\n        (cbs[hook] as any[]).push(currentHook);\n      }\n    }\n  }\n\n  function emptyNodeAt(elm: Element) {\n    const id = elm.id ? \"#\" + elm.id : \"\";\n\n    // elm.className doesn't return a string when elm is an SVG element inside a shadowRoot.\n    // https://stackoverflow.com/questions/29454340/detecting-classname-of-svganimatedstring\n    const classes = elm.getAttribute(\"class\");\n\n    const c = classes ? \".\" + classes.split(\" \").join(\".\") : \"\";\n    return vnode(\n      api.tagName(elm).toLowerCase() + id + c,\n      {},\n      [],\n      undefined,\n      elm\n    );\n  }\n\n  function emptyDocumentFragmentAt(frag: DocumentFragment) {\n    return vnode(undefined, {}, [], undefined, frag);\n  }\n\n  function createRmCb(childElm: Node, listeners: number) {\n    return function rmCb() {\n      if (--listeners === 0) {\n        const parent = api.parentNode(childElm) as Node;\n        api.removeChild(parent, childElm);\n      }\n    };\n  }\n\n  function createElm(vnode: VNode, insertedVnodeQueue: VNodeQueue): Node {\n    let i: any;\n    let data = vnode.data;\n    if (data !== undefined) {\n      const init = data.hook?.init;\n      if (isDef(init)) {\n        init(vnode);\n        data = vnode.data;\n      }\n    }\n    const children = vnode.children;\n    const sel = vnode.sel;\n    if (sel === \"!\") {\n      if (isUndef(vnode.text)) {\n        vnode.text = \"\";\n      }\n      vnode.elm = api.createComment(vnode.text!);\n    } else if (sel !== undefined) {\n      // Parse selector\n      const hashIdx = sel.indexOf(\"#\");\n      const dotIdx = sel.indexOf(\".\", hashIdx);\n      const hash = hashIdx > 0 ? hashIdx : sel.length;\n      const dot = dotIdx > 0 ? dotIdx : sel.length;\n      const tag =\n        hashIdx !== -1 || dotIdx !== -1\n          ? sel.slice(0, Math.min(hash, dot))\n          : sel;\n      const elm = (vnode.elm =\n        isDef(data) && isDef((i = data.ns))\n          ? api.createElementNS(i, tag, data)\n          : api.createElement(tag, data));\n      if (hash < dot) elm.setAttribute(\"id\", sel.slice(hash + 1, dot));\n      if (dotIdx > 0)\n        elm.setAttribute(\"class\", sel.slice(dot + 1).replace(/\\./g, \" \"));\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n          const ch = children[i];\n          if (ch != null) {\n            api.appendChild(elm, createElm(ch as VNode, insertedVnodeQueue));\n          }\n        }\n      } else if (is.primitive(vnode.text)) {\n        api.appendChild(elm, api.createTextNode(vnode.text));\n      }\n      const hook = vnode.data!.hook;\n      if (isDef(hook)) {\n        hook.create?.(emptyNode, vnode);\n        if (hook.insert) {\n          insertedVnodeQueue.push(vnode);\n        }\n      }\n    } else if (options?.experimental?.fragments && vnode.children) {\n      vnode.elm = (\n        api.createDocumentFragment ?? documentFragmentIsNotSupported\n      )();\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      for (i = 0; i < vnode.children.length; ++i) {\n        const ch = vnode.children[i];\n        if (ch != null) {\n          api.appendChild(\n            vnode.elm,\n            createElm(ch as VNode, insertedVnodeQueue)\n          );\n        }\n      }\n    } else {\n      vnode.elm = api.createTextNode(vnode.text!);\n    }\n    return vnode.elm;\n  }\n\n  function addVnodes(\n    parentElm: Node,\n    before: Node | null,\n    vnodes: VNode[],\n    startIdx: number,\n    endIdx: number,\n    insertedVnodeQueue: VNodeQueue\n  ) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      const ch = vnodes[startIdx];\n      if (ch != null) {\n        api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n      }\n    }\n  }\n\n  function invokeDestroyHook(vnode: VNode) {\n    const data = vnode.data;\n    if (data !== undefined) {\n      data?.hook?.destroy?.(vnode);\n      for (let i = 0; i < cbs.destroy.length; ++i) cbs.destroy[i](vnode);\n      if (vnode.children !== undefined) {\n        for (let j = 0; j < vnode.children.length; ++j) {\n          const child = vnode.children[j];\n          if (child != null && typeof child !== \"string\") {\n            invokeDestroyHook(child);\n          }\n        }\n      }\n    }\n  }\n\n  function removeVnodes(\n    parentElm: Node,\n    vnodes: VNode[],\n    startIdx: number,\n    endIdx: number\n  ): void {\n    for (; startIdx <= endIdx; ++startIdx) {\n      let listeners: number;\n      let rm: () => void;\n      const ch = vnodes[startIdx];\n      if (ch != null) {\n        if (isDef(ch.sel)) {\n          invokeDestroyHook(ch);\n          listeners = cbs.remove.length + 1;\n          rm = createRmCb(ch.elm!, listeners);\n          for (let i = 0; i < cbs.remove.length; ++i) cbs.remove[i](ch, rm);\n          const removeHook = ch?.data?.hook?.remove;\n          if (isDef(removeHook)) {\n            removeHook(ch, rm);\n          } else {\n            rm();\n          }\n        } else if (ch.children) {\n          // Fragment node\n          invokeDestroyHook(ch);\n          removeVnodes(\n            parentElm,\n            ch.children as VNode[],\n            0,\n            ch.children.length - 1\n          );\n        } else {\n          // Text node\n          api.removeChild(parentElm, ch.elm!);\n        }\n      }\n    }\n  }\n\n  function updateChildren(\n    parentElm: Node,\n    oldCh: VNode[],\n    newCh: VNode[],\n    insertedVnodeQueue: VNodeQueue\n  ) {\n    let oldStartIdx = 0;\n    let newStartIdx = 0;\n    let oldEndIdx = oldCh.length - 1;\n    let oldStartVnode = oldCh[0];\n    let oldEndVnode = oldCh[oldEndIdx];\n    let newEndIdx = newCh.length - 1;\n    let newStartVnode = newCh[0];\n    let newEndVnode = newCh[newEndIdx];\n    let oldKeyToIdx: KeyToIndexMap | undefined;\n    let idxInOld: number;\n    let elmToMove: VNode;\n    let before: any;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (oldStartVnode == null) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n      } else if (oldEndVnode == null) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (newStartVnode == null) {\n        newStartVnode = newCh[++newStartIdx];\n      } else if (newEndVnode == null) {\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) {\n        // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n        api.insertBefore(\n          parentElm,\n          oldStartVnode.elm!,\n          api.nextSibling(oldEndVnode.elm!)\n        );\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) {\n        // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n        api.insertBefore(parentElm, oldEndVnode.elm!, oldStartVnode.elm!);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (oldKeyToIdx === undefined) {\n          oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        }\n        idxInOld = oldKeyToIdx[newStartVnode.key as string];\n        if (isUndef(idxInOld)) {\n          // New element\n          api.insertBefore(\n            parentElm,\n            createElm(newStartVnode, insertedVnodeQueue),\n            oldStartVnode.elm!\n          );\n        } else {\n          elmToMove = oldCh[idxInOld];\n          if (elmToMove.sel !== newStartVnode.sel) {\n            api.insertBefore(\n              parentElm,\n              createElm(newStartVnode, insertedVnodeQueue),\n              oldStartVnode.elm!\n            );\n          } else {\n            patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n            oldCh[idxInOld] = undefined as any;\n            api.insertBefore(parentElm, elmToMove.elm!, oldStartVnode.elm!);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n\n    if (newStartIdx <= newEndIdx) {\n      before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(\n        parentElm,\n        before,\n        newCh,\n        newStartIdx,\n        newEndIdx,\n        insertedVnodeQueue\n      );\n    }\n    if (oldStartIdx <= oldEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function patchVnode(\n    oldVnode: VNode,\n    vnode: VNode,\n    insertedVnodeQueue: VNodeQueue\n  ) {\n    const hook = vnode.data?.hook;\n    hook?.prepatch?.(oldVnode, vnode);\n    const elm = (vnode.elm = oldVnode.elm)!;\n    if (oldVnode === vnode) return;\n    if (\n      vnode.data !== undefined ||\n      (isDef(vnode.text) && vnode.text !== oldVnode.text)\n    ) {\n      vnode.data ??= {};\n      oldVnode.data ??= {};\n      for (let i = 0; i < cbs.update.length; ++i)\n        cbs.update[i](oldVnode, vnode);\n      vnode.data?.hook?.update?.(oldVnode, vnode);\n    }\n    const oldCh = oldVnode.children as VNode[];\n    const ch = vnode.children as VNode[];\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n      } else if (isDef(ch)) {\n        if (isDef(oldVnode.text)) api.setTextContent(elm, \"\");\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        api.setTextContent(elm, \"\");\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n      api.setTextContent(elm, vnode.text!);\n    }\n    hook?.postpatch?.(oldVnode, vnode);\n  }\n\n  return function patch(\n    oldVnode: VNode | Element | DocumentFragment,\n    vnode: VNode\n  ): VNode {\n    let i: number, elm: Node, parent: Node;\n    const insertedVnodeQueue: VNodeQueue = [];\n    for (i = 0; i < cbs.pre.length; ++i) cbs.pre[i]();\n\n    if (isElement(api, oldVnode)) {\n      oldVnode = emptyNodeAt(oldVnode);\n    } else if (isDocumentFragment(api, oldVnode)) {\n      oldVnode = emptyDocumentFragmentAt(oldVnode);\n    }\n\n    if (sameVnode(oldVnode, vnode)) {\n      patchVnode(oldVnode, vnode, insertedVnodeQueue);\n    } else {\n      elm = oldVnode.elm!;\n      parent = api.parentNode(elm) as Node;\n\n      createElm(vnode, insertedVnodeQueue);\n\n      if (parent !== null) {\n        api.insertBefore(parent, vnode.elm!, api.nextSibling(elm));\n        removeVnodes(parent, [oldVnode], 0, 0);\n      }\n    }\n\n    for (i = 0; i < insertedVnodeQueue.length; ++i) {\n      insertedVnodeQueue[i].data!.hook!.insert!(insertedVnodeQueue[i]);\n    }\n    for (i = 0; i < cbs.post.length; ++i) cbs.post[i]();\n    return vnode;\n  };\n}\n","export const array = Array.isArray;\nexport function primitive(s: any): s is string | number {\n  return (\n    typeof s === \"string\" ||\n    typeof s === \"number\" ||\n    s instanceof String ||\n    s instanceof Number\n  );\n}\n","/* eslint-disable @typescript-eslint/no-namespace, import/export */\nimport { Key, vnode, VNode, VNodeData } from \"./vnode\";\nimport { h, ArrayOrElement } from \"./h\";\n\n// See https://www.typescriptlang.org/docs/handbook/jsx.html#type-checking\nnamespace JSXInternal {\n  export type Element = VNode;\n  export interface IntrinsicElements {\n    [elemName: string]: VNodeData;\n  }\n}\n\n// for conditional rendering we support boolean child element e.g cond && <tag />\nexport type JsxVNodeChild =\n  | VNode\n  | string\n  | number\n  | boolean\n  | undefined\n  | null;\nexport type JsxVNodeChildren = ArrayOrElement<JsxVNodeChild>;\n\nexport type FunctionComponent = (\n  props: { [prop: string]: any } | null,\n  children?: VNode[]\n) => VNode;\n\nexport function Fragment(\n  data: { key?: Key } | null,\n  ...children: JsxVNodeChildren[]\n): VNode {\n  const flatChildren = flattenAndFilter(children, []);\n\n  if (\n    flatChildren.length === 1 &&\n    !flatChildren[0].sel &&\n    flatChildren[0].text\n  ) {\n    // only child is a simple text node, pass as text for a simpler vtree\n    return vnode(\n      undefined,\n      undefined,\n      undefined,\n      flatChildren[0].text,\n      undefined\n    );\n  } else {\n    return vnode(undefined, data ?? {}, flatChildren, undefined, undefined);\n  }\n}\n\nfunction flattenAndFilter(\n  children: JsxVNodeChildren[],\n  flattened: VNode[]\n): VNode[] {\n  for (const child of children) {\n    // filter out falsey children, except 0 since zero can be a valid value e.g inside a chart\n    if (\n      child !== undefined &&\n      child !== null &&\n      child !== false &&\n      child !== \"\"\n    ) {\n      if (Array.isArray(child)) {\n        flattenAndFilter(child, flattened);\n      } else if (\n        typeof child === \"string\" ||\n        typeof child === \"number\" ||\n        typeof child === \"boolean\"\n      ) {\n        flattened.push(\n          vnode(undefined, undefined, undefined, String(child), undefined)\n        );\n      } else {\n        flattened.push(child);\n      }\n    }\n  }\n  return flattened;\n}\n\n/**\n * jsx/tsx compatible factory function\n * see: https://www.typescriptlang.org/docs/handbook/jsx.html#factory-functions\n */\nexport function jsx(\n  tag: string | FunctionComponent,\n  data: VNodeData | null,\n  ...children: JsxVNodeChildren[]\n): VNode {\n  const flatChildren = flattenAndFilter(children, []);\n  if (typeof tag === \"function\") {\n    // tag is a function component\n    return tag(data, flatChildren);\n  } else {\n    if (\n      flatChildren.length === 1 &&\n      !flatChildren[0].sel &&\n      flatChildren[0].text\n    ) {\n      // only child is a simple text node, pass as text for a simpler vtree\n      return h(tag, data, flatChildren[0].text);\n    } else {\n      return h(tag, data, flatChildren);\n    }\n  }\n}\n\nexport namespace jsx {\n  export import JSX = JSXInternal; // eslint-disable-line @typescript-eslint/no-unused-vars\n}\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\nexport type Attrs = Record<string, string | number | boolean>;\n\nconst xlinkNS = \"http://www.w3.org/1999/xlink\";\nconst xmlNS = \"http://www.w3.org/XML/1998/namespace\";\nconst colonChar = 58;\nconst xChar = 120;\n\nfunction updateAttrs(oldVnode: VNode, vnode: VNode): void {\n  let key: string;\n  const elm: Element = vnode.elm as Element;\n  let oldAttrs = (oldVnode.data as VNodeData).attrs;\n  let attrs = (vnode.data as VNodeData).attrs;\n\n  if (!oldAttrs && !attrs) return;\n  if (oldAttrs === attrs) return;\n  oldAttrs = oldAttrs || {};\n  attrs = attrs || {};\n\n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    const cur = attrs[key];\n    const old = oldAttrs[key];\n    if (old !== cur) {\n      if (cur === true) {\n        elm.setAttribute(key, \"\");\n      } else if (cur === false) {\n        elm.removeAttribute(key);\n      } else {\n        if (key.charCodeAt(0) !== xChar) {\n          elm.setAttribute(key, cur as any);\n        } else if (key.charCodeAt(3) === colonChar) {\n          // Assume xml namespace\n          elm.setAttributeNS(xmlNS, key, cur as any);\n        } else if (key.charCodeAt(5) === colonChar) {\n          // Assume xlink namespace\n          elm.setAttributeNS(xlinkNS, key, cur as any);\n        } else {\n          elm.setAttribute(key, cur as any);\n        }\n      }\n    }\n  }\n  // remove removed attributes\n  // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n  // the other option is to remove all attributes with value == undefined\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      elm.removeAttribute(key);\n    }\n  }\n}\n\nexport const attributesModule: Module = {\n  create: updateAttrs,\n  update: updateAttrs,\n};\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\nexport type Classes = Record<string, boolean>;\n\nfunction updateClass(oldVnode: VNode, vnode: VNode): void {\n  let cur: any;\n  let name: string;\n  const elm: Element = vnode.elm as Element;\n  let oldClass = (oldVnode.data as VNodeData).class;\n  let klass = (vnode.data as VNodeData).class;\n\n  if (!oldClass && !klass) return;\n  if (oldClass === klass) return;\n  oldClass = oldClass || {};\n  klass = klass || {};\n\n  for (name in oldClass) {\n    if (oldClass[name] && !Object.prototype.hasOwnProperty.call(klass, name)) {\n      // was `true` and now not provided\n      elm.classList.remove(name);\n    }\n  }\n  for (name in klass) {\n    cur = klass[name];\n    if (cur !== oldClass[name]) {\n      (elm.classList as any)[cur ? \"add\" : \"remove\"](name);\n    }\n  }\n}\n\nexport const classModule: Module = { create: updateClass, update: updateClass };\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\nexport type Dataset = Record<string, string>;\n\nconst CAPS_REGEX = /[A-Z]/g;\n\nfunction updateDataset(oldVnode: VNode, vnode: VNode): void {\n  const elm: HTMLElement = vnode.elm as HTMLElement;\n  let oldDataset = (oldVnode.data as VNodeData).dataset;\n  let dataset = (vnode.data as VNodeData).dataset;\n  let key: string;\n\n  if (!oldDataset && !dataset) return;\n  if (oldDataset === dataset) return;\n  oldDataset = oldDataset || {};\n  dataset = dataset || {};\n  const d = elm.dataset;\n\n  for (key in oldDataset) {\n    if (!dataset[key]) {\n      if (d) {\n        if (key in d) {\n          delete d[key];\n        }\n      } else {\n        elm.removeAttribute(\n          \"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase()\n        );\n      }\n    }\n  }\n  for (key in dataset) {\n    if (oldDataset[key] !== dataset[key]) {\n      if (d) {\n        d[key] = dataset[key];\n      } else {\n        elm.setAttribute(\n          \"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase(),\n          dataset[key]\n        );\n      }\n    }\n  }\n}\n\nexport const datasetModule: Module = {\n  create: updateDataset,\n  update: updateDataset,\n};\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\ntype Listener<T> = (this: VNode, ev: T, vnode: VNode) => void;\n\nexport type On = {\n  [N in keyof HTMLElementEventMap]?:\n    | Listener<HTMLElementEventMap[N]>\n    | Array<Listener<HTMLElementEventMap[N]>>;\n} & {\n  [event: string]: Listener<any> | Array<Listener<any>>;\n};\n\ntype SomeListener<N extends keyof HTMLElementEventMap> =\n  | Listener<HTMLElementEventMap[N]>\n  | Listener<any>;\n\nfunction invokeHandler<N extends keyof HTMLElementEventMap>(\n  handler: SomeListener<N> | Array<SomeListener<N>>,\n  vnode: VNode,\n  event?: Event\n): void {\n  if (typeof handler === \"function\") {\n    // call function handler\n    handler.call(vnode, event, vnode);\n  } else if (typeof handler === \"object\") {\n    // call multiple handlers\n    for (let i = 0; i < handler.length; i++) {\n      invokeHandler(handler[i], vnode, event);\n    }\n  }\n}\n\nfunction handleEvent(event: Event, vnode: VNode) {\n  const name = event.type;\n  const on = (vnode.data as VNodeData).on;\n\n  // call event handler(s) if exists\n  if (on && on[name]) {\n    invokeHandler(on[name], vnode, event);\n  }\n}\n\nfunction createListener() {\n  return function handler(event: Event) {\n    handleEvent(event, (handler as any).vnode);\n  };\n}\n\nfunction updateEventListeners(oldVnode: VNode, vnode?: VNode): void {\n  const oldOn = (oldVnode.data as VNodeData).on;\n  const oldListener = (oldVnode as any).listener;\n  const oldElm: Element = oldVnode.elm as Element;\n  const on = vnode && (vnode.data as VNodeData).on;\n  const elm: Element = (vnode && vnode.elm) as Element;\n  let name: string;\n\n  // optimization for reused immutable handlers\n  if (oldOn === on) {\n    return;\n  }\n\n  // remove existing listeners which no longer used\n  if (oldOn && oldListener) {\n    // if element changed or deleted we remove all existing listeners unconditionally\n    if (!on) {\n      for (name in oldOn) {\n        // remove listener if element was changed or existing listeners removed\n        oldElm.removeEventListener(name, oldListener, false);\n      }\n    } else {\n      for (name in oldOn) {\n        // remove listener if existing listener removed\n        if (!on[name]) {\n          oldElm.removeEventListener(name, oldListener, false);\n        }\n      }\n    }\n  }\n\n  // add new listeners which has not already attached\n  if (on) {\n    // reuse existing listener or create new\n    const listener = ((vnode as any).listener =\n      (oldVnode as any).listener || createListener());\n    // update vnode for listener\n    listener.vnode = vnode;\n\n    // if element changed or added we add all needed listeners unconditionally\n    if (!oldOn) {\n      for (name in on) {\n        // add listener if element was changed or new listeners added\n        elm.addEventListener(name, listener, false);\n      }\n    } else {\n      for (name in on) {\n        // add listener if new listener added\n        if (!oldOn[name]) {\n          elm.addEventListener(name, listener, false);\n        }\n      }\n    }\n  }\n}\n\nexport const eventListenersModule: Module = {\n  create: updateEventListeners,\n  update: updateEventListeners,\n  destroy: updateEventListeners,\n};\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\nexport type Props = Record<string, any>;\n\nfunction updateProps(oldVnode: VNode, vnode: VNode): void {\n  let key: string;\n  let cur: any;\n  let old: any;\n  const elm = vnode.elm;\n  let oldProps = (oldVnode.data as VNodeData).props;\n  let props = (vnode.data as VNodeData).props;\n\n  if (!oldProps && !props) return;\n  if (oldProps === props) return;\n  oldProps = oldProps || {};\n  props = props || {};\n\n  for (key in props) {\n    cur = props[key];\n    old = oldProps[key];\n    if (old !== cur && (key !== \"value\" || (elm as any)[key] !== cur)) {\n      (elm as any)[key] = cur;\n    }\n  }\n}\n\nexport const propsModule: Module = { create: updateProps, update: updateProps };\n","import { VNode, VNodeData } from \"../vnode\";\nimport { Module } from \"./module\";\n\nexport type VNodeStyle = Record<string, string> & {\n  delayed?: Record<string, string>;\n  remove?: Record<string, string>;\n};\n\n// Bindig `requestAnimationFrame` like this fixes a bug in IE/Edge. See #360 and #409.\nconst raf =\n  (typeof window !== \"undefined\" &&\n    window.requestAnimationFrame.bind(window)) ||\n  setTimeout;\nconst nextFrame = function (fn: any) {\n  raf(function () {\n    raf(fn);\n  });\n};\nlet reflowForced = false;\n\nfunction setNextFrame(obj: any, prop: string, val: any): void {\n  nextFrame(function () {\n    obj[prop] = val;\n  });\n}\n\nfunction updateStyle(oldVnode: VNode, vnode: VNode): void {\n  let cur: any;\n  let name: string;\n  const elm = vnode.elm;\n  let oldStyle = (oldVnode.data as VNodeData).style;\n  let style = (vnode.data as VNodeData).style;\n\n  if (!oldStyle && !style) return;\n  if (oldStyle === style) return;\n  oldStyle = oldStyle || {};\n  style = style || {};\n  const oldHasDel = \"delayed\" in oldStyle;\n\n  for (name in oldStyle) {\n    if (!style[name]) {\n      if (name[0] === \"-\" && name[1] === \"-\") {\n        (elm as any).style.removeProperty(name);\n      } else {\n        (elm as any).style[name] = \"\";\n      }\n    }\n  }\n  for (name in style) {\n    cur = style[name];\n    if (name === \"delayed\" && style.delayed) {\n      for (const name2 in style.delayed) {\n        cur = style.delayed[name2];\n        if (!oldHasDel || cur !== (oldStyle.delayed as any)[name2]) {\n          setNextFrame((elm as any).style, name2, cur);\n        }\n      }\n    } else if (name !== \"remove\" && cur !== oldStyle[name]) {\n      if (name[0] === \"-\" && name[1] === \"-\") {\n        (elm as any).style.setProperty(name, cur);\n      } else {\n        (elm as any).style[name] = cur;\n      }\n    }\n  }\n}\n\nfunction applyDestroyStyle(vnode: VNode): void {\n  let style: any;\n  let name: string;\n  const elm = vnode.elm;\n  const s = (vnode.data as VNodeData).style;\n  if (!s || !(style = s.destroy)) return;\n  for (name in style) {\n    (elm as any).style[name] = style[name];\n  }\n}\n\nfunction applyRemoveStyle(vnode: VNode, rm: () => void): void {\n  const s = (vnode.data as VNodeData).style;\n  if (!s || !s.remove) {\n    rm();\n    return;\n  }\n  if (!reflowForced) {\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    (vnode.elm as any).offsetLeft;\n    reflowForced = true;\n  }\n  let name: string;\n  const elm = vnode.elm;\n  let i = 0;\n  const style = s.remove;\n  let amount = 0;\n  const applied: string[] = [];\n  for (name in style) {\n    applied.push(name);\n    (elm as any).style[name] = style[name];\n  }\n  const compStyle = getComputedStyle(elm as Element);\n  const props = (compStyle as any)[\"transition-property\"].split(\", \");\n  for (; i < props.length; ++i) {\n    if (applied.indexOf(props[i]) !== -1) amount++;\n  }\n  (elm as Element).addEventListener(\n    \"transitionend\",\n    function (ev: TransitionEvent) {\n      if (ev.target === elm) --amount;\n      if (amount === 0) rm();\n    }\n  );\n}\n\nfunction forceReflow() {\n  reflowForced = false;\n}\n\nexport const styleModule: Module = {\n  pre: forceReflow,\n  create: updateStyle,\n  update: updateStyle,\n  destroy: applyDestroyStyle,\n  remove: applyRemoveStyle,\n};\n","import { VNode, VNodeData } from \"./vnode\";\nimport { h, addNS } from \"./h\";\n\nexport interface ThunkData extends VNodeData {\n  fn: () => VNode;\n  args: any[];\n}\n\nexport interface Thunk extends VNode {\n  data: ThunkData;\n}\n\nexport interface ThunkFn {\n  (sel: string, fn: (...args: any[]) => any, args: any[]): Thunk;\n  (sel: string, key: any, fn: (...args: any[]) => any, args: any[]): Thunk;\n}\n\nfunction copyToThunk(vnode: VNode, thunk: VNode): void {\n  const ns = thunk.data?.ns;\n  (vnode.data as VNodeData).fn = (thunk.data as VNodeData).fn;\n  (vnode.data as VNodeData).args = (thunk.data as VNodeData).args;\n  thunk.data = vnode.data;\n  thunk.children = vnode.children;\n  thunk.text = vnode.text;\n  thunk.elm = vnode.elm;\n  if (ns) addNS(thunk.data, thunk.children, thunk.sel);\n}\n\nfunction init(thunk: VNode): void {\n  const cur = thunk.data as VNodeData;\n  const vnode = (cur.fn as any)(...cur.args!);\n  copyToThunk(vnode, thunk);\n}\n\nfunction prepatch(oldVnode: VNode, thunk: VNode): void {\n  let i: number;\n  const old = oldVnode.data as VNodeData;\n  const cur = thunk.data as VNodeData;\n  const oldArgs = old.args;\n  const args = cur.args;\n  if (old.fn !== cur.fn || (oldArgs as any).length !== (args as any).length) {\n    copyToThunk((cur.fn as any)(...args!), thunk);\n    return;\n  }\n  for (i = 0; i < (args as any).length; ++i) {\n    if ((oldArgs as any)[i] !== (args as any)[i]) {\n      copyToThunk((cur.fn as any)(...args!), thunk);\n      return;\n    }\n  }\n  copyToThunk(oldVnode, thunk);\n}\n\nexport const thunk = function thunk(\n  sel: string,\n  key?: any,\n  fn?: any,\n  args?: any\n): VNode {\n  if (args === undefined) {\n    args = fn;\n    fn = key;\n    key = undefined;\n  }\n  return h(sel, {\n    key: key,\n    hook: { init, prepatch },\n    fn: fn,\n    args: args,\n  });\n} as ThunkFn;\n","import { addNS } from \"./h\";\nimport { vnode, VNode } from \"./vnode\";\nimport { htmlDomApi, DOMAPI } from \"./htmldomapi\";\n\nexport function toVNode(node: Node, domApi?: DOMAPI): VNode {\n  const api: DOMAPI = domApi !== undefined ? domApi : htmlDomApi;\n  let text: string;\n  if (api.isElement(node)) {\n    const id = node.id ? \"#\" + node.id : \"\";\n    const cn = node.getAttribute(\"class\");\n    const c = cn ? \".\" + cn.split(\" \").join(\".\") : \"\";\n    const sel = api.tagName(node).toLowerCase() + id + c;\n    const attrs: any = {};\n    const dataset: Record<string, string> = {};\n    const data: Record<string, any> = {};\n\n    const children: VNode[] = [];\n    let name: string;\n    let i: number, n: number;\n    const elmAttrs = node.attributes;\n    const elmChildren = node.childNodes;\n    for (i = 0, n = elmAttrs.length; i < n; i++) {\n      name = elmAttrs[i].nodeName;\n      if (\n        name[0] === \"d\" &&\n        name[1] === \"a\" &&\n        name[2] === \"t\" &&\n        name[3] === \"a\" &&\n        name[4] === \"-\"\n      ) {\n        dataset[name.slice(5)] = elmAttrs[i].nodeValue || \"\";\n      } else if (name !== \"id\" && name !== \"class\") {\n        attrs[name] = elmAttrs[i].nodeValue;\n      }\n    }\n    for (i = 0, n = elmChildren.length; i < n; i++) {\n      children.push(toVNode(elmChildren[i], domApi));\n    }\n\n    if (Object.keys(attrs).length > 0) data.attrs = attrs;\n    if (Object.keys(dataset).length > 0) data.dataset = dataset;\n\n    if (\n      sel[0] === \"s\" &&\n      sel[1] === \"v\" &&\n      sel[2] === \"g\" &&\n      (sel.length === 3 || sel[3] === \".\" || sel[3] === \"#\")\n    ) {\n      addNS(data, children, sel);\n    }\n    return vnode(sel, data, children, undefined, node);\n  } else if (api.isText(node)) {\n    text = api.getTextContent(node) as string;\n    return vnode(undefined, undefined, undefined, text, node);\n  } else if (api.isComment(node)) {\n    text = api.getTextContent(node) as string;\n    return vnode(\"!\", {}, [], text, node as any);\n  } else {\n    return vnode(\"\", {}, [], undefined, node as any);\n  }\n}\n","import { Hooks } from \"./hooks\";\nimport { AttachData } from \"./helpers/attachto\";\nimport { VNodeStyle } from \"./modules/style\";\nimport { On } from \"./modules/eventlisteners\";\nimport { Attrs } from \"./modules/attributes\";\nimport { Classes } from \"./modules/class\";\nimport { Props } from \"./modules/props\";\nimport { Dataset } from \"./modules/dataset\";\n\nexport type Key = string | number | symbol;\n\nexport interface VNode {\n  sel: string | undefined;\n  data: VNodeData | undefined;\n  children: Array<VNode | string> | undefined;\n  elm: Node | undefined;\n  text: string | undefined;\n  key: Key | undefined;\n}\n\nexport interface VNodeData {\n  props?: Props;\n  attrs?: Attrs;\n  class?: Classes;\n  style?: VNodeStyle;\n  dataset?: Dataset;\n  on?: On;\n  attachData?: AttachData;\n  hook?: Hooks;\n  key?: Key;\n  ns?: string; // for SVGs\n  fn?: () => VNode; // for thunks\n  args?: any[]; // for thunks\n  is?: string; // for custom elements v1\n  [key: string]: any; // for any other 3rd party module\n}\n\nexport function vnode(\n  sel: string | undefined,\n  data: any | undefined,\n  children: Array<VNode | string> | undefined,\n  text: string | undefined,\n  elm: Element | DocumentFragment | Text | undefined\n): VNode {\n  const key = data === undefined ? undefined : data.key;\n  return { sel, data, children, text, elm, key };\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action } from './actions';\nimport { DiagramServer } from './diagram-server';\nimport { DiagramState } from './diagram-services';\n\nexport type ServerActionHandler<A extends Action = Action> = (action: A, state: DiagramState, server: DiagramServer) => Promise<void>;\n\n/**\n * Use this service to register handlers to specific actions. The `DiagramServer` queries this registry\n * when an action is received from the client, and falls back to the built-in behavior if no handlers\n * are found.\n */\nexport class ServerActionHandlerRegistry {\n\n    protected readonly handlers = new Map<string, ServerActionHandler[]>();\n\n    /**\n     * Returns the action handlers for the given action kind, or `undefined` if there are none.\n     */\n    getHandler(kind: string): ServerActionHandler[] | undefined {\n        return this.handlers.get(kind);\n    }\n\n    /**\n     * Add an action handler to be called when an action of the specified kind is received.\n     */\n    onAction<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        if (this.handlers.has(kind)) {\n            this.handlers.get(kind)!.push(handler);\n        } else {\n            this.handlers.set(kind, [handler]);\n        }\n    }\n\n    /**\n     * Remove an action handler that was previously added with `onAction`.\n     */\n    removeActionHandler<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        const list = this.handlers.get(kind);\n        if (list) {\n            const index = list.indexOf(handler);\n            if (index >= 0) {\n                list.splice(index, 1);\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelRoot, SModelElement, Viewport } from './model';\nimport { Bounds, Point, Dimension } from './utils/geometry';\nimport { JsonAny, JsonMap } from './utils/json';\nimport { hasOwnProperty } from './utils/object';\n\n/**\n * Wrapper for actions when transferring them between client and server.\n * The `clientId` is used to identify the specific diagram instance in the client.\n */\nexport interface ActionMessage {\n    clientId: string\n    action: Action\n}\n\nexport function isActionMessage(object: unknown): object is ActionMessage {\n    return hasOwnProperty(object, 'action');\n}\n\n/**\n * An action describes a change to the model declaratively.\n * It is a plain data structure, and as such transferable between server and client.\n */\nexport interface Action {\n    kind: string;\n}\n\nexport function isAction(object?: unknown): object is Action {\n    return hasOwnProperty<string, string>(object, 'kind', 'string');\n}\n\n/**\n * A request action is tied to the expectation of receiving a corresponding response action.\n * The `requestId` property is used to match the received response with the original request.\n */\nexport interface RequestAction<Res extends ResponseAction> extends Action {\n    requestId: string\n}\n\nexport function isRequestAction(object?: Action): object is RequestAction<ResponseAction> {\n    return hasOwnProperty<string, string>(object, 'requestId', 'string');\n}\n\nlet nextRequestId = 1;\n/**\n * Generate a unique `requestId` for a request action.\n */\nexport function generateRequestId(): string {\n    return (nextRequestId++).toString();\n}\n\n/**\n * A response action is sent to respond to a request action. The `responseId` must match\n * the `requestId` of the preceding request. In case the `responseId` is empty or undefined,\n * the action is handled as standalone, i.e. it was fired without a preceding request.\n */\nexport interface ResponseAction extends Action {\n    responseId: string;\n}\n\n/**\n * A response action is sent to respond to a request action. The `responseId` must match\n * the `requestId` of the preceding request. In case the `responseId` is empty or undefined,\n * the action is handled as standalone, i.e. it was fired without a preceding request.\n */\n\nexport function isResponseAction(object?: Action): object is ResponseAction {\n    return hasOwnProperty<string, string>(object, 'responseId', 'string') && object.responseId !== '';\n}\n\n/**\n * A reject action is fired to indicate that a request must be rejected.\n */\nexport interface RejectAction extends ResponseAction {\n    kind: typeof RejectAction.KIND\n    message: string\n    detail?: JsonAny\n}\nexport namespace RejectAction {\n    export const KIND = 'rejectRequest';\n\n    export function create(options: { message: string, detail?: JsonAny, requestId: string }): RejectAction {\n        return {\n            kind: KIND,\n            message: options.message,\n            detail: options.detail,\n            responseId: options.requestId\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nexport interface RequestModelAction extends RequestAction<SetModelAction> {\n    kind: typeof RequestModelAction.KIND\n    options?: JsonMap\n}\nexport namespace RequestModelAction {\n    export const KIND = 'requestModel';\n\n    export function create(options?: JsonMap): RequestModelAction {\n        return {\n            kind: KIND,\n            options,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nexport interface SetModelAction extends ResponseAction {\n    kind: typeof SetModelAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace SetModelAction {\n    export const KIND = 'setModel';\n\n    export function create(newRoot: SModelRoot, requestId: string = ''): SetModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nexport interface UpdateModelAction {\n    kind: typeof UpdateModelAction.KIND\n    newRoot?: SModelRoot\n    matches?: Match[]\n    animate?: boolean\n    cause?: Action\n}\nexport namespace UpdateModelAction {\n    export const KIND = 'updateModel';\n\n    export function create(input: SModelRoot | Match[], options: { animate?: boolean, cause?: Action } = {}): UpdateModelAction {\n        if (Array.isArray(input)) {\n            return {\n                kind: KIND,\n                matches: input,\n                animate: options.animate,\n                cause: options.cause\n            };\n        } else {\n            return {\n                kind: KIND,\n                newRoot: input,\n                animate: options.animate,\n                cause: options.cause\n            };\n        }\n    }\n}\n\nexport interface Match {\n    left?: SModelElement\n    right?: SModelElement\n    leftParentId?: string\n    rightParentId?: string\n}\n\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nexport interface RequestPopupModelAction extends RequestAction<SetPopupModelAction> {\n    kind: typeof RequestPopupModelAction.KIND\n    elementId: string\n    bounds: Bounds\n}\nexport namespace RequestPopupModelAction {\n    export const KIND = 'requestPopupModel';\n\n    export function create(options: { elementId: string, bounds: Bounds }): RequestPopupModelAction {\n        return {\n            kind: KIND,\n            elementId: options.elementId,\n            bounds: options.bounds,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nexport interface SetPopupModelAction extends ResponseAction {\n    kind: typeof SetPopupModelAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace SetPopupModelAction {\n    export const KIND = 'setPopupModel';\n\n    export function create(newRoot: SModelRoot, requestId: string = ''): SetPopupModelAction {\n        return {\n            kind: KIND,\n            newRoot,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nexport interface SetBoundsAction extends Action {\n    kind: typeof SetBoundsAction.KIND\n    bounds: ElementAndBounds[]\n}\nexport namespace SetBoundsAction {\n    export const KIND = 'setBounds';\n\n    export function create(bounds: ElementAndBounds[]): SetBoundsAction {\n        return {\n            kind: KIND,\n            bounds\n        };\n    }\n}\n\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nexport interface RequestBoundsAction extends RequestAction<ComputedBoundsAction> {\n    kind: typeof RequestBoundsAction.KIND\n    newRoot: SModelRoot\n}\nexport namespace RequestBoundsAction {\n    export const KIND = 'requestBounds';\n\n    export function create(newRoot: SModelRoot): RequestBoundsAction {\n        return {\n            kind: KIND,\n            newRoot,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nexport interface ComputedBoundsAction extends ResponseAction {\n    kind: typeof ComputedBoundsAction.KIND\n    bounds: ElementAndBounds[]\n    revision?: number\n    alignments?: ElementAndAlignment[]\n}\nexport namespace ComputedBoundsAction {\n    export const KIND = 'computedBounds';\n\n    export function create(bounds: ElementAndBounds[], options: { revision?: number, alignments?: ElementAndAlignment[], requestId?: string } = {}): ComputedBoundsAction {\n        return {\n            kind: KIND,\n            bounds,\n            revision: options.revision,\n            alignments: options.alignments,\n            responseId: options.requestId ?? ''\n        };\n    }\n}\n\n/**\n * Associates new bounds with a model element, which is referenced via its id.\n */\nexport interface ElementAndBounds {\n    elementId: string\n    newPosition?: Point\n    newSize: Dimension\n}\n\n/**\n * Associates a new alignment with a model element, which is referenced via its id.\n */\nexport interface ElementAndAlignment {\n    elementId: string\n    newAlignment: Point\n}\n\n/**\n * Transport logging data to be stored elsewhere.\n */\nexport interface LoggingAction extends Action {\n    kind: typeof LoggingAction.KIND;\n    severity: string\n    time: string\n    caller: string\n    message: string\n    params: string[]\n}\nexport namespace LoggingAction {\n    export const KIND = 'logging';\n\n    export function create(options: { severity: string, time: string, caller: string, message: string, params: string[] }): LoggingAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nexport interface SelectAction {\n    kind: typeof SelectAction.KIND\n    selectedElementsIDs: string[]\n    deselectedElementsIDs: string[]\n}\nexport namespace SelectAction {\n    export const KIND = 'elementSelected';\n\n    export function create(options: { selectedElementsIDs?: string[], deselectedElementsIDs?: string[] }): SelectAction {\n        return {\n            kind: KIND,\n            selectedElementsIDs: options.selectedElementsIDs ?? [],\n            deselectedElementsIDs: options.deselectedElementsIDs ?? []\n        };\n    }\n}\n\n/**\n * Programmatic action for selecting or deselecting all elements.\n * If `select` is true, all elements are selected, otherwise they are deselected.\n */\nexport interface SelectAllAction {\n    kind: typeof SelectAllAction.KIND\n    select: boolean\n}\nexport namespace SelectAllAction {\n    export const KIND = 'allSelected';\n\n    export function create(options: { select?: boolean } = {}): SelectAllAction {\n        return {\n            kind: KIND,\n            select: options.select ?? true\n        };\n    }\n}\n\n/**\n * Request action for retrieving the current selection.\n */\nexport interface GetSelectionAction extends RequestAction<SelectionResult> {\n    kind: typeof GetSelectionAction.KIND\n}\nexport namespace GetSelectionAction {\n    export const KIND = 'getSelection';\n\n    export function create(): GetSelectionAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Result for a `GetSelectionAction`.\n */\nexport interface SelectionResult extends ResponseAction {\n    kind: typeof SelectionResult.KIND\n    selectedElementsIDs: string[]\n}\nexport namespace SelectionResult {\n    export const KIND = 'selectionResult';\n\n    export function create(selectedElementsIDs: string[], requestId: string): SelectionResult {\n        return {\n            kind: KIND,\n            selectedElementsIDs,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nexport interface CollapseExpandAction {\n    kind: typeof CollapseExpandAction.KIND\n    expandIds: string[]\n    collapseIds: string[]\n}\nexport namespace CollapseExpandAction {\n    export const KIND = 'collapseExpand';\n\n    export function create(options: { expandIds?: string[], collapseIds?: string[] }): CollapseExpandAction {\n        return {\n            kind: KIND,\n            expandIds: options.expandIds ?? [],\n            collapseIds: options.collapseIds ?? []\n        };\n    }\n}\n\n/**\n * Programmatic action for expanding or collapsing all elements.\n * If `expand` is true, all elements are expanded, otherwise they are collapsed.\n */\nexport interface CollapseExpandAllAction {\n    kind: typeof CollapseExpandAllAction.KIND\n    expand: boolean\n}\nexport namespace CollapseExpandAllAction {\n    export const KIND = 'collapseExpandAll';\n\n    export function create(options: { expand?: boolean } = {}): CollapseExpandAllAction {\n        return {\n            kind: KIND,\n            expand: options.expand ?? true\n        };\n    }\n}\n\nexport interface OpenAction {\n    kind: typeof OpenAction.KIND\n    elementId: string\n}\nexport namespace OpenAction {\n    export const KIND = 'open';\n\n    export function create(elementId: string): OpenAction {\n        return {\n            kind: KIND,\n            elementId\n        };\n    }\n}\n\n/**\n * Request a layout of the diagram or the selected elements only.\n */\nexport interface LayoutAction {\n    kind: typeof LayoutAction.KIND\n    layoutType?: string\n    elementIds?: string[]\n}\nexport namespace LayoutAction {\n    export const KIND = 'layout';\n\n    export function create(options: { layoutType?: string, elementIds?: string[] } = {}): LayoutAction {\n        return {\n            kind: KIND,\n            layoutType: options.layoutType,\n            elementIds: options.elementIds\n        };\n    }\n}\n\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly.\n * It also resets the zoom to its default if retainZoom is false.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nexport interface CenterAction extends Action {\n    kind: typeof CenterAction.KIND\n    elementIds: string[]\n    animate: boolean\n    retainZoom: boolean\n    zoomScale?: number\n}\nexport namespace CenterAction {\n    export const KIND = 'center';\n\n    export function create(elementIds: string[], options: { animate?: boolean, retainZoom?: boolean, zoomScale?: number } = {}): CenterAction {\n        return {\n            kind: KIND,\n            elementIds,\n            animate: options.animate ?? true,\n            retainZoom: options.retainZoom ?? false,\n            zoomScale: options.zoomScale\n        };\n    }\n}\n\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nexport interface FitToScreenAction extends Action {\n    kind: typeof FitToScreenAction.KIND;\n    elementIds: string[]\n    padding?: number\n    maxZoom?: number\n    animate: boolean\n}\nexport namespace FitToScreenAction {\n    export const KIND = 'fit';\n\n    export function create(elementIds: string[], options: { padding?: number, maxZoom?: number, animate?: boolean } = {}): FitToScreenAction {\n        return {\n            kind: KIND,\n            elementIds,\n            padding: options.padding,\n            maxZoom: options.maxZoom,\n            animate: options.animate ?? true\n        };\n    }\n}\n\n/**\n * Directly set the diagram viewport to the given scroll and zoom values.\n * The ID of the viewport element to manipulate must be given with the action\n * (usually it is the root element's ID).\n */\nexport interface SetViewportAction extends Action {\n    kind: typeof SetViewportAction.KIND;\n    elementId: string\n    newViewport: Viewport\n    animate: boolean\n}\nexport namespace SetViewportAction {\n    export const KIND = 'viewport';\n\n    export function create(elementId: string, newViewport: Viewport, options: { animate?: boolean } = {}): SetViewportAction {\n        return {\n            kind: KIND,\n            elementId,\n            newViewport,\n            animate: options.animate ?? true\n        };\n    }\n}\n\n/**\n * Request action for retrieving the current viewport and canvas bounds.\n */\nexport interface GetViewportAction extends RequestAction<ViewportResult> {\n    kind: typeof GetViewportAction.KIND;\n}\nexport namespace GetViewportAction {\n    export const KIND = 'getViewport';\n\n    export function create(): GetViewportAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * Response to a `GetViewportAction`.\n */\nexport interface ViewportResult extends ResponseAction {\n    kind: typeof ViewportResult.KIND;\n    viewport: Viewport\n    canvasBounds: Bounds\n}\nexport namespace ViewportResult {\n    export const KIND = 'viewportResult';\n\n    export function create(viewport: Viewport, canvasBounds: Bounds, requestId: string): ViewportResult {\n        return {\n            kind: KIND,\n            viewport,\n            canvasBounds,\n            responseId: requestId\n        };\n    }\n}\n\n/**\n * Action to render the selected elements in front of others by manipulating the z-order.\n */\n export interface BringToFrontAction extends Action {\n    kind: typeof BringToFrontAction.KIND;\n    elementIDs: string[]\n}\nexport namespace BringToFrontAction {\n    export const KIND = 'bringToFront';\n\n    export function create(elementIDs: string[]): BringToFrontAction {\n        return {\n            kind: KIND,\n            elementIDs\n        };\n    }\n}\n\n/**\n * Undo the previous operation on the stack of operations.\n */\nexport interface UndoAction extends Action {\n    kind: typeof UndoAction.KIND;\n}\nexport namespace UndoAction {\n    export const KIND = 'undo';\n\n    export function create(): UndoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Redo a previously undone operation.\n */\nexport interface RedoAction extends Action {\n    kind: typeof RedoAction.KIND;\n}\nexport namespace RedoAction {\n    export const KIND = 'redo';\n\n    export function create(): RedoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * Move an arbitrary set of elements to new positions.\n */\nexport interface MoveAction extends Action {\n    kind: typeof MoveAction.KIND\n    moves: ElementMove[]\n    animate: boolean\n    finished: boolean\n}\nexport namespace MoveAction {\n    export const KIND = 'move';\n\n    export function create(moves: ElementMove[], options: { animate?: boolean, finished?: boolean } = {}): MoveAction {\n        return {\n            kind: KIND,\n            moves,\n            animate: options.animate ?? true,\n            finished: options.finished ?? false\n        };\n    }\n}\n\nexport interface ElementMove {\n    elementId: string\n    elementType?: string\n    fromPosition?: Point\n    toPosition: Point\n}\n\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nexport interface HoverFeedbackAction extends Action {\n    kind: typeof HoverFeedbackAction.KIND\n    mouseoverElement: string\n    mouseIsOver: boolean\n}\nexport namespace HoverFeedbackAction {\n    export const KIND = 'hoverFeedback';\n\n    export function create(options: { mouseoverElement: string, mouseIsOver: boolean }): HoverFeedbackAction {\n        return {\n            kind: KIND,\n            mouseoverElement: options.mouseoverElement,\n            mouseIsOver: options.mouseIsOver\n        };\n    }\n}\n\n/**\n * Create an element with the given schema and add it to the diagram.\n */\nexport interface CreateElementAction extends Action {\n    kind: typeof CreateElementAction.KIND\n    containerId: string\n    elementSchema: SModelElement\n}\nexport namespace CreateElementAction {\n    export const KIND = 'createElement';\n\n    export function create(elementSchema: SModelElement, options: { containerId: string }): CreateElementAction {\n        return {\n            kind: KIND,\n            elementSchema,\n            containerId: options.containerId\n        };\n    }\n}\n\n/**\n * Delete a set of elements identified by their IDs.\n */\nexport interface DeleteElementAction extends Action {\n    kind: typeof DeleteElementAction.KIND\n    elementIds: string[]\n}\nexport namespace DeleteElementAction {\n    export const KIND = 'delete';\n\n    export function create(elementIds: string[]): DeleteElementAction {\n        return {\n            kind: KIND,\n            elementIds\n        };\n    }\n}\n\n/**\n * Apply a text change to a label element.\n */\nexport interface ApplyLabelEditAction extends Action {\n    kind: typeof ApplyLabelEditAction.KIND;\n    labelId: string,\n    text: string\n}\nexport namespace ApplyLabelEditAction {\n    export const KIND = 'applyLabelEdit';\n\n    export function create(labelId: string, text: string): ApplyLabelEditAction {\n        return {\n            kind: KIND,\n            labelId,\n            text\n        };\n    }\n}\n\n/**\n * Change the source or target node of a routable element (edge of a graph).\n */\nexport interface ReconnectAction extends Action {\n    kind: typeof ReconnectAction.KIND\n    routableId: string\n    newSourceId?: string\n    newTargetId?: string\n}\nexport namespace ReconnectAction {\n    export const KIND = 'reconnect';\n\n    export function create(options: { routableId: string, newSourceId?: string, newTargetId?: string }): ReconnectAction {\n        return {\n            kind: KIND,\n            routableId: options.routableId,\n            newSourceId: options.newSourceId,\n            newTargetId: options.newTargetId\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ServerActionHandler, ServerActionHandlerRegistry } from './action-handler';\nimport {\n    Action, isResponseAction, ResponseAction, RequestModelAction, ComputedBoundsAction, LayoutAction, RequestBoundsAction,\n    RequestAction, generateRequestId, SetModelAction, UpdateModelAction, RejectAction, isRequestAction\n} from './actions';\nimport { DiagramServices, DiagramState, IDiagramGenerator, IModelLayoutEngine } from './diagram-services';\nimport { SModelRoot } from './model';\nimport { Deferred } from './utils/async';\nimport { applyBounds, cloneModel } from './utils/model-utils';\n\n/**\n * An instance of this class is responsible for handling a single diagram client. It holds the current\n * state of the diagram and manages communication with the client via actions.\n */\nexport class DiagramServer {\n\n    readonly state: DiagramState & {\n        lastSubmittedModelType?: string\n    } = {\n        currentRoot: {\n            type: 'NONE',\n            id: 'ROOT'\n        },\n        revision: 0\n    };\n    readonly dispatch: <A extends Action>(action: A) => Promise<void>;\n\n    protected readonly diagramGenerator: IDiagramGenerator;\n    protected readonly layoutEngine?: IModelLayoutEngine;\n    protected actionHandlerRegistry?: ServerActionHandlerRegistry;\n    protected readonly requests = new Map<string, Deferred<ResponseAction>>();\n\n    constructor(dispatch: <A extends Action>(action: A) => Promise<void>,\n                services: DiagramServices) {\n        this.dispatch = dispatch;\n        this.diagramGenerator = services.DiagramGenerator;\n        this.layoutEngine = services.ModelLayoutEngine;\n        this.actionHandlerRegistry = services.ServerActionHandlerRegistry;\n    }\n\n    /**\n     * @deprecated Use the `ServerActionHandlerRegistry` service instead\n     */\n    onAction<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        if (!this.actionHandlerRegistry) {\n            this.actionHandlerRegistry = new ServerActionHandlerRegistry();\n        }\n        this.actionHandlerRegistry.onAction(kind, handler);\n    }\n\n    /**\n     * @deprecated Use the `ServerActionHandlerRegistry` service instead\n     */\n    removeActionHandler<A extends Action>(kind: string, handler: ServerActionHandler<A>) {\n        if (this.actionHandlerRegistry) {\n            this.actionHandlerRegistry.removeActionHandler(kind, handler);\n        }\n    }\n\n    /**\n     * Set the model and submit it to the client.\n     */\n    setModel(newRoot: SModelRoot): Promise<void> {\n        newRoot.revision = ++this.state.revision;\n        this.state.currentRoot = newRoot;\n        return this.submitModel(newRoot, false);\n    }\n\n    /**\n     * Update the model to a new state and submit it to the client.\n     */\n    updateModel(newRoot: SModelRoot): Promise<void> {\n        newRoot.revision = ++this.state.revision;\n        this.state.currentRoot = newRoot;\n        return this.submitModel(newRoot, true);\n    }\n\n    /**\n     * Whether the client needs to compute the layout of parts of the model. This affects the behavior\n     * of `submitModel`.\n     *\n     * This setting is determined by the `DiagramOptions` that are received with the `RequestModelAction`\n     * from the client. If the client does not specify whether it needs client layout, the default value\n     * is `true`.\n     */\n    get needsClientLayout(): boolean {\n        if (this.state.options && this.state.options.needsClientLayout !== undefined) {\n            return !!this.state.options.needsClientLayout;\n        }\n        return true;\n    }\n\n    /**\n     * Whether the server needs to compute the layout of parts of the model. This affects the behavior\n     * of `submitModel`.\n     *\n     * This setting is determined by the `DiagramOptions` that are received with the `RequestModelAction`\n     * from the client. If the client does not specify whether it needs server layout, the default value\n     * is `false`.\n     */\n    get needsServerLayout(): boolean {\n        if (this.state.options && this.state.options.needsServerLayout !== undefined) {\n            return !!this.state.options.needsServerLayout;\n        }\n        return false;\n    }\n\n    /**\n     * Called when an action is received from the client.\n     */\n    accept(action: Action): Promise<void> {\n        if (isResponseAction(action)) {\n            const id = action.responseId;\n            const future = this.requests.get(id);\n            if (future) {\n                this.requests.delete(id);\n                if (action.kind === RejectAction.KIND) {\n                    const rejectAction: RejectAction = action as any;\n                    future.reject(new Error(rejectAction.message));\n                    console.warn(`Request with id ${action.responseId} failed: ${rejectAction.message}`, rejectAction.detail);\n                } else {\n                    future.resolve(action);\n                }\n                return Promise.resolve();\n            }\n            console.info('No matching request for response:', action);\n        }\n        return this.handleAction(action);\n    }\n\n    /**\n     * Send a request action to the client. The resulting promise is resolved when a matching\n     * response is received and rejected when a `RejectAction` is received.\n     */\n    request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res> {\n        if (!action.requestId) {\n            action.requestId = 'server_' + generateRequestId();\n        }\n        const future = new Deferred<Res>();\n        this.requests.set(action.requestId, future as any);\n        this.dispatch(action).catch(err => {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            this.requests.delete(action.requestId!);\n            future.reject(err);\n        });\n        return future.promise;\n    }\n\n    /**\n     * Send a `RejectAction` to the client to notify that a request could not be fulfilled.\n     */\n    rejectRemoteRequest(action: Action | undefined, error: Error): void {\n        if (action && isRequestAction(action)) {\n            this.dispatch({\n                kind: RejectAction.KIND,\n                responseId: action.requestId,\n                message: error.message,\n                detail: error.stack\n            });\n        }\n    }\n\n    protected handleAction(action: Action): Promise<void> {\n        // Find a matching action handler in the registry\n        const handlers = this.actionHandlerRegistry?.getHandler(action.kind);\n        if (handlers && handlers.length === 1) {\n            return handlers[0](action, this.state, this);\n        } else if (handlers && handlers.length > 1) {\n            return Promise.all(handlers.map(h => h(action, this.state, this))) as Promise<any>;\n        }\n        // If no handler is registered, call one of the default handling methods\n        switch (action.kind) {\n            case RequestModelAction.KIND:\n                return this.handleRequestModel(action as RequestModelAction);\n            case ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action as ComputedBoundsAction);\n            case LayoutAction.KIND:\n                return this.handleLayout(action as LayoutAction);\n        }\n        // We don't know this action kind, sigh\n        console.warn(`Unhandled action from client: ${action.kind}`);\n        return Promise.resolve();\n    }\n\n    protected async handleRequestModel(action: RequestModelAction): Promise<void> {\n        this.state.options = action.options;\n        try {\n            const newRoot = await this.diagramGenerator.generate({\n                options: this.state.options ?? {},\n                state: this.state\n            });\n            newRoot.revision = ++this.state.revision;\n            this.state.currentRoot = newRoot;\n            await this.submitModel(this.state.currentRoot, false, action);\n        } catch (err) {\n            this.rejectRemoteRequest(action, err as Error);\n            console.error('Failed to generate diagram:', err);\n        }\n    }\n\n    /**\n     * Submit a model to the client after it has been updated in the server state.\n     */\n     protected async submitModel(newRoot: SModelRoot, update: boolean, cause?: Action): Promise<void> {\n        if (this.needsClientLayout) {\n            if (!this.needsServerLayout) {\n                // In this case the client won't send us the computed bounds\n                this.dispatch({ kind: RequestBoundsAction.KIND, newRoot });\n            } else {\n                const request = RequestBoundsAction.create(newRoot);\n                const response = await this.request<ComputedBoundsAction>(request);\n                const currentRoot = this.state.currentRoot;\n                if (response.revision === currentRoot.revision) {\n                    applyBounds(currentRoot, response);\n                    await this.doSubmitModel(currentRoot, update, cause);\n                } else {\n                    this.rejectRemoteRequest(cause, new Error(`Model revision does not match: ${response.revision}`));\n                }\n            }\n        } else {\n            await this.doSubmitModel(newRoot, update, cause);\n        }\n    }\n\n    private async doSubmitModel(newRoot: SModelRoot, update: boolean, cause?: Action): Promise<void> {\n        if (newRoot.revision !== this.state.revision) {\n            return;\n        }\n        if (this.needsServerLayout && this.layoutEngine) {\n            newRoot = await this.layoutEngine.layout(newRoot);\n        }\n        const modelType = newRoot.type;\n        if (cause && cause.kind === RequestModelAction.KIND) {\n            const requestId = (cause as RequestModelAction).requestId;\n            const response = SetModelAction.create(newRoot, requestId);\n            await this.dispatch(response);\n        } else if (update && modelType === this.state.lastSubmittedModelType) {\n            await this.dispatch({ kind: UpdateModelAction.KIND, newRoot, cause });\n        } else {\n            await this.dispatch({ kind: SetModelAction.KIND, newRoot });\n        }\n        this.state.lastSubmittedModelType = modelType;\n    }\n\n    protected handleComputedBounds(action: ComputedBoundsAction): Promise<void> {\n        if (action.revision !== this.state.currentRoot.revision) {\n            return Promise.reject();\n        }\n        applyBounds(this.state.currentRoot, action);\n        return Promise.resolve();\n    }\n\n    protected async handleLayout(action: LayoutAction): Promise<void> {\n        if (!this.layoutEngine) {\n            return;\n        }\n        if (!this.needsServerLayout) {\n            let newRoot = cloneModel(this.state.currentRoot);\n            newRoot = await this.layoutEngine.layout(newRoot);\n            newRoot.revision = ++this.state.revision;\n            this.state.currentRoot = newRoot;\n        }\n        await this.doSubmitModel(this.state.currentRoot, true, action);\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ServerActionHandlerRegistry } from './action-handler';\nimport { SModelRoot } from './model';\nimport { JsonMap } from './utils/json';\nimport { SModelIndex } from './utils/model-utils';\n\nexport type DiagramOptions = JsonMap;\n\n/**\n * The current state captured by a `DiagramServer`.\n */\nexport interface DiagramState {\n    options?: DiagramOptions;\n    currentRoot: SModelRoot;\n    revision: number;\n}\n\n/**\n * The set of services required by a `DiagramServer`.\n */\nexport interface DiagramServices {\n    readonly DiagramGenerator: IDiagramGenerator\n    readonly ModelLayoutEngine?: IModelLayoutEngine\n    readonly ServerActionHandlerRegistry?: ServerActionHandlerRegistry\n}\n\n/**\n * A diagram generator is responsible for creating a diagram model from some source.\n * This process is controlled by the `DiagramOptions`, which for example may contain\n * a URI to the source document from which the diagram shall be created.\n */\nexport interface IDiagramGenerator {\n    generate(args: GeneratorArguments): SModelRoot | Promise<SModelRoot>\n}\n\nexport interface GeneratorArguments {\n    options: DiagramOptions\n    state: DiagramState\n}\n\n/**\n * This service is responsible for the \"macro layout\" of a model, that is the positioning\n * and sizing of the main structural elements of a model. In a graph, macro layout affects\n * positions of nodes and routings of edges, but not necessarily the layout of labels and\n * compartments inside a node, which are often arranged on the client side (\"micro layout\").\n */\nexport interface IModelLayoutEngine {\n    layout(model: SModelRoot, index?: SModelIndex): SModelRoot | Promise<SModelRoot>;\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './actions';\nexport * from './diagram-server';\nexport * from './diagram-services';\nexport * from './model';\nexport * from './utils/async';\nexport * from './utils/geometry';\nexport * from './utils/json';\nexport * from './utils/model-utils';\nexport * from './utils/object';\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Point, Dimension } from './utils/geometry';\nimport { hasOwnProperty } from './utils/object';\n\n/**\n * Base type for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nexport interface SModelElement {\n    type: string\n    id: string\n    children?: SModelElement[]\n    cssClasses?: string[]\n}\n\n/**\n * Base type for the root element of the diagram model tree.\n */\nexport interface SModelRoot extends SModelElement {\n    canvasBounds?: Bounds\n    revision?: number\n}\n\n/**\n * Model elements that implement this interface have a position and a size.\n */\nexport interface BoundsAware {\n    position: Point\n    size: Dimension\n}\n\n/**\n * Used to adjust elements whose bounding box is not at the origin, e.g. labels\n * or pre-rendered SVG figures.\n */\nexport interface Alignable {\n    alignment: Point\n}\n\n/**\n * A viewport has a scroll position and a zoom factor. Usually these properties are\n * applied to the root element to enable navigating through the diagram.\n */\nexport interface Viewport extends Scrollable, Zoomable {\n}\n\n/**\n * A scrollable element has a scroll position, which indicates the top left corner of the\n * visible area.\n */\nexport interface Scrollable {\n    scroll: Point\n}\n\nexport function isScrollable(element: SModelElement | Scrollable): element is Scrollable {\n    return hasOwnProperty(element, 'scroll');\n}\n\n/**\n * A zoomable element can be scaled so it appears smaller or larger than its actual size.\n * The zoom value 1 is the default scale where the content is drawn with its actual size.\n */\nexport interface Zoomable {\n    zoom: number\n}\n\nexport function isZoomable(element: SModelElement | Zoomable): element is Zoomable {\n    return hasOwnProperty(element, 'zoom');\n}\n\n/**\n * Root element for graph-like models.\n */\nexport interface SGraph extends SModelRoot {\n    children: SModelElement[]\n    bounds?: Bounds\n    scroll?: Point\n    zoom?: number\n    layoutOptions?: ModelLayoutOptions\n}\n\n/**\n * Options to control the \"micro layout\" of a model element, i.e. the arrangement of its content\n * using simple algorithms such as horizontal or vertical box layout.\n */\nexport type ModelLayoutOptions = { [key: string]: string | number | boolean };\n\nexport interface SShapeElement extends SModelElement {\n    position?: Point\n    size?: Dimension\n    layoutOptions?: ModelLayoutOptions\n}\n\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nexport interface SNode extends SShapeElement {\n    layout?: string\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n    anchorKind?: string\n}\n\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nexport interface SPort extends SShapeElement {\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n    anchorKind?: string\n}\n\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their ids.\n */\nexport interface SEdge extends SModelElement {\n    sourceId: string\n    targetId: string\n    routerKind?: string\n    routingPoints?: Point[]\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n}\n\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nexport interface SLabel extends SShapeElement {\n    text: string\n    selected?: boolean\n}\n\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nexport interface SCompartment extends SShapeElement {\n    layout?: string\n}\n\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nexport interface HtmlRoot extends SModelRoot {\n    classes?: string[]\n}\n\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nexport interface PreRenderedElement extends SModelElement {\n    code: string\n}\n\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nexport interface ShapedPreRenderedElement extends PreRenderedElement {\n    position?: Point\n    size?: Dimension\n}\n\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nexport interface ForeignObjectElement extends ShapedPreRenderedElement {\n    /** The namespace to be assigned to the elements inside of the `foreignObject`. */\n    namespace: string\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T | PromiseLike<T>) => void;\n    reject: (reason?: any) => void;\n    readonly promise: Promise<T>;\n    private _state: DeferredState = 'unresolved';\n\n\n    constructor() {\n        this.promise = new Promise<T>((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n        });\n        this.promise.then(\n            res => this._state = 'resolved',\n            rej => this._state = 'rejected'\n        );\n    }\n\n    private set state(state: DeferredState) {\n        if (this._state === 'unresolved') {\n            this._state = state;\n        }\n    }\n\n    get state(): DeferredState {\n        return this._state;\n    }\n}\n\nexport type DeferredState = 'resolved' | 'rejected' | 'unresolved';\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { hasOwnProperty } from \"./object\";\n\n/**\n * A Point is composed of the (x,y) coordinates of an object.\n */\nexport interface Point {\n    readonly x: number\n    readonly y: number\n}\n\nexport namespace Point {\n    /**\n     * (x,y) coordinates of the origin.\n     */\n    export const ORIGIN: Point = Object.freeze({\n        x: 0,\n        y: 0\n    });\n\n    /**\n     * Adds two points.\n     * @param {Point} p1 - First point\n     * @param {Point} p2 - Second point\n     * @returns {Point} The sum of the two points\n     */\n    export function add(p1: Point, p2: Point): Point {\n        return {\n            x: p1.x + p2.x,\n            y: p1.y + p2.y\n        };\n    }\n\n    /**\n     * Subtracts two points.\n     * @param {Point} p1 - First point\n     * @param {Point} p2 - Second point\n     * @returns {Point} The difference of the two points\n     */\n    export function subtract(p1: Point, p2: Point): Point {\n        return {\n            x: p1.x - p2.x,\n            y: p1.y - p2.y\n        };\n    }\n\n    /**\n     * Specifies whether a point has exactly the same coordinates as another point.\n     * @param {Point} point1 a point\n     * @param {Point} point2 another point\n     * @returns {boolean} `true` if `point1` has exactly the same `x` and `y` values as `point2`, `false` otherwise.\n     */\n    export function equals(point1: Point, point2: Point): boolean {\n        return point1.x === point2.x && point1.y === point2.y;\n    }\n\n    /**\n     * Computes a point that is the original `point` shifted towards `refPoint` by the given `distance`.\n     * @param {Point} point - Point to shift\n     * @param {Point} refPoint - Point to shift towards\n     * @param {Point} distance - Distance to shift\n     */\n    export function shiftTowards(point: Point, refPoint: Point, distance: number): Point {\n        const diff = subtract(refPoint, point);\n        const normalized = normalize(diff);\n        const shift = { x: normalized.x * distance, y: normalized.y * distance };\n        return add(point, shift);\n    }\n\n    /**\n     * Computes the normalized vector from the vector given in `point`; that is, computing its unit vector.\n     * @param {Point} point - Point representing the vector to be normalized\n     * @returns {Point} The normalized point\n     */\n    export function normalize(point: Point): Point {\n        const mag = magnitude(point);\n        if (mag === 0 || mag === 1) {\n            return ORIGIN;\n        }\n        return {\n            x: point.x / mag,\n            y: point.y / mag\n        };\n    }\n\n    /**\n     * Computes the magnitude of the vector given in `point`.\n     * @param {Point} point - Point representing the vector to compute the magnitude for\n     * @returns {number} The magnitude or also known as length of the `point`\n     */\n    export function magnitude(point: Point): number {\n        return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n    }\n\n    /**\n     * Calculates a linear combination of p0 and p1 using lambda, i.e.\n     *   (1-lambda) * p0 + lambda * p1\n     */\n    export function linear(p0: Point, p1: Point, lambda: number): Point {\n        return {\n            x: (1 - lambda) * p0.x + lambda * p1.x,\n            y: (1 - lambda) * p0.y + lambda * p1.y\n        };\n    }\n\n    /**\n     * Returns the \"straight line\" distance between two points.\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The Eucledian distance\n     */\n    export function euclideanDistance(a: Point, b: Point): number {\n        const dx = b.x - a.x;\n        const dy = b.y - a.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n\n    /**\n     * Returns the distance between two points in a grid, using a\n     * strictly vertical and/or horizontal path (versus straight line).\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The Manhattan distance\n     */\n    export function manhattanDistance(a: Point, b: Point): number {\n        return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n    }\n\n    /**\n     * Returns the maximum of the horizontal and the vertical distance.\n     * @param {Point} a - First point\n     * @param {Point} b - Second point\n     * @returns {number} The maximum distance\n     */\n    export function maxDistance(a: Point, b: Point): number {\n        return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n    }\n}\n\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nexport function angleOfPoint(p: Point): number {\n    return Math.atan2(p.y, p.x);\n}\n\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nexport function angleBetweenPoints(a: Point, b: Point): number {\n    const lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    const dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\n\n/**\n * Computes the center of the line segment spanned by the two given points.\n * @param {Point} s - Start point of the line\n * @param {Point} e - End point of the line\n */\nexport function centerOfLine(s: Point, e: Point): Point {\n    const b: Bounds = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return Bounds.center(b);\n}\n\n/**\n * The Dimension of an object is composed of its width and height.\n */\nexport interface Dimension {\n    readonly width: number\n    readonly height: number\n}\n\nexport namespace Dimension {\n    /**\n     * A dimension with both width and height set to a negative value, which is considered as undefined.\n     */\n    export const EMPTY: Dimension = Object.freeze({\n        width: -1,\n        height: -1\n    });\n\n    /**\n     * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n     * @param {Dimension} b - Dimension object\n     * @returns {boolean} `true` if the dimension is valid\n     */\n    export function isValid(d: Dimension): boolean {\n        return d.width >= 0 && d.height >= 0;\n    }\n}\n\n/**\n * The bounds are the position (x, y) and dimension (width, height) of an object.\n */\nexport interface Bounds extends Point, Dimension {\n}\n\nexport function isBounds(element: unknown): element is Bounds {\n    return hasOwnProperty(element, ['x', 'y', 'width', 'height']);\n}\n\nexport namespace Bounds {\n    export const EMPTY: Bounds = Object.freeze({\n        x: 0,\n        y: 0,\n        width: -1,\n        height: -1\n    });\n\n    /**\n     * Combines the bounds of two objects into one, so that the new bounds\n     * are the minimum bounds that covers both of the original bounds.\n     * @param {Bounds} b0 - First bounds object\n     * @param {Bounds} b1 - Second bounds object\n     * @returns {Bounds} The combined bounds\n     */\n    export function combine(b0: Bounds, b1: Bounds): Bounds {\n        if (!Dimension.isValid(b0))\n            return Dimension.isValid(b1) ? b1 : EMPTY;\n        if (!Dimension.isValid(b1))\n            return b0;\n        const minX = Math.min(b0.x, b1.x);\n        const minY = Math.min(b0.y, b1.y);\n        const maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n        const maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n        return {\n            x: minX, y: minY, width: maxX - minX, height: maxY - minY\n        };\n    }\n\n    /**\n     * Translates the given bounds.\n     * @param {Bounds} b - Bounds object\n     * @param {Point} p - Vector by which to translate the bounds\n     * @returns {Bounds} The translated bounds\n     */\n    export function translate(b: Bounds, p: Point): Bounds {\n        return {\n            x: b.x + p.x,\n            y: b.y + p.y,\n            width: b.width,\n            height: b.height\n        };\n    }\n\n    /**\n     * Returns the center point of the bounds of an object\n     * @param {Bounds} b - Bounds object\n     * @returns {Point} the center point\n     */\n    export function center(b: Bounds): Point {\n        return {\n            x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n            y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n        };\n    }\n\n    /**\n    * Checks whether the point p is included in the bounds b.\n    */\n    export function includes(b: Bounds, p: Point): boolean {\n        return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n    }\n}\n\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nexport function toDegrees(a: number): number {\n    return a * 180 / Math.PI;\n}\n\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nexport function toRadians(a: number): number {\n    return a * Math.PI / 180;\n}\n\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nexport function almostEquals(a: number, b: number): boolean {\n    return Math.abs(a - b) < 1e-3;\n}\n","/********************************************************************************\n * Copyright (c) 2020-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport type JsonAny =  JsonPrimitive | JsonMap | JsonArray | null;\n\nexport type JsonPrimitive = string | number | boolean;\n\nexport interface JsonMap {\n    [key: string]: JsonAny;\n}\n\nexport type JsonArray = Array<JsonAny>;\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Alignable, BoundsAware, SModelElement, SModelRoot } from '../model';\nimport { ComputedBoundsAction } from '../actions';\n\n/**\n * Clone a given model. This function requires that the model is serializable, so it's\n * free of cycles and functions.\n */\nexport function cloneModel<T extends SModelElement>(model: T): T {\n    return JSON.parse(JSON.stringify(model));\n}\n\n/**\n * Apply the computed bounds to the given model. This ensures that the model has complete\n * information about positions and sizes derived from its actual rendering in the frontend.\n */\nexport function applyBounds(root: SModelRoot, action: ComputedBoundsAction) {\n    const index = new SModelIndex();\n    index.add(root);\n    for (const b of action.bounds) {\n        const element = index.getById(b.elementId);\n        if (element) {\n            const bae = element as SModelElement & BoundsAware;\n            if (b.newPosition) {\n                bae.position = { x: b.newPosition.x, y: b.newPosition.y };\n            }\n            if (b.newSize) {\n                bae.size = { width: b.newSize.width, height: b.newSize.height };\n            }\n        }\n    }\n    if (action.alignments) {\n        for (const a of action.alignments) {\n            const element = index.getById(a.elementId);\n            if (element) {\n                const alignable = element as SModelElement & Alignable;\n                alignable.alignment = { x: a.newAlignment.x, y: a.newAlignment.y };\n            }\n        }\n    }\n}\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nexport function getBasicType(element: { type: string }): string {\n    if (!element.type) {\n        return '';\n    }\n    const colonIndex = element.type.indexOf(':');\n    return colonIndex >= 0 ? element.type.substring(0, colonIndex) : element.type;\n}\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nexport function getSubType(schema: { type: string }): string {\n    if (!schema.type) {\n        return '';\n    }\n    const colonIndex = schema.type.indexOf(':');\n    return colonIndex >= 0 ? schema.type.substring(colonIndex + 1) : schema.type;\n}\n\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * `SModelIndex` might be more effective.\n */\nexport function findElement(parent: SModelElement, elementId: string): SModelElement | undefined {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (const child of parent.children) {\n            const result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\n\n/**\n * Used to speed up model element lookup by id.\n * This index implementation is for the serializable _external model_ defined in `sprotty-protocol`.\n */\nexport class SModelIndex {\n\n    private readonly id2element: Map<string, SModelElement> = new Map();\n    private id2parent: Map<string, SModelElement> = new Map();\n\n    add(element: SModelElement): void {\n        if (!element.id) {\n            throw new Error(\"Model element has no ID.\");\n        } else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (Array.isArray(element.children)) {\n            for (const child of element.children) {\n                this.add(child as any);\n                this.id2parent.set(child.id, element);\n            }\n        }\n    }\n\n    remove(element: SModelElement): void {\n        this.id2element.delete(element.id);\n        if (Array.isArray(element.children)) {\n            for (const child of element.children) {\n                this.id2parent.delete(child.id);\n                this.remove(child as any);\n            }\n        }\n    }\n\n    contains(element: SModelElement): boolean {\n        return this.id2element.has(element.id);\n    }\n\n    getById(id: string): SModelElement | undefined {\n        return this.id2element.get(id);\n    }\n\n    getParent(id: string): SModelElement | undefined {\n        return this.id2parent.get(id);\n    }\n\n    getRoot(element: SModelElement): SModelRoot {\n        let current: SModelElement | undefined = element;\n        while (current) {\n            const parent = this.id2parent.get(current.id);\n            if (parent === undefined) {\n                return current;\n            }\n            current = parent;\n        }\n        throw new Error(\"Element has no root\");\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function isObject(data: unknown): data is Record<PropertyKey, unknown> {\n    return typeof data === 'object' && data !== null;\n}\n\nexport type TypeOf<T> =\n    T extends number ? 'number'\n    : T extends string ? 'string'\n    : T extends boolean ? 'boolean'\n    : T extends bigint ? 'bigint'\n    : T extends symbol ? 'symbol'\n    : T extends Function ? 'function'\n    : T extends object ? 'object'\n    : 'undefined';\n\nexport function hasOwnProperty<K extends PropertyKey, T>(arg: unknown, key: K | K[], type?: TypeOf<T> | ((v: unknown) => v is T)): arg is Record<K, T> {\n    if (!isObject(arg)) {\n        return false;\n    }\n    if (Array.isArray(key)) {\n        for (const k of key) {\n            if (!Object.prototype.hasOwnProperty.call(arg, k)) {\n                return false;\n            }\n            if (typeof type === 'string' && typeof arg[k] !== type) {\n                return false;\n            } else if (typeof type === 'function' && !type(arg[k])) {\n                return false;\n            }\n        }\n    } else {\n        if (!Object.prototype.hasOwnProperty.call(arg, key)) {\n            return false;\n        }\n        if (typeof type === 'string') {\n            return typeof arg[key] === type;\n        }\n        if (typeof type === 'function') {\n            return type(arg[key]);\n        }\n    }\n    return true;\n}\n\nexport function safeAssign<T extends {}>(target: T, partial: Partial<T>): T {\n    return Object.assign(target, partial);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport {\n    Action, isAction, isRequestAction, isResponseAction, RedoAction, RejectAction, RequestAction,\n    ResponseAction, SetModelAction, UndoAction\n} from 'sprotty-protocol/lib/actions';\nimport { Deferred } from 'sprotty-protocol/lib/utils/async';\nimport { TYPES } from '../types';\nimport { ILogger } from '../../utils/logging';\nimport { EMPTY_ROOT } from '../model/smodel-factory';\nimport { ICommandStack } from '../commands/command-stack';\nimport { AnimationFrameSyncer } from '../animations/animation-frame-syncer';\nimport { ActionHandlerRegistry } from './action-handler';\nimport { IDiagramLocker } from './diagram-locker';\n\nexport interface IActionDispatcher {\n    dispatch(action: Action): Promise<void>\n    dispatchAll(actions: Action[]): Promise<void>\n    request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res>\n}\n\n/**\n * Collects actions, converts them to commands and dispatches them.\n * Also acts as the proxy to model sources such as diagram servers.\n */\n@injectable()\nexport class ActionDispatcher implements IActionDispatcher {\n\n    @inject(TYPES.ActionHandlerRegistryProvider) protected actionHandlerRegistryProvider: () => Promise<ActionHandlerRegistry>;\n    @inject(TYPES.ICommandStack) protected commandStack: ICommandStack;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.AnimationFrameSyncer) protected syncer: AnimationFrameSyncer;\n    @inject(TYPES.IDiagramLocker) protected diagramLocker: IDiagramLocker;\n\n    protected actionHandlerRegistry: ActionHandlerRegistry;\n\n    protected initialized: Promise<void> | undefined;\n    protected blockUntil?: (action: Action) => boolean;\n    protected postponedActions: PostponedAction[] = [];\n    protected readonly requests: Map<string, Deferred<ResponseAction>> = new Map();\n\n    initialize(): Promise<void> {\n        if (!this.initialized) {\n            this.initialized = this.actionHandlerRegistryProvider().then(registry => {\n                this.actionHandlerRegistry = registry;\n                this.handleAction(SetModelAction.create(EMPTY_ROOT)).catch(() => { /* Logged in handleAction method */ });\n            });\n        }\n        return this.initialized;\n    }\n\n    /**\n     * Dispatch an action by querying all handlers that are registered for its kind.\n     * The returned promise is resolved when all handler results (commands or actions)\n     * have been processed.\n     */\n    dispatch(action: Action): Promise<void> {\n        return this.initialize().then(() => {\n            if (this.blockUntil !== undefined) {\n                return this.handleBlocked(action, this.blockUntil);\n            } else if (this.diagramLocker.isAllowed(action)) {\n                return this.handleAction(action);\n            }\n            return undefined;\n        });\n    }\n\n    /**\n     * Calls `dispatch` on every action in the given array. The returned promise\n     * is resolved when the promises of all `dispatch` calls have been resolved.\n     */\n    dispatchAll(actions: Action[]): Promise<void> {\n        return Promise.all(actions.map(action => this.dispatch(action))) as Promise<any>;\n    }\n\n    /**\n     * Dispatch a request. The returned promise is resolved when a response with matching\n     * identifier is dispatched. That response is _not_ passed to the registered action\n     * handlers. Instead, it is the responsibility of the caller of this method to handle\n     * the response properly. For example, it can be sent to the registered handlers by\n     * passing it again to the `dispatch` method.\n     */\n    request<Res extends ResponseAction>(action: RequestAction<Res>): Promise<Res> {\n        if (!action.requestId) {\n            return Promise.reject(new Error('Request without requestId'));\n        }\n        const deferred = new Deferred<Res>();\n        this.requests.set(action.requestId, deferred);\n        this.dispatch(action).catch(() => { /* Logged in handleAction method */ });\n        return deferred.promise;\n    }\n\n    protected handleAction(action: Action): Promise<void> {\n        if (action.kind === UndoAction.KIND) {\n            return this.commandStack.undo().then(() => {});\n        }\n        if (action.kind === RedoAction.KIND) {\n            return this.commandStack.redo().then(() => {});\n        }\n        if (isResponseAction(action)) {\n            const deferred = this.requests.get(action.responseId);\n            if (deferred !== undefined) {\n                this.requests.delete(action.responseId);\n                if (action.kind === RejectAction.KIND) {\n                    const rejectAction = action as RejectAction;\n                    deferred.reject(new Error(rejectAction.message));\n                    this.logger.warn(this, `Request with id ${action.responseId} failed.`,\n                            rejectAction.message, rejectAction.detail);\n                } else {\n                    deferred.resolve(action);\n                }\n                return Promise.resolve();\n            }\n            this.logger.log(this, 'No matching request for response', action);\n        }\n\n        const handlers = this.actionHandlerRegistry.get(action.kind);\n        if (handlers.length === 0) {\n            this.logger.warn(this, 'Missing handler for action', action);\n            const error = new Error(`Missing handler for action '${action.kind}'`);\n            if (isRequestAction(action)) {\n                const deferred = this.requests.get(action.requestId);\n                if (deferred !== undefined) {\n                    this.requests.delete(action.requestId);\n                    deferred.reject(error);\n                }\n            }\n            return Promise.reject(error);\n        }\n        this.logger.log(this, 'Handle', action);\n        const promises: Promise<any>[] = [];\n        for (const handler of handlers) {\n            const result = handler.handle(action);\n            if (isAction(result)) {\n                promises.push(this.dispatch(result));\n            } else if (result !== undefined) {\n                promises.push(this.commandStack.execute(result));\n                this.blockUntil = result.blockUntil;\n            }\n        }\n        return Promise.all(promises) as Promise<any>;\n    }\n\n    protected handleBlocked(action: Action, predicate: (action: Action) => boolean): Promise<void> {\n        if (predicate(action)) {\n            this.blockUntil = undefined;\n            const result = this.handleAction(action);\n            const actions = this.postponedActions;\n            this.postponedActions = [];\n            for (const a of actions) {\n                this.dispatch(a.action).then(a.resolve, a.reject);\n            }\n            return result;\n        } else {\n            this.logger.log(this, 'Action is postponed due to block condition', action);\n            return new Promise((resolve, reject) => {\n                this.postponedActions.push({ action, resolve, reject });\n            });\n        }\n    }\n}\n\nexport interface PostponedAction {\n    action: Action\n    resolve: () => void\n    reject: (reason: any) => void\n}\n\nexport type IActionDispatcherProvider = () => Promise<IActionDispatcher>;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject, optional, interfaces } from \"inversify\";\nimport { TYPES } from \"../types\";\nimport { MultiInstanceRegistry } from \"../../utils/registry\";\nimport { isInjectable } from \"../../utils/inversify\";\nimport { ICommand } from \"../commands/command\";\nimport { Action } from \"sprotty-protocol\";\n\n/**\n * An action handler accepts an action and reacts to it by returning either a command to be\n * executed, or another action to be dispatched.\n */\nexport interface IActionHandler {\n    handle(action: Action): ICommand | Action | void\n}\n\n/**\n * Used to bind an action kind to an action handler factory in the ActionHandlerRegistry.\n */\nexport interface ActionHandlerRegistration {\n    actionKind: string\n    factory: () => IActionHandler\n}\n\n/**\n * Initializes and registers an action handler for multiple action kinds. In most cases\n * `ActionHandlerRegistration` should be used instead.\n */\nexport interface IActionHandlerInitializer {\n    initialize(registry: ActionHandlerRegistry): void\n}\n\n/**\n * The action handler registry maps actions to their handlers using the Action.kind property.\n */\n@injectable()\nexport class ActionHandlerRegistry extends MultiInstanceRegistry<IActionHandler> {\n\n    constructor(@multiInject(TYPES.ActionHandlerRegistration) @optional() registrations: ActionHandlerRegistration[],\n                @multiInject(TYPES.IActionHandlerInitializer) @optional() initializers: IActionHandlerInitializer[]) {\n        super();\n        registrations.forEach(registration =>\n            this.register(registration.actionKind, registration.factory())\n        );\n        initializers.forEach(initializer =>\n            this.initializeActionHandler(initializer)\n        );\n    }\n\n    initializeActionHandler(initializer: IActionHandlerInitializer): void {\n        initializer.initialize(this);\n    }\n}\n\n/**\n * Utility function to register an action handler for an action kind.\n */\nexport function configureActionHandler(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        kind: string, constr: interfaces.ServiceIdentifier<IActionHandler>): void {\n    if (typeof constr === 'function') {\n        if (!isInjectable(constr)) {\n            throw new Error(`Action handlers should be @injectable: ${constr.name}`);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(TYPES.ActionHandlerRegistration).toDynamicValue(ctx => ({\n        actionKind: kind,\n        factory: () => ctx.container.get(constr)\n    }));\n}\n\n/**\n * Utility function to register an action handler for an action kind.\n */\nexport function onAction(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        kind: string, handle: (action: Action) => ICommand | Action | void): void {\n    context.bind(TYPES.ActionHandlerRegistration).toConstantValue({\n        actionKind: kind,\n        factory: () => ({ handle })\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { generateRequestId as generateRequestId2, Action as ProtocolAction} from 'sprotty-protocol/lib/actions';\nimport { JsonAny } from 'sprotty-protocol/lib/utils/json';\nimport { hasOwnProperty } from 'sprotty-protocol/lib/utils/object';\n\n/**\n * A list of actions with a label.\n * Labeled actions are used to denote a group of actions in a user-interface context, e.g.,\n * to define an entry in the command palette or in the context menu.\n */\nexport class LabeledAction {\n    constructor(readonly label: string, readonly actions: ProtocolAction[], readonly icon?: string) { }\n}\n\nexport function isLabeledAction(element: unknown): element is LabeledAction {\n    return element !== undefined\n        && (<LabeledAction>element).label !== undefined\n        && (<LabeledAction>element).actions !== undefined;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * An action describes a change to the model declaratively.\n * It is a plain data structure, and as such transferable between server and client. An action must never contain actual\n * SModelElement instances, but either refer to them via their ids or contain serializable schema for model elements.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Action {\n    readonly kind: string\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isAction(object?: unknown): object is Action {\n    return hasOwnProperty<string, string>(object, 'kind', 'string');\n}\n\n/**\n * A request action is tied to the expectation of receiving a corresponding response action.\n * The `requestId` property is used to match the received response with the original request.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface RequestAction<Res extends ResponseAction> extends Action {\n    readonly requestId: string\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isRequestAction(object?: unknown): object is RequestAction<ResponseAction> {\n    return isAction(object) && hasOwnProperty<string, string>(object, 'requestId', 'string');\n}\n\n/**\n * Generate a unique `requestId` for a request action.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport const generateRequestId: () => string = generateRequestId2;\n\n/**\n * A response action is sent to respond to a request action. The `responseId` must match\n * the `requestId` of the preceding request. In case the `responseId` is empty or undefined,\n * the action is handled as standalone, i.e. it was fired without a preceding request.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ResponseAction extends Action {\n    readonly responseId: string\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isResponseAction(object?: unknown): object is ResponseAction {\n    return isAction(object) && hasOwnProperty<string, string>(object, 'responseId', 'string')\n            && object.responseId !== '';\n}\n\n/**\n * A reject action is fired to indicate that a request must be rejected.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class RejectAction implements ResponseAction {\n    static readonly KIND = 'rejectRequest';\n    readonly kind = RejectAction.KIND;\n\n    constructor(public readonly message: string,\n                public readonly responseId: string,\n                public readonly detail?: JsonAny) {}\n}\n\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\n\n/**\n * Allows to lock the diagram by preventing certain actions from being\n * dispatched.\n *\n * This could for example be used to prevent the diagram from being modified\n * when the underlying model is broken or the server is unavailable.\n */\nexport interface IDiagramLocker {\n    isAllowed(action: Action): boolean\n}\n\n@injectable()\nexport class DefaultDiagramLocker implements IDiagramLocker {\n    isAllowed(action: Action): boolean {\n        return true;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport class AnimationFrameSyncer {\n\n    tasks: ((x?: number) => void) [] = [];\n    endTasks: ((x?: number) => void) [] = [];\n    triggered: boolean = false;\n\n    isAvailable(): boolean {\n        return typeof requestAnimationFrame === \"function\";\n    }\n\n    onNextFrame(task: (x?: number) => void) {\n        this.tasks.push(task);\n        this.trigger();\n    }\n\n    onEndOfNextFrame(task: (x?: number) => void) {\n        this.endTasks.push(task);\n        this.trigger();\n    }\n\n    protected trigger() {\n        if (!this.triggered) {\n            this.triggered = true;\n            if (this.isAvailable())\n                requestAnimationFrame((time: number) => this.run(time));\n            else\n                setTimeout((time: number) => this.run(time));\n        }\n    }\n\n    protected run(time: number) {\n        const tasks = this.tasks;\n        const endTasks = this.endTasks;\n        this.triggered = false;\n        this.tasks = [];\n        this.endTasks = [];\n        tasks.forEach(task => task.call(undefined, time));\n        endTasks.forEach(task => task.call(undefined, time));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CommandExecutionContext } from \"../commands/command\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { easeInOut } from \"./easing\";\n\n/**\n * An animation uses the rendering loop of the browser to smoothly\n * calculate a transition between two states of a model element.\n */\nexport abstract class Animation {\n\n    constructor(protected context: CommandExecutionContext, protected ease: (x: number) => number = easeInOut) {\n    }\n\n    start(): Promise<SModelRootImpl> {\n        return new Promise<SModelRootImpl>(\n            (resolve: (model: SModelRootImpl) => void, reject: (model: SModelRootImpl) => void) => {\n                let start: number | undefined = undefined;\n                let frames = 0;\n                const lambda = (time: number) => {\n                    frames++;\n                    let dtime: number;\n                    if (start === undefined) {\n                        start = time;\n                        dtime = 0;\n                    } else {\n                        dtime = time - start;\n                    }\n                    const t = Math.min(1, dtime / this.context.duration);\n                    const current = this.tween(this.ease(t), this.context);\n                    this.context.modelChanged.update(current);\n                    if (t === 1) {\n                        this.context.logger.log(this, (frames * 1000 / this.context.duration) + ' fps');\n                        resolve(current);\n                    } else {\n                        this.context.syncer.onNextFrame(lambda);\n                    }\n                };\n                if (this.context.syncer.isAvailable()) {\n                    this.context.syncer.onNextFrame(lambda);\n                } else {\n                    const finalModel = this.tween(1, this.context);\n                    resolve(finalModel);\n                }\n            });\n    }\n\n    /**\n     * This method called by the animation at each rendering pass until\n     * the duration is reached. Implement it to interpolate the state.\n     *\n     * @param t varies between 0 (start of animation) and 1 (end of animation)\n     * @param context\n     */\n    abstract tween(t: number, context: CommandExecutionContext): SModelRootImpl;\n}\n\nexport class CompoundAnimation extends Animation {\n\n    constructor(protected model: SModelRootImpl,\n                protected override context: CommandExecutionContext,\n                public components: Animation[] = [],\n                protected override ease: (x: number) => number = easeInOut) {\n        super(context, ease);\n    }\n\n    include(animation: Animation): this {\n        this.components.push(animation);\n        return this;\n    }\n\n    tween(t: number, context: CommandExecutionContext): SModelRootImpl {\n        for (const a of this.components) {\n            a.tween(t, context);\n        }\n        return this.model;\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Slows down animations towards the begin and the end.\n *\n * @param x the value between 0 (start of animation) and 1 (end of\n *     animation) linearly interpolated in time.\n * @returns {number} the eased value between 0 and 1\n */\nexport function easeInOut(x: number): number {\n    if (x < 0.5)\n        return x * x * 2;\n    else\n        return 1 - (1 - x) * (1 - x) * 2;\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject, optional, interfaces, Container } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { isInjectable } from \"../../utils/inversify\";\nimport { ActionHandlerRegistry, IActionHandler, IActionHandlerInitializer } from \"../actions/action-handler\";\nimport { ICommand } from \"./command\";\nimport { TYPES } from \"../types\";\n\nexport class CommandActionHandler implements IActionHandler {\n    constructor(private commandRegistration: CommandRegistration) {\n    }\n\n    handle(action: Action): ICommand {\n        return this.commandRegistration.factory(action);\n    }\n}\n\n@injectable()\nexport class CommandActionHandlerInitializer implements IActionHandlerInitializer {\n\n    constructor(@multiInject(TYPES.CommandRegistration) @optional() protected registrations: CommandRegistration[]) {\n    }\n\n    initialize(registry: ActionHandlerRegistry): void {\n        this.registrations.forEach(registration =>\n            registry.register(registration.kind, new CommandActionHandler(registration))\n        );\n    }\n}\n\nexport interface CommandRegistration {\n    kind: string\n    factory: (a: Action) => ICommand\n}\n\nexport interface ICommandConstructor<T extends Action> {\n    KIND: string\n    new (a: T, ...args: any[]): ICommand\n}\n\n/**\n * Use this method in your DI configuration to register a new command to the diagram.\n */\nexport function configureCommand<T extends Action>(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        constr: ICommandConstructor<T>) {\n    if (!isInjectable(constr)) {\n        throw new Error(`Commands should be @injectable: ${constr.name}`);\n    }\n    if (!context.isBound(constr)) {\n        context.bind(constr).toSelf();\n    }\n    context.bind(TYPES.CommandRegistration).toDynamicValue(ctx => ({\n        kind: constr.KIND,\n        factory: (action: Action) => {\n            const childContainer = new Container();\n            childContainer.parent = ctx.container;\n            childContainer.bind(TYPES.Action).toConstantValue(action);\n            return childContainer.get<ICommand>(constr);\n        }\n    }));\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Container } from \"inversify\";\nimport { safeAssign } from \"sprotty-protocol/lib/utils/object\";\nimport { TYPES } from '../types';\n\n/**\n * Options for the command execution\n */\nexport interface CommandStackOptions {\n    /**\n     * The default duration of an animated command in milliseconds\n     */\n    defaultDuration: number\n\n    /**\n     * The maximum number of commands that can be undone. Once the undo stack\n     * reaches this number, any additional command that is pushed will remove\n     * one from the bottom of the stack.\n     *\n     * If negative, there is no limit, which results in a memory leak.\n     */\n    undoHistoryLimit: number\n}\n\nexport function overrideCommandStackOptions(container: Container, options: Partial<CommandStackOptions>): CommandStackOptions {\n    const defaultOptions = container.get<CommandStackOptions>(TYPES.CommandStackOptions);\n    safeAssign(defaultOptions, options);\n    return defaultOptions;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { TYPES } from \"../types\";\nimport { ILogger } from \"../../utils/logging\";\nimport { EMPTY_ROOT, IModelFactory } from \"../model/smodel-factory\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { AnimationFrameSyncer } from \"../animations/animation-frame-syncer\";\nimport { IViewer, IViewerProvider } from \"../views/viewer\";\nimport { CommandStackOptions } from './command-stack-options';\nimport {\n    HiddenCommand, ICommand, CommandExecutionContext, CommandReturn, SystemCommand,\n    MergeableCommand, PopupCommand, ResetCommand, CommandResult\n} from './command';\n\n/**\n * The component that holds the current model and applies the commands\n * to change it.\n *\n * The command stack is called by the ActionDispatcher and forwards the\n * changed model to the Viewer that renders it.\n */\nexport interface ICommandStack {\n    /**\n     * Executes the given command on the current model and returns a\n     * Promise for the new result.\n     *\n     * Unless it is a special command, it is pushed to the undo stack\n     * such that it can be rolled back later and the redo stack is\n     * cleared.\n     */\n    execute(command: ICommand): Promise<SModelRootImpl>\n\n    /**\n     * Executes all of the given commands. As opposed to calling\n     * execute() multiple times, the Viewer is only updated once after\n     * the last command has been executed.\n     */\n    executeAll(commands: ICommand[]): Promise<SModelRootImpl>\n\n    /**\n     * Takes the topmost command from the undo stack, undoes its\n     * changes and pushes it ot the redo stack. Returns a Promise for\n     * the changed model.\n     */\n    undo(): Promise<SModelRootImpl>\n\n    /**\n     * Takes the topmost command from the redo stack, redoes its\n     * changes and pushes it ot the undo stack. Returns a Promise for\n     * the changed model.\n     */\n    redo(): Promise<SModelRootImpl>\n}\n\n/**\n * As part of the event cylce, the ICommandStack should be injected\n * using a provider to avoid cyclic injection dependencies.\n */\nexport type CommandStackProvider = () => Promise<ICommandStack>;\n\n/**\n * The implementation of the ICommandStack. Clients should not use this\n * class directly.\n *\n * The command stack holds the current model as the result of the current\n * promise. When a new command is executed/undone/redone, its execution is\n * chained using <code>Promise#then()</code> to the current Promise. This\n * way we can handle long running commands without blocking the current\n * thread.\n *\n * The command stack also does the special handling for special commands:\n *\n * System commands should be transparent to the user and as such be\n * automatically undone/redone with the next plain command. Additional care\n * must be taken that system commands that are executed after undo don't\n * break the correspondence between the topmost commands on the undo and\n * redo stacks.\n *\n * Hidden commands only tell the viewer to render a hidden model such that\n * its bounds can be extracted from the DOM and forwarded as separate actions.\n * Hidden commands should not leave any trace on the undo/redo/off stacks.\n *\n * Mergeable commands should be merged with their predecessor if possible,\n * such that e.g. multiple subsequent moves of the smae element can be undone\n * in one single step.\n */\n@injectable()\nexport class CommandStack implements ICommandStack {\n\n    @inject(TYPES.IModelFactory) protected modelFactory: IModelFactory;\n    @inject(TYPES.IViewerProvider) protected viewerProvider: IViewerProvider;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.AnimationFrameSyncer) protected syncer: AnimationFrameSyncer;\n    @inject(TYPES.CommandStackOptions) protected options: CommandStackOptions;\n\n    protected currentPromise: Promise<CommandStackState>;\n\n    protected modelViewer?: IViewer;\n    protected hiddenModelViewer?: IViewer;\n    protected popupModelViewer?: IViewer;\n\n    protected undoStack: ICommand[] = [];\n    protected redoStack: ICommand[] = [];\n\n    /**\n     * System commands should be transparent to the user in undo/redo\n     * operations. When a system command is executed when the redo\n     * stack is not empty, it is pushed to offStack instead.\n     *\n     * On redo, all commands form this stack are undone such that the\n     * redo operation gets the exact same model as when it was executed\n     * first.\n     *\n     * On undo, all commands form this stack are undone as well as\n     * system ommands should be transparent to the user.\n     */\n    protected offStack: ICommand[] = [];\n\n    @postConstruct()\n    protected initialize() {\n        this.currentPromise = Promise.resolve({\n            main: {\n                model: this.modelFactory.createRoot(EMPTY_ROOT),\n                modelChanged: false,\n            },\n            hidden: {\n                model: this.modelFactory.createRoot(EMPTY_ROOT),\n                modelChanged: false,\n            },\n            popup: {\n                model: this.modelFactory.createRoot(EMPTY_ROOT),\n                modelChanged: false,\n            }\n        });\n    }\n\n    protected get currentModel(): Promise<SModelRootImpl> {\n        return this.currentPromise.then(\n            state => state.main.model\n        );\n    }\n\n    executeAll(commands: ICommand[]): Promise<SModelRootImpl> {\n        commands.forEach(\n            command => {\n                this.logger.log(this, 'Executing', command);\n                this.handleCommand(command, command.execute, this.mergeOrPush);\n            }\n        );\n        return this.thenUpdate();\n    }\n\n    execute(command: ICommand): Promise<SModelRootImpl> {\n        this.logger.log(this, 'Executing', command);\n        this.handleCommand(command, command.execute, this.mergeOrPush);\n        return this.thenUpdate();\n    }\n\n    undo(): Promise<SModelRootImpl> {\n        this.undoOffStackSystemCommands();\n        this.undoPreceedingSystemCommands();\n        const command = this.undoStack[this.undoStack.length - 1];\n        if (command !== undefined && !this.isBlockUndo(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, (c: ICommand, context: CommandExecutionContext) => {\n                this.redoStack.push(c);\n            });\n        }\n        return this.thenUpdate();\n    }\n\n    redo(): Promise<SModelRootImpl> {\n        this.undoOffStackSystemCommands();\n        const command = this.redoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Redoing', command);\n            this.handleCommand(command, command.redo, (c: ICommand, context: CommandExecutionContext) => {\n                this.pushToUndoStack(c);\n            });\n        }\n        this.redoFollowingSystemCommands();\n        return this.thenUpdate();\n    }\n\n    /**\n     * Chains the current promise with another Promise that performs the\n     * given operation on the given command.\n     *\n     * @param beforeResolve a function that is called directly before\n     *      resolving the Promise to return the new model. Usually puts the\n     *      command on the appropriate stack.\n     */\n    protected handleCommand(command: ICommand,\n                            operation: (context: CommandExecutionContext) => CommandReturn,\n                            beforeResolve: (command: ICommand, context: CommandExecutionContext) => void) {\n        this.currentPromise = this.currentPromise.then(state =>\n            new Promise<CommandStackState>(resolve => {\n                let target: 'main' | 'hidden' | 'popup';\n                if (command instanceof HiddenCommand)\n                    target = 'hidden';\n                else if (command instanceof PopupCommand)\n                    target = 'popup';\n                else\n                    target = 'main';\n                const context = this.createContext(state.main.model);\n\n                let commandResult: CommandReturn;\n                try {\n                    commandResult = operation.call(command, context);\n                } catch (error) {\n                    this.logger.error(this, \"Failed to execute command:\", error);\n                    commandResult = state[target].model;\n                }\n\n                const newState = copyState(state);\n                if (commandResult instanceof Promise) {\n                    commandResult.then(newModel => {\n                        if (target === 'main')\n                            beforeResolve.call(this, command, context);\n                        newState[target] = { model: newModel, modelChanged: true };\n                        resolve(newState);\n                    });\n                } else if (commandResult instanceof SModelRootImpl) {\n                    if (target === 'main')\n                        beforeResolve.call(this, command, context);\n                    newState[target] = { model: commandResult, modelChanged: true };\n                    resolve(newState);\n                } else {\n                    if (target === 'main')\n                        beforeResolve.call(this, command, context);\n                    newState[target] = {\n                        model: commandResult.model,\n                        modelChanged: state[target].modelChanged || commandResult.modelChanged,\n                        cause: commandResult.cause\n                    };\n                    resolve(newState);\n                }\n            })\n        );\n    }\n\n    protected pushToUndoStack(command: ICommand) {\n        this.undoStack.push(command);\n        if (this.options.undoHistoryLimit >= 0 && this.undoStack.length > this.options.undoHistoryLimit)\n            this.undoStack.splice(0, this.undoStack.length - this.options.undoHistoryLimit);\n    }\n\n    /**\n     * Notifies the Viewer to render the new model and/or the new hidden model\n     * and returns a Promise for the new model.\n     */\n    protected thenUpdate(): Promise<SModelRootImpl> {\n        this.currentPromise = this.currentPromise.then(state => {\n            const newState = copyState(state);\n            if (state.hidden.modelChanged) {\n                this.updateHidden(state.hidden.model, state.hidden.cause);\n                newState.hidden.modelChanged = false;\n                newState.hidden.cause = undefined;\n            }\n            if (state.main.modelChanged) {\n                this.update(state.main.model, state.main.cause);\n                newState.main.modelChanged = false;\n                newState.main.cause = undefined;\n            }\n            if (state.popup.modelChanged) {\n                this.updatePopup(state.popup.model, state.popup.cause);\n                newState.popup.modelChanged = false;\n                newState.popup.cause = undefined;\n            }\n            return newState;\n        });\n        return this.currentModel;\n    }\n\n    /**\n     * Notify the `ModelViewer` that the model has changed.\n     */\n    update(model: SModelRootImpl, cause?: Action): void {\n        if (this.modelViewer === undefined) {\n            this.modelViewer = this.viewerProvider.modelViewer;\n        }\n        this.modelViewer.update(model, cause);\n    }\n\n    /**\n     * Notify the `HiddenModelViewer` that the hidden model has changed.\n     */\n    updateHidden(model: SModelRootImpl, cause?: Action): void {\n        if (this.hiddenModelViewer === undefined) {\n            this.hiddenModelViewer = this.viewerProvider.hiddenModelViewer;\n        }\n        this.hiddenModelViewer.update(model, cause);\n    }\n\n    /**\n     * Notify the `PopupModelViewer` that the popup model has changed.\n     */\n    updatePopup(model: SModelRootImpl, cause?: Action): void {\n        if (this.popupModelViewer === undefined) {\n            this.popupModelViewer = this.viewerProvider.popupModelViewer;\n        }\n        this.popupModelViewer.update(model, cause);\n    }\n\n    /**\n     * Handling of commands after their execution.\n     *\n     * Hidden commands are not pushed to any stack.\n     *\n     * System commands are pushed to the <code>offStack</code> when the redo\n     * stack is not empty, allowing to undo the before a redo to keep the chain\n     * of commands consistent.\n     *\n     * Mergable commands are merged if possible.\n     */\n    protected mergeOrPush(command: ICommand, context: CommandExecutionContext): void {\n        if (this.isBlockUndo(command)) {\n            this.undoStack = [];\n            this.redoStack = [];\n            this.offStack = [];\n            this.pushToUndoStack(command);\n            return;\n        }\n        if (this.isPushToOffStack(command) && this.redoStack.length > 0) {\n            if (this.offStack.length > 0) {\n                const lastCommand = this.offStack[this.offStack.length - 1];\n                if (lastCommand instanceof MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.offStack.push(command);\n            return;\n        }\n        if (this.isPushToUndoStack(command)) {\n            this.offStack.forEach(c => this.undoStack.push(c));\n            this.offStack = [];\n            this.redoStack = [];\n            if (this.undoStack.length > 0) {\n                const lastCommand = this.undoStack[this.undoStack.length - 1];\n                if (lastCommand instanceof MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.pushToUndoStack(command);\n        }\n    }\n\n    /**\n     * Reverts all system commands on the offStack.\n     */\n    protected undoOffStackSystemCommands(): void {\n        let command = this.offStack.pop();\n        while (command !== undefined) {\n            this.logger.log(this, 'Undoing off-stack', command);\n            this.handleCommand(command, command.undo, () => {});\n            command = this.offStack.pop();\n        }\n    }\n\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>undo()</code> to revert all system commands\n     * at the top of the undoStack.\n     */\n    protected undoPreceedingSystemCommands(): void {\n        let command = this.undoStack[this.undoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, (c: ICommand, context: CommandExecutionContext) => {\n                this.redoStack.push(c);\n            });\n            command = this.undoStack[this.undoStack.length - 1];\n        }\n    }\n\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>redo()</code> to re-execute all system commands\n     * at the top of the redoStack.\n     */\n    protected redoFollowingSystemCommands(): void {\n        let command = this.redoStack[this.redoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.redoStack.pop();\n            this.logger.log(this, 'Redoing ', command);\n            this.handleCommand(command, command.redo, (c: ICommand, context: CommandExecutionContext) => {\n                this.pushToUndoStack(c);\n            });\n            command = this.redoStack[this.redoStack.length - 1];\n        }\n    }\n\n    /**\n     * Assembles the context object that is passed to the commands execution method.\n     */\n    protected createContext(currentModel: SModelRootImpl): CommandExecutionContext {\n        return {\n            root: currentModel,\n            modelChanged: this,\n            modelFactory: this.modelFactory,\n            duration: this.options.defaultDuration,\n            logger: this.logger,\n            syncer: this.syncer\n        };\n    }\n\n    protected isPushToOffStack(command: ICommand): boolean {\n        return command instanceof SystemCommand;\n    }\n\n    protected isPushToUndoStack(command: ICommand): boolean {\n        return !(command instanceof HiddenCommand);\n    }\n\n    protected isBlockUndo(command: ICommand): boolean {\n        return command instanceof ResetCommand;\n    }\n}\n\n/**\n * Internal type to pass the results between the promises in the `CommandStack`.\n */\nexport interface CommandStackState {\n    main: CommandResult,\n    hidden: CommandResult,\n    popup: CommandResult\n}\n\nfunction copyState(state: CommandStackState): CommandStackState {\n    return {\n        main: {...state.main},\n        hidden: {...state.hidden},\n        popup: {...state.popup}\n    };\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { ILogger } from \"../../utils/logging\";\nimport { AnimationFrameSyncer } from \"../animations/animation-frame-syncer\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { IModelFactory } from \"../model/smodel-factory\";\nimport { IViewer } from \"../views/viewer\";\n\n/**\n * A command holds the behaviour of an action.\n * It is executed on a command stack and can be undone / redone.\n *\n * A command should store all information it needs to undo itself at a\n * later stage. It typically resolves the model elements it is going\n * to manipulate as a first step in the execute method.\n *\n * Each command should define a static string property KIND that\n * matches the associated action. This is used as a key in the\n * ActionHandlerRegistry.\n *\n * Clients should not implement the ICommand interface directly but\n * rather inherit from one of its abstract implementators.\n */\nexport interface ICommand {\n    /**\n     * If this property is present, all following actions are blocked\n     * until the function returns `true`.\n     */\n    readonly blockUntil?: (action: Action) => boolean;\n\n    execute(context: CommandExecutionContext): CommandReturn\n\n    undo(context: CommandExecutionContext): CommandReturn\n\n    redo(context: CommandExecutionContext): CommandReturn\n}\n\n/**\n * Commands return the changed model or a Promise for it. Promises\n * serve animating commands to render some intermediate states before\n * finishing. The CommandStack is in charge of chaining these promises,\n * such that they run sequentially only one at a time. Due to that\n * chaining, it is essential that a command does not make any assumption\n * on the state of the model before execute() is called.\n */\nexport type CommandReturn = SModelRootImpl | Promise<SModelRootImpl> | CommandResult;\n\n/**\n * The `CommandResult` allows to specify whether the model has changed\n * and the original action that caused the command to be executed. In case such\n * an action is given, it is passed to the viewer in order to link any\n * subsequent response action to the original request.\n */\nexport type CommandResult = { model: SModelRootImpl, modelChanged: boolean, cause?: Action };\n\n/**\n * Base class for all commands.\n *\n * Command instances are created via dependency injection and should take\n * the respective action as an injected constructor parameter. They must\n * also define a static <code>KIND</code> which is used to map an\n * <code>Action#kind</code>.\n *\n * <pre>\n * export class MyCommand extends Command {\n *   static KIND = 'MyCommand'\n *   constructor(@inject(TYPES.Action) action: MyAction) {\n *   ...\n * }\n * @inject(TYPES.Action)\n * </pre>\n */\n@injectable()\nexport abstract class Command implements ICommand {\n\n    abstract execute(context: CommandExecutionContext): CommandReturn;\n\n    abstract undo(context: CommandExecutionContext): CommandReturn;\n\n    abstract redo(context: CommandExecutionContext): CommandReturn;\n}\n\n/**\n * A mergeable command can accumulate subsequent commands of the same kind.\n *\n * For example, multiple subsequent move commands can be merged to yield a\n * single command, such that undo will roll them back altogether. Otherwise\n * the user would have to push CTRL-Z for each mouse move element that\n * resuted in a command.\n */\n@injectable()\nexport abstract class MergeableCommand extends Command {\n    /**\n     * Tries to merge the given command with this.\n     *\n     * @param command\n     * @param context\n     */\n    merge(command: ICommand, context: CommandExecutionContext): boolean {\n        return false;\n    }\n}\n\n/**\n * A hidden command is used to trigger the rendering of a model on a\n * hidden canvas.\n *\n * Some graphical elements are styled using CSS, others have bounds that\n * require to layout their children before being computed. In such cases\n * we cannot tell about the size of elements without acutally rendering\n * the DOM. We render them to an invisible canvas. This can be achieved\n * using hidden commands.\n *\n * Hidden commands do not change the model directly, and are as such\n * neither undoable nor redoable. The command stack does not push them on\n * any stack and forwards the resulting model to the invisible viewer.\n */\n@injectable()\nexport abstract class HiddenCommand extends Command {\n    abstract override execute(context: CommandExecutionContext): SModelRootImpl | CommandResult;\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        context.logger.error(this, 'Cannot undo a hidden command');\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        context.logger.error(this, 'Cannot redo a hidden command');\n        return context.root;\n    }\n}\n\n@injectable()\nexport abstract class PopupCommand extends Command {\n}\n\n/**\n * A system command is triggered by the system, e.g. in order to update bounds\n * in the model with data fetched from the DOM.\n *\n * As it is automatically triggered it should not count as a single command in\n * undo/redo operations. Into the bargain, such an automatic command could occur\n * after an undo and as such make the next redo command invalid because it is\n * based on a model state that has changed. The command stack handles system\n * commands in a special way to overcome these issues.\n */\n@injectable()\nexport abstract class SystemCommand extends Command {\n}\n\n/**\n * A reset command deletes all undo/redo stacks and cannot be undone.\n *\n * It marks a point of no return.\n */\n@injectable()\nexport abstract class ResetCommand extends Command {\n}\n\n/**\n * The data that is passed into the execution methods of a command to give it\n * access to the context.\n */\nexport interface CommandExecutionContext {\n    /** The current Sprotty model (i.e. the main model that is visible to the user) */\n    root: SModelRootImpl\n\n    /** Used to turn sprotty schema elements (e.g. from the action) into model elements */\n    modelFactory: IModelFactory\n\n    /** Allows to give some feedback to the console */\n    logger: ILogger\n\n    /** Used for anmiations to trigger the rendering of a new frame */\n    modelChanged: IViewer\n\n    /** Duration of an anmiation */\n    duration: number\n\n    /** Provides the ticks for animations */\n    syncer: AnimationFrameSyncer\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { ResponseAction } from \"sprotty-protocol/lib/actions\";\nimport { TYPES } from \"../types\";\nimport { SystemCommand, CommandExecutionContext, CommandReturn } from \"./command\";\nimport { IActionDispatcher } from \"../actions/action-dispatcher\";\n\n/**\n * A command that does not modify the internal model, but retrieves information\n * from it by dispatching a response action.\n */\n@injectable()\nexport abstract class ModelRequestCommand extends SystemCommand {\n\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const result = this.retrieveResult(context);\n        this.actionDispatcher.dispatch(result);\n        return { model: context.root, modelChanged: false };\n    }\n\n    protected abstract retrieveResult(context: CommandExecutionContext): ResponseAction;\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return { model: context.root, modelChanged: false };\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return { model: context.root, modelChanged: false };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"./types\";\nimport { CanvasBoundsInitializer, InitializeCanvasBoundsCommand } from './features/initialize-canvas';\nimport { LogLevel, NullLogger } from \"../utils/logging\";\nimport { ActionDispatcher, IActionDispatcher } from \"./actions/action-dispatcher\";\nimport { ActionHandlerRegistry, configureActionHandler } from \"./actions/action-handler\";\nimport { CommandStack, ICommandStack } from \"./commands/command-stack\";\nimport { CommandStackOptions } from \"./commands/command-stack-options\";\nimport { SModelFactory, SModelRegistry } from './model/smodel-factory';\nimport { AnimationFrameSyncer } from \"./animations/animation-frame-syncer\";\nimport { IViewer, ModelViewer, HiddenModelViewer, PopupModelViewer, ModelRenderer, PatcherProvider } from \"./views/viewer\";\nimport { ViewerOptions, defaultViewerOptions } from \"./views/viewer-options\";\nimport { MouseTool, PopupMouseTool, MousePositionTracker } from \"./views/mouse-tool\";\nimport { KeyTool } from \"./views/key-tool\";\nimport { FocusFixPostprocessor, IVNodePostprocessor } from \"./views/vnode-postprocessor\";\nimport { ViewRegistry, RenderingTargetKind, IViewArgs } from \"./views/view\";\nimport { ViewerCache } from \"./views/viewer-cache\";\nimport { DOMHelper } from \"./views/dom-helper\";\nimport { IdPostprocessor } from \"./views/id-postprocessor\";\nimport { configureCommand, CommandActionHandlerInitializer } from \"./commands/command-registration\";\nimport { CssClassPostprocessor } from \"./views/css-class-postprocessor\";\nimport { ToolManager, DefaultToolsEnablingKeyListener, ToolManagerActionHandler } from \"./tool-manager/tool-manager\";\nimport { EnableDefaultToolsAction, EnableToolsAction } from \"./tool-manager/tool\";\nimport { SetModelCommand } from \"./features/set-model\";\nimport { UIExtensionRegistry, SetUIExtensionVisibilityCommand } from \"./ui-extensions/ui-extension-registry\";\nimport { DefaultDiagramLocker } from \"./actions/diagram-locker\";\n\nconst defaultContainerModule = new ContainerModule((bind, _unbind, isBound) => {\n    // Logging ---------------------------------------------\n    bind(TYPES.ILogger).to(NullLogger).inSingletonScope();\n    bind(TYPES.LogLevel).toConstantValue(LogLevel.warn);\n\n    // Registries ---------------------------------------------\n    bind(TYPES.SModelRegistry).to(SModelRegistry).inSingletonScope();\n    bind(ActionHandlerRegistry).toSelf().inSingletonScope();\n    bind(TYPES.ActionHandlerRegistryProvider).toProvider<ActionHandlerRegistry>(ctx => {\n        return () => {\n            return new Promise<ActionHandlerRegistry>((resolve) => {\n                resolve(ctx.container.get<ActionHandlerRegistry>(ActionHandlerRegistry));\n            });\n        };\n    });\n    bind(TYPES.ViewRegistry).to(ViewRegistry).inSingletonScope();\n\n    // Model Creation ---------------------------------------------\n    bind(TYPES.IModelFactory).to(SModelFactory).inSingletonScope();\n\n    // Action Dispatcher ---------------------------------------------\n    bind(TYPES.IActionDispatcher).to(ActionDispatcher).inSingletonScope();\n    bind(TYPES.IActionDispatcherProvider).toProvider<IActionDispatcher>(ctx => {\n        return () => {\n            return new Promise<IActionDispatcher>((resolve) => {\n                resolve(ctx.container.get<IActionDispatcher>(TYPES.IActionDispatcher));\n            });\n        };\n    });\n    bind(TYPES.IDiagramLocker).to(DefaultDiagramLocker).inSingletonScope();\n\n    // Action handler\n    bind(TYPES.IActionHandlerInitializer).to(CommandActionHandlerInitializer);\n\n    // Command Stack ---------------------------------------------\n    bind(TYPES.ICommandStack).to(CommandStack).inSingletonScope();\n    bind(TYPES.ICommandStackProvider).toProvider<ICommandStack>(ctx => {\n        return () => {\n            return new Promise<ICommandStack>((resolve) => {\n                resolve(ctx.container.get<ICommandStack>(TYPES.ICommandStack));\n            });\n        };\n    });\n    bind<CommandStackOptions>(TYPES.CommandStackOptions).toConstantValue({\n        defaultDuration: 250,\n        undoHistoryLimit: 50\n    });\n\n    // Viewer ---------------------------------------------\n    bind(ModelViewer).toSelf().inSingletonScope();\n    bind(HiddenModelViewer).toSelf().inSingletonScope();\n    bind(PopupModelViewer).toSelf().inSingletonScope();\n    bind(TYPES.ModelViewer).toDynamicValue(ctx => {\n        const container = ctx.container.createChild();\n        container.bind(TYPES.IViewer).toService(ModelViewer);\n        container.bind(ViewerCache).toSelf();\n        return container.get(ViewerCache);\n    }).inSingletonScope();\n    bind(TYPES.PopupModelViewer).toDynamicValue(ctx => {\n        const container = ctx.container.createChild();\n        container.bind(TYPES.IViewer).toService(PopupModelViewer);\n        container.bind(ViewerCache).toSelf();\n        return container.get(ViewerCache);\n    }).inSingletonScope();\n    bind(TYPES.HiddenModelViewer).toService(HiddenModelViewer);\n    bind(TYPES.IViewerProvider).toDynamicValue(ctx => {\n        return {\n            get modelViewer() {\n                return ctx.container.get<IViewer>(TYPES.ModelViewer);\n            },\n            get hiddenModelViewer() {\n                return ctx.container.get<IViewer>(TYPES.HiddenModelViewer);\n            },\n            get popupModelViewer() {\n                return ctx.container.get<IViewer>(TYPES.PopupModelViewer);\n            }\n        };\n    });\n    bind<ViewerOptions>(TYPES.ViewerOptions).toConstantValue(defaultViewerOptions());\n    bind(TYPES.PatcherProvider).to(PatcherProvider).inSingletonScope();\n    bind(TYPES.DOMHelper).to(DOMHelper).inSingletonScope();\n    bind(TYPES.ModelRendererFactory).toFactory<ModelRenderer>(ctx => {\n        return (targetKind: RenderingTargetKind, processors: IVNodePostprocessor[], args: IViewArgs = {}) => {\n            const viewRegistry = ctx.container.get<ViewRegistry>(TYPES.ViewRegistry);\n            return new ModelRenderer(viewRegistry, targetKind, processors, args);\n        };\n    });\n\n    // Tools & Postprocessors --------------------------------------\n    bind(IdPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(IdPostprocessor);\n    bind(TYPES.HiddenVNodePostprocessor).toService(IdPostprocessor);\n    bind(CssClassPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(CssClassPostprocessor);\n    bind(TYPES.HiddenVNodePostprocessor).toService(CssClassPostprocessor);\n    bind(MouseTool).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(MouseTool);\n    bind(KeyTool).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(KeyTool);\n    bind(FocusFixPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(FocusFixPostprocessor);\n    bind(TYPES.PopupVNodePostprocessor).toService(IdPostprocessor);\n    bind(PopupMouseTool).toSelf().inSingletonScope();\n    bind(TYPES.PopupVNodePostprocessor).toService(PopupMouseTool);\n\n    // Animation Frame Sync ------------------------------------------\n    bind(TYPES.AnimationFrameSyncer).to(AnimationFrameSyncer).inSingletonScope();\n\n    // Canvas Initialization ---------------------------------------------\n    const context = { bind, isBound };\n    configureCommand(context, InitializeCanvasBoundsCommand);\n    bind(CanvasBoundsInitializer).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(CanvasBoundsInitializer);\n\n    // Model commands ---------------------------------------------\n    configureCommand(context, SetModelCommand);\n\n    // Tool manager initialization ------------------------------------\n    bind(TYPES.IToolManager).to(ToolManager).inSingletonScope();\n    bind(DefaultToolsEnablingKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(DefaultToolsEnablingKeyListener);\n    bind(ToolManagerActionHandler).toSelf().inSingletonScope();\n    configureActionHandler(context, EnableDefaultToolsAction.KIND, ToolManagerActionHandler);\n    configureActionHandler(context, EnableToolsAction.KIND, ToolManagerActionHandler);\n\n    // UIExtension registry initialization ------------------------------------\n    bind(TYPES.UIExtensionRegistry).to(UIExtensionRegistry).inSingletonScope();\n    configureCommand(context, SetUIExtensionVisibilityCommand);\n\n    // Tracker for last known mouse position on diagram ------------------------\n    bind(MousePositionTracker).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(MousePositionTracker);\n});\n\nexport default defaultContainerModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { almostEquals, Bounds, Dimension } from \"sprotty-protocol/lib/utils/geometry\";\nimport { TYPES } from \"../types\";\nimport { IActionDispatcher } from '../actions/action-dispatcher';\nimport { IVNodePostprocessor } from \"../views/vnode-postprocessor\";\nimport { SModelElementImpl, SModelRootImpl } from \"../model/smodel\";\nimport { SystemCommand, CommandExecutionContext, CommandReturn } from '../commands/command';\nimport { getWindowScroll } from \"../../utils/browser\";\n\n/**\n * Grabs the bounds from the root element in page coordinates and fires a\n * InitializeCanvasBoundsAction. This size is needed for other actions such\n * as FitToScreenAction.\n */\n@injectable()\nexport class CanvasBoundsInitializer implements IVNodePostprocessor {\n\n    protected rootAndVnode: [SModelRootImpl, VNode] | undefined;\n\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (element instanceof SModelRootImpl && !Dimension.isValid(element.canvasBounds)) {\n            this.rootAndVnode = [element, vnode];\n        }\n        return vnode;\n    }\n\n    postUpdate() {\n        if (this.rootAndVnode !== undefined) {\n            const domElement = this.rootAndVnode[1].elm;\n            const oldBounds = this.rootAndVnode[0].canvasBounds;\n            if (domElement !== undefined) {\n                const newBounds = this.getBoundsInPage(domElement as Element);\n                if (!(almostEquals(newBounds.x, oldBounds.x)\n                        && almostEquals(newBounds.y, oldBounds.y)\n                        && almostEquals(newBounds.width, oldBounds.width)\n                        && almostEquals(newBounds.height, oldBounds.width)))\n                    this.actionDispatcher.dispatch(InitializeCanvasBoundsAction.create(newBounds));\n\n            }\n            this.rootAndVnode = undefined;\n        }\n    }\n\n    protected getBoundsInPage(element: Element) {\n        const bounds = element.getBoundingClientRect();\n        const scroll = getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    }\n}\n\nexport interface InitializeCanvasBoundsAction extends Action {\n    kind: typeof InitializeCanvasBoundsAction.KIND\n    newCanvasBounds: Bounds\n}\nexport namespace InitializeCanvasBoundsAction {\n    export const KIND = 'initializeCanvasBounds';\n\n    export function create(newCanvasBounds: Bounds): InitializeCanvasBoundsAction {\n        return {\n            kind: KIND,\n            newCanvasBounds\n        };\n    }\n}\n\n@injectable()\nexport class InitializeCanvasBoundsCommand extends SystemCommand {\n    static readonly KIND: string = InitializeCanvasBoundsAction.KIND;\n\n    private newCanvasBounds: Bounds;\n\n    constructor(@inject(TYPES.Action) protected readonly action: InitializeCanvasBoundsAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.newCanvasBounds = this.action.newCanvasBounds;\n        context.root.canvasBounds = this.newCanvasBounds;\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport {\n    Action, generateRequestId, RequestAction, ResponseAction,\n    RequestModelAction as ProtocolRequestModelAction, SetModelAction as ProtocolSetModelAction\n} from \"sprotty-protocol/lib/actions\";\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { JsonPrimitive } from \"sprotty-protocol/lib/utils/json\";\nimport { CommandExecutionContext, ResetCommand } from \"../commands/command\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { TYPES } from \"../types\";\nimport { InitializeCanvasBoundsCommand } from './initialize-canvas';\n\n@injectable()\nexport class SetModelCommand extends ResetCommand {\n    static readonly KIND = ProtocolSetModelAction.KIND;\n\n    oldRoot: SModelRootImpl;\n    newRoot: SModelRootImpl;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolSetModelAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRootImpl {\n        this.oldRoot = context.modelFactory.createRoot(context.root);\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    }\n\n    undo(context: CommandExecutionContext): SModelRootImpl {\n        return this.oldRoot;\n    }\n\n    redo(context: CommandExecutionContext): SModelRootImpl {\n        return this.newRoot;\n    }\n\n    get blockUntil(): (action: Action) => boolean {\n        return action => action.kind === InitializeCanvasBoundsCommand.KIND;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class RequestModelAction implements ProtocolRequestModelAction {\n    static readonly KIND = 'requestModel';\n    readonly kind = RequestModelAction.KIND;\n\n    constructor(public readonly options?: { [key: string]: JsonPrimitive },\n        public readonly requestId = '') { }\n\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    static create(options?: { [key: string]: JsonPrimitive }): RequestAction<SetModelAction> {\n        return new RequestModelAction(options, generateRequestId());\n    }\n}\n\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SetModelAction implements ResponseAction, ProtocolSetModelAction {\n    static readonly KIND = 'setModel';\n    readonly kind = SetModelAction.KIND;\n\n    constructor(public readonly newRoot: SModelRootSchema,\n        public readonly responseId = '') { }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Interface to mark interefaces that extend the properties of SModelElements,\n * usually to store data to support some feature.\n */\nexport interface SModelExtension {}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject, optional, inject } from 'inversify';\nimport { SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { TYPES } from \"../types\";\nimport { FactoryRegistry } from '../../utils/registry';\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl, SParentElementImpl, isParent, FeatureSet } from './smodel';\n\n/**\n * Model element classes registered here are considered automatically when constructring a model from its schema.\n */\n@injectable()\nexport class SModelRegistry extends FactoryRegistry<SModelElementImpl, void> {\n    constructor(@multiInject(TYPES.SModelElementRegistration) @optional() registrations: SModelElementRegistration[]) {\n        super();\n\n        registrations.forEach(registration => {\n            let defaultFeatures = this.getDefaultFeatures(registration.constr);\n            if (!defaultFeatures && registration.features && registration.features.enable)\n                defaultFeatures = [];\n            if (defaultFeatures) {\n                const featureSet = createFeatureSet(defaultFeatures, registration.features);\n                this.register(registration.type, () => {\n                    const element = new registration.constr();\n                    element.features = featureSet;\n                    return element;\n                });\n            } else {\n                this.register(registration.type, () => new registration.constr());\n            }\n        });\n    }\n\n    protected getDefaultFeatures(constr: SModelElementConstructor): ReadonlyArray<symbol> | undefined {\n        let obj = constr;\n        do {\n            const defaultFeatures = obj.DEFAULT_FEATURES;\n            if (defaultFeatures)\n                return defaultFeatures;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return undefined;\n    }\n}\n\n/**\n * A model factory transforms a serializable model schema into the model representation that is used\n * internally by sprotty.\n */\nexport interface IModelFactory {\n    createElement(schema: SModelElementSchema | SModelElementImpl, parent?: SParentElementImpl): SChildElementImpl\n\n    createRoot(schema: SModelRootSchema | SModelRootImpl): SModelRootImpl\n\n    createSchema(element: SModelElementImpl): SModelElementSchema\n}\n\n/**\n * The default model factory creates SModelRoot for the root element and SChildElement for all other\n * model elements.\n */\n@injectable()\nexport class SModelFactory implements IModelFactory {\n\n    @inject(TYPES.SModelRegistry) protected readonly registry: SModelRegistry;\n\n    createElement(schema: SModelElementSchema | SModelElementImpl, parent?: SParentElementImpl): SChildElementImpl {\n        let child: SChildElementImpl;\n        if (this.registry.hasKey(schema.type)) {\n            const regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof SChildElementImpl))\n                throw new Error(`Element with type ${schema.type} was expected to be an SChildElement.`);\n            child = regElement;\n        } else {\n            child = new SChildElementImpl();\n        }\n        return this.initializeChild(child, schema, parent);\n    }\n\n    createRoot(schema: SModelRootSchema | SModelRootImpl): SModelRootImpl {\n        let root: SModelRootImpl;\n        if (this.registry.hasKey(schema.type)) {\n            const regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof SModelRootImpl))\n                throw new Error(`Element with type ${schema.type} was expected to be an SModelRoot.`);\n            root = regElement;\n        } else {\n            root = new SModelRootImpl();\n        }\n        return this.initializeRoot(root, schema);\n    }\n\n    createSchema(element: SModelElementImpl): SModelElementSchema {\n        const schema = {};\n        for (const key in element) {\n             if (!this.isReserved(element, key)) {\n                const value: any = (element as any)[key];\n                if (typeof value !== 'function')\n                    (schema as any)[key] = value;\n            }\n        }\n        if (element instanceof SParentElementImpl)\n            (schema as any)['children'] = element.children.map(child => this.createSchema(child));\n        return schema as SModelElementSchema;\n    }\n\n    protected initializeElement(element: SModelElementImpl, schema: SModelElementSchema | SModelElementImpl): SModelElementImpl {\n        for (const key in schema) {\n            if (!this.isReserved(element, key)) {\n                const value: any = (schema as any)[key];\n                if (typeof value !== 'function')\n                    (element as any)[key] = value;\n            }\n        }\n        return element;\n    }\n\n    protected isReserved(element: SModelElementImpl, propertyName: string) {\n        if (['children', 'parent', 'index'].indexOf(propertyName) >= 0)\n            return true;\n        let obj = element;\n        do {\n            const descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined)\n                return descriptor.get !== undefined;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    }\n\n    protected initializeParent(parent: SParentElementImpl, schema: SModelElementSchema | SParentElementImpl): SParentElementImpl {\n        this.initializeElement(parent, schema);\n        if (isParent(schema)) {\n            (parent as any).children = schema.children.map(childSchema => this.createElement(childSchema, parent));\n        }\n        return parent;\n    }\n\n    protected initializeChild(child: SChildElementImpl, schema: SModelElementSchema, parent?: SParentElementImpl): SChildElementImpl {\n        this.initializeParent(child, schema);\n        if (parent !== undefined) {\n            (child as any).parent = parent;\n        }\n        return child;\n    }\n\n    protected initializeRoot(root: SModelRootImpl, schema: SModelRootSchema | SModelRootImpl): SModelRootImpl {\n        this.initializeParent(root, schema);\n        root.index.add(root);\n        return root;\n    }\n}\n\nexport const EMPTY_ROOT: Readonly<SModelRootSchema> = Object.freeze({\n    type: 'NONE',\n    id: 'EMPTY'\n});\n\n/**\n * Used to bind a model element type to a class constructor in the SModelRegistry.\n */\nexport interface SModelElementRegistration {\n    type: string\n    constr: SModelElementConstructor\n    features?: CustomFeatures\n}\n\nexport interface SModelElementConstructor {\n    DEFAULT_FEATURES?: ReadonlyArray<symbol>\n    new (): SModelElementImpl\n}\n\nexport interface CustomFeatures {\n    enable?: symbol[]\n    disable?: symbol[]\n}\n\nexport function createFeatureSet(defaults: ReadonlyArray<symbol>, custom?: CustomFeatures): FeatureSet {\n    const featureSet = new Set<symbol>(defaults);\n    if (custom && custom.enable) {\n        for (const f of custom.enable) {\n            featureSet.add(f);\n        }\n    }\n    if (custom && custom.disable) {\n        for (const f of custom.disable) {\n            featureSet.delete(f);\n        }\n    }\n    return featureSet;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from \"inversify\";\nimport { SModelElement as SModelElementSchema } from 'sprotty-protocol/lib/model';\nimport { Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { TYPES } from \"../types\";\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl, SParentElementImpl } from \"./smodel\";\nimport { SModelElementRegistration, CustomFeatures } from \"./smodel-factory\";\n\n/**\n * Register a model element constructor for an element type.\n */\nexport function registerModelElement(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        type: string, constr: new () => SModelElementImpl, features?: CustomFeatures): void {\n    context.bind<SModelElementRegistration>(TYPES.SModelElementRegistration).toConstantValue({\n        type, constr, features\n    });\n}\n\n/**\n * Find a parent element that satisfies the given predicate.\n */\nexport function findParent(element: SModelElementImpl, predicate: (e: SModelElementImpl) => boolean): SModelElementImpl | undefined {\n    let current: SModelElementImpl | undefined = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof SChildElementImpl)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\n\n/**\n * Find a parent element that implements the feature identified with the given predicate.\n */\nexport function findParentByFeature<T>(element: SModelElementImpl, predicate: (t: SModelElementImpl) => t is SModelElementImpl & T): SModelElementImpl & T | undefined {\n    let current: SModelElementImpl | undefined = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof SChildElementImpl)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\n\n/**\n * Translate a point from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nexport function translatePoint(point: Point, source: SModelElementImpl, target: SModelElementImpl): Point {\n    if (source !== target) {\n        // Translate from the source to the root element\n        while (source instanceof SChildElementImpl) {\n            point = source.localToParent(point);\n            source = source.parent;\n            if (source === target)\n                return point;\n        }\n        // Translate from the root to the target element\n        const targetTrace = [];\n        while (target instanceof SChildElementImpl) {\n            targetTrace.push(target);\n            target = target.parent;\n        }\n        if (source !== target)\n            throw new Error(\"Incompatible source and target: \" + source.id + \", \" + target.id);\n        for (let i = targetTrace.length - 1; i >= 0; i--) {\n            point = targetTrace[i].parentToLocal(point);\n        }\n    }\n    return point;\n}\n\n/**\n * Translate some bounds from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nexport function translateBounds(bounds: Bounds, source: SModelElementImpl, target: SModelElementImpl): Bounds {\n    const upperLeft = translatePoint(bounds, source, target);\n    const lowerRight = translatePoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, source, target);\n    return {\n        x: upperLeft.x,\n        y: upperLeft.y,\n        width: lowerRight.x - upperLeft.x,\n        height: lowerRight.y - upperLeft.y\n    };\n}\n\n/**\n * Tests if the given model contains an id of then given element or one of its descendants.\n */\nexport function containsSome(root: SModelRootImpl, element: SChildElementImpl): boolean {\n    const test = (el: SChildElementImpl) => root.index.getById(el.id) !== undefined;\n    const find = (elements: readonly SChildElementImpl[]): boolean => elements.some(el => test(el) || find(el.children));\n    return find([element]);\n}\n\n/**\n * Transforms the local bounds all the way up to the root.\n */\nexport function  transformToRootBounds(parent: SParentElementImpl, bounds: Bounds) {\n    while (parent instanceof SChildElementImpl) {\n        bounds = parent.localToParent(bounds);\n        parent = parent.parent;\n    }\n    return bounds;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function getBasicType(schema: SModelElementSchema | SModelElementImpl): string {\n    if (!schema.type)\n        return '';\n    const colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(0, colonIndex);\n    else\n        return schema.type;\n}\n\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function getSubType(schema: SModelElementSchema | SModelElementImpl): string {\n    if (!schema.type)\n        return '';\n    const colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(colonIndex + 1);\n    else\n        return schema.type;\n}\n\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * SModelIndex might be more effective.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function findElement(parent: SModelElementSchema, elementId: string): SModelElementSchema | undefined {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (const child of parent.children) {\n            const result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElement as ProtocolSModelElement } from 'sprotty-protocol';\nimport { Bounds, isBounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { FluentIterable, mapIterable } from '../../utils/iterable';\n\n/**\n * Base class for all elements of the internal diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nexport class SModelElementImpl {\n    type: string;\n    id: string;\n    features?: FeatureSet;\n    cssClasses?: string[];\n\n    get root(): SModelRootImpl {\n        let current: SModelElementImpl | undefined = this;\n        while (current) {\n            if (current instanceof SModelRootImpl)\n                return current;\n            else if (current instanceof SChildElementImpl)\n                current = current.parent;\n            else\n                current = undefined;\n        }\n        throw new Error('Element has no root');\n    }\n\n    get index(): ModelIndexImpl {\n        return this.root.index;\n    }\n\n    /**\n     * A feature is a symbol identifying some functionality that can be enabled or disabled for\n     * a model element. The set of supported features is determined by the `features` property.\n     */\n    hasFeature(feature: symbol): boolean {\n        return this.features !== undefined && this.features.has(feature);\n    }\n}\n\n\nexport interface FeatureSet {\n    has(feature: symbol): boolean\n}\n\nexport function isParent(element: ProtocolSModelElement | SModelElementImpl):\n        element is ProtocolSModelElement & { children: ProtocolSModelElement[] } {\n    const children = (element as any).children;\n    return children !== undefined && children.constructor === Array;\n}\n\n/**\n * A parent element may contain child elements, thus the diagram model forms a tree.\n */\nexport class SParentElementImpl extends SModelElementImpl {\n    readonly children: ReadonlyArray<SChildElementImpl> = [];\n\n    add(child: SChildElementImpl, index?: number) {\n        const children = this.children as SChildElementImpl[];\n        if (index === undefined) {\n            children.push(child);\n        } else {\n            if (index < 0 || index > this.children.length) {\n                throw new Error(`Child index ${index} out of bounds (0..${children.length})`);\n            }\n            children.splice(index, 0, child);\n        }\n        (child as {parent: SParentElementImpl}).parent = this;\n        this.index.add(child);\n    }\n\n    remove(child: SChildElementImpl) {\n        const children = this.children as SChildElementImpl[];\n        const i = children.indexOf(child);\n        if (i < 0) {\n            throw new Error(`No such child ${child.id}`);\n        }\n        children.splice(i, 1);\n        this.index.remove(child);\n    }\n\n    removeAll(filter?: (e: SChildElementImpl) => boolean) {\n        const children = this.children as SChildElementImpl[];\n        if (filter !== undefined) {\n            for (let i = children.length - 1; i >= 0; i--) {\n                if (filter(children[i])) {\n                    const child = children.splice(i, 1)[0];\n                    this.index.remove(child);\n                }\n            }\n        } else {\n            children.forEach(child => {\n                this.index.remove(child);\n            });\n            children.splice(0, children.length);\n        }\n    }\n\n    move(child: SChildElementImpl, newIndex: number) {\n        const children = this.children as SChildElementImpl[];\n        const i = children.indexOf(child);\n        if (i === -1) {\n            throw new Error(`No such child ${child.id}`);\n        } else {\n            if (newIndex < 0 || newIndex > children.length - 1) {\n                throw new Error(`Child index ${newIndex} out of bounds (0..${children.length})`);\n            }\n            children.splice(i, 1);\n            children.splice(newIndex, 0, child);\n        }\n    }\n\n    /**\n     * Transform the given bounds from the local coordinate system of this element to the coordinate\n     * system of its parent. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    localToParent(point: Point | Bounds): Bounds {\n        return isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    }\n\n    /**\n     * Transform the given bounds from the coordinate system of this element's parent to its local\n     * coordinate system. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    parentToLocal(point: Point | Bounds): Bounds {\n        return isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    }\n}\n\n/**\n * A child element is contained in a parent element. All elements except the model root are child\n * elements. In order to keep the model class hierarchy simple, every child element is also a\n * parent element, although for many elements the array of children is empty (i.e. they are\n * leafs in the model element tree).\n */\nexport class SChildElementImpl extends SParentElementImpl {\n    readonly parent: SParentElementImpl;\n}\n\n\n/**\n * Base class for the root element of the diagram model tree.\n */\nexport class SModelRootImpl extends SParentElementImpl {\n    revision?: number;\n\n    canvasBounds: Bounds = Bounds.EMPTY;\n\n    constructor(index = new ModelIndexImpl()) {\n        super();\n          // Override the index property from SModelElement, which has a getter, with a data property\n          Object.defineProperty(this, 'index', {\n            value: index,\n            writable: false\n        });\n    }\n}\n\nconst ID_CHARS = '0123456789abcdefghijklmnopqrstuvwxyz';\nexport function createRandomId(length: number = 8): string {\n    let id = '';\n    for (let i = 0; i < length; i++) {\n        id += ID_CHARS.charAt(Math.floor(Math.random() * ID_CHARS.length));\n    }\n    return id;\n}\n\n\n/**\n * Used to speed up model element lookup by id.\n */\n export interface IModelIndex {\n    add(element: ProtocolSModelElement): void\n    remove(element: ProtocolSModelElement): void\n    contains(element: ProtocolSModelElement): boolean\n    getById(id: string): ProtocolSModelElement | undefined\n}\n\n/**\n * This index implementation is for the _internal model_ that is used for rendering.\n */\nexport class ModelIndexImpl implements IModelIndex {\n\n    private readonly id2element: Map<string, SModelElementImpl> = new Map();\n\n    add(element: SModelElementImpl): void {\n        if (!element.id) {\n            do {\n                element.id = createRandomId();\n            } while (this.contains(element));\n        } else if (this.contains(element)) {\n            throw new Error('Duplicate ID in model: ' + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (element instanceof SParentElementImpl) {\n            for (const child of element.children) {\n                this.add(child as any);\n            }\n        }\n    }\n\n    remove(element: SModelElementImpl): void {\n        this.id2element.delete(element.id);\n        if (element instanceof SParentElementImpl) {\n            for (const child of element.children) {\n                this.remove(child as any);\n            }\n        }\n    }\n\n    contains(element: SModelElementImpl): boolean {\n        return this.id2element.has(element.id);\n    }\n\n    getById(id: string): SModelElementImpl | undefined {\n        return this.id2element.get(id);\n    }\n\n    getAttachedElements(element: SModelElementImpl): FluentIterable<SModelElementImpl> {\n        return [];\n    }\n\n    all(): FluentIterable<SModelElementImpl> {\n        return mapIterable(this.id2element, ([key, value]: [string, SModelElementImpl]) => value);\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * The schema of an SModelElement describes its serializable form. The actual model is created from\n * its schema with an IModelFactory.\n * Each model element must have a unique ID and a type that is used to look up its view.\n *\n * @deprecated Use `SModelElement` from `sprotty-protocol` instead.\n */\nexport interface SModelElementSchema {\n    type: string\n    id: string\n    children?: SModelElementSchema[]\n    cssClasses?: string[]\n}\n\n/**\n * Serializable schema for the root element of the model tree.\n *\n * @deprecated Use `SModelRoot` from `sprotty-protocol` instead.\n */\nexport interface SModelRootSchema extends SModelElementSchema {\n    canvasBounds?: Bounds\n    revision?: number\n}\n\n/** @deprecated Use `SParentElementImpl` instead. */\nexport const SParentElement = SParentElementImpl;\n\n/** @deprecated Use `SChildElementImpl` instead. */\nexport const SChildElement = SChildElementImpl;\n\n/** @deprecated Use `SModelElementImpl` instead. */\nexport const SModelElement = SModelElementImpl;\n\n/** @deprecated Use `SModelRootImpl` instead. */\nexport const SModelRoot = SModelRootImpl;\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { TYPES } from \"../types\";\nimport { EnableDefaultToolsAction, EnableToolsAction, Tool } from \"./tool\";\nimport { IActionHandler } from \"../actions/action-handler\";\nimport { ICommand } from \"../commands/command\";\nimport { KeyListener } from \"../views/key-tool\";\nimport { SModelElementImpl } from \"../model/smodel\";\nimport { matchesKeystroke } from \"../../utils/keyboard\";\n\n/**\n * A tool manager coordinates the state of tools in the context of an editor.\n *\n * One instance of a tool manager is intended per editor, coordinating the state of all tools within\n * this editor. A tool can be active or not. A tool manager ensures that activating a set of tools\n * will disable all other tools, allowing them to invoke behavior when they become enabled or disabled.\n */\nexport interface IToolManager {\n\n    /** All tools managed by this tool manager. */\n    readonly managedTools: Tool[];\n\n    /** The tools that are enabled by default, whenever no other tool is enabled. */\n    readonly defaultTools: Tool[];\n\n    /** The currently active tools, which are either specifically enabled tools, or the default tools. */\n    readonly activeTools: Tool[];\n\n    /**\n     * Enables the tools with the specified `toolIds`.\n     * Therefore, this manager first disables currently active tools and then enable the\n     * tools indicated in `toolIds`, making them the currently active tools. If this manager\n     * doesn't manage one or more tools specified in `toolIds`, it'll do nothing. If not a\n     * single tool that shall be enabled was found in the managed tools, it'll fall back to\n     * the default tools.\n     *\n     * @param tools The tools to be enabled.\n     */\n    enable(toolIds: string[]): void;\n\n    /**\n     * Enables all default tools.\n     */\n    enableDefaultTools(): void;\n\n    /** Disables all currently active tools. After this call, no tool will be active anymore. */\n    disableActiveTools(): void;\n\n    registerDefaultTools(...tools: Tool[]): void;\n\n    registerTools(...tools: Tool[]): void;\n}\n\n@injectable()\nexport class ToolManager implements IToolManager {\n\n    readonly tools: Tool[] = [];\n    readonly defaultTools: Tool[] = [];\n    readonly actives: Tool[] = [];\n\n    get managedTools(): Tool[] {\n        return this.defaultTools.concat(this.tools);\n    }\n\n    get activeTools(): Tool[] {\n        return this.actives;\n    }\n\n    disableActiveTools() {\n        this.actives.forEach(tool => tool.disable());\n        this.actives.splice(0, this.actives.length);\n    }\n\n    enableDefaultTools() {\n        this.enable(this.defaultTools.map(tool => tool.id));\n    }\n\n    enable(toolIds: string[]) {\n        this.disableActiveTools();\n        const tools = toolIds.map(id => this.tool(id));\n        tools.forEach(tool => {\n            if (tool !== undefined) {\n                tool.enable();\n                this.actives.push(tool);\n            }\n        });\n    }\n\n    tool(toolId: string): Tool | undefined {\n        return this.managedTools.find(tool => tool.id === toolId);\n    }\n\n    registerDefaultTools(...tools: Tool[]) {\n        for (const tool of tools) {\n            this.defaultTools.push(tool);\n        }\n    }\n\n    registerTools(...tools: Tool[]) {\n        for (const tool of tools) {\n            this.tools.push(tool);\n        }\n    }\n}\n\n@injectable()\nexport class ToolManagerActionHandler implements IActionHandler {\n    @inject(TYPES.IToolManager)\n    readonly toolManager: IToolManager;\n\n    handle(action: Action): void | ICommand | Action {\n        switch (action.kind) {\n            case EnableDefaultToolsAction.KIND:\n                this.toolManager.enableDefaultTools();\n                break;\n            case EnableToolsAction.KIND:\n                this.toolManager.enable((action as EnableToolsAction).toolIds);\n                break;\n        }\n    }\n}\n\n@injectable()\nexport class DefaultToolsEnablingKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'Escape')) {\n            return [EnableDefaultToolsAction.create()];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action } from \"sprotty-protocol/lib/actions\";\n\n/**\n * Action to enable the tools of the specified `toolIds`.\n */\nexport interface EnableToolsAction extends Action {\n    kind: typeof EnableToolsAction.KIND\n    toolIds: string[]\n}\nexport namespace EnableToolsAction {\n    export const KIND = \"enable-tools\";\n\n    export function create(toolIds: string[]): EnableToolsAction {\n        return {\n            kind: KIND,\n            toolIds\n        };\n    }\n}\n\n/**\n * Action to disable the currently active tools and enable the default tools instead.\n */\nexport interface EnableDefaultToolsAction extends Action {\n    kind: typeof EnableDefaultToolsAction.KIND;\n}\nexport namespace EnableDefaultToolsAction {\n    export const KIND = \"enable-default-tools\";\n\n    export function create(): EnableDefaultToolsAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/** A tool that can be managed by a `ToolManager`. */\nexport interface Tool {\n    readonly id: string;\n    /* Notifies the tool to become active. */\n    enable(): void;\n    /* Notifies the tool to become inactive. */\n    disable(): void;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n /* eslint-disable @typescript-eslint/naming-convention */\nexport const TYPES = {\n    Action: Symbol('Action'),\n    IActionDispatcher: Symbol('IActionDispatcher'),\n    IActionDispatcherProvider: Symbol('IActionDispatcherProvider'),\n    IActionHandlerInitializer: Symbol('IActionHandlerInitializer'),\n    ActionHandlerRegistration: Symbol('ActionHandlerRegistration'),\n    ActionHandlerRegistryProvider: Symbol('ActionHandlerRegistryProvider'),\n    IAnchorComputer: Symbol('IAnchor'),\n    AnimationFrameSyncer: Symbol('AnimationFrameSyncer'),\n    /** @deprecated deprecated since 0.12.0 - please use `configureButtonHandler` */\n    IButtonHandler: Symbol('IButtonHandler'),\n    IButtonHandlerRegistration: Symbol('IButtonHandlerRegistration'),\n    ICommandPaletteActionProvider: Symbol('ICommandPaletteActionProvider'),\n    ICommandPaletteActionProviderRegistry: Symbol('ICommandPaletteActionProviderRegistry'),\n    CommandRegistration: Symbol('CommandRegistration'),\n    ICommandStack: Symbol('ICommandStack'),\n    CommandStackOptions: Symbol('CommandStackOptions'),\n    ICommandStackProvider: Symbol('ICommandStackProvider'),\n    IContextMenuItemProvider: Symbol.for(\"IContextMenuProvider\"),\n    IContextMenuProviderRegistry: Symbol.for(\"IContextMenuProviderRegistry\"),\n    IContextMenuService: Symbol.for(\"IContextMenuService\"),\n    IContextMenuServiceProvider: Symbol.for(\"IContextMenuServiceProvider\"),\n    DOMHelper: Symbol('DOMHelper'),\n    IDiagramLocker: Symbol('IDiagramLocker'),\n    IEdgeRouter: Symbol('IEdgeRouter'),\n    IEdgeRoutePostprocessor: Symbol('IEdgeRoutePostprocessor'),\n    IEditLabelValidationDecorator: Symbol('IEditLabelValidationDecorator'),\n    IEditLabelValidator: Symbol('IEditLabelValidator'),\n    HiddenModelViewer: Symbol('HiddenModelViewer'),\n    HiddenVNodePostprocessor: Symbol('HiddenVNodeDecorator'),\n    HoverState: Symbol('HoverState'),\n    KeyListener: Symbol('KeyListener'),\n    LayoutRegistration: Symbol('LayoutRegistration'),\n    LayoutRegistry: Symbol('LayoutRegistry'),\n    Layouter: Symbol('Layouter'),\n    LogLevel: Symbol('LogLevel'),\n    ILogger: Symbol('ILogger'),\n    IModelFactory: Symbol('IModelFactory'),\n    IModelLayoutEngine: Symbol('IModelLayoutEngine'),\n    ModelRendererFactory: Symbol('ModelRendererFactory'),\n    ModelSource: Symbol('ModelSource'),\n    ModelSourceProvider: Symbol('ModelSourceProvider'),\n    ModelViewer: Symbol('ModelViewer'),\n    MouseListener: Symbol('MouseListener'),\n    PatcherProvider: Symbol('PatcherProvider'),\n    IPopupModelProvider: Symbol('IPopupModelProvider'),\n    PopupModelViewer: Symbol('PopupModelViewer'),\n    PopupMouseListener: Symbol('PopupMouseListener'),\n    PopupVNodePostprocessor: Symbol('PopupVNodeDecorator'),\n    SModelElementRegistration: Symbol('SModelElementRegistration'),\n    SModelRegistry: Symbol('SModelRegistry'),\n    ISnapper: Symbol('ISnapper'),\n    SvgExporter: Symbol('SvgExporter'),\n    IToolManager: Symbol('IToolManager'),\n    IUIExtension: Symbol('IUIExtension'),\n    UIExtensionRegistry: Symbol('UIExtensionRegistry'),\n    IVNodePostprocessor: Symbol('IVNodePostprocessor'),\n    ViewRegistration: Symbol('ViewRegistration'),\n    ViewRegistry: Symbol('ViewRegistry'),\n    IViewer: Symbol('IViewer'),\n    ViewerOptions: Symbol('ViewerOptions'),\n    IViewerProvider: Symbol('IViewerProvider'),\n};\n/* eslint-enable */\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable, multiInject, optional } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { InstanceRegistry } from \"../../utils/registry\";\nimport { CommandExecutionContext, SystemCommand, CommandReturn } from \"../commands/command\";\nimport { TYPES } from \"../types\";\nimport { IUIExtension } from \"./ui-extension\";\n\n/**\n * The registry maintaining UI extensions registered via `TYPES.IUIExtension`.\n */\n@injectable()\nexport class UIExtensionRegistry extends InstanceRegistry<IUIExtension>  {\n    constructor(@multiInject(TYPES.IUIExtension) @optional() extensions: (IUIExtension)[] = []) {\n        super();\n        extensions.forEach((extension) => this.register(extension.id(), extension));\n    }\n}\n\n/**\n * Action to set the visibility state of the UI extension with the specified `id`.\n */\nexport interface SetUIExtensionVisibilityAction extends Action {\n    kind: typeof SetUIExtensionVisibilityAction.KIND;\n    extensionId: string\n    visible: boolean\n    contextElementsId: string[]\n}\nexport namespace SetUIExtensionVisibilityAction {\n    export const KIND = \"setUIExtensionVisibility\";\n\n    export function create(options: { extensionId: string, visible: boolean, contextElementsId?: string[] }): SetUIExtensionVisibilityAction {\n        return {\n            kind: KIND,\n            extensionId: options.extensionId,\n            visible: options.visible,\n            contextElementsId: options.contextElementsId ?? []\n        };\n    }\n}\n\n@injectable()\nexport class SetUIExtensionVisibilityCommand extends SystemCommand {\n    static readonly KIND = SetUIExtensionVisibilityAction.KIND;\n\n    @inject(TYPES.UIExtensionRegistry) protected readonly registry: UIExtensionRegistry;\n\n    constructor(@inject(TYPES.Action) protected readonly action: SetUIExtensionVisibilityAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const extension = this.registry.get(this.action.extensionId);\n        if (extension) {\n            this.action.visible ? extension.show(context.root, ...this.action.contextElementsId) : extension.hide();\n        }\n        return { model: context.root, modelChanged: false };\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return { model: context.root, modelChanged: false };\n    }\n    redo(context: CommandExecutionContext): CommandReturn {\n        return { model: context.root, modelChanged: false };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { inject, injectable } from \"inversify\";\nimport { hasOwnProperty } from \"sprotty-protocol\";\nimport { ILogger } from \"../../utils/logging\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { TYPES } from \"../types\";\nimport { ViewerOptions } from \"../views/viewer-options\";\n\n/**\n * A UI extension displaying additional UI elements on top of a sprotty diagram.\n */\nexport interface IUIExtension {\n    id(): string;\n    show(root: Readonly<SModelRootImpl>, ...contextElementIds: string[]): void;\n    hide(): void;\n    enableOnStartup?: boolean\n}\n\nexport function isUIExtension(object: unknown): object is IUIExtension {\n    return hasOwnProperty<string, Function>(object, 'id', 'function')\n    && hasOwnProperty<string, Function>(object, 'show', 'function')\n    && hasOwnProperty<string, Function>(object, 'hide', 'function');\n}\n\n/**\n * Abstract base class for UI extensions.\n */\n@injectable()\nexport abstract class AbstractUIExtension implements IUIExtension {\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    protected containerElement: HTMLElement;\n    protected activeElement: Element | null;\n\n    abstract id(): string;\n    abstract containerClass(): string;\n\n    show(root: Readonly<SModelRootImpl>, ...contextElementIds: string[]): void {\n        this.activeElement = document.activeElement;\n        if (!this.containerElement) {\n            if (!this.initialize()) return;\n        }\n        this.onBeforeShow(this.containerElement, root, ...contextElementIds);\n        this.setContainerVisible(true);\n    }\n\n    hide(): void {\n        this.setContainerVisible(false);\n        this.restoreFocus();\n        this.activeElement = null;\n    }\n\n    protected restoreFocus() {\n        const focusedElement = this.activeElement as HTMLElement;\n        if (focusedElement) {\n            focusedElement.focus();\n        }\n    }\n\n    protected initialize(): boolean {\n        const baseDiv = document.getElementById(this.options.baseDiv);\n        if (!baseDiv) {\n            this.logger.warn(this, `Could not obtain sprotty base container for initializing UI extension ${this.id}`, this);\n            return false;\n        }\n        this.containerElement = this.getOrCreateContainer(baseDiv.id);\n        this.initializeContents(this.containerElement);\n        if (baseDiv) {\n            baseDiv.insertBefore(this.containerElement, baseDiv.firstChild);\n        }\n        return true;\n    }\n\n    protected getOrCreateContainer(baseDivId: string): HTMLElement {\n        let container = document.getElementById(this.id());\n        if (container === null) {\n            container = document.createElement('div');\n            container.id = baseDivId + \"_\" + this.id();\n            container.classList.add(this.containerClass());\n        }\n        return container;\n    }\n\n    protected setContainerVisible(visible: boolean) {\n        if (this.containerElement) {\n            if (visible) {\n                this.containerElement.style.visibility = 'visible';\n                this.containerElement.style.opacity = '1';\n            } else {\n                this.containerElement.style.visibility = 'hidden';\n                this.containerElement.style.opacity = '0';\n            }\n        }\n    }\n\n    /**\n     * Updates the `containerElement` under the given `context` before it becomes visible.\n     *\n     * Subclasses may override this method to, for instance, modifying the position of the\n     * `containerElement`, add or remove elements, etc. depending on the specified `root`\n     * or `contextElementIds`.\n     */\n    protected onBeforeShow(containerElement: HTMLElement, root: Readonly<SModelRootImpl>, ...contextElementIds: string[]): void {\n        // default: do nothing\n    }\n\n    /**\n     * Initializes the contents of this UI extension.\n     *\n     * Subclasses must implement this method to initialize the UI elements of this UI extension inside the specified `containerElement`.\n     */\n    protected abstract initializeContents(containerElement: HTMLElement): void;\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { IVNodePostprocessor } from \"./vnode-postprocessor\";\nimport { VNode } from \"snabbdom\";\nimport { getSubType } from 'sprotty-protocol/lib/utils/model-utils';\nimport { SModelElementImpl } from \"../model/smodel\";\nimport { setClass } from \"./vnode-utils\";\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport class CssClassPostprocessor implements IVNodePostprocessor {\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (element.cssClasses) {\n            for (const cssClass of element.cssClasses)\n                setClass(vnode, cssClass, true);\n        }\n        // append model subtype as class\n        const subType = getSubType(element);\n        if (subType && subType !== element.type) {\n            setClass(vnode, subType, true);\n        }\n        return vnode;\n    }\n\n    postUpdate(): void {\n        // empty\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { ViewerOptions } from \"./viewer-options\";\nimport { TYPES } from \"../types\";\nimport { SModelElementImpl } from \"../model/smodel\";\n\n@injectable()\nexport class DOMHelper {\n\n    @inject(TYPES.ViewerOptions) private viewerOptions: ViewerOptions;\n\n    private getPrefix() {\n        const prefix = this.viewerOptions !== undefined && this.viewerOptions.baseDiv !== undefined ?\n            this.viewerOptions.baseDiv + \"_\" : \"\";\n        return prefix;\n    }\n\n    createUniqueDOMElementId(element: SModelElementImpl): string {\n        return this.getPrefix() + element.id;\n    }\n\n    findSModelIdByDOMElement(element: Element): string {\n        return element.id.replace(this.getPrefix(), '');\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { TYPES } from \"../types\";\nimport { ILogger } from \"../../utils/logging\";\nimport { SModelElementImpl } from \"../model/smodel\";\nimport { IVNodePostprocessor } from \"./vnode-postprocessor\";\nimport { DOMHelper } from \"./dom-helper\";\nimport { getAttrs } from \"./vnode-utils\";\n\n@injectable()\nexport class IdPostprocessor implements IVNodePostprocessor {\n\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        const attrs = getAttrs(vnode);\n        if (attrs.id !== undefined)\n            this.logger.warn(vnode, 'Overriding id of vnode (' + attrs.id + '). Make sure not to set it manually in view.');\n        attrs.id = this.domHelper.createUniqueDOMElementId(element);\n        if (!vnode.key)\n            vnode.key = element.id;\n        return vnode;\n    }\n\n    postUpdate(): void {\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, multiInject, optional } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { TYPES } from \"../types\";\nimport { IActionDispatcher } from \"../actions/action-dispatcher\";\nimport { SModelElementImpl, SModelRootImpl } from \"../model/smodel\";\nimport { IVNodePostprocessor } from \"./vnode-postprocessor\";\nimport { on } from \"./vnode-utils\";\n\n@injectable()\nexport class KeyTool implements IVNodePostprocessor {\n\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n\n    constructor(@multiInject(TYPES.KeyListener)@optional() protected keyListeners: KeyListener[] = []) {}\n\n    register(keyListener: KeyListener) {\n        this.keyListeners.push(keyListener);\n    }\n\n    deregister(keyListener: KeyListener) {\n        const index = this.keyListeners.indexOf(keyListener);\n        if (index >= 0)\n            this.keyListeners.splice(index, 1);\n    }\n\n    protected handleEvent<K extends keyof KeyListener>(methodName: K, model: SModelRootImpl, event: KeyboardEvent) {\n        const actions = this.keyListeners\n            .map(listener => listener[methodName].apply(listener, [model, event]))\n            .reduce((a, b) => a.concat(b));\n        if (actions.length > 0) {\n            event.preventDefault();\n            this.actionDispatcher.dispatchAll(actions);\n        }\n    }\n\n    keyDown(element: SModelRootImpl, event: KeyboardEvent): void {\n        this.handleEvent('keyDown', element, event);\n    }\n\n    keyUp(element: SModelRootImpl, event: KeyboardEvent): void {\n        this.handleEvent('keyUp', element, event);\n    }\n\n    focus() {}\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (element instanceof SModelRootImpl) {\n            on(vnode, 'focus', this.focus.bind(this, element));\n            on(vnode, 'keydown', this.keyDown.bind(this, element));\n            on(vnode, 'keyup', this.keyUp.bind(this, element));\n        }\n        return vnode;\n    }\n\n    postUpdate() {\n    }\n}\n\n@injectable()\nexport class KeyListener {\n    keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        return [];\n    }\n\n    keyUp(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, multiInject, optional } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Action, isAction } from \"sprotty-protocol/lib/actions\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { IActionDispatcher } from \"../actions/action-dispatcher\";\nimport { SModelElementImpl, SModelRootImpl } from \"../model/smodel\";\nimport { TYPES } from \"../types\";\nimport { DOMHelper } from \"./dom-helper\";\nimport { IVNodePostprocessor } from \"./vnode-postprocessor\";\nimport { on } from \"./vnode-utils\";\n\n@injectable()\nexport class MouseTool implements IVNodePostprocessor {\n\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n\n    constructor(@multiInject(TYPES.MouseListener) @optional() protected mouseListeners: MouseListener[] = []) { }\n\n    register(mouseListener: MouseListener) {\n        this.mouseListeners.push(mouseListener);\n    }\n\n    deregister(mouseListener: MouseListener) {\n        const index = this.mouseListeners.indexOf(mouseListener);\n        if (index >= 0)\n            this.mouseListeners.splice(index, 1);\n    }\n\n    protected getTargetElement(model: SModelRootImpl, event: MouseEvent): SModelElementImpl | undefined {\n        let target = event.target as Element;\n        const index = model.index;\n        while (target) {\n            if (target.id) {\n                const element = index.getById(this.domHelper.findSModelIdByDOMElement(target));\n                if (element !== undefined)\n                    return element;\n            }\n            target = target.parentNode as Element;\n        }\n        return undefined;\n    }\n\n    protected handleEvent(methodName: MouseEventKind, model: SModelRootImpl, event: MouseEvent) {\n        this.focusOnMouseEvent(methodName, model);\n        const element = this.getTargetElement(model, event);\n        if (!element)\n            return;\n        const actions = this.mouseListeners\n            .map(listener => listener[methodName](element, event as WheelEvent))\n            .reduce((a, b) => a.concat(b));\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (const actionOrPromise of actions) {\n                if (isAction(actionOrPromise)) {\n                    this.actionDispatcher.dispatch(actionOrPromise);\n                } else {\n                    actionOrPromise.then((action: Action) => {\n                        this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    }\n\n    protected focusOnMouseEvent<K extends keyof MouseListener>(methodName: K, model: SModelRootImpl) {\n        if (document && methodName === 'mouseDown') {\n            const domElement = document.getElementById(this.domHelper.createUniqueDOMElementId(model));\n            if (domElement !== null && typeof domElement.focus === 'function')\n                domElement.focus();\n        }\n    }\n\n    mouseOver(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseOver', model, event);\n    }\n\n    mouseOut(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseOut', model, event);\n    }\n\n    mouseEnter(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseEnter', model, event);\n    }\n\n    mouseLeave(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseLeave', model, event);\n    }\n\n    mouseDown(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseDown', model, event);\n    }\n\n    mouseMove(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseMove', model, event);\n    }\n\n    mouseUp(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('mouseUp', model, event);\n    }\n\n    wheel(model: SModelRootImpl, event: WheelEvent) {\n        this.handleEvent('wheel', model, event);\n    }\n\n    contextMenu(model: SModelRootImpl, event: MouseEvent) {\n        event.preventDefault();\n        this.handleEvent('contextMenu', model, event);\n    }\n\n    doubleClick(model: SModelRootImpl, event: MouseEvent) {\n        this.handleEvent('doubleClick', model, event);\n    }\n\n    decorate(vnode: VNode, element: SModelElementImpl) {\n        if (element instanceof SModelRootImpl) {\n            on(vnode, 'mouseover', this.mouseOver.bind(this, element));\n            on(vnode, 'mouseout', this.mouseOut.bind(this, element));\n            on(vnode, 'mouseenter', this.mouseEnter.bind(this, element));\n            on(vnode, 'mouseleave', this.mouseLeave.bind(this, element));\n            on(vnode, 'mousedown', this.mouseDown.bind(this, element));\n            on(vnode, 'mouseup', this.mouseUp.bind(this, element));\n            on(vnode, 'mousemove', this.mouseMove.bind(this, element));\n            on(vnode, 'wheel', this.wheel.bind(this, element));\n            on(vnode, 'contextmenu', this.contextMenu.bind(this, element));\n            on(vnode, 'dblclick', this.doubleClick.bind(this, element));\n            on(vnode, 'dragover', (event: MouseEvent) => this.handleEvent('dragOver', element, event));\n            on(vnode, 'drop', (event: MouseEvent) => this.handleEvent('drop', element, event));\n        }\n        vnode = this.mouseListeners.reduce(\n            (n: VNode, listener: MouseListener) => listener.decorate(n, element),\n            vnode);\n        return vnode;\n    }\n\n    postUpdate() {\n    }\n}\n\n@injectable()\nexport class PopupMouseTool extends MouseTool {\n    constructor(@multiInject(TYPES.PopupMouseListener) @optional() protected override mouseListeners: MouseListener[] = []) {\n        super(mouseListeners);\n    }\n}\n\nexport type MouseEventKind =\n    'mouseOver' | 'mouseOut' | 'mouseEnter' | 'mouseLeave' | 'mouseDown' | 'mouseMove' | 'mouseUp'\n    | 'wheel' | 'doubleClick' | 'contextMenu' | 'dragOver' | 'drop';\n\n@injectable()\nexport class MouseListener {\n\n    mouseOver(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseOut(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseEnter(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseLeave(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseDown(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseMove(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    mouseUp(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    wheel(target: SModelElementImpl, event: WheelEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    doubleClick(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    contextMenu(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    dragOver(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    drop(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [];\n    }\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        return vnode;\n    }\n}\n\n@injectable()\nexport class MousePositionTracker extends MouseListener {\n\n    protected lastPosition: Point | undefined;\n\n    override mouseMove(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        this.lastPosition = target.root.parentToLocal({ x: event.offsetX, y: event.offsetY });\n        return [];\n    }\n\n    /**\n     * Returns the last tracked mouse cursor position relative to the diagram root or `undefined`\n     * if no mouse cursor position was ever tracked yet.\n     */\n    get lastPositionOnDiagram(): Point | undefined {\n        return this.lastPosition;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { h, VNode, VNodeData } from \"snabbdom\";\nimport { SModelElementImpl } from \"../model/smodel\";\nimport { RenderingContext, IView } from \"./view\";\nimport { injectable } from \"inversify\";\n\n/**\n * An view that avoids calculation and patching of VNodes unless some model properties have changed.\n * Based on snabbdom's thunks.\n */\n@injectable()\nexport abstract class ThunkView implements IView {\n\n    /**\n     * Returns the array of values that are watched for changes.\n     * If they haven't change since the last rendering, the VNode is neither recalculated nor patched.\n     */\n    abstract watchedArgs(model: SModelElementImpl): any[];\n\n    /**\n     * Returns the selector of the VNode root, i.e. it's element type.\n     */\n    abstract selector(model: SModelElementImpl): string;\n\n    /**\n     * Calculate the VNode from the input data. Only called if the watched properties change.\n     */\n    abstract doRender(model: SModelElementImpl, context: RenderingContext): VNode;\n\n    render(model: SModelElementImpl, context: RenderingContext): VNode {\n        return h(this.selector(model), {\n            key: model.id,\n            hook: {\n                init: this.init.bind(this),\n                prepatch: this.prepatch.bind(this)},\n            fn: () => this.renderAndDecorate(model, context),\n            args: this.watchedArgs(model),\n            thunk: true\n        });\n    }\n\n    protected renderAndDecorate(model: SModelElementImpl, context: RenderingContext): VNode {\n        const vnode = this.doRender(model, context);\n        context.decorate(vnode, model);\n        return vnode;\n    }\n\n    protected copyToThunk(vnode: VNode, thunk: VNode): void {\n        thunk.elm = vnode.elm;\n        (vnode.data as VNodeData).fn = (thunk.data as VNodeData).fn;\n        (vnode.data as VNodeData).args = (thunk.data as VNodeData).args;\n        thunk.data = vnode.data;\n        thunk.children = vnode.children;\n        thunk.text = vnode.text;\n        thunk.elm = vnode.elm;\n    }\n\n    protected init(thunk: VNode): void {\n        const cur = thunk.data as VNodeData;\n        const vnode = (cur.fn as any).apply(undefined, cur.args);\n        this.copyToThunk(vnode, thunk);\n    }\n\n    protected prepatch(oldVnode: VNode, thunk: VNode): void {\n        const old = oldVnode.data as VNodeData, cur = thunk.data as VNodeData;\n        if (!this.equals(old.args as any[], cur.args as any[]))\n            this.copyToThunk((cur.fn as any).apply(undefined, cur.args), thunk);\n        else\n            this.copyToThunk(oldVnode, thunk);\n    }\n\n    protected equals(oldArg: any, newArg: any) {\n        if (Array.isArray(oldArg) && Array.isArray(newArg)) {\n            if (oldArg.length !== newArg.length)\n                return false;\n            for (let i = 0; i < newArg.length; ++i) {\n                if (!this.equals(oldArg[i], newArg[i]))\n                    return false;\n            }\n        } else if (typeof oldArg === 'object' && typeof newArg === 'object') {\n            if (Object.keys(oldArg).length !== Object.keys(newArg).length)\n                return false;\n            for (const key in oldArg) {\n                if (key !== 'parent' && key !== 'root' && (!(key in newArg) || !this.equals(oldArg[key], newArg[key])))\n                    return false;\n            }\n        } else if (oldArg !== newArg) {\n            return false;\n        }\n        return true;\n    }\n}\n\nexport interface ThunkVNode extends VNode {\n    thunk: boolean\n}\n\nexport function isThunk(vnode: VNode): vnode is ThunkVNode {\n    return 'thunk' in vnode;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx svg */\nimport { svg } from '../../lib/jsx';\n\nimport { injectable, multiInject, optional, interfaces } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { TYPES } from '../types';\nimport { InstanceRegistry } from '../../utils/registry';\nimport { isInjectable } from '../../utils/inversify';\nimport { SModelElementImpl, SModelRootImpl, SParentElementImpl } from '../model/smodel';\nimport { EMPTY_ROOT, CustomFeatures } from '../model/smodel-factory';\nimport { registerModelElement } from '../model/smodel-utils';\nimport { Point } from 'sprotty-protocol';\n\n/**\n * Arguments for `IView` rendering.\n */\nexport interface IViewArgs {\n    parentArgs?: IViewArgs;\n    [key: string]: any;\n}\n\n/**\n * Searches for the property specified in `key` in the specified `args`,\n * including its direct or indirect `IRenderingArgs#parentArgs`.\n *\n * @param arg the rendering arguments.\n * @param key the key to search for.\n * @returns the found value or `undefined.\n */\nexport function findArgValue<T>(arg: IViewArgs | undefined, key: string): T | undefined {\n    while (arg !== undefined && !(key in arg) && arg.parentArgs) {\n        arg = arg.parentArgs;\n    }\n    return arg ? arg[key] : undefined;\n}\n\n/**\n * Base interface for the components that turn GModelElements into virtual DOM elements.\n */\nexport interface IView<A extends IViewArgs = {}> {\n    render(model: Readonly<SModelElementImpl>, context: RenderingContext, args?: A): VNode | undefined\n}\n\n/**\n * Indicates the target of the view rendering. `main` is the actually visible diagram,\n * `popup` is the mouse hover popup, and `hidden` is for computing element bounds prior\n * to the main rendering.\n */\nexport type RenderingTargetKind = 'main' | 'popup' | 'hidden';\n\n/**\n * Bundles additional data that is passed to views for VNode creation.\n */\nexport interface RenderingContext {\n    readonly viewRegistry: ViewRegistry\n    readonly targetKind: RenderingTargetKind;\n    readonly parentArgs?: IViewArgs;\n\n    decorate(vnode: VNode, element: Readonly<SModelElementImpl>): VNode\n\n    renderElement(element: Readonly<SModelElementImpl>): VNode | undefined\n\n    renderChildren(element: Readonly<SParentElementImpl>, args?: IViewArgs): VNode[]\n}\n\n/**\n * Used to bind a model element type to a view factory in the ViewRegistry.\n */\nexport interface ViewRegistration {\n    type: string\n    factory: () => IView\n}\n\nexport type ViewRegistrationFactory = () => ViewRegistration;\n\n/**\n * Allows to look up the IView for a given SModelElement based on its type.\n */\n@injectable()\nexport class ViewRegistry extends InstanceRegistry<IView> {\n    constructor(@multiInject(TYPES.ViewRegistration) @optional() registrations: ViewRegistration[]) {\n        super();\n        this.registerDefaults();\n        registrations.forEach(registration =>\n            this.register(registration.type, registration.factory())\n        );\n    }\n\n    protected registerDefaults() {\n        this.register(EMPTY_ROOT.type, new EmptyView());\n    }\n\n    override missing(key: string): IView {\n        return new MissingView();\n    }\n}\n\n/**\n * Combines `registerModelElement` and `configureView`.\n */\nexport function configureModelElement(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        type: string, modelConstr: new () => SModelElementImpl, viewConstr: interfaces.ServiceIdentifier<IView>,\n        features?: CustomFeatures): void {\n    registerModelElement(context, type, modelConstr, features);\n    configureView(context, type, viewConstr);\n}\n\n/**\n * Utility function to register a view for a model element type.\n */\nexport function configureView(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n        type: string, constr: interfaces.ServiceIdentifier<IView>): void {\n    if (typeof constr === 'function') {\n        if (!isInjectable(constr)) {\n            throw new Error(`Views should be @injectable: ${constr.name}`);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(TYPES.ViewRegistration).toDynamicValue(ctx => ({\n        type,\n        factory: () => ctx.container.get(constr)\n    }));\n}\n\n/**\n * This view is used when the model is the EMPTY_ROOT.\n */\n@injectable()\nexport class EmptyView implements IView {\n    render(model: SModelRootImpl, context: RenderingContext): VNode {\n        return <svg class-sprotty-empty={true} />;\n    }\n}\n\n/**\n * This view is used when no view has been registered for a model element type.\n */\n@injectable()\nexport class MissingView implements IView {\n    render(model: Readonly<SModelElementImpl>, context: RenderingContext): VNode {\n        const position: Point = (model as any).position || Point.ORIGIN;\n        return <text class-sprotty-missing={true} x={position.x} y={position.y}>?{model.id}?</text>;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { SModelRootImpl } from \"../model/smodel\";\nimport { TYPES } from \"../types\";\nimport { AnimationFrameSyncer } from \"../animations/animation-frame-syncer\";\nimport { IViewer } from \"./viewer\";\n\n/**\n * Updating the view is rather expensive, and it doesn't make sense to calculate\n * more then one update per animation (rendering) frame. So this class batches\n * all incoming model changes and only renders the last one when the next animation\n * frame comes.\n */\n@injectable()\nexport class ViewerCache implements IViewer {\n\n    @inject(TYPES.IViewer) protected delegate: IViewer;\n    @inject(TYPES.AnimationFrameSyncer) protected syncer: AnimationFrameSyncer;\n\n    protected cachedModel?: SModelRootImpl;\n\n    update(model: SModelRootImpl, cause?: Action): void {\n        if (cause !== undefined) {\n            // Forward the update immediately in order to pass the cause action\n            this.delegate.update(model, cause);\n            this.cachedModel = undefined;\n        } else {\n            const isCacheEmpty = this.cachedModel === undefined;\n            this.cachedModel = model;\n            if (isCacheEmpty) {\n                this.scheduleUpdate();\n            }\n        }\n    }\n\n    protected scheduleUpdate() {\n        this.syncer.onEndOfNextFrame(() => {\n            if (this.cachedModel) {\n                this.delegate.update(this.cachedModel);\n                this.cachedModel = undefined;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Container, interfaces } from 'inversify';\nimport { safeAssign } from 'sprotty-protocol/lib/utils/object';\nimport { Limits } from '../../utils/geometry';\nimport { TYPES } from '../types';\n\nexport interface ViewerOptions {\n    /** ID of the HTML element into which the visible diagram is rendered. */\n    baseDiv: string\n    /** CSS class added to the base element of the visible diagram. */\n    baseClass: string\n    /** ID of the HTML element into which the hidden diagram is rendered. */\n    hiddenDiv: string\n    /** CSS class added to the base element of the hidden rendering. */\n    hiddenClass: string\n    /** ID of the HTML element into which hover popup boxes are rendered. */\n    popupDiv: string\n    /** CSS class added to the base element of popup boxes. */\n    popupClass: string\n    /** CSS class added to popup boxes when they are closed. */\n    popupClosedClass: string\n    /** Whether client layouts need to be computed by Sprotty. This activates a hidden rendering cycle. */\n    needsClientLayout: boolean\n    /** Whether the model source needs to invoke a layout engine after a model update. */\n    needsServerLayout: boolean\n    /** Delay for opening a popup box after mouse hovering an element. */\n    popupOpenDelay: number\n    /** Delay for closing a popup box after leaving the corresponding element. */\n    popupCloseDelay: number\n    /** Minimum (zoom out) and maximum (zoom in) values for the zoom factor. */\n    zoomLimits: Limits\n    /** Minimum and maximum values for the horizontal scroll position. */\n    horizontalScrollLimits: Limits\n    /** Minimum and maximum values for the vertical scroll position. */\n    verticalScrollLimits: Limits\n}\n\nexport const defaultViewerOptions: () => ViewerOptions = () => ({\n    baseDiv: 'sprotty',\n    baseClass: 'sprotty',\n    hiddenDiv: 'sprotty-hidden',\n    hiddenClass: 'sprotty-hidden',\n    popupDiv: 'sprotty-popup',\n    popupClass: 'sprotty-popup',\n    popupClosedClass: 'sprotty-popup-closed',\n    needsClientLayout: true,\n    needsServerLayout: false,\n    popupOpenDelay: 1000,\n    popupCloseDelay: 300,\n    zoomLimits: { min: 0.01, max: 10 },\n    horizontalScrollLimits: { min: -100_000, max: 100_000 },\n    verticalScrollLimits: { min: -100_000, max: 100_000 }\n});\n\n/**\n * Utility function to partially set viewer options. Default values (from `defaultViewerOptions`) are used for\n * options that are not specified.\n */\nexport function configureViewerOptions(context: { bind: interfaces.Bind, isBound: interfaces.IsBound, rebind: interfaces.Rebind },\n        options: Partial<ViewerOptions>): void {\n    const opt: ViewerOptions = {\n        ...defaultViewerOptions(),\n        ...options\n    };\n    if (context.isBound(TYPES.ViewerOptions))\n        context.rebind(TYPES.ViewerOptions).toConstantValue(opt);\n    else\n        context.bind(TYPES.ViewerOptions).toConstantValue(opt);\n}\n\n/**\n * Utility function to partially override the currently configured viewer options in a DI container.\n */\nexport function overrideViewerOptions(container: Container, options: Partial<ViewerOptions>): ViewerOptions {\n    const opt = container.get<ViewerOptions>(TYPES.ViewerOptions);\n    safeAssign(opt, options);\n    return opt;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx html */\nimport { inject, injectable, multiInject, optional } from 'inversify';\nimport { attributesModule, classModule, eventListenersModule, init, Module, propsModule, styleModule, VNode } from 'snabbdom';\nimport { Action } from 'sprotty-protocol/lib/actions';\nimport { html } from '../../lib/jsx'; // must be html here, as we're creating a div\nimport { getWindowScroll } from '../../utils/browser';\nimport { ILogger } from '../../utils/logging';\nimport { IActionDispatcher } from '../actions/action-dispatcher';\nimport { InitializeCanvasBoundsAction } from '../features/initialize-canvas';\nimport { SModelElementImpl, SModelRootImpl, SParentElementImpl } from '../model/smodel';\nimport { EMPTY_ROOT } from '../model/smodel-factory';\nimport { TYPES } from '../types';\nimport { isThunk } from './thunk-view';\nimport { IViewArgs, RenderingContext, RenderingTargetKind, ViewRegistry } from './view';\nimport { ViewerOptions } from './viewer-options';\nimport { IVNodePostprocessor } from './vnode-postprocessor';\nimport { copyClassesFromElement, copyClassesFromVNode, setAttr, setClass } from './vnode-utils';\n\n\nexport interface IViewer {\n    update(model: SModelRootImpl, cause?: Action): void\n}\n\nexport interface IViewerProvider {\n    readonly modelViewer: IViewer\n    readonly hiddenModelViewer: IViewer\n    readonly popupModelViewer: IViewer\n}\n\nexport class ModelRenderer implements RenderingContext {\n\n    constructor(readonly viewRegistry: ViewRegistry,\n        readonly targetKind: RenderingTargetKind,\n        private postprocessors: IVNodePostprocessor[],\n        protected args: IViewArgs = {}) {\n    }\n\n    decorate(vnode: VNode, element: Readonly<SModelElementImpl>): VNode {\n        if (isThunk(vnode)) {\n            return vnode;\n        }\n        return this.postprocessors.reduce(\n            (n: VNode, processor: IVNodePostprocessor) => processor.decorate(n, element),\n            vnode);\n    }\n\n    renderElement(element: Readonly<SModelElementImpl>): VNode | undefined {\n        const view = this.viewRegistry.get(element.type);\n        const vnode = view.render(element, this, this.args);\n        if (vnode) {\n            return this.decorate(vnode, element);\n        } else {\n            return undefined;\n        }\n    }\n\n    renderChildren(element: Readonly<SParentElementImpl>, args?: IViewArgs): VNode[] {\n        const context = args ?\n            new ModelRenderer(\n                this.viewRegistry,\n                this.targetKind,\n                this.postprocessors,\n                { ...args, parentArgs: this.args }\n            ) : this;\n        return element.children\n            .map(child => context.renderElement(child))\n            .filter(vnode => vnode !== undefined) as VNode[];\n    }\n\n    postUpdate(cause?: Action) {\n        this.postprocessors.forEach(processor => processor.postUpdate(cause));\n    }\n}\n\nexport type ModelRendererFactory = (\n    targetKind: RenderingTargetKind,\n    postprocessors: IVNodePostprocessor[],\n    args?: IViewArgs\n) => ModelRenderer;\n\nexport type Patcher = (oldRoot: VNode | Element, newRoot: VNode) => VNode;\n\n@injectable()\nexport class PatcherProvider {\n\n    readonly patcher: Patcher;\n\n    constructor() {\n        this.patcher = init(this.createModules());\n    }\n\n    protected createModules(): Module[] {\n        return [\n            propsModule,\n            attributesModule,\n            classModule,\n            styleModule,\n            eventListenersModule\n        ];\n    }\n\n}\n\n/**\n * The component that turns the model into an SVG DOM.\n * Uses a VDOM based on snabbdom.js for performance.\n */\n@injectable()\nexport class ModelViewer implements IViewer {\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.IActionDispatcher) protected actiondispatcher: IActionDispatcher;\n\n    constructor(@inject(TYPES.ModelRendererFactory) modelRendererFactory: ModelRendererFactory,\n        @inject(TYPES.PatcherProvider) patcherProvider: PatcherProvider,\n        @multiInject(TYPES.IVNodePostprocessor) @optional() postprocessors: IVNodePostprocessor[]) {\n        this.renderer = modelRendererFactory('main', postprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n\n    protected readonly renderer: ModelRenderer;\n    protected readonly patcher: Patcher;\n\n    protected lastVDOM: VNode;\n\n    update(model: Readonly<SModelRootImpl>, cause?: Action): void {\n        this.logger.log(this, 'rendering', model);\n        const newVDOM = <div id={this.options.baseDiv}>\n            {this.renderer.renderElement(model)}\n        </div>;\n        if (this.lastVDOM !== undefined) {\n            const hadFocus = this.hasFocus();\n            copyClassesFromVNode(this.lastVDOM, newVDOM);\n            this.lastVDOM = this.patcher.call(this, this.lastVDOM, newVDOM);\n            this.restoreFocus(hadFocus);\n        } else if (typeof document !== 'undefined') {\n            const placeholder = document.getElementById(this.options.baseDiv);\n            if (placeholder !== null) {\n                if (typeof window !== 'undefined') {\n                    window.addEventListener('resize', () => {\n                        this.onWindowResize(newVDOM);\n                    });\n                }\n                copyClassesFromElement(placeholder, newVDOM);\n                setClass(newVDOM, this.options.baseClass, true);\n                this.lastVDOM = this.patcher.call(this, placeholder, newVDOM);\n            } else {\n                this.logger.error(this, 'element not in DOM:', this.options.baseDiv);\n            }\n        }\n        this.renderer.postUpdate(cause);\n    }\n\n    protected hasFocus(): boolean {\n        if (typeof document !== 'undefined' && document.activeElement && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            const lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                const lastElement = (lastRootVNode as VNode).elm;\n                return document.activeElement === lastElement;\n            }\n        }\n        return false;\n    }\n\n    protected restoreFocus(focus: boolean) {\n        if (focus && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            const lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                const lastElement = (lastRootVNode as VNode).elm;\n                if (lastElement && typeof (lastElement as any).focus === 'function')\n                    (lastElement as any).focus();\n            }\n        }\n    }\n\n    protected onWindowResize(vdom: VNode): void {\n        const baseDiv = document.getElementById(this.options.baseDiv);\n        if (baseDiv !== null) {\n            const newBounds = this.getBoundsInPage(baseDiv as Element);\n            this.actiondispatcher.dispatch(InitializeCanvasBoundsAction.create(newBounds));\n        }\n    }\n\n    protected getBoundsInPage(element: Element) {\n        const bounds = element.getBoundingClientRect();\n        const scroll = getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    }\n\n}\n\n/**\n * Viewer for the _hidden_ model. This serves as an intermediate step to compute bounds\n * of elements. The model is rendered in a section that is not visible to the user,\n * and then the bounds are extracted from the DOM.\n */\n@injectable()\nexport class HiddenModelViewer implements IViewer {\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    constructor(@inject(TYPES.ModelRendererFactory) modelRendererFactory: ModelRendererFactory,\n        @inject(TYPES.PatcherProvider) patcherProvider: PatcherProvider,\n        @multiInject(TYPES.HiddenVNodePostprocessor) @optional() hiddenPostprocessors: IVNodePostprocessor[]) {\n        this.hiddenRenderer = modelRendererFactory('hidden', hiddenPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n\n    protected readonly hiddenRenderer: ModelRenderer;\n    protected readonly patcher: Patcher;\n\n    protected lastHiddenVDOM: VNode;\n\n    update(hiddenModel: Readonly<SModelRootImpl>, cause?: Action): void {\n        this.logger.log(this, 'rendering hidden');\n\n        let newVDOM: VNode;\n        if (hiddenModel.type === EMPTY_ROOT.type) {\n            newVDOM = <div id={this.options.hiddenDiv}></div>;\n        } else {\n            const hiddenVNode = this.hiddenRenderer.renderElement(hiddenModel);\n            if (hiddenVNode) {\n                setAttr(hiddenVNode, 'opacity', 0);\n            }\n            newVDOM = <div id={this.options.hiddenDiv}>\n                {hiddenVNode}\n            </div>;\n        }\n\n        if (this.lastHiddenVDOM !== undefined) {\n            copyClassesFromVNode(this.lastHiddenVDOM, newVDOM);\n            this.lastHiddenVDOM = this.patcher.call(this, this.lastHiddenVDOM, newVDOM);\n        } else {\n            let placeholder = document.getElementById(this.options.hiddenDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement('div');\n                document.body.appendChild(placeholder);\n            } else {\n                copyClassesFromElement(placeholder, newVDOM);\n            }\n            setClass(newVDOM, this.options.baseClass, true);\n            setClass(newVDOM, this.options.hiddenClass, true);\n            this.lastHiddenVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.hiddenRenderer.postUpdate(cause);\n    }\n\n}\n\n@injectable()\nexport class PopupModelViewer implements IViewer {\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    constructor(@inject(TYPES.ModelRendererFactory) protected readonly modelRendererFactory: ModelRendererFactory,\n        @inject(TYPES.PatcherProvider) patcherProvider: PatcherProvider,\n        @multiInject(TYPES.PopupVNodePostprocessor) @optional() popupPostprocessors: IVNodePostprocessor[]) {\n        this.popupRenderer = this.modelRendererFactory('popup', popupPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n\n    protected readonly popupRenderer: ModelRenderer;\n    protected readonly patcher: Patcher;\n\n    protected lastPopupVDOM: VNode;\n\n    update(model: Readonly<SModelRootImpl>, cause?: Action): void {\n        this.logger.log(this, 'rendering popup', model);\n\n        const popupClosed = model.type === EMPTY_ROOT.type;\n        let newVDOM: VNode;\n        if (popupClosed) {\n            newVDOM = <div id={this.options.popupDiv}></div>;\n        } else {\n            const position = model.canvasBounds;\n            const inlineStyle = {\n                top: position.y + 'px',\n                left: position.x + 'px'\n            };\n            newVDOM = <div id={this.options.popupDiv} style={inlineStyle}>\n                {this.popupRenderer.renderElement(model)}\n            </div>;\n        }\n\n        if (this.lastPopupVDOM !== undefined) {\n            copyClassesFromVNode(this.lastPopupVDOM, newVDOM);\n            setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, this.lastPopupVDOM, newVDOM);\n        } else if (typeof document !== 'undefined') {\n            let placeholder = document.getElementById(this.options.popupDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement('div');\n                document.body.appendChild(placeholder);\n            } else {\n                copyClassesFromElement(placeholder, newVDOM);\n            }\n            setClass(newVDOM, this.options.popupClass, true);\n            setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.popupRenderer.postUpdate(cause);\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { SModelElementImpl } from \"../model/smodel\";\nimport { setAttr } from \"./vnode-utils\";\n\n/**\n * Manipulates a created VNode after it has been created.\n * Used to register listeners and add animations.\n */\nexport interface IVNodePostprocessor {\n    decorate(vnode: VNode, element: SModelElementImpl): VNode\n    postUpdate(cause?: Action): void\n}\n\n@injectable()\nexport class FocusFixPostprocessor implements IVNodePostprocessor {\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (vnode.sel && vnode.sel.startsWith('svg'))\n            // allows to set focus in Firefox\n            setAttr(vnode, 'tabindex', 0);\n        return vnode;\n    }\n\n    postUpdate(): void {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { VNode } from \"snabbdom\";\n\nexport function setAttr(vnode: VNode, name: string, value: any) {\n    getAttrs(vnode)[name] = value;\n}\n\nexport function setClass(vnode: VNode, name: string, value: boolean) {\n    getClass(vnode)[name] = value;\n}\n\nexport function setNamespace(node: VNode, ns: string) {\n    if (node.data === undefined)\n        node.data = {};\n    node.data.ns = ns;\n    const children = node.children;\n    if (children !== undefined) {\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            if (typeof child !== 'string')\n                setNamespace(child, ns);\n        }\n    }\n}\n\nexport function copyClassesFromVNode(source: VNode, target: VNode) {\n    const classList = getClass(source);\n    Object.keys(classList).forEach(c => setClass(target, c, true));\n}\n\nexport function copyClassesFromElement(element: HTMLElement, target: VNode) {\n    const classList = element.classList;\n    for (let i = 0; i < classList.length; i++) {\n        const item = classList.item(i);\n        if (item)\n            setClass(target, item, true);\n    }\n}\n\nexport function mergeStyle(vnode: VNode, style: any) {\n    getData(vnode).style = {...(getData(vnode).style || {}), ...style};\n}\n\nexport function on(vnode: VNode, event: string, listener: (event: Event) => void) {\n    const val = getOn(vnode);\n    if (val[event]) {\n        throw new Error('EventListener for ' + event + ' already registered on VNode');\n    }\n    (val as any)[event] = listener;\n}\n\nexport function getAttrs(vnode: VNode) {\n    const data = getData(vnode);\n    if (!data.attrs)\n        data.attrs = {};\n    return data.attrs;\n}\n\nfunction getData(vnode: VNode) {\n    if (!vnode.data)\n        vnode.data = {};\n    return vnode.data;\n}\n\nfunction getClass(vnode: VNode) {\n    const data = getData(vnode);\n    if (!data.class)\n        data.class = {};\n    return data.class;\n}\n\nfunction getOn(vnode: VNode) {\n    const data = getData(vnode);\n    if (!data.on)\n        data.on = {};\n    return data.on;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Dimension, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SParentElementImpl, SModelElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { isLayoutContainer, isLayoutableChild, LayoutContainer, isBoundsAware } from \"./model\";\nimport { ILayout, StatefulLayouter } from './layout';\nimport { AbstractLayoutOptions, HAlignment, VAlignment } from './layout-options';\nimport { BoundsData } from './hidden-bounds-updater';\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport abstract class AbstractLayout<T extends AbstractLayoutOptions> implements ILayout {\n\n    layout(container: SParentElementImpl & LayoutContainer,\n           layouter: StatefulLayouter) {\n        const boundsData = layouter.getBoundsData(container);\n        const options = this.getLayoutOptions(container);\n        const childrenSize = this.getChildrenSize(container, options, layouter);\n        const maxWidth = options.paddingFactor * (\n            options.resizeContainer\n            ? childrenSize.width\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).width) - options.paddingLeft - options.paddingRight);\n        const maxHeight =  options.paddingFactor * (\n            options.resizeContainer\n            ? childrenSize.height\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).height) - options.paddingTop - options.paddingBottom);\n        if (maxWidth > 0 && maxHeight > 0) {\n            const offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        }\n    }\n    protected abstract layoutChild(child: SChildElementImpl,\n                                boundsData: BoundsData, bounds: Bounds,\n                                childOptions: T, containerOptions: T,\n                                currentOffset: Point,\n                                maxWidth: number, maxHeight: number): Point;\n\n    protected getFinalContainerBounds(container: SParentElementImpl & LayoutContainer,\n                                    lastOffset: Point,\n                                    options: T,\n                                    maxWidth: number,\n                                    maxHeight: number): Bounds {\n        return {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(options.minWidth, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(options.minHeight, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n    }\n\n    protected getFixedContainerBounds(\n            container: SModelElementImpl,\n            layoutOptions: T,\n            layouter: StatefulLayouter): Bounds {\n        let currentContainer = container;\n        while (true) {\n            if (isBoundsAware(currentContainer)) {\n                const bounds = currentContainer.bounds;\n                if (isLayoutContainer(currentContainer) && layoutOptions.resizeContainer)\n                    layouter.log.error(currentContainer, 'Resizable container found while detecting fixed bounds');\n                if (Dimension.isValid(bounds))\n                    return bounds;\n            }\n            if (currentContainer instanceof SChildElementImpl) {\n                currentContainer = currentContainer.parent;\n            } else {\n                layouter.log.error(currentContainer, 'Cannot detect fixed bounds');\n                return Bounds.EMPTY;\n            }\n        }\n    }\n\n    protected abstract getChildrenSize(container: SParentElementImpl & LayoutContainer,\n                               containerOptions: T,\n                               layouter: StatefulLayouter): Dimension;\n\n    protected layoutChildren(container: SParentElementImpl & LayoutContainer,\n                            layouter: StatefulLayouter,\n                            containerOptions: T,\n                            maxWidth: number,\n                            maxHeight: number): Point {\n        let currentOffset: Point = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - (maxWidth / containerOptions.paddingFactor)),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - (maxHeight / containerOptions.paddingFactor))};\n        container.children.forEach(\n            child => {\n                if (isLayoutableChild(child)) {\n                    const boundsData = layouter.getBoundsData(child);\n                    const bounds = boundsData.bounds;\n                    const childOptions = this.getChildLayoutOptions(child, containerOptions);\n                    if (bounds !== undefined && Dimension.isValid(bounds)) {\n                        currentOffset = this.layoutChild(child, boundsData, bounds,\n                            childOptions, containerOptions, currentOffset,\n                            maxWidth, maxHeight);\n                    }\n                }\n            }\n        );\n        return currentOffset;\n    }\n\n    protected getDx(hAlign: HAlignment, bounds: Bounds, maxWidth: number): number {\n        switch (hAlign) {\n            case 'left':\n                return 0;\n            case 'center':\n                return 0.5 * (maxWidth - bounds.width);\n            case 'right':\n                return maxWidth - bounds.width;\n        }\n    }\n\n    protected getDy(vAlign: VAlignment, bounds: Bounds, maxHeight: number): number {\n        switch (vAlign) {\n            case 'top':\n                return 0;\n            case 'center':\n                return 0.5 * (maxHeight - bounds.height);\n            case 'bottom':\n                return maxHeight - bounds.height;\n        }\n    }\n\n    protected getChildLayoutOptions(child: SChildElementImpl, containerOptions: T): T {\n        const layoutOptions = (child as any).layoutOptions;\n        if (layoutOptions === undefined)\n            return containerOptions;\n        else\n            return this.spread(containerOptions, layoutOptions);\n    }\n\n    protected getLayoutOptions(element: SModelElementImpl): T {\n        let current = element;\n        const allOptions: T[] = [];\n        while (current !== undefined) {\n            const layoutOptions = (current as any).layoutOptions;\n            if (layoutOptions !== undefined)\n                allOptions.push(layoutOptions);\n            if (current instanceof SChildElementImpl)\n                current = current.parent;\n            else\n                break;\n        }\n        return allOptions.reverse().reduce(\n            (a, b) => { return this.spread(a, b); }, this.getDefaultLayoutOptions());\n    }\n\n    protected abstract getDefaultLayoutOptions(): T;\n\n    protected abstract spread(a: T, b: T): T;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport {\n    Action, generateRequestId, RequestAction, ResponseAction, ComputedBoundsAction as ProtocolComputedBoundsAction} from 'sprotty-protocol/lib/actions';\nimport * as protocol from \"sprotty-protocol/lib/actions\";\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { Bounds, Dimension, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { CommandExecutionContext, CommandResult, CommandReturn, HiddenCommand, SystemCommand } from \"../../base/commands/command\";\nimport { SModelElementImpl } from \"../../base/model/smodel\";\nimport { TYPES } from \"../../base/types\";\nimport { Alignable, BoundsAware, isBoundsAware } from './model';\n\nexport interface ResolvedElementAndBounds {\n    element: SModelElementImpl & BoundsAware\n    oldBounds: Bounds\n    newPosition?: Point\n    newSize: Dimension\n}\n\nexport interface ResolvedElementAndAlignment {\n    element: SModelElementImpl & Alignable\n    oldAlignment: Point\n    newAlignment: Point\n}\n\n@injectable()\nexport class SetBoundsCommand extends SystemCommand {\n    static readonly KIND: string = protocol.SetBoundsAction.KIND;\n\n    protected bounds: ResolvedElementAndBounds[] = [];\n\n    constructor(@inject(TYPES.Action) protected readonly action: protocol.SetBoundsAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.action.bounds.forEach(\n            b => {\n                const element = context.root.index.getById(b.elementId);\n                if (element && isBoundsAware(element)) {\n                    this.bounds.push({\n                        element: element,\n                        oldBounds: element.bounds,\n                        newPosition: b.newPosition,\n                        newSize: b.newSize\n                    });\n                }\n            }\n        );\n        return this.redo(context);\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        this.bounds.forEach(\n            b => b.element.bounds = b.oldBounds\n        );\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        this.bounds.forEach(\n            b => {\n                if (b.newPosition)\n                    b.element.bounds = {\n                        ...b.newPosition,\n                        ...b.newSize,\n                    };\n                else\n                    // keep the position\n                    b.element.bounds = {\n                        x: b.element.bounds.x,\n                        y: b.element.bounds.y,\n                        ...b.newSize\n                    };\n            }\n        );\n        return context.root;\n    }\n}\n\n@injectable()\nexport class RequestBoundsCommand extends HiddenCommand {\n    static readonly KIND: string = protocol.RequestBoundsAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: protocol.RequestBoundsAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandResult {\n        return {\n            model: context.modelFactory.createRoot(this.action.newRoot),\n            modelChanged: true,\n            cause: this.action\n        };\n    }\n\n    get blockUntil(): (action: Action) => boolean {\n        return action => action.kind === ProtocolComputedBoundsAction.KIND;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SetBoundsAction implements Action, protocol.SetBoundsAction {\n    static readonly KIND = 'setBounds';\n    readonly kind = SetBoundsAction.KIND;\n\n    constructor(public readonly bounds: ElementAndBounds[]) {\n    }\n}\n\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class RequestBoundsAction implements RequestAction<ComputedBoundsAction>, protocol.RequestBoundsAction {\n    static readonly KIND = 'requestBounds';\n    readonly kind = RequestBoundsAction.KIND;\n\n    constructor(public readonly newRoot: SModelRootSchema,\n        public readonly requestId: string = '') { }\n\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    static create(newRoot: SModelRootSchema): RequestAction<ComputedBoundsAction> {\n        return new RequestBoundsAction(newRoot, generateRequestId());\n    }\n}\n\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class ComputedBoundsAction implements ResponseAction, protocol.ComputedBoundsAction {\n    static readonly KIND = 'computedBounds';\n    readonly kind = ComputedBoundsAction.KIND;\n\n    constructor(public readonly bounds: ElementAndBounds[],\n        public readonly revision?: number,\n        public readonly alignments?: ElementAndAlignment[],\n        public readonly responseId = '') { }\n}\n\n/**\n * Associates new bounds with a model element, which is referenced via its id.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ElementAndBounds extends protocol.ElementAndBounds {\n    elementId: string\n    newPosition?: Point\n    newSize: Dimension\n}\n\n/**\n * Associates a new alignment with a model element, which is referenced via its id.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ElementAndAlignment extends protocol.ElementAndAlignment{\n    elementId: string\n    newAlignment: Point\n}\n\n/**\n * Request a layout of the diagram or the selected elements only.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class LayoutAction implements Action, protocol.LayoutAction {\n    static readonly KIND = 'layout';\n    readonly kind = LayoutAction.KIND;\n\n    layoutType: string;\n    elementIds: string[];\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { SetBoundsCommand, RequestBoundsCommand } from \"./bounds-manipulation\";\nimport { HiddenBoundsUpdater } from './hidden-bounds-updater';\nimport { configureLayout, Layouter, LayoutRegistry } from \"./layout\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\nimport { HBoxLayouter } from \"./hbox-layout\";\nimport { VBoxLayouter } from \"./vbox-layout\";\nimport { StackLayouter} from \"./stack-layout\";\n\nconst boundsModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureCommand({ bind, isBound }, SetBoundsCommand);\n    configureCommand({ bind, isBound }, RequestBoundsCommand);\n    bind(HiddenBoundsUpdater).toSelf().inSingletonScope();\n    bind(TYPES.HiddenVNodePostprocessor).toService(HiddenBoundsUpdater);\n    bind(TYPES.Layouter).to(Layouter).inSingletonScope();\n    bind(TYPES.LayoutRegistry).to(LayoutRegistry).inSingletonScope();\n\n    configureLayout({bind, isBound}, VBoxLayouter.KIND, VBoxLayouter);\n    configureLayout({bind, isBound}, HBoxLayouter.KIND, HBoxLayouter);\n    configureLayout({bind, isBound}, StackLayouter.KIND, StackLayouter);\n});\n\nexport default boundsModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Bounds, Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SParentElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { AbstractLayout } from './abstract-layout';\nimport { AbstractLayoutOptions, VAlignment } from './layout-options';\nimport { BoundsData } from './hidden-bounds-updater';\nimport { LayoutContainer, isLayoutableChild } from './model';\nimport { StatefulLayouter } from './layout';\n\nexport interface HBoxLayoutOptions extends AbstractLayoutOptions {\n    hGap: number\n    vAlign: VAlignment\n}\n\n/**\n * Layouts children of a container in horizontal (left->right) direction.\n */\n@injectable()\nexport class HBoxLayouter extends AbstractLayout<HBoxLayoutOptions> {\n\n    static KIND = 'hbox';\n\n    protected getChildrenSize(container: SParentElementImpl & LayoutContainer,\n                               containerOptions: HBoxLayoutOptions,\n                               layouter: StatefulLayouter) {\n        let maxWidth = 0;\n        let maxHeight = -1;\n        let isFirst = true;\n        container.children.forEach(\n            child => {\n                if (isLayoutableChild(child)) {\n                    const bounds = layouter.getBoundsData(child).bounds;\n                    if (bounds !== undefined && Dimension.isValid(bounds)) {\n                        if (isFirst)\n                            isFirst = false;\n                        else\n                            maxWidth += containerOptions.hGap;\n                        maxWidth += bounds.width;\n                        maxHeight = Math.max(maxHeight, bounds.height);\n                    }\n                }\n            }\n        );\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    }\n\n    protected layoutChild(child: SChildElementImpl,\n                        boundsData: BoundsData,\n                        bounds: Bounds,\n                        childOptions: HBoxLayoutOptions,\n                        containerOptions: HBoxLayoutOptions,\n                        currentOffset: Point,\n                        maxWidth: number,\n                        maxHeight: number): Point {\n        const dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: currentOffset.x + (child as any).bounds.x - bounds.x,\n            y: containerOptions.paddingTop + (child as any).bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x + bounds.width + containerOptions.hGap,\n            y: currentOffset.y\n        };\n    }\n\n    protected getDefaultLayoutOptions(): HBoxLayoutOptions {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    }\n\n    protected spread(a: HBoxLayoutOptions, b: HBoxLayoutOptions): HBoxLayoutOptions {\n        return { ...a, ...b };\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Action, ComputedBoundsAction, ElementAndAlignment, ElementAndBounds, RequestBoundsAction } from \"sprotty-protocol/lib/actions\";\nimport { almostEquals, Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { ILogger } from \"../../utils/logging\";\nimport { IActionDispatcher } from \"../../base/actions/action-dispatcher\";\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl } from \"../../base/model/smodel\";\nimport { TYPES } from \"../../base/types\";\nimport { IVNodePostprocessor } from \"../../base/views/vnode-postprocessor\";\nimport { Layouter } from \"./layout\";\nimport { BoundsAware, isAlignable, isLayoutContainer, isSizeable } from \"./model\";\n\nexport class BoundsData {\n    vnode?: VNode;\n    bounds?: Bounds;\n    alignment?: Point;\n    boundsChanged: boolean;\n    alignmentChanged: boolean;\n}\n\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts and fires\n * ComputedBoundsActions.\n *\n * The actual bounds of an element can usually not be determined from the SModel\n * as they depend on the view implementation and CSS stylings. So the best way is\n * to grab them from a live (but hidden) SVG using getBBox().\n *\n * If an element is Alignable, and the top-left corner of its bounding box is not\n * the origin, we also issue a realign with the ComputedBoundsAction.\n */\n@injectable()\nexport class HiddenBoundsUpdater implements IVNodePostprocessor {\n\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    @inject(TYPES.Layouter) protected layouter: Layouter;\n\n    private readonly element2boundsData: Map<SModelElementImpl, BoundsData> = new Map;\n\n    root: SModelRootImpl | undefined;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (isSizeable(element) || isLayoutContainer(element)) {\n            this.element2boundsData.set(element, {\n                vnode: vnode,\n                bounds: element.bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            });\n        }\n        if (element instanceof SModelRootImpl)\n            this.root = element;\n        return vnode;\n    }\n\n    postUpdate(cause?: Action) {\n        if (cause === undefined || cause.kind !== RequestBoundsAction.KIND) {\n            return;\n        }\n        const request = cause as RequestBoundsAction;\n        this.getBoundsFromDOM();\n        this.layouter.layout(this.element2boundsData);\n        const resizes: ElementAndBounds[] = [];\n        const alignments: ElementAndAlignment[] = [];\n        this.element2boundsData.forEach(\n            (boundsData, element) => {\n                if (boundsData.boundsChanged && boundsData.bounds !== undefined) {\n                    const resize: ElementAndBounds = {\n                        elementId: element.id,\n                        newSize: {\n                            width: boundsData.bounds.width,\n                            height: boundsData.bounds.height\n                        }\n                    };\n                    // don't copy position if the element is layouted by the server\n                    if (element instanceof SChildElementImpl && isLayoutContainer(element.parent)) {\n                        resize.newPosition = {\n                            x: boundsData.bounds.x,\n                            y: boundsData.bounds.y,\n                        };\n                    }\n                    resizes.push(resize);\n                }\n                if (boundsData.alignmentChanged && boundsData.alignment !== undefined) {\n                    alignments.push({\n                        elementId: element.id,\n                        newAlignment: boundsData.alignment\n                    });\n                }\n            });\n        const revision = (this.root !== undefined) ? this.root.revision : undefined;\n        this.actionDispatcher.dispatch(ComputedBoundsAction.create(resizes, { revision, alignments, requestId: request.requestId }));\n        this.element2boundsData.clear();\n    }\n\n    protected getBoundsFromDOM() {\n        this.element2boundsData.forEach(\n            (boundsData, element) => {\n                if (boundsData.bounds && isSizeable(element)) {\n                    const vnode = boundsData.vnode;\n                    if (vnode && vnode.elm) {\n                        const boundingBox = this.getBounds(vnode.elm, element);\n                        if (isAlignable(element) && !(\n                            almostEquals(boundingBox.x, 0) && almostEquals(boundingBox.y, 0)\n                        )) {\n                            boundsData.alignment = {\n                                x: -boundingBox.x,\n                                y: -boundingBox.y\n                            };\n                            boundsData.alignmentChanged = true;\n                        }\n                        const newBounds = {\n                            x: element.bounds.x,\n                            y: element.bounds.y,\n                            width: boundingBox.width,\n                            height: boundingBox.height\n                        };\n                        if (!(almostEquals(newBounds.x, element.bounds.x)\n                            && almostEquals(newBounds.y, element.bounds.y)\n                            && almostEquals(newBounds.width, element.bounds.width)\n                            && almostEquals(newBounds.height, element.bounds.height))) {\n                            boundsData.bounds = newBounds;\n                            boundsData.boundsChanged = true;\n                        }\n                    }\n                }\n            }\n        );\n    }\n\n    protected getBounds(elm: any, element: BoundsAware): Bounds {\n        if (typeof elm.getBBox !== 'function') {\n            this.logger.error(this, 'Not an SVG element:', elm);\n            return Bounds.EMPTY;\n        }\n        const bounds = elm.getBBox();\n        return {\n            x: bounds.x,\n            y: bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { JsonMap } from 'sprotty-protocol/lib/utils/json';\n\nexport type HAlignment = 'left' | 'center' | 'right';\n\nexport type VAlignment = 'top' | 'center' | 'bottom';\n\nexport interface AbstractLayoutOptions extends JsonMap {\n    resizeContainer: boolean\n    paddingTop: number\n    paddingBottom: number\n    paddingLeft: number\n    paddingRight: number\n    paddingFactor: number\n    minWidth: number\n    minHeight: number\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, interfaces, multiInject, optional } from \"inversify\";\nimport { Bounds } from \"sprotty-protocol/lib/utils/geometry\";\nimport { TYPES } from \"../../base/types\";\nimport { ILogger } from '../../utils/logging';\nimport { InstanceRegistry } from \"../../utils/registry\";\nimport { SParentElementImpl, SModelElementImpl } from \"../../base/model/smodel\";\nimport { isLayoutContainer, LayoutContainer } from \"./model\";\nimport { BoundsData } from \"./hidden-bounds-updater\";\nimport { isInjectable } from \"../../utils/inversify\";\n\n@injectable()\nexport class LayoutRegistry extends InstanceRegistry<ILayout> {\n\n    @inject(TYPES.ILogger) logger: ILogger;\n\n    constructor(@multiInject(TYPES.LayoutRegistration) @optional() layouts: (LayoutRegistration)[] = []) {\n        super();\n        layouts.forEach(layout => {\n            if (this.hasKey(layout.layoutKind)) {\n                this.logger.warn('Layout kind is already defined: ', layout.layoutKind);\n            } else {\n                this.register(layout.layoutKind, layout.factory());\n            }\n        });\n    }\n}\n\nexport interface LayoutRegistration {\n    layoutKind: string;\n    factory: () => ILayout;\n}\n\n@injectable()\nexport class Layouter {\n\n    @inject(TYPES.LayoutRegistry) protected layoutRegistry: LayoutRegistry;\n    @inject(TYPES.ILogger) protected logger: ILogger;\n\n    layout(element2boundsData: Map<SModelElementImpl , BoundsData>) {\n        new StatefulLayouter(element2boundsData, this.layoutRegistry, this.logger).layout();\n    }\n}\n\nexport class StatefulLayouter {\n\n    private toBeLayouted: (SParentElementImpl & LayoutContainer)[];\n\n    constructor(private readonly element2boundsData: Map<SModelElementImpl , BoundsData>,\n                private readonly layoutRegistry: LayoutRegistry,\n                public readonly log: ILogger) {\n        this.toBeLayouted = [];\n        element2boundsData.forEach(\n            (data, element) => {\n                if (isLayoutContainer(element))\n                    this.toBeLayouted.push(element);\n            });\n    }\n\n    getBoundsData(element: SModelElementImpl): BoundsData {\n        let boundsData = this.element2boundsData.get(element);\n        let bounds = (element as any).bounds;\n        if (isLayoutContainer(element) && this.toBeLayouted.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.element2boundsData.set(element, boundsData);\n        }\n        return boundsData;\n    }\n\n    layout(): void {\n        while (this.toBeLayouted.length > 0) {\n            const element = this.toBeLayouted[0];\n            this.doLayout(element);\n        }\n    }\n\n    protected doLayout(element: SParentElementImpl & LayoutContainer): Bounds {\n        const index = this.toBeLayouted.indexOf(element);\n        if (index >= 0)\n            this.toBeLayouted.splice(index, 1);\n        const layout = this.layoutRegistry.get(element.layout);\n        if (layout)\n            layout.layout(element, this);\n        const boundsData = this.element2boundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        } else {\n            this.log.error(element, 'Layout failed');\n            return Bounds.EMPTY;\n        }\n    }\n}\n\nexport interface ILayout {\n    layout(container: SParentElementImpl & LayoutContainer,\n           layouter: StatefulLayouter): void\n}\n\n\nexport function configureLayout(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n    kind: string, constr: interfaces.ServiceIdentifier<ILayout>) {\n\n    if (typeof constr === 'function') {\n        if (!isInjectable(constr)) {\n            throw new Error(`Layouts be @injectable: ${constr.name}`);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(TYPES.LayoutRegistration).toDynamicValue(ctx => ({\n        layoutKind: kind,\n        factory: () => ctx.container.get(constr)\n    }));\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Dimension, isBounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElement as SModelElementSchema } from 'sprotty-protocol/lib/model';\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl, SParentElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { DOMHelper } from '../../base/views/dom-helper';\nimport { ViewerOptions } from '../../base/views/viewer-options';\nimport { getWindowScroll } from '../../utils/browser';\nimport type { Locateable } from '../move/model';\n\nexport const boundsFeature = Symbol('boundsFeature');\nexport const layoutContainerFeature = Symbol('layoutContainerFeature');\nexport const layoutableChildFeature = Symbol('layoutableChildFeature');\nexport const alignFeature = Symbol('alignFeature');\n\n/**\n * Model elements that implement this interface have a position and a size.\n * Note that this definition differs from the one in `sprotty-protocol` because this is\n * used in the _internal model_, while the other is used in the _external model_.\n */\nexport interface BoundsAware extends SModelExtension {\n    bounds: Bounds\n}\n\n/**\n * Used to identify model elements that specify a layout to apply to their children.\n */\nexport interface LayoutContainer extends LayoutableChild {\n    layout: string\n}\n\nexport type ModelLayoutOptions = { [key: string]: string | number | boolean };\n\nexport interface LayoutableChild extends SModelExtension, BoundsAware {\n    layoutOptions?: ModelLayoutOptions\n}\n\n/**\n * Used to adjust elements whose bounding box is not at the origin, e.g.\n * labels, or pre-rendered SVG figures.\n */\nexport interface Alignable extends SModelExtension {\n    alignment: Point\n}\n\nexport function isBoundsAware(element: SModelElementImpl): element is SModelElementImpl & BoundsAware {\n    return 'bounds' in element;\n}\n\nexport function isLayoutContainer(element: SModelElementImpl): element is SParentElementImpl & LayoutContainer {\n    return isBoundsAware(element)\n        && element.hasFeature(layoutContainerFeature)\n        && 'layout' in element;\n}\n\nexport function isLayoutableChild(element: SModelElementImpl): element is SChildElementImpl & LayoutableChild {\n    return isBoundsAware(element)\n        && element.hasFeature(layoutableChildFeature);\n}\n\nexport function isSizeable(element: SModelElementImpl): element is SModelElementImpl & BoundsAware {\n    return element.hasFeature(boundsFeature) && isBoundsAware(element);\n}\n\nexport function isAlignable(element: SModelElementImpl): element is SModelElementImpl & Alignable {\n    return element.hasFeature(alignFeature)\n        && 'alignment' in element;\n}\n\nexport function getAbsoluteBounds(element: SModelElementImpl): Bounds {\n    const boundsAware = findParentByFeature(element, isBoundsAware);\n    if (boundsAware !== undefined) {\n        let bounds = boundsAware.bounds;\n        let current: SModelElementImpl = boundsAware;\n        while (current instanceof SChildElementImpl) {\n            const parent = current.parent;\n            bounds = parent.localToParent(bounds);\n            current = parent;\n        }\n        return bounds;\n    } else if (element instanceof SModelRootImpl) {\n        const canvasBounds = element.canvasBounds;\n        return { x: 0, y: 0, width: canvasBounds.width, height: canvasBounds.height };\n    } else {\n        return Bounds.EMPTY;\n    }\n}\n\n/**\n * Returns the \"client-absolute\" bounds of the specified `element`.\n *\n * The client-absolute bounds are relative to the entire browser page.\n *\n * @param element The element to get the bounds for.\n * @param domHelper The dom helper to obtain the SVG element's id.\n * @param viewerOptions The viewer options to obtain sprotty's container div id.\n */\nexport function getAbsoluteClientBounds(element: SModelElementImpl, domHelper: DOMHelper, viewerOptions: ViewerOptions): Bounds {\n    let x = 0;\n    let y = 0;\n    let width = 0;\n    let height = 0;\n\n    const svgElementId = domHelper.createUniqueDOMElementId(element);\n    const svgElement = document.getElementById(svgElementId);\n    if (svgElement) {\n        const rect = svgElement.getBoundingClientRect();\n        const scroll = getWindowScroll();\n        x = rect.left + scroll.x;\n        y = rect.top + scroll.y;\n        width = rect.width;\n        height = rect.height;\n    }\n\n    let container = document.getElementById(viewerOptions.baseDiv);\n    if (container) {\n        while (container.offsetParent instanceof HTMLElement\n            && (container = <HTMLElement>container.offsetParent)) {\n            x -= container.offsetLeft;\n            y -= container.offsetTop;\n        }\n    }\n\n    return { x, y, width, height };\n}\n\nexport function findChildrenAtPosition(parent: SParentElementImpl, point: Point): SModelElementImpl[] {\n    const matches: SModelElementImpl[] = [];\n    doFindChildrenAtPosition(parent, point, matches);\n    return matches;\n}\n\nfunction doFindChildrenAtPosition(parent: SParentElementImpl, point: Point, matches: SModelElementImpl[]) {\n    parent.children.forEach(child => {\n        if (isBoundsAware(child) && Bounds.includes(child.bounds, point))\n            matches.push(child);\n        if (child instanceof SParentElementImpl) {\n            const newPoint = child.parentToLocal(point);\n            doFindChildrenAtPosition(child, newPoint, matches);\n        }\n    });\n}\n\n/**\n * Abstract class for elements with a position and a size.\n */\nexport abstract class SShapeElementImpl extends SChildElementImpl implements BoundsAware, Locateable, LayoutableChild {\n\n    position: Point = Point.ORIGIN;\n    size: Dimension = Dimension.EMPTY;\n    layoutOptions?: ModelLayoutOptions;\n\n    get bounds(): Bounds {\n        return {\n            x: this.position.x,\n            y: this.position.y,\n            width: this.size.width,\n            height: this.size.height\n        };\n    }\n\n    set bounds(newBounds: Bounds) {\n        this.position = {\n            x: newBounds.x,\n            y: newBounds.y\n        };\n        this.size = {\n            width: newBounds.width,\n            height: newBounds.height\n        };\n    }\n\n    override localToParent(point: Point | Bounds): Bounds {\n        const result = {\n            x: point.x + this.position.x,\n            y: point.y + this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    }\n\n    override parentToLocal(point: Point | Bounds): Bounds {\n        const result = {\n            x: point.x - this.position.x,\n            y: point.y - this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    }\n\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/** @deprecated Use `SShapeElementImpl` instead. */\nexport const SShapeElement = SShapeElementImpl;\n\n/**\n * Serializable schema for SShapeElement.\n *\n * @deprecated Use `SShapeElement` from `sprotty-protocol` instead.\n */\nexport interface SShapeElementSchema extends SModelElementSchema {\n    position?: Point\n    size?: Dimension\n    layoutOptions?: ModelLayoutOptions\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Dimension } from \"sprotty-protocol/lib/utils/geometry\";\nimport { Animation } from \"../../base/animations/animation\";\nimport { SModelRootImpl, SModelElementImpl } from \"../../base/model/smodel\";\nimport { CommandExecutionContext } from \"../../base/commands/command\";\nimport { BoundsAware } from './model';\n\nexport interface ResolvedElementResize {\n    element: SModelElementImpl & BoundsAware\n    fromDimension: Dimension\n    toDimension: Dimension\n}\n\nexport class ResizeAnimation extends Animation {\n    constructor(protected model: SModelRootImpl,\n        public elementResizes: Map<string, ResolvedElementResize>,\n        context: CommandExecutionContext,\n        protected reverse: boolean = false) {\n        super(context);\n    }\n\n    tween(t: number) {\n        this.elementResizes.forEach(\n            (elementResize) => {\n                const element = elementResize.element;\n                const newDimension: Dimension = (this.reverse) ? {\n                        width: (1 - t) * elementResize.toDimension.width + t * elementResize.fromDimension.width,\n                        height: (1 - t) * elementResize.toDimension.height + t * elementResize.fromDimension.height\n                    } : {\n                        width: (1 - t) * elementResize.fromDimension.width + t * elementResize.toDimension.width,\n                        height: (1 - t) * elementResize.fromDimension.height + t * elementResize.toDimension.height\n                    };\n                element.bounds = {\n                    x: element.bounds.x,\n                    y: element.bounds.y,\n                    width: newDimension.width,\n                    height: newDimension.height\n                };\n            }\n        );\n        return this.model;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Bounds, Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SParentElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { AbstractLayout } from './abstract-layout';\nimport { AbstractLayoutOptions, HAlignment, VAlignment } from './layout-options';\nimport { BoundsData } from './hidden-bounds-updater';\nimport { LayoutContainer, isLayoutableChild } from './model';\nimport { StatefulLayouter } from './layout';\n\nexport interface StackLayoutOptions extends AbstractLayoutOptions {\n    paddingFactor: number\n    vAlign: VAlignment\n    hAlign: HAlignment\n}\n\n@injectable()\nexport class StackLayouter extends AbstractLayout<StackLayoutOptions> {\n\n    static KIND = 'stack';\n\n    protected getChildrenSize(container: SParentElementImpl & LayoutContainer,\n                            options: StackLayoutOptions,\n                            layouter: StatefulLayouter) {\n        let maxWidth = -1;\n        let maxHeight = -1;\n        container.children.forEach(\n            child => {\n                if (isLayoutableChild(child)) {\n                    const bounds = layouter.getBoundsData(child).bounds;\n                    if (bounds !== undefined && Dimension.isValid(bounds)) {\n                        maxWidth = Math.max(maxWidth, bounds.width);\n                        maxHeight = Math.max(maxHeight, bounds.height);\n                    }\n                }\n            }\n        );\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    }\n\n    protected layoutChild(child: SChildElementImpl,\n                        boundsData: BoundsData,\n                        bounds: Bounds,\n                        childOptions: StackLayoutOptions,\n                        containerOptions: StackLayoutOptions,\n                        currentOffset: Point,\n                        maxWidth: number, maxHeight: number): Point {\n        const dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        const dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + (child as any).bounds.x - bounds.x + dx,\n            y: containerOptions.paddingTop + (child as any).bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    }\n\n    protected getDefaultLayoutOptions(): StackLayoutOptions {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hAlign: 'center',\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    }\n\n    protected spread(a: StackLayoutOptions, b: StackLayoutOptions): StackLayoutOptions {\n        return { ...a, ...b };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Bounds, Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SParentElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { AbstractLayout } from './abstract-layout';\nimport { AbstractLayoutOptions, HAlignment } from './layout-options';\nimport { BoundsData } from './hidden-bounds-updater';\nimport { LayoutContainer, isLayoutableChild } from './model';\nimport { StatefulLayouter } from './layout';\n\nexport interface VBoxLayoutOptions extends AbstractLayoutOptions {\n    vGap: number\n    hAlign: HAlignment\n}\n\n/**\n * Layouts children of a container in vertical (top->bottom) direction.\n */\n@injectable()\nexport class VBoxLayouter extends AbstractLayout<VBoxLayoutOptions> {\n\n    static KIND = 'vbox';\n\n    protected getChildrenSize(container: SParentElementImpl & LayoutContainer,\n                               containerOptions: VBoxLayoutOptions,\n                               layouter: StatefulLayouter) {\n        let maxWidth = -1;\n        let maxHeight = 0;\n        let isFirst = true;\n        container.children.forEach(\n            child => {\n                if (isLayoutableChild(child)) {\n                    const bounds = layouter.getBoundsData(child).bounds;\n                    if (bounds !== undefined && Dimension.isValid(bounds)) {\n                        maxHeight += bounds.height;\n                        if (isFirst)\n                            isFirst = false;\n                        else\n                            maxHeight += containerOptions.vGap;\n                        maxWidth = Math.max(maxWidth, bounds.width);\n                    }\n                }\n            }\n        );\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    }\n\n    protected layoutChild(child: SChildElementImpl,\n                        boundsData: BoundsData,\n                        bounds: Bounds,\n                        childOptions: VBoxLayoutOptions,\n                        containerOptions: VBoxLayoutOptions,\n                        currentOffset: Point,\n                        maxWidth: number,\n                        maxHeight: number) {\n        const dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + (child as any).bounds.x - bounds.x + dx,\n            y: currentOffset.y + (child as any).bounds.y - bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x,\n            y: currentOffset.y + bounds.height + containerOptions.vGap\n        };\n    }\n\n    protected getDefaultLayoutOptions(): VBoxLayoutOptions {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    }\n\n    protected spread(a: VBoxLayoutOptions, b: VBoxLayoutOptions): VBoxLayoutOptions {\n        return { ...a, ...b };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { Dimension } from 'sprotty-protocol/lib/utils/geometry';\nimport { IViewArgs, IView, RenderingContext } from '../../base/views/view';\nimport { getAbsoluteBounds, BoundsAware } from './model';\nimport { SChildElementImpl } from '../../base/model/smodel';\n\n@injectable()\nexport abstract class ShapeView implements IView {\n\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    isVisible(model: Readonly<SChildElementImpl & BoundsAware>, context: RenderingContext): boolean {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (!Dimension.isValid(model.bounds)) {\n            // We should hide only if we know the element's bounds\n            return true;\n        }\n        const ab = getAbsoluteBounds(model);\n        const canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    }\n\n    abstract render(model: Readonly<SChildElementImpl>, context: RenderingContext, args?: IViewArgs): VNode | undefined;\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, interfaces, multiInject, optional } from 'inversify';\nimport { Action } from 'sprotty-protocol/lib/actions';\nimport { InstanceRegistry } from '../../utils/registry';\nimport { TYPES } from '../../base/types';\nimport { SButtonImpl } from './model';\nimport { isInjectable } from '../../utils/inversify';\n\nexport interface IButtonHandler {\n    buttonPressed(button: SButtonImpl): (Action | Promise<Action>)[]\n}\n\n/** @deprecated deprecated since 0.12.0 - please use `configureButtonHandler` */\nexport interface IButtonHandlerFactory {\n    TYPE: string\n    new(): IButtonHandler\n}\n\nexport interface IButtonHandlerRegistration {\n    TYPE: string\n    factory: () => IButtonHandler\n}\n\n@injectable()\nexport class ButtonHandlerRegistry extends InstanceRegistry<IButtonHandler> {\n\n    constructor(\n        @multiInject(TYPES.IButtonHandlerRegistration)@optional() buttonHandlerRegistrations: IButtonHandlerRegistration[],\n        // deprecated, but keep support for now\n        @multiInject(TYPES.IButtonHandler)@optional() buttonHandlerFactories: IButtonHandlerFactory[]) {\n        super();\n        buttonHandlerRegistrations.forEach(factory => this.register(factory.TYPE, factory.factory()));\n        // deprecated, but keep support for now\n        buttonHandlerFactories.forEach(factory => this.register(factory.TYPE, new factory()));\n    }\n}\n\n/**\n * Utility function to register a button handler for an button type.\n */\nexport function configureButtonHandler(context: { bind: interfaces.Bind, isBound: interfaces.IsBound },\n    type: string, constr: interfaces.ServiceIdentifier<IButtonHandler>): void {\n    if (typeof constr === 'function') {\n        if (!isInjectable(constr)) {\n            throw new Error(`Button handlers should be @injectable: ${constr.name}`);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(TYPES.IButtonHandlerRegistration).toDynamicValue(ctx => ({\n        TYPE: type,\n        factory: () => ctx.container.get(constr)\n    }));\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { ButtonHandlerRegistry } from './button-handler';\n\nconst buttonModule = new ContainerModule(bind => {\n    bind(ButtonHandlerRegistry).toSelf().inSingletonScope();\n});\n\nexport default buttonModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { boundsFeature, layoutableChildFeature, SShapeElementImpl } from '../bounds/model';\nimport { fadeFeature } from '../fade/model';\nimport { SShapeElement as SShapeElementSchema } from 'sprotty-protocol';\n\nexport interface SButtonSchema extends SShapeElementSchema {\n    pressed: boolean\n    enabled: boolean\n}\n\nexport class SButtonImpl extends SShapeElementImpl {\n    static readonly DEFAULT_FEATURES = [boundsFeature, layoutableChildFeature, fadeFeature];\n\n    enabled = true;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/** @deprecated Use `SButtonImpl` instead. */\nexport const SButton = SButtonImpl;\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, multiInject, optional } from \"inversify\";\nimport { CenterAction, SelectAction, SelectAllAction } from \"sprotty-protocol/lib/actions\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { LabeledAction } from \"../../base/actions/action\";\nimport { SModelRootImpl } from \"../../base/model/smodel\";\nimport { TYPES } from \"../../base/types\";\nimport { toArray } from \"../../utils/iterable\";\nimport { ILogger } from \"../../utils/logging\";\nimport { isNameable, name } from \"../nameable/model\";\n\nexport interface ICommandPaletteActionProvider {\n    getActions(root: Readonly<SModelRootImpl>, text: string, lastMousePosition?: Point, index?: number): Promise<LabeledAction[]>;\n}\n\n@injectable()\nexport class CommandPaletteActionProviderRegistry implements ICommandPaletteActionProvider {\n\n    constructor(@multiInject(TYPES.ICommandPaletteActionProvider) @optional() protected actionProviders: ICommandPaletteActionProvider[] = []) {\n    }\n\n    getActions(root: Readonly<SModelRootImpl>, text: string, lastMousePosition?: Point, index?: number) {\n        const actionLists = this.actionProviders.map(provider => provider.getActions(root, text, lastMousePosition, index));\n        return Promise.all(actionLists).then(p => p.reduce((acc, promise) => promise !== undefined ? acc.concat(promise) : acc));\n    }\n}\n\n@injectable()\nexport class RevealNamedElementActionProvider implements ICommandPaletteActionProvider {\n\n    constructor(@inject(TYPES.ILogger) protected logger: ILogger) { }\n\n    getActions(root: Readonly<SModelRootImpl>, text: string, lastMousePosition?: Point, index?: number) {\n        if (index !== undefined && index % 2 === 0)\n            return Promise.resolve(this.createSelectActions(root));\n        else\n            return Promise.resolve([new LabeledAction(\"Select all\", [SelectAllAction.create()])]);\n    }\n\n    createSelectActions(modelRoot: SModelRootImpl): LabeledAction[] {\n        const nameables = toArray(modelRoot.index.all().filter(element => isNameable(element)));\n        return nameables.map(nameable => new LabeledAction(`Reveal ${name(nameable)}`,\n            [SelectAction.create({ selectedElementsIDs: [nameable.id] }), CenterAction.create([nameable.id])], 'eye'));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { AutocompleteResult, AutocompleteSettings } from \"autocompleter\";\nimport { inject, injectable } from \"inversify\";\nimport { Action, isAction } from 'sprotty-protocol/lib/actions';\nimport { LabeledAction, isLabeledAction } from \"../../base/actions/action\";\nimport { IActionDispatcherProvider } from \"../../base/actions/action-dispatcher\";\nimport { SModelElementImpl, SModelRootImpl } from \"../../base/model/smodel\";\nimport { TYPES } from \"../../base/types\";\nimport { AbstractUIExtension } from \"../../base/ui-extensions/ui-extension\";\nimport { SetUIExtensionVisibilityAction } from \"../../base/ui-extensions/ui-extension-registry\";\nimport { DOMHelper } from \"../../base/views/dom-helper\";\nimport { KeyListener } from \"../../base/views/key-tool\";\nimport { ViewerOptions } from \"../../base/views/viewer-options\";\nimport { codiconCSSClasses, codiconCSSString } from \"../../utils/codicon\";\nimport { toArray } from \"../../utils/iterable\";\nimport { matchesKeystroke } from \"../../utils/keyboard\";\nimport { getAbsoluteClientBounds } from \"../bounds/model\";\nimport { isSelectable } from \"../select/model\";\nimport { CommandPaletteActionProviderRegistry } from \"./action-providers\";\nimport { MousePositionTracker } from \"../../base/views/mouse-tool\";\nimport configureAutocomplete from \"autocompleter\";\n\n@injectable()\nexport class CommandPalette extends AbstractUIExtension {\n    static readonly ID = \"command-palette\";\n    static readonly isInvokePaletteKey = (event: KeyboardEvent) => matchesKeystroke(event, 'Space', 'ctrl');\n\n    protected loadingIndicatorClasses = codiconCSSClasses('loading', false, true, ['loading']);\n    protected xOffset = 20;\n    protected yOffset = 20;\n    protected defaultWidth = 400;\n    protected debounceWaitMs = 100;\n    protected noCommandsMsg = \"No commands available\";\n\n    protected inputElement: HTMLInputElement;\n    protected loadingIndicator: HTMLSpanElement;\n    protected autoCompleteResult: AutocompleteResult;\n    protected paletteIndex = 0;\n    protected contextActions?: LabeledAction[];\n\n    @inject(TYPES.IActionDispatcherProvider) protected actionDispatcherProvider: IActionDispatcherProvider;\n    @inject(TYPES.ICommandPaletteActionProviderRegistry) protected actionProviderRegistry: CommandPaletteActionProviderRegistry;\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n    @inject(MousePositionTracker) protected mousePositionTracker: MousePositionTracker;\n\n    public id() { return CommandPalette.ID; }\n    public containerClass() { return \"command-palette\"; }\n\n    override show(root: Readonly<SModelRootImpl>, ...contextElementIds: string[]) {\n        super.show(root, ...contextElementIds);\n        this.paletteIndex = 0;\n        this.contextActions = undefined;\n        this.inputElement!.value = \"\";\n        this.autoCompleteResult = configureAutocomplete(this.autocompleteSettings(root));\n        this.inputElement.focus();\n    }\n\n    protected initializeContents(containerElement: HTMLElement) {\n        containerElement.style.position = \"absolute\";\n        this.inputElement = document.createElement('input');\n        this.inputElement.style.width = '100%';\n        this.inputElement.addEventListener('keydown', (event) => this.hideIfEscapeEvent(event));\n        this.inputElement.addEventListener('keydown', (event) => this.cylceIfInvokePaletteKey(event));\n        this.inputElement.onblur = () => window.setTimeout(() => this.hide(), 200);\n        containerElement.appendChild(this.inputElement);\n    }\n\n    protected hideIfEscapeEvent(event: KeyboardEvent): any {\n        if (matchesKeystroke(event, 'Escape')) { this.hide(); }\n    }\n\n    protected cylceIfInvokePaletteKey(event: KeyboardEvent): any {\n        if (CommandPalette.isInvokePaletteKey(event)) { this.cycle(); }\n    }\n\n    protected cycle() {\n        this.contextActions = undefined;\n        this.paletteIndex++;\n    }\n\n    protected override onBeforeShow(containerElement: HTMLElement, root: Readonly<SModelRootImpl>, ...selectedElementIds: string[]) {\n        let x = this.xOffset;\n        let y = this.yOffset;\n        const selectedElements = toArray(root.index.all().filter(e => isSelectable(e) && e.selected));\n        if (selectedElements.length === 1) {\n            const bounds = getAbsoluteClientBounds(selectedElements[0], this.domHelper, this.viewerOptions);\n            x += bounds.x + bounds.width;\n            y += bounds.y;\n        } else {\n            const bounds = getAbsoluteClientBounds(root, this.domHelper, this.viewerOptions);\n            x += bounds.x;\n            y += bounds.y;\n        }\n        containerElement.style.left = `${x}px`;\n        containerElement.style.top = `${y}px`;\n        containerElement.style.width = `${this.defaultWidth}px`;\n    }\n\n    protected autocompleteSettings(root: Readonly<SModelRootImpl>): AutocompleteSettings<LabeledAction> {\n        return {\n            input: this.inputElement,\n            emptyMsg: this.noCommandsMsg,\n            className: \"command-palette-suggestions\",\n            debounceWaitMs: this.debounceWaitMs,\n            showOnFocus: true,\n            minLength: -1,\n            fetch: (text: string, update: (items: LabeledAction[]) => void) =>\n                this.updateAutoCompleteActions(update, text, root),\n            onSelect: (item: LabeledAction) => this.onSelect(item),\n            render: (item: LabeledAction, currentValue: string): HTMLDivElement | undefined =>\n                this.renderLabeledActionSuggestion(item, currentValue),\n            customize: (input: HTMLInputElement, inputRect: ClientRect | DOMRect, container: HTMLDivElement, maxHeight: number) => {\n                this.customizeSuggestionContainer(container, inputRect, maxHeight);\n            }\n        };\n    }\n\n    protected onSelect(item: LabeledAction) {\n        this.executeAction(item);\n        this.hide();\n    }\n\n    protected updateAutoCompleteActions(update: (items: LabeledAction[]) => void, text: string, root: Readonly<SModelRootImpl>) {\n        this.onLoading();\n        if (this.contextActions) {\n            update(this.filterActions(text, this.contextActions));\n            this.onLoaded('success');\n        } else {\n            this.actionProviderRegistry\n                .getActions(root, text, this.mousePositionTracker.lastPositionOnDiagram, this.paletteIndex)\n                .then(actions => {\n                    this.contextActions = actions;\n                    update(this.filterActions(text, actions));\n                    this.onLoaded('success');\n                })\n                .catch((reason) => {\n                    this.logger.error(this, \"Failed to obtain actions from command palette action providers\", reason);\n                    this.onLoaded('error');\n                });\n        }\n    }\n\n    protected onLoading() {\n        if (this.loadingIndicator && this.containerElement.contains(this.loadingIndicator)) {\n            return;\n        }\n        this.loadingIndicator = document.createElement('span');\n        this.loadingIndicator.classList.add(...this.loadingIndicatorClasses);\n        this.containerElement.appendChild(this.loadingIndicator);\n    }\n\n    protected onLoaded(success: 'success' | 'error') {\n        if (this.containerElement.contains(this.loadingIndicator)) {\n            this.containerElement.removeChild(this.loadingIndicator);\n        }\n    }\n\n    protected renderLabeledActionSuggestion(item: LabeledAction, value: string) {\n        const itemElement = document.createElement(\"div\");\n        const wordMatcher = espaceForRegExp(value).split(\" \").join(\"|\");\n        const regex = new RegExp(wordMatcher, \"gi\");\n        if (item.icon) {\n            this.renderIcon(itemElement, item.icon);\n        }\n        if (value.length > 0) {\n            itemElement.innerHTML += item.label.replace(regex, (match) => \"<em>\" + match + \"</em>\").replace(/ /g, '&nbsp;');\n        } else {\n            itemElement.innerHTML += item.label.replace(/ /g, '&nbsp;');\n        }\n        return itemElement;\n    }\n\n    protected renderIcon(itemElement: HTMLDivElement, iconId: string) {\n        itemElement.innerHTML += `<span class=\"icon ${this.getCodicon(iconId)}\"></span>`;\n    }\n\n    protected getFontAwesomeIcon(iconId: string) {\n        return `fa fa-${iconId}`;\n    }\n\n    protected getCodicon(iconId: string) {\n        return codiconCSSString(iconId);\n    }\n\n    protected filterActions(filterText: string, actions: LabeledAction[]): LabeledAction[] {\n        return toArray(actions.filter(action => {\n            const label = action.label.toLowerCase();\n            const searchWords = filterText.split(' ');\n            return searchWords.every(word => label.indexOf(word.toLowerCase()) !== -1);\n        }));\n    }\n\n    protected customizeSuggestionContainer(container: HTMLDivElement, inputRect: ClientRect | DOMRect, maxHeight: number) {\n        // move container into our command palette container as this is already positioned correctly\n        if (this.containerElement) {\n            this.containerElement.appendChild(container);\n        }\n    }\n\n    override hide() {\n        super.hide();\n        if (this.autoCompleteResult) {\n            this.autoCompleteResult.destroy();\n        }\n    }\n\n    protected executeAction(input: LabeledAction | Action[] | Action) {\n        this.actionDispatcherProvider()\n            .then((actionDispatcher) => actionDispatcher.dispatchAll(toActionArray(input)))\n            .catch((reason) => this.logger.error(this, 'No action dispatcher available to execute command palette action', reason));\n    }\n}\n\nfunction toActionArray(input: LabeledAction | Action[] | Action): Action[] {\n    if (isLabeledAction(input)) {\n        return input.actions;\n    } else if (isAction(input)) {\n        return [input];\n    }\n    return [];\n}\n\nfunction espaceForRegExp(value: string): string {\n    return value.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n}\n\nexport class CommandPaletteKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'Escape')) {\n            return [SetUIExtensionVisibilityAction.create({ extensionId: CommandPalette.ID, visible: false, contextElementsId: [] })];\n        } else if (CommandPalette.isInvokePaletteKey(event)) {\n            const selectedElements = toArray(element.index.all().filter(e => isSelectable(e) && e.selected).map(e => e.id));\n            return [SetUIExtensionVisibilityAction.create({ extensionId: CommandPalette.ID, visible: true, contextElementsId: selectedElements })];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { CommandPaletteActionProviderRegistry } from \"./action-providers\";\nimport { CommandPalette, CommandPaletteKeyListener } from \"./command-palette\";\n\nconst commandPaletteModule = new ContainerModule((bind) => {\n    bind(CommandPalette).toSelf().inSingletonScope();\n    bind(TYPES.IUIExtension).toService(CommandPalette);\n    bind(CommandPaletteKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(CommandPaletteKeyListener);\n    bind(CommandPaletteActionProviderRegistry).toSelf().inSingletonScope();\n    bind(TYPES.ICommandPaletteActionProviderRegistry).toService(CommandPaletteActionProviderRegistry);\n});\n\nexport default commandPaletteModule;\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { LabeledAction } from \"../../base/actions/action\";\n\nexport interface MenuItem extends LabeledAction {\n    /** Technical id of the menu item. */\n    readonly id: string;\n    /** String indicating the order. */\n    readonly sortString?: string;\n    /** String indicating the grouping (separators). Items with equal group will be in the same group. */\n    readonly group?: string;\n    /**\n     * The optional parent id can be used to add this element as a child of another element provided by anohter menu provider.\n     * The `parentId` must be fully qualified in the form of `a.b.c`, whereas `a`, `b` and `c` are referring to the IDs of other elements.\n     * Note that this attribute will only be considered for root items of a provider and not for children of provided items.\n     */\n    readonly parentId?: string;\n    /** Function determining whether the element is enabled. */\n    readonly isEnabled?: () => boolean;\n    /** Function determining whether the element is visible. */\n    readonly isVisible?: () => boolean;\n    /** Function determining whether the element is toggled on or off. */\n    readonly isToggled?: () => boolean;\n    /** Children of this item. If this item has children, they will be added into a submenu of this item. */\n    children?: MenuItem[];\n}\n\nexport type Anchor = MouseEvent | { x: number, y: number };\n\nexport function toAnchor(anchor: HTMLElement | { x: number, y: number }): Anchor {\n    return anchor instanceof HTMLElement ? { x: anchor.offsetLeft, y: anchor.offsetTop } : anchor;\n}\n\nexport interface IContextMenuService {\n    show(items: MenuItem[], anchor: Anchor, onHide?: () => void): void;\n}\n\nexport type IContextMenuServiceProvider = () => Promise<IContextMenuService>;\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { ContainerModule } from \"inversify\";\n\nimport { IContextMenuService } from \"./context-menu-service\";\nimport { ContextMenuProviderRegistry } from \"./menu-providers\";\nimport { ContextMenuMouseListener } from \"./mouse-listener\";\nimport { TYPES } from \"../../base/types\";\n\nconst contextMenuModule = new ContainerModule(bind => {\n    bind(TYPES.IContextMenuServiceProvider).toProvider<IContextMenuService>(ctx => {\n        return () => {\n            return new Promise<IContextMenuService>((resolve, reject) => {\n                if (ctx.container.isBound(TYPES.IContextMenuService)) {\n                    resolve(ctx.container.get<IContextMenuService>(TYPES.IContextMenuService));\n                } else {\n                    reject();\n                }\n            });\n        };\n    });\n    bind(ContextMenuMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(ContextMenuMouseListener);\n    bind(TYPES.IContextMenuProviderRegistry).to(ContextMenuProviderRegistry);\n});\n\nexport default contextMenuModule;\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject, optional } from 'inversify';\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { MenuItem } from './context-menu-service';\nimport { SModelRootImpl } from '../../base/model/smodel';\nimport { LabeledAction } from '../../base/actions/action';\nimport { TYPES } from '../../base/types';\nimport { isDeletable } from '../edit/delete';\nimport { isSelected } from '../select/model';\nimport { DeleteElementAction } from 'sprotty-protocol';\n\nexport interface IContextMenuItemProvider {\n    getItems(root: Readonly<SModelRootImpl>, lastMousePosition?: Point): Promise<LabeledAction[]>;\n}\n\n@injectable()\nexport class ContextMenuProviderRegistry implements IContextMenuItemProvider {\n\n    constructor(@multiInject(TYPES.IContextMenuItemProvider) @optional() protected menuProviders: IContextMenuItemProvider[] = []) { }\n\n    getItems(root: Readonly<SModelRootImpl>, lastMousePosition?: Point) {\n        const menues = this.menuProviders.map(provider => provider.getItems(root, lastMousePosition));\n        return Promise.all(menues).then(this.flattenAndRestructure);\n    }\n\n    private flattenAndRestructure(p: MenuItem[][]): MenuItem[] {\n        let menuItems = p.reduce((acc, promise) => promise !== undefined ? acc.concat(promise) : acc, []);\n        const menuItemsWithParentId = menuItems.filter(menuItem => menuItem.parentId);\n        for (const menuItem of menuItemsWithParentId) {\n            if (menuItem.parentId) {\n                const fragments = menuItem.parentId.split('.');\n                let matchingParent: MenuItem | undefined = undefined;\n                let nextParents = menuItems;\n                for (const fragment of fragments) {\n                    matchingParent = nextParents.find(item => fragment === item.id);\n                    if (matchingParent && matchingParent.children)\n                        nextParents = matchingParent.children;\n                }\n                if (matchingParent) {\n                    if (matchingParent.children) {\n                        matchingParent.children.push(menuItem);\n                    } else {\n                        matchingParent.children = [menuItem];\n                    }\n                    menuItems = menuItems.filter(item => item !== menuItem);\n                }\n            }\n        }\n        return menuItems;\n    }\n}\n\n@injectable()\nexport class DeleteContextMenuItemProvider implements IContextMenuItemProvider {\n    getItems(root: Readonly<SModelRootImpl>, lastMousePosition?: Point): Promise<MenuItem[]> {\n        const selectedElements = Array.from(root.index.all().filter(isSelected).filter(isDeletable));\n        return Promise.resolve([\n            {\n                id: 'delete',\n                label: 'Delete',\n                sortString: 'd',\n                group: 'edit',\n                actions: [DeleteElementAction.create(selectedElements.map(e => e.id))],\n                isEnabled: () => selectedElements.length > 0\n            }\n        ]);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from \"inversify\";\nimport { Action, SelectAction } from \"sprotty-protocol/lib/actions\";\nimport { IActionDispatcher } from \"../../base/actions/action-dispatcher\";\nimport { SModelElementImpl } from \"../../base/model/smodel\";\nimport { findParentByFeature } from \"../../base/model/smodel-utils\";\nimport { TYPES } from \"../../base/types\";\nimport { MouseListener } from \"../../base/views/mouse-tool\";\nimport { isSelectable, isSelected } from \"../select/model\";\nimport { IContextMenuService, IContextMenuServiceProvider } from \"./context-menu-service\";\nimport { ContextMenuProviderRegistry } from \"./menu-providers\";\n\nexport class ContextMenuMouseListener extends MouseListener {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    constructor(\n        @inject(TYPES.IContextMenuServiceProvider) protected readonly contextMenuService: IContextMenuServiceProvider,\n        @inject(TYPES.IContextMenuProviderRegistry) protected readonly menuProvider: ContextMenuProviderRegistry) {\n        super();\n    }\n\n    override contextMenu(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        this.showContextMenu(target, event);\n        return [];\n    }\n\n    protected async showContextMenu(target: SModelElementImpl, event: MouseEvent): Promise<void> {\n        let menuService: IContextMenuService;\n        try {\n            menuService = await this.contextMenuService();\n        } catch (rejected) {\n            // IContextMenuService is not bound => do nothing\n            return;\n        }\n\n        let isTargetSelected = false;\n        const selectableTarget = findParentByFeature(target, isSelectable);\n        if (selectableTarget) {\n            isTargetSelected = selectableTarget.selected;\n            selectableTarget.selected = true;\n        }\n\n        const root = target.root;\n        const mousePosition = { x: event.x, y: event.y };\n        if (target.id === root.id || isSelected(selectableTarget)) {\n            const menuItems = await this.menuProvider.getItems(root, mousePosition);\n            const restoreSelection = () => { if (selectableTarget) selectableTarget.selected = isTargetSelected; };\n            menuService.show(menuItems, mousePosition, restoreSelection);\n        } else {\n            if (isSelectable(target)) {\n                const options = { selectedElementsIDs: [target.id], deselectedElementsIDs: Array.from(root.index.all().filter(isSelected), (val) => { return val.id; }) };\n                await this.actionDispatcher.dispatch(SelectAction.create(options));\n            }\n            const items = await this.menuProvider.getItems(root, mousePosition);\n            menuService.show(items, mousePosition);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { SModelElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { IVNodePostprocessor } from \"../../base/views/vnode-postprocessor\";\nimport { isDecoration, Decoration } from \"./model\";\nimport { setAttr } from \"../../base/views/vnode-utils\";\nimport { isSizeable } from \"../bounds/model\";\nimport { SRoutableElementImpl } from \"../routing/model\";\nimport { EdgeRouterRegistry } from \"../routing/routing\";\nimport { Point } from \"sprotty-protocol\";\n\n@injectable()\nexport class DecorationPlacer implements IVNodePostprocessor {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (isDecoration(element)) {\n            const position = this.getPosition(element);\n            const translate = 'translate(' + position.x + ', ' + position.y + ')';\n            setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    }\n\n    protected getPosition(element: SModelElementImpl & Decoration): Point {\n        if (element instanceof SChildElementImpl && element.parent instanceof SRoutableElementImpl) {\n            const route =  this.edgeRouterRegistry.route(element.parent);\n            if (route.length > 1) {\n                const index = Math.floor(0.5  * (route.length - 1));\n                const offset = isSizeable(element)\n                    ? {\n                        x: - 0.5 * element.bounds.width,\n                        y: - 0.5 * element.bounds.width\n                    }\n                    : Point.ORIGIN;\n                return {\n                    x: 0.5 * (route[index].x + route[index + 1].x) + offset.x,\n                    y: 0.5 * (route[index].y + route[index + 1].y) + offset.y\n                };\n            }\n        }\n        if (isSizeable(element))\n            return {\n                x: -0.666 * element.bounds.width,\n                y: -0.666 * element.bounds.height\n            };\n        return Point.ORIGIN;\n    }\n\n    postUpdate(): void {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { configureModelElement } from \"../../base/views/view\";\nimport { ContainerModule } from \"inversify\";\nimport { SIssueMarker } from \"./model\";\nimport { IssueMarkerView } from \"./views\";\nimport { TYPES } from \"../../base/types\";\nimport { DecorationPlacer } from \"./decoration-placer\";\n\nconst decorationModule = new ContainerModule((bind, _unbind, isBound)  => {\n    configureModelElement({ bind, isBound }, 'marker', SIssueMarker, IssueMarkerView);\n    bind(DecorationPlacer).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(DecorationPlacer);\n});\n\nexport default decorationModule;\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SShapeElementImpl, boundsFeature } from '../bounds/model';\nimport { hoverFeedbackFeature, popupFeature } from '../hover/model';\n\nexport const decorationFeature = Symbol('decorationFeature');\n\nexport interface Decoration extends SModelExtension {\n}\n\nexport function isDecoration<T extends SModelElementImpl>(e: T): e is T & Decoration {\n    return e.hasFeature(decorationFeature);\n}\n\nexport class SDecoration extends SShapeElementImpl implements Decoration {\n    static readonly DEFAULT_FEATURES = [decorationFeature, boundsFeature, hoverFeedbackFeature, popupFeature];\n}\n\nexport type SIssueSeverity = 'error' | 'warning' | 'info';\n\nexport class SIssueMarker extends SDecoration {\n    issues: SIssue[];\n}\n\nexport class SIssue {\n    message: string;\n    severity: SIssueSeverity;\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx svg */\nimport { svg } from '../../lib/jsx';\n\nimport { VNode } from 'snabbdom';\nimport { IView, RenderingContext } from '../../base/views/view';\nimport { SIssueMarker, SIssueSeverity } from './model';\nimport { setClass } from '../../base/views/vnode-utils';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class IssueMarkerView implements IView {\n    render(marker: SIssueMarker, context: RenderingContext): VNode {\n        const scale = 16 / 1792;\n        const trafo = `scale(${scale}, ${scale})`;\n        const maxSeverity = this.getMaxSeverity(marker);\n        const group = <g class-sprotty-issue={true}>\n            <g transform={trafo}>\n                <path d={this.getPath(maxSeverity)} />\n            </g>\n        </g>;\n        setClass(group, 'sprotty-' + maxSeverity, true);\n        return group;\n    }\n\n    protected getMaxSeverity(marker: SIssueMarker): SIssueSeverity {\n        let currentSeverity: SIssueSeverity = 'info';\n        for (const severity of marker.issues.map(s => s.severity)) {\n            if (severity === 'error' || (severity === 'warning' && currentSeverity === 'info'))\n                currentSeverity = severity;\n        }\n        return currentSeverity;\n    }\n\n    protected getPath(severity: SIssueSeverity) {\n        switch (severity) {\n            case 'error':\n            case 'warning':\n                // eslint-disable-next-line max-len\n                return \"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z\";\n            case 'info':\n                // eslint-disable-next-line max-len\n                return \"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z\";\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { IntersectionFinder } from \"../edge-intersection/intersection-finder\";\n\nconst edgeIntersectionModule = new ContainerModule(bind => {\n    bind(IntersectionFinder).toSelf().inSingletonScope();\n    bind(TYPES.IEdgeRoutePostprocessor).toService(IntersectionFinder);\n});\n\nexport default edgeIntersectionModule;\n","/********************************************************************************\n * Copyright (c) 2021-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport TinyQueue from \"tinyqueue\";\nimport { EdgeRouting, IEdgeRoutePostprocessor, RoutedPoint } from \"../routing/routing\";\nimport { addRoute, checkWhichEventIsLeft, runSweep, SweepEvent } from \"./sweepline\";\n\nexport interface Intersection {\n    readonly routable1: string;\n    readonly segmentIndex1: number;\n    readonly routable2: string;\n    readonly segmentIndex2: number;\n    readonly intersectionPoint: Point;\n}\n\nexport interface IntersectingRoutedPoint extends RoutedPoint {\n    intersections: Intersection[];\n}\n\nexport function isIntersectingRoutedPoint(routedPoint: Point): routedPoint is IntersectingRoutedPoint {\n    return routedPoint !== undefined && 'intersections' in routedPoint && 'kind' in routedPoint;\n}\n\nexport const BY_X_THEN_Y = (a: Intersection, b: Intersection): number => {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return a.intersectionPoint.y - b.intersectionPoint.y;\n    }\n    return a.intersectionPoint.x - b.intersectionPoint.x;\n};\n\nexport const BY_DESCENDING_X_THEN_Y = (a: Intersection, b: Intersection): number => {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return a.intersectionPoint.y - b.intersectionPoint.y;\n    }\n    return b.intersectionPoint.x - a.intersectionPoint.x;\n};\n\nexport const BY_X_THEN_DESCENDING_Y = (a: Intersection, b: Intersection): number => {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return b.intersectionPoint.y - a.intersectionPoint.y;\n    }\n    return a.intersectionPoint.x - b.intersectionPoint.x;\n};\n\nexport const BY_DESCENDING_X_THEN_DESCENDING_Y = (a: Intersection, b: Intersection): number => {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return b.intersectionPoint.y - a.intersectionPoint.y;\n    }\n    return b.intersectionPoint.x - a.intersectionPoint.x;\n};\n\n/**\n * Finds intersections among edges and updates routed points to reflect those intersections.\n *\n * This only yields correct intersections among straight line segments and doesn't work with bezier curves.\n */\n@injectable()\nexport class IntersectionFinder implements IEdgeRoutePostprocessor {\n\n    /**\n     * Finds all intersections in the specified `routing` and replaces the `RoutedPoints` that are\n     * intersecting by adding intersection information to routing points (@see `IntersectingRoutedPoints`).\n     * @param routing the edge routing to find intersections for and update.\n     */\n    apply(routing: EdgeRouting) {\n        const intersections = this.find(routing);\n        this.addToRouting(intersections, routing);\n    }\n\n    /**\n     * Finds the intersections in the specified `routing` and returns them.\n     * @param routing the edge routing to find intersections for and update.\n     * @returns the identified intersections.\n     */\n    find(routing: EdgeRouting): Intersection[] {\n        const eventQueue = new TinyQueue<SweepEvent>(undefined, checkWhichEventIsLeft);\n        routing.routes.forEach((route, routeId) => {\n            if (this.isSupportedRoute(route)) {\n                addRoute(routeId, route, eventQueue);\n            }\n        });\n        return runSweep(eventQueue);\n    }\n\n    /**\n     * Specifies whether or not a specific route should be included in this intersection search or not.\n     *\n     * As this intersection finder only supports linear line segments, this method only returns `true`\n     * for routes that only contain routed points, which are either 'source', 'target' or 'linear'.\n     */\n    protected isSupportedRoute(route: RoutedPoint[]): boolean {\n        return route.find(point => point.kind !== 'source' && point.kind !== 'target' && point.kind !== 'linear') === undefined;\n    }\n\n    protected addToRouting(intersections: Intersection[], routing: EdgeRouting) {\n        for (const intersection of intersections) {\n            const routable1 = routing.get(intersection.routable1);\n            const routable2 = routing.get(intersection.routable2);\n            this.addIntersectionToRoutedPoint(intersection, routable1, intersection.segmentIndex1);\n            this.addIntersectionToRoutedPoint(intersection, routable2, intersection.segmentIndex2);\n        }\n    }\n\n    private addIntersectionToRoutedPoint(intersection: Intersection, routedPoint: RoutedPoint[] | undefined, segmentIndex: number) {\n        if (routedPoint && routedPoint.length > segmentIndex) {\n            const segment = routedPoint[segmentIndex + 1];\n            if (isIntersectingRoutedPoint(segment)) {\n                segment.intersections.push(intersection);\n            } else {\n                const intersectingRoutedPoint = { ...segment, intersections: [intersection] };\n                routedPoint[segmentIndex + 1] = intersectingRoutedPoint;\n            }\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 Rowan Winsemius and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// Based on the sweepline implementation at https://github.com/rowanwins/sweepline-intersections\n// which is published under the terms of MIT, but has been adapted to the use case of sprotty.\nimport TinyQueue from \"tinyqueue\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { PointToPointLine } from \"../../utils/geometry\";\nimport { Intersection } from \"./intersection-finder\";\nimport { RoutedPoint } from \"../routing/routing\";\n\n/*\n * The algorithm implemented in this module is loosely based on the Bentley-Ottmann algorithm for\n * finding intersection among line segments in `O((n+k) log n)`, whereas `n` is the number of line\n * segments and `k` is the number of intersections.\n * The underlying idea is to use a imaginary sweep line that moves over the x/y plane and testing\n * only the line segments for intersection that the sweepline currently crosses, instead of\n * testing all segment with each other, which would be `O(n^2)`.\n * It does so by generating a prioritized event queue for start and end events of the line segments\n * and working its way through the queue (i.e., sweeping).\n * More information can be found at https://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm\n * In contrast to the original Bently-Ottmann algorithm, the implementation below does not use a tree\n * data structure to store the segments in order to simplify the implementation.\n * See also https://github.com/rowanwins/sweepline-intersections#algorithm-notes\n */\n\n/**\n * Add the specified `route` to the event `queue` from left to right.\n * @param routeId id of the route.\n * @param route the route as array of points.\n * @param queue the queue to add the route to.\n */\nexport function addRoute(routeId: string, route: RoutedPoint[], queue: TinyQueue<SweepEvent>) {\n    if (route.length < 1) return;\n    let currentPoint = route[0];\n    let nextPoint = undefined;\n    for (let i = 0; i < route.length - 1; i++) {\n        nextPoint = route[i + 1];\n\n        const e1 = new SweepEvent(routeId, currentPoint, i);\n        const e2 = new SweepEvent(routeId, nextPoint, i + 1);\n\n        e1.otherEvent = e2;\n        e2.otherEvent = e1;\n\n        if (checkWhichEventIsLeft(e1, e2) > 0) {\n            e2.isLeftEndpoint = true;\n            e1.isLeftEndpoint = false;\n        } else {\n            e1.isLeftEndpoint = true;\n            e2.isLeftEndpoint = false;\n        }\n        queue.push(e1);\n        queue.push(e2);\n\n        currentPoint = nextPoint;\n    }\n}\n\n/**\n * Returns which of the two events is left.\n * This is used to classify the endpoints of a segment when generating the\n * event queue.\n */\nexport function checkWhichEventIsLeft(e1: SweepEvent, e2: SweepEvent): 1 | -1 {\n    if (e1.point.x > e2.point.x) return 1;\n    if (e1.point.x < e2.point.x) return -1;\n    if (e1.point.y !== e2.point.y) return e1.point.y > e2.point.y ? 1 : -1;\n    return 1;\n}\n\n/**\n * An event -- or with other words a start or end point of a segment -- in the context\n * of the event queue for the sweep.\n *\n * Stores the original Sprotty `edgeId` and the segment index of this segment in the edge\n * to keep track of which edge and segment this event originated from.\n */\nexport class SweepEvent {\n    otherEvent: SweepEvent;\n    isLeftEndpoint: boolean;\n    constructor(readonly edgeId: string, readonly point: Point, readonly segmentIndex: number) { }\n}\n\n/**\n * A line segment consists of a start and a stop event.\n */\nexport class Segment {\n    readonly leftSweepEvent: SweepEvent;\n    readonly rightSweepEvent: SweepEvent;\n    constructor(event: SweepEvent) {\n        this.leftSweepEvent = event;\n        this.rightSweepEvent = event.otherEvent;\n    }\n}\n\n/**\n * Performs the main sweep algorithm on the specified event queue.\n *\n * An empty priority queue is created to store segments encountered.\n * An item is removed from the priority queue if the vertex is the left endpoint\n * of a segment, we test it against every other segment in the segment queue for\n * intersections with any intersection recorded. We then add the vertex (and it's\n * associated right endpoint) to the segment queue.\n * If we encounter a right endpoint we remove the first item from the segment queue.\n *\n * Each pair of segments are only tested once. And only segments that overlap on the\n * x plane are tested against each other.\n *\n * @param eventQueue the event queue.\n * @returns the identified intersections.\n */\nexport function runSweep(eventQueue: TinyQueue<SweepEvent>): Intersection[] {\n    const intersectionPoints: Intersection[] = [];\n    const outQueue = new TinyQueue<Segment>([], checkWhichSegmentHasRightEndpointFirst);\n    while (eventQueue.length) {\n        const event = eventQueue.pop();\n        if (event?.isLeftEndpoint) {\n            const segment = new Segment(event);\n            for (let i = 0; i < outQueue.data.length; i++) {\n                const otherSegment = outQueue.data[i];\n                const intersection = intersectionOfSegments(segment, otherSegment);\n                if (intersection) {\n                    intersectionPoints.push(\n                        <Intersection>{\n                            routable1: event.edgeId,\n                            routable2: otherSegment.leftSweepEvent.edgeId,\n                            segmentIndex1: getSegmentIndex(segment),\n                            segmentIndex2: getSegmentIndex(otherSegment),\n                            intersectionPoint: intersection\n                        }\n                    );\n                }\n            }\n            outQueue.push(segment);\n        } else if (event?.isLeftEndpoint === false) {\n            outQueue.pop();\n        }\n    }\n    return intersectionPoints;\n}\n\n/**\n * Specifies which of the two specified segments has a right endpoint first.\n * Used as a comparator to sort the event queue.\n */\nexport function checkWhichSegmentHasRightEndpointFirst(seg1: Segment, seg2: Segment): 1 | -1 {\n    if (seg1.rightSweepEvent.point.x > seg2.rightSweepEvent.point.x) return 1;\n    if (seg1.rightSweepEvent.point.x < seg2.rightSweepEvent.point.x) return -1;\n    if (seg1.rightSweepEvent.point.y !== seg2.rightSweepEvent.point.y) return seg1.rightSweepEvent.point.y < seg2.rightSweepEvent.point.y ? 1 : -1;\n    return 1;\n}\n\nexport function getSegmentIndex(segment: Segment): number {\n    return Math.min(segment.leftSweepEvent.segmentIndex, segment.rightSweepEvent.segmentIndex);\n}\n\n/**\n * Tests whether two segments intersect and returns the intersection point if existing.\n */\nexport function intersectionOfSegments(seg1: Segment, seg2: Segment): Point | undefined {\n    if (seg1.leftSweepEvent.edgeId === seg2.leftSweepEvent.edgeId) {\n        return undefined;\n    }\n    const seg1Line = new PointToPointLine(seg1.leftSweepEvent.point, seg1.rightSweepEvent.point);\n    const seg2Line = new PointToPointLine(seg2.leftSweepEvent.point, seg2.rightSweepEvent.point);\n    return seg1Line.intersection(seg2Line);\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { EdgeLayoutPostprocessor } from \"./edge-layout\";\n\nconst edgeLayoutModule = new ContainerModule(bind => {\n    bind(EdgeLayoutPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(EdgeLayoutPostprocessor);\n    bind(TYPES.HiddenVNodePostprocessor).toService(EdgeLayoutPostprocessor);\n});\n\nexport default edgeLayoutModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Bounds, Point, toDegrees } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SModelElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { IVNodePostprocessor } from \"../../base/views/vnode-postprocessor\";\nimport { setAttr } from \"../../base/views/vnode-utils\";\nimport { SEdgeImpl } from \"../../graph/sgraph\";\nimport { Orientation } from \"../../utils/geometry\";\nimport { isAlignable, BoundsAware } from \"../bounds/model\";\nimport { DEFAULT_EDGE_PLACEMENT, isEdgeLayoutable, EdgeLayoutable, EdgePlacement } from \"./model\";\nimport { EdgeRouterRegistry } from \"../routing/routing\";\n\n@injectable()\nexport class EdgeLayoutPostprocessor implements IVNodePostprocessor {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (isEdgeLayoutable(element) && element.parent instanceof SEdgeImpl) {\n            if (element.bounds !== Bounds.EMPTY) {\n                const placement = this.getEdgePlacement(element);\n                const edge = element.parent;\n                const position = Math.min(1, Math.max(0, placement.position));\n                const router = this.edgeRouterRegistry.get(edge.routerKind);\n                const pointOnEdge = router.pointAt(edge, position);\n                const derivativeOnEdge = router.derivativeAt(edge, position);\n                let transform = '';\n                if (pointOnEdge && derivativeOnEdge) {\n                    transform += `translate(${pointOnEdge.x}, ${pointOnEdge.y})`;\n                    const angle = toDegrees(Math.atan2(derivativeOnEdge.y, derivativeOnEdge.x));\n                    if (placement.rotate) {\n                        let flippedAngle = angle;\n                        if (Math.abs(angle) > 90) {\n                             if (angle < 0)\n                                flippedAngle += 180;\n                            else if (angle > 0)\n                                flippedAngle -= 180;\n                        }\n                        transform += ` rotate(${flippedAngle})`;\n                        const alignment = this.getRotatedAlignment(element, placement, flippedAngle !== angle);\n                        transform += ` translate(${alignment.x}, ${alignment.y})`;\n                    } else {\n                        const alignment = this.getAlignment(element, placement, angle);\n                        transform += ` translate(${alignment.x}, ${alignment.y})`;\n                    }\n                    setAttr(vnode, 'transform', transform);\n                }\n            }\n        }\n        return vnode;\n    }\n\n    protected getRotatedAlignment(element: EdgeLayoutable & SModelElementImpl & BoundsAware, placement: EdgePlacement, flip: boolean) {\n        let x = isAlignable(element) ? element.alignment.x : 0;\n        let y = isAlignable(element) ? element.alignment.y : 0;\n        const bounds = element.bounds;\n        if (placement.side === 'on')\n            return { x: x - 0.5 * bounds.height, y: y - 0.5 * bounds.height};\n        if (flip) {\n            if (placement.position < 0.3333333)\n                x -= bounds.width + placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x += placement.offset;\n            switch (placement.side) {\n                case 'left':\n                case 'bottom':\n                    y -= placement.offset + bounds.height;\n                    break;\n                case 'right':\n                case 'top':\n                    y += placement.offset;\n            }\n        } else {\n            if (placement.position < 0.3333333)\n                x += placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x -= bounds.width + placement.offset;\n            switch (placement.side) {\n                case 'right':\n                case 'bottom':\n                    y += - placement.offset - bounds.height;\n                    break;\n                case 'left':\n                case 'top':\n                    y += placement.offset;\n            }\n        }\n        return { x, y };\n    }\n\n    protected getEdgePlacement(element: SModelElementImpl): EdgePlacement {\n        let current = element;\n        const allPlacements: EdgePlacement[] = [];\n        while (current !== undefined) {\n            const placement = (current as any).edgePlacement;\n            if (placement !== undefined)\n                allPlacements.push(placement);\n            if (current instanceof SChildElementImpl)\n                current = current.parent;\n            else\n                break;\n        }\n        return allPlacements.reverse().reduce(\n            (a, b) => { return {...a, ...b}; }, DEFAULT_EDGE_PLACEMENT);\n    }\n\n    protected getAlignment(label: EdgeLayoutable & SModelElementImpl & BoundsAware, placement: EdgePlacement, angle: number): Point {\n        const bounds = label.bounds;\n        const x = isAlignable(label) ? label.alignment.x - bounds.width : 0;\n        const y = isAlignable(label) ? label.alignment.y - bounds.height : 0;\n        if (placement.side === 'on') {\n            return { x: x + 0.5 * bounds.width, y: y + 0.5 * bounds.height};\n        }\n        const quadrant = this.getQuadrant(angle);\n        const midLeft = { x: placement.offset, y: y + 0.5 * bounds.height };\n        const topLeft = { x: placement.offset, y: y + bounds.height + placement.offset };\n        const topRight = { x: -bounds.width - placement.offset, y: y + bounds.height + placement.offset};\n        const midRight = { x: -bounds.width - placement.offset, y: y + 0.5 * bounds.height };\n        const bottomRight = { x: -bounds.width - placement.offset, y: y - placement.offset};\n        const bottomLeft = { x: placement.offset, y: y - placement.offset};\n        switch (placement.side) {\n            case 'left':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return Point.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return Point.linear(topRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return Point.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return Point.linear(bottomLeft, topLeft, quadrant.position);\n                }\n                break;\n            case 'right':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return Point.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return Point.linear(bottomLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return Point.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return Point.linear(topRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'top':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return Point.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return Point.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'bottom':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return Point.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return Point.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                }\n                break;\n        }\n        return {x: 0, y: 0};\n    }\n\n    protected getQuadrant(angle: number): {orientation: Orientation, position: number} {\n        if (Math.abs(angle) > 135)\n            return { orientation: 'west', position: (angle > 0 ? angle - 135 : angle + 225) / 90 };\n        else if (angle < -45)\n            return { orientation: 'north', position: (angle + 135) / 90 };\n        else if (angle < 45)\n            return { orientation: 'east', position: (angle + 45) / 90 };\n        else\n            return { orientation: 'south', position: (angle - 45) / 90 };\n    }\n\n    protected linearFlip(p0: Point, p1: Point, p2: Point, p3: Point, position: number) {\n        return position < 0.5 ? Point.linear(p0, p1, 2 * position) : Point.linear(p2, p3, 2 * position - 1);\n    }\n\n    postUpdate(): void {}\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { SModelElementImpl, SChildElementImpl } from '../../base/model/smodel';\nimport { BoundsAware, isBoundsAware } from '../bounds/model';\nimport { SRoutableElementImpl } from '../routing/model';\n\nexport const edgeLayoutFeature = Symbol('edgeLayout');\n\nexport interface EdgeLayoutable extends SModelExtension {\n    edgePlacement: EdgePlacement\n}\n\nexport function isEdgeLayoutable<T extends SModelElementImpl>(element: T): element is T & SChildElementImpl & BoundsAware & EdgeLayoutable {\n    return element instanceof SChildElementImpl\n        && element.parent instanceof SRoutableElementImpl\n        && checkEdgeLayoutable(element)\n        && isBoundsAware(element)\n        && element.hasFeature(edgeLayoutFeature);\n}\n\nfunction checkEdgeLayoutable(element: SChildElementImpl): element is SChildElementImpl & EdgeLayoutable{\n    return 'edgePlacement' in element;\n}\n\nexport type EdgeSide = 'left' | 'right' | 'top' | 'bottom' | 'on';\n\nexport class EdgePlacement extends Object {\n    /**\n     * true, if the label should be rotated to touch the edge tangentially\n     */\n    rotate: boolean;\n\n    /**\n     * where is the label relative to the line's direction\n     */\n    side: EdgeSide;\n\n    /**\n     * between 0 (source anchor) and 1 (target anchor)\n     */\n    position: number;\n\n    /**\n     * space between label and edge/connected nodes\n     */\n    offset: number;\n}\n\nexport const DEFAULT_EDGE_PLACEMENT: EdgePlacement = {\n    rotate: true,\n    side: 'top',\n    position: 0.5,\n    offset: 7\n};\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { SModelElementImpl } from \"../../base/model/smodel\";\nimport { SModelExtension } from \"../../base/model/smodel-extension\";\n\nexport const creatingOnDragFeature = Symbol('creatingOnDragFeature');\n\nexport interface CreatingOnDrag extends SModelExtension {\n    createAction(id: string): Action;\n}\n\nexport function isCreatingOnDrag<T extends SModelElementImpl>(element: T): element is T & CreatingOnDrag {\n    return element.hasFeature(creatingOnDragFeature) && (element as any).createAction !== undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Action, CreateElementAction as ProtocolCreateElementAction } from 'sprotty-protocol/lib/actions';\nimport { SModelElement as SModelElementSchema } from 'sprotty-protocol/lib/model';\nimport { Command, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { SParentElementImpl, SChildElementImpl } from '../../base/model/smodel';\nimport { TYPES } from '../../base/types';\n\n\n@injectable()\nexport class CreateElementCommand extends Command {\n    static readonly KIND = ProtocolCreateElementAction.KIND;\n\n    container: SParentElementImpl;\n    newElement: SChildElementImpl;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolCreateElementAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const container = context.root.index.getById(this.action.containerId);\n        if (container instanceof SParentElementImpl) {\n            this.container = container;\n            this.newElement = context.modelFactory.createElement(this.action.elementSchema);\n            this.container.add(this.newElement);\n        }\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        this.container.remove(this.newElement);\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        this.container.add(this.newElement);\n        return context.root;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Create an element with the given schema and add it to the diagram.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface CreateElementAction extends Action {\n    kind: typeof CreateElementAction.KIND\n    containerId: string\n    elementSchema: SModelElementSchema\n}\nexport namespace CreateElementAction {\n    export const KIND = 'createElement';\n\n    export function create(elementSchema: SModelElementSchema, options: { containerId: string }): CreateElementAction {\n        return {\n            kind: KIND,\n            elementSchema,\n            containerId: options.containerId\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Action, DeleteElementAction as ProtocolDeleteElementAction} from 'sprotty-protocol/lib/actions';\nimport { Command, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { SModelElementImpl, SParentElementImpl, SChildElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { TYPES } from '../../base/types';\n\nexport const deletableFeature = Symbol('deletableFeature');\n\nexport interface Deletable extends SModelExtension {\n}\n\nexport function isDeletable<T extends SModelElementImpl>(element: T): element is T & Deletable & SChildElementImpl {\n    return element instanceof SChildElementImpl && element.hasFeature(deletableFeature);\n}\n\nexport class ResolvedDelete {\n    child: SChildElementImpl;\n    parent: SParentElementImpl;\n}\n\n@injectable()\nexport class DeleteElementCommand extends Command {\n    static readonly KIND = ProtocolDeleteElementAction.KIND;\n\n    resolvedDeletes: ResolvedDelete[] = [];\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolDeleteElementAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        for (const id of this.action.elementIds) {\n            const element = index.getById(id);\n            if (element && isDeletable(element)) {\n                this.resolvedDeletes.push({ child: element, parent: element.parent });\n                element.parent.remove(element);\n            }\n        }\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        for (const resolvedDelete of this.resolvedDeletes)\n            resolvedDelete.parent.add(resolvedDelete.child);\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        for (const resolvedDelete of this.resolvedDeletes)\n            resolvedDelete.parent.remove(resolvedDelete.child);\n        return context.root;\n    }\n}\n\n// // Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Delete a set of elements identified by their IDs.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface DeleteElementAction extends Action {\n    kind: typeof DeleteElementAction.KIND\n    elementIds: string[]\n}\nexport namespace DeleteElementAction {\n    export const KIND = 'delete';\n\n    export function create(elementIds: string[]): DeleteElementAction {\n        return {\n            kind: KIND,\n            elementIds\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\nimport { configureActionHandler } from \"../../base/actions/action-handler\";\nimport { configureModelElement } from \"../../base/views/view\";\nimport { SDanglingAnchorImpl } from \"../../features/routing/model\";\nimport { EmptyGroupView } from \"../../lib/svg-views\";\nimport { DeleteElementCommand } from \"./delete\";\nimport { EditLabelMouseListener, ApplyLabelEditCommand, EditLabelKeyListener, EditLabelAction } from \"./edit-label\";\nimport { EditLabelUI, EditLabelActionHandler } from \"./edit-label-ui\";\nimport { SwitchEditModeCommand } from \"./edit-routing\";\nimport { ReconnectCommand } from \"./reconnect\";\n\nexport const edgeEditModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    configureCommand(context, SwitchEditModeCommand);\n    configureCommand(context, ReconnectCommand);\n    configureCommand(context, DeleteElementCommand);\n    configureModelElement(context, 'dangling-anchor', SDanglingAnchorImpl, EmptyGroupView);\n});\n\nexport const labelEditModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(EditLabelMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(EditLabelMouseListener);\n    bind(EditLabelKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(EditLabelKeyListener);\n    configureCommand({ bind, isBound }, ApplyLabelEditCommand);\n});\n\nexport const labelEditUiModule = new ContainerModule((bind, _unbind, isBound) => {\n    const context = { bind, isBound };\n    configureActionHandler(context, EditLabelAction.KIND, EditLabelActionHandler);\n    bind(EditLabelUI).toSelf().inSingletonScope();\n    bind(TYPES.IUIExtension).toService(EditLabelUI);\n});\n","/********************************************************************************\n * Copyright (c) 2019-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { Action, ApplyLabelEditAction } from 'sprotty-protocol/lib/actions';\nimport { IActionDispatcherProvider } from '../../base/actions/action-dispatcher';\nimport { IActionHandler } from '../../base/actions/action-handler';\nimport { ICommand } from '../../base/commands/command';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { TYPES } from '../../base/types';\nimport { AbstractUIExtension } from '../../base/ui-extensions/ui-extension';\nimport { SetUIExtensionVisibilityAction } from '../../base/ui-extensions/ui-extension-registry';\nimport { DOMHelper } from '../../base/views/dom-helper';\nimport { ViewerOptions } from '../../base/views/viewer-options';\nimport { CommitModelAction } from '../../model-source/commit-model';\nimport { matchesKeystroke, KeyCode, KeyboardModifier } from '../../utils/keyboard';\nimport { getAbsoluteClientBounds } from '../bounds/model';\nimport { getZoom } from '../viewport/zoom';\nimport { EditLabelValidationResult, IEditLabelValidator, isEditLabelAction, Severity } from './edit-label';\nimport { EditableLabel, isEditableLabel } from './model';\n\n/** Shows a UI extension for editing a label on emitted `EditLabelAction`s. */\n@injectable()\nexport class EditLabelActionHandler implements IActionHandler {\n    handle(action: Action): void | Action | ICommand {\n        if (isEditLabelAction(action)) {\n            return SetUIExtensionVisibilityAction.create({ extensionId: EditLabelUI.ID, visible: true, contextElementsId: [action.labelId] });\n        }\n    }\n}\n\nexport interface IEditLabelValidationDecorator {\n    decorate(input: HTMLInputElement | HTMLTextAreaElement, validationResult: EditLabelValidationResult): void;\n    dispose(input: HTMLInputElement | HTMLTextAreaElement): void;\n}\n\n@injectable()\nexport class EditLabelUI extends AbstractUIExtension {\n    static readonly ID = 'editLabelUi';\n\n    @inject(TYPES.IActionDispatcherProvider) public actionDispatcherProvider: IActionDispatcherProvider;\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    @inject(TYPES.DOMHelper) protected domHelper: DOMHelper;\n    @inject(TYPES.IEditLabelValidator) @optional() public labelValidator: IEditLabelValidator;\n    @inject(TYPES.IEditLabelValidationDecorator) @optional() public validationDecorator: IEditLabelValidationDecorator;\n\n    protected inputElement: HTMLInputElement;\n    protected textAreaElement: HTMLTextAreaElement;\n\n    protected label?: EditableLabel & SModelElementImpl;\n    protected labelElement: HTMLElement | null;\n    protected validationTimeout?: number = undefined;\n    protected isActive: boolean = false;\n    protected blockApplyEditOnInvalidInput = true;\n    protected isCurrentLabelValid: boolean = true;\n    protected previousLabelContent?: string;\n\n    public id() { return EditLabelUI.ID; }\n    public containerClass() { return 'label-edit'; }\n\n    protected get labelId() { return this.label ? this.label.id : 'unknown'; }\n\n    protected initializeContents(containerElement: HTMLElement) {\n        containerElement.style.position = 'absolute';\n        this.inputElement = document.createElement('input');\n        this.textAreaElement = document.createElement('textarea');\n        [this.inputElement, this.textAreaElement].forEach((element) => {\n            element.onkeydown = event => this.applyLabelEditOnEvent(event, 'Enter');\n            this.configureAndAdd(element, containerElement);\n        });\n    }\n\n    protected configureAndAdd(element: HTMLInputElement | HTMLTextAreaElement, containerElement: HTMLElement) {\n        element.style.visibility = 'hidden';\n        element.style.position = 'absolute';\n        element.style.top = '0px';\n        element.style.left = '0px';\n        element.addEventListener('keydown', (event: KeyboardEvent) => this.hideIfEscapeEvent(event));\n        element.addEventListener('keyup', (event: KeyboardEvent) => this.validateLabelIfContentChange(event, element.value));\n        element.addEventListener('blur', () => window.setTimeout(() => this.applyLabelEdit(), 200));\n        containerElement.appendChild(element);\n    }\n\n    get editControl(): HTMLInputElement | HTMLTextAreaElement {\n        if (this.label && this.label.isMultiLine) {\n            return this.textAreaElement;\n        }\n        return this.inputElement;\n    }\n\n    protected hideIfEscapeEvent(event: KeyboardEvent) {\n        if (matchesKeystroke(event, 'Escape')) { this.hide(); }\n    }\n\n    protected applyLabelEditOnEvent(event: KeyboardEvent, code?: KeyCode, ...modifiers: KeyboardModifier[]) {\n        if (matchesKeystroke(event, code ? code : 'Enter', ...modifiers)) {\n            event.preventDefault();\n            this.applyLabelEdit();\n        }\n    }\n\n    protected validateLabelIfContentChange(event: KeyboardEvent, value: string) {\n        if (this.previousLabelContent === undefined || this.previousLabelContent !== value) {\n            this.previousLabelContent = value;\n            this.performLabelValidation(event, this.editControl.value);\n        }\n    }\n\n    protected async applyLabelEdit() {\n        if (!this.isActive) {\n            return;\n        }\n        if (this.label?.text === this.editControl.value) {\n            // no action necessary\n            this.hide();\n            return;\n        }\n        if (this.blockApplyEditOnInvalidInput) {\n            const result = await this.validateLabel(this.editControl.value);\n            if ('error' === result.severity) {\n                this.editControl.focus();\n                return;\n            }\n        }\n        this.actionDispatcherProvider()\n            .then((actionDispatcher) => actionDispatcher.dispatchAll([ApplyLabelEditAction.create(this.labelId, this.editControl.value), CommitModelAction.create()]))\n            .catch((reason) => this.logger.error(this, 'No action dispatcher available to execute apply label edit action', reason));\n        this.hide();\n    }\n\n    protected performLabelValidation(event: KeyboardEvent, value: string) {\n        if (this.validationTimeout) {\n            window.clearTimeout(this.validationTimeout);\n        }\n        this.validationTimeout = window.setTimeout(() => this.validateLabel(value), 200);\n    }\n\n    protected async validateLabel(value: string): Promise<EditLabelValidationResult> {\n        if (this.labelValidator && this.label) {\n            try {\n                const result = await this.labelValidator.validate(value, this.label);\n                this.isCurrentLabelValid = 'error' !== result.severity;\n                this.showValidationResult(result);\n                return result;\n            } catch (reason) {\n                this.logger.error(this, 'Error validating edited label', reason);\n            }\n        }\n        this.isCurrentLabelValid = true;\n        return { severity: <Severity>'ok', message: undefined };\n    }\n\n    protected showValidationResult(result: EditLabelValidationResult) {\n        this.clearValidationResult();\n        if (this.validationDecorator) {\n            this.validationDecorator.decorate(this.editControl, result);\n        }\n    }\n\n    protected clearValidationResult() {\n        if (this.validationDecorator) {\n            this.validationDecorator.dispose(this.editControl);\n        }\n    }\n\n    override show(root: Readonly<SModelRootImpl>, ...contextElementIds: string[]) {\n        if (!hasEditableLabel(contextElementIds, root) || this.isActive) {\n            return;\n        }\n        super.show(root, ...contextElementIds);\n        this.isActive = true;\n    }\n\n    override hide(): void {\n        this.editControl.style.visibility = 'hidden';\n        super.hide();\n        this.clearValidationResult();\n        this.isActive = false;\n        this.isCurrentLabelValid = true;\n        this.previousLabelContent = undefined;\n        if (this.labelElement) {\n            this.labelElement.style.visibility = 'visible';\n        }\n    }\n\n    protected override onBeforeShow(containerElement: HTMLElement, root: Readonly<SModelRootImpl>, ...contextElementIds: string[]) {\n        this.label = getEditableLabels(contextElementIds, root)[0];\n        this.previousLabelContent = this.label.text;\n        this.setPosition(containerElement);\n        this.applyTextContents();\n        this.applyFontStyling();\n        this.editControl.style.visibility = 'visible';\n        this.editControl.focus();\n    }\n\n    protected setPosition(containerElement: HTMLElement) {\n        let x = 0;\n        let y = 0;\n        let width = 100;\n        let height = 20;\n\n        if (this.label) {\n            const zoom = getZoom(this.label);\n            const bounds = getAbsoluteClientBounds(this.label, this.domHelper, this.viewerOptions);\n            x = bounds.x + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.x : 0) * zoom;\n            y = bounds.y + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.y : 0) * zoom;\n            height = (this.label.editControlDimension ? this.label.editControlDimension.height : height) * zoom;\n            width = (this.label.editControlDimension ? this.label.editControlDimension.width : width) * zoom;\n        }\n\n        containerElement.style.left = `${x}px`;\n        containerElement.style.top = `${y}px`;\n        containerElement.style.width = `${width}px`;\n        this.editControl.style.width = `${width}px`;\n        containerElement.style.height = `${height}px`;\n        this.editControl.style.height = `${height}px`;\n    }\n\n    protected applyTextContents() {\n        if (this.label) {\n            this.editControl.value = this.label.text;\n            if (this.editControl instanceof HTMLTextAreaElement) {\n                this.editControl.selectionStart = 0;\n                this.editControl.selectionEnd = 0;\n                this.editControl.scrollTop = 0;\n                this.editControl.scrollLeft = 0;\n            } else {\n                this.editControl.setSelectionRange(0, this.editControl.value.length);\n            }\n        }\n    }\n\n    protected applyFontStyling() {\n        if (this.label) {\n            this.labelElement = document.getElementById(this.domHelper.createUniqueDOMElementId(this.label));\n            if (this.labelElement) {\n                this.labelElement.style.visibility = 'hidden';\n                const style = window.getComputedStyle(this.labelElement);\n                this.editControl.style.font = style.font;\n                this.editControl.style.fontStyle = style.fontStyle;\n                this.editControl.style.fontFamily = style.fontFamily;\n                this.editControl.style.fontSize = scaledFont(style.fontSize, getZoom(this.label));\n                this.editControl.style.fontWeight = style.fontWeight;\n                this.editControl.style.lineHeight = style.lineHeight;\n            }\n        }\n    }\n}\n\nfunction hasEditableLabel(contextElementIds: string[], root: Readonly<SModelRootImpl>) {\n    return getEditableLabels(contextElementIds, root).length === 1;\n}\n\nfunction getEditableLabels(contextElementIds: string[], root: Readonly<SModelRootImpl>) {\n    return contextElementIds.map(id => root.index.getById(id)).filter(isEditableLabel);\n}\n\nfunction scaledFont(font: string, zoom: number): string {\n    return font.replace(/\\d+(\\.\\d+)?/, (match) => {\n        return String(Number.parseInt(match, 10) * zoom);\n    });\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from 'inversify';\nimport { Action, isAction, ApplyLabelEditAction as ProtocolApplyLabelEditAction } from 'sprotty-protocol/lib/actions';\nimport { CommandExecutionContext, CommandReturn, Command } from '../../base/commands/command';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { TYPES } from '../../base/types';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { KeyListener } from '../../base/views/key-tool';\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { isSelectable } from '../select/model';\nimport { toArray } from '../../utils/iterable';\nimport { EditableLabel, isEditableLabel, isWithEditableLabel } from './model';\n\nexport interface EditLabelAction extends Action {\n    kind: typeof EditLabelAction.KIND\n    labelId: string\n}\nexport namespace EditLabelAction {\n    export const KIND = 'EditLabel';\n\n    export function create(labelId: string): EditLabelAction {\n        return {\n            kind: KIND,\n            labelId\n        };\n    }\n}\n\nexport function isEditLabelAction(element?: any): element is EditLabelAction {\n    return isAction(element) && element.kind === EditLabelAction.KIND && 'labelId' in element;\n}\n\nexport function isApplyLabelEditAction(element?: any): element is ProtocolApplyLabelEditAction {\n    return isAction(element) && element.kind === ProtocolApplyLabelEditAction.KIND && 'labelId' in element && 'text' in element;\n}\n\nexport class ResolvedLabelEdit {\n    label: EditableLabel;\n    oldLabel: string;\n    newLabel: string;\n}\n\nexport class ApplyLabelEditCommand extends Command {\n    static readonly KIND = ProtocolApplyLabelEditAction.KIND;\n\n    protected resolvedLabelEdit: ResolvedLabelEdit;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolApplyLabelEditAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        const label = index.getById(this.action.labelId);\n        if (label && isEditableLabel(label)) {\n            this.resolvedLabelEdit = { label, oldLabel: label.text, newLabel: this.action.text };\n            label.text = this.action.text;\n        }\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.oldLabel;\n        }\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.newLabel;\n        }\n        return context.root;\n    }\n\n}\n\nexport interface IEditLabelValidator {\n    validate(value: string, label: EditableLabel & SModelElementImpl): Promise<EditLabelValidationResult>;\n}\n\nexport interface EditLabelValidationResult {\n    readonly severity: Severity;\n    readonly message?: string;\n}\n\nexport type Severity = 'ok' | 'warning' | 'error';\n\nexport class EditLabelMouseListener extends MouseListener {\n    override doubleClick(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const editableLabel = getEditableLabel(target);\n        if (editableLabel) {\n            return [EditLabelAction.create(editableLabel.id)];\n        }\n        return [];\n    }\n}\n\nexport class EditLabelKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'F2')) {\n            const editableLabels = toArray(element.index.all()\n                .filter(e => isSelectable(e) && e.selected)).map(getEditableLabel)\n                .filter((e): e is EditableLabel & SModelElementImpl => e !== undefined);\n            if (editableLabels.length === 1) {\n                return [EditLabelAction.create(editableLabels[0].id)];\n            }\n        }\n        return [];\n    }\n}\n\nexport function getEditableLabel(element: SModelElementImpl): EditableLabel & SModelElementImpl | undefined {\n    if (isEditableLabel(element)) {\n        return element;\n    } else if (isWithEditableLabel(element) && element.editableLabel) {\n        return element.editableLabel;\n    }\n    return undefined;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ApplyLabelEditAction extends Action {\n    kind: typeof ApplyLabelEditAction.KIND;\n    labelId: string,\n    text: string\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport namespace ApplyLabelEditAction {\n    export const KIND = 'applyLabelEdit';\n\n    export function create(labelId: string, text: string): ApplyLabelEditAction {\n        return {\n            kind: KIND,\n            labelId,\n            text\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { Command, CommandExecutionContext, CommandReturn } from \"../../base/commands/command\";\nimport { SModelElementImpl, SModelRootImpl, SParentElementImpl } from '../../base/model/smodel';\nimport { TYPES } from \"../../base/types\";\nimport { SRoutableElementImpl, SRoutingHandleImpl } from \"../routing/model\";\nimport { EdgeRouterRegistry } from \"../routing/routing\";\nimport { canEditRouting } from './model';\n\nexport interface SwitchEditModeAction extends Action {\n    kind: typeof SwitchEditModeAction.KIND;\n    elementsToActivate: string[]\n    elementsToDeactivate: string[]\n}\nexport namespace SwitchEditModeAction {\n    export const KIND = \"switchEditMode\";\n\n    export function create(options: { elementsToActivate?: string[], elementsToDeactivate?: string[] }): SwitchEditModeAction {\n        return {\n            kind: KIND,\n            elementsToActivate: options.elementsToActivate ?? [],\n            elementsToDeactivate: options.elementsToDeactivate ?? []\n        };\n    }\n}\n\n@injectable()\nexport class SwitchEditModeCommand extends Command {\n    static readonly KIND: string = SwitchEditModeAction.KIND;\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    protected elementsToActivate: SModelElementImpl[] = [];\n    protected elementsToDeactivate: SModelElementImpl[] = [];\n    protected handlesToRemove: { handle: SRoutingHandleImpl, parent: SRoutableElementImpl, point?: Point }[] = [];\n\n    constructor(@inject(TYPES.Action) protected readonly action: SwitchEditModeAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        this.action.elementsToActivate.forEach(id => {\n            const element = index.getById(id);\n            if (element !== undefined )\n                this.elementsToActivate.push(element);\n        });\n        this.action.elementsToDeactivate.forEach(id => {\n            const element = index.getById(id);\n            if (element !== undefined)\n                this.elementsToDeactivate.push(element);\n            if (element instanceof SRoutingHandleImpl && element.parent instanceof SRoutableElementImpl) {\n                const parent = element.parent;\n                if (this.shouldRemoveHandle(element, parent)) {\n                    this.handlesToRemove.push({ handle: element, parent });\n                    this.elementsToDeactivate.push(parent);\n                    this.elementsToActivate.push(parent);\n                }\n            }\n        });\n        return this.doExecute(context);\n    }\n\n    protected doExecute(context: CommandExecutionContext): SModelRootImpl {\n        this.handlesToRemove.forEach(entry => {\n            entry.point = entry.parent.routingPoints.splice(entry.handle.pointIndex, 1)[0];\n        });\n        this.elementsToDeactivate.forEach(element => {\n            if (element instanceof SRoutableElementImpl)\n                element.removeAll(child => child instanceof SRoutingHandleImpl);\n            else if (element instanceof SRoutingHandleImpl) {\n                element.editMode = false;\n                if (element.danglingAnchor) {\n                    if (element.parent instanceof SRoutableElementImpl && element.danglingAnchor.original)  {\n                        if (element.parent.source === element.danglingAnchor)\n                            element.parent.sourceId = element.danglingAnchor.original.id;\n                        else if (element.parent.target === element.danglingAnchor)\n                            element.parent.targetId = element.danglingAnchor.original.id;\n                        element.danglingAnchor.parent.remove(element.danglingAnchor);\n                        element.danglingAnchor = undefined;\n                    }\n                }\n            }\n        });\n        this.elementsToActivate.forEach(element => {\n            if (canEditRouting(element) && element instanceof SParentElementImpl) {\n                const router = this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            } else if (element instanceof SRoutingHandleImpl)\n                element.editMode = true;\n        });\n        return context.root;\n    }\n\n    protected shouldRemoveHandle(handle: SRoutingHandleImpl, parent: SRoutableElementImpl): boolean {\n        if (handle.kind === 'junction') {\n            const route = this.edgeRouterRegistry.route(parent);\n            return route.find(rp => rp.pointIndex === handle.pointIndex) === undefined;\n        }\n        return false;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        this.handlesToRemove.forEach(entry => {\n            if (entry.point !== undefined)\n                entry.parent.routingPoints.splice(entry.handle.pointIndex, 0, entry.point);\n        });\n        this.elementsToActivate.forEach(element => {\n            if (element instanceof SRoutableElementImpl)\n                element.removeAll(child => child instanceof SRoutingHandleImpl);\n            else if (element instanceof SRoutingHandleImpl)\n                element.editMode = false;\n        });\n        this.elementsToDeactivate.forEach(element => {\n            if (canEditRouting(element)) {\n                const router = this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            } else if (element instanceof SRoutingHandleImpl)\n                element.editMode = true;\n        });\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return this.doExecute(context);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { SRoutableElementImpl } from '../routing/model';\n\nexport const editFeature = Symbol('editFeature');\n\nexport function canEditRouting(element: SModelElementImpl): element is SRoutableElementImpl {\n    return element instanceof SRoutableElementImpl && element.hasFeature(editFeature);\n}\n\nexport const editLabelFeature = Symbol('editLabelFeature');\n\nexport interface EditableLabel extends SModelExtension {\n    text: string;\n    readonly isMultiLine?: boolean;\n    readonly editControlDimension?: Dimension;\n    readonly editControlPositionCorrection?: Point;\n}\n\nexport function isEditableLabel<T extends SModelElementImpl>(element: T): element is T & EditableLabel {\n    return 'text' in element && element.hasFeature(editLabelFeature);\n}\n\nexport const withEditLabelFeature = Symbol('withEditLabelFeature');\n\nexport interface WithEditableLabel extends SModelExtension {\n    readonly editableLabel?: EditableLabel & SModelElementImpl;\n}\n\nexport function isWithEditableLabel<T extends SModelElementImpl>(element: T): element is T & WithEditableLabel {\n    return 'editableLabel' in element && element.hasFeature(withEditLabelFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Action, ReconnectAction as ProtocolReconnectAction} from 'sprotty-protocol/lib/actions';\nimport { Command, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { TYPES } from '../../base/types';\nimport { SRoutableElementImpl } from '../routing/model';\nimport { EdgeMemento, EdgeRouterRegistry } from '../routing/routing';\n\n@injectable()\nexport class ReconnectCommand extends Command {\n    static readonly KIND = ProtocolReconnectAction.KIND;\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    memento: EdgeMemento | undefined;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolReconnectAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.doExecute(context);\n        return context.root;\n    }\n\n    private doExecute(context: CommandExecutionContext) {\n        const index = context.root.index;\n        const edge = index.getById(this.action.routableId);\n        if (edge instanceof SRoutableElementImpl) {\n            const router = this.edgeRouterRegistry.get(edge.routerKind);\n            const before = router.takeSnapshot(edge);\n            router.applyReconnect(edge, this.action.newSourceId, this.action.newTargetId);\n            const after = router.takeSnapshot(edge);\n            this.memento = {\n                edge: edge,\n                before,\n                after\n            };\n        }\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        if (this.memento) {\n            const router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.before);\n        }\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        if (this.memento) {\n            const router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.after);\n        }\n        return context.root;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ReconnectAction extends Action {\n    kind: typeof ReconnectAction.KIND\n    routableId: string\n    newSourceId?: string\n    newTargetId?: string\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport namespace ReconnectAction {\n    export const KIND = 'reconnect';\n\n    export function create(options: { routableId: string, newSourceId?: string, newTargetId?: string }): ReconnectAction {\n        return {\n            kind: KIND,\n            routableId: options.routableId,\n            newSourceId: options.newSourceId,\n            newTargetId: options.newTargetId\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { configureButtonHandler } from \"../button/button-handler\";\nimport { ExpandButtonHandler } from \"./expand\";\n\nconst expandModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureButtonHandler({bind, isBound}, ExpandButtonHandler.TYPE, ExpandButtonHandler);\n});\n\nexport default expandModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Action, CollapseExpandAction as ProtocolCollapseExpandAction, CollapseExpandAllAction as ProtocolCollapseExpandAllAction} from 'sprotty-protocol/lib/actions';\nimport { SButtonImpl } from '../button/model';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { isExpandable } from './model';\nimport { IButtonHandler } from '../button/button-handler';\n\n@injectable()\nexport class ExpandButtonHandler implements IButtonHandler {\n    static TYPE = 'button:expand';\n\n    buttonPressed(button: SButtonImpl): Action[] {\n        const expandable = findParentByFeature(button, isExpandable);\n        if (expandable !== undefined) {\n            return [ ProtocolCollapseExpandAction.create({\n                expandIds:   expandable.expanded ? [] : [ expandable.id ],\n                collapseIds:  expandable.expanded ? [ expandable.id ] : []\n            })];\n        } else {\n            return [];\n        }\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class CollapseExpandAction implements Action,ProtocolCollapseExpandAction {\n    static readonly KIND = 'collapseExpand';\n    readonly kind = CollapseExpandAction.KIND;\n\n    constructor(public readonly expandIds: string[],\n                public readonly collapseIds: string[]) {\n    }\n}\n\n/**\n * Programmatic action for expanding or collapsing all elements.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class CollapseExpandAllAction implements Action,ProtocolCollapseExpandAllAction {\n    static readonly KIND = 'collapseExpandAll';\n    readonly kind = CollapseExpandAllAction.KIND;\n\n    /**\n     * If `expand` is true, all elements are expanded, othewise they are collapsed.\n     */\n    constructor(public readonly expand: boolean = true) {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const expandFeature = Symbol('expandFeature');\n\n/**\n * Model elements that implement this interface can be expanded/collapsed\n */\nexport interface Expandable extends SModelExtension {\n    expanded: boolean\n}\n\nexport function isExpandable(element: SModelElementImpl): element is SModelElementImpl & Expandable {\n    return element.hasFeature(expandFeature) && 'expanded' in element;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n /** @jsx svg */\nimport { svg } from '../../lib/jsx';\n\nimport { VNode } from 'snabbdom';\nimport { IView, RenderingContext } from '../../base/views/view';\nimport { isExpandable } from './model';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { SButtonImpl } from '../button/model';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class ExpandButtonView implements IView {\n    render(button: SButtonImpl, context: RenderingContext): VNode {\n        const expandable = findParentByFeature(button, isExpandable);\n        const path = (expandable !== undefined && expandable.expanded)\n            ? 'M 1,5 L 8,12 L 15,5 Z'\n            : 'M 1,8 L 8,15 L 8,1 Z';\n        return <g class-sprotty-button=\"{true}\" class-enabled=\"{button.enabled}\">\n                <rect x={0} y={0} width={16} height={16} opacity={0}></rect>\n                <path d={path}></path>\n            </g>;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from '../../base/types';\nimport { ExportSvgPostprocessor, ExportSvgKeyListener, ExportSvgCommand } from './export';\nimport { SvgExporter } from './svg-exporter';\nimport { configureCommand } from \"../../base/commands/command-registration\";\n\nconst exportSvgModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(ExportSvgKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(ExportSvgKeyListener);\n    bind(ExportSvgPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.HiddenVNodePostprocessor).toService(ExportSvgPostprocessor);\n    configureCommand({ bind, isBound }, ExportSvgCommand);\n    bind(TYPES.SvgExporter).to(SvgExporter).inSingletonScope();\n});\n\nexport default exportSvgModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { VNode } from 'snabbdom';\nimport { Action, generateRequestId, RequestAction } from \"sprotty-protocol/lib/actions\";\nimport { CommandExecutionContext, HiddenCommand, CommandResult } from '../../base/commands/command';\nimport { IVNodePostprocessor } from '../../base/views/vnode-postprocessor';\nimport { isSelectable } from '../select/model';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { KeyListener } from '../../base/views/key-tool';\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { isExportable } from './model';\nimport { SvgExporter, ExportSvgAction } from './svg-exporter';\nimport { isViewport } from '../viewport/model';\nimport { isHoverable } from '../hover/model';\nimport { TYPES } from '../../base/types';\n\n@injectable()\nexport class ExportSvgKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'KeyE', 'ctrlCmd', 'shift'))\n            return [ RequestExportSvgAction.create() ];\n        else\n            return [];\n    }\n}\n\nexport interface RequestExportSvgAction extends RequestAction<ExportSvgAction> {\n    kind: typeof RequestExportSvgAction.KIND\n}\nexport namespace RequestExportSvgAction {\n    export const KIND = 'requestExportSvg';\n\n    export function create(): RequestExportSvgAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\nexport class ExportSvgCommand extends HiddenCommand {\n    static readonly KIND = RequestExportSvgAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: RequestExportSvgAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandResult {\n        if (isExportable(context.root)) {\n            const root = context.modelFactory.createRoot(context.root);\n            if (isExportable(root)) {\n                if (isViewport(root)) {\n                    root.zoom = 1;\n                    root.scroll = { x: 0, y: 0 };\n                }\n                root.index.all().forEach(element => {\n                    if (isSelectable(element) && element.selected)\n                        element.selected = false;\n                    if (isHoverable(element) && element.hoverFeedback)\n                        element.hoverFeedback = false;\n                });\n                return {\n                    model: root,\n                    modelChanged: true,\n                    cause: this.action\n                };\n            }\n        }\n        return {\n            model: context.root,\n            modelChanged: false\n        };\n    }\n}\n\n@injectable()\nexport class ExportSvgPostprocessor implements IVNodePostprocessor {\n\n    root: SModelRootImpl;\n\n    @inject(TYPES.SvgExporter) protected svgExporter: SvgExporter;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (element instanceof SModelRootImpl)\n            this.root = element;\n        return vnode;\n    }\n\n    postUpdate(cause?: Action): void {\n        if (this.root && cause !== undefined && cause.kind === RequestExportSvgAction.KIND) {\n            this.svgExporter.export(this.root, cause as RequestExportSvgAction);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\n\nexport const exportFeature = Symbol('exportFeature');\n\nexport function isExportable(element: SModelElementImpl): boolean {\n     return element.hasFeature(exportFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from \"inversify\";\nimport { RequestAction, ResponseAction } from 'sprotty-protocol/lib/actions';\nimport { Bounds } from 'sprotty-protocol/lib/utils/geometry';\nimport { ViewerOptions } from '../../base/views/viewer-options';\nimport { isBoundsAware } from '../bounds/model';\nimport { ActionDispatcher } from '../../base/actions/action-dispatcher';\nimport { TYPES } from '../../base/types';\nimport { SModelRootImpl } from '../../base/model/smodel';\nimport { ILogger } from '../../utils/logging';\n\nexport interface ExportSvgAction extends ResponseAction {\n    kind: typeof ExportSvgAction.KIND;\n    svg: string\n    responseId: string\n}\nexport namespace ExportSvgAction {\n    export const KIND = 'exportSvg';\n\n    export function create(svg: string, requestId: string): ExportSvgAction {\n        return {\n            kind: KIND,\n            svg,\n            responseId: requestId\n        };\n    }\n}\n\n@injectable()\nexport class SvgExporter {\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: ActionDispatcher;\n    @inject(TYPES.ILogger) protected log: ILogger;\n\n    export(root: SModelRootImpl, request?: RequestAction<ExportSvgAction>): void {\n        if (typeof document !== 'undefined') {\n            const div = document.getElementById(this.options.hiddenDiv);\n            if (div !== null && div.firstElementChild && div.firstElementChild.tagName === 'svg') {\n                const svgElement = div.firstElementChild as SVGSVGElement;\n                const svg = this.createSvg(svgElement, root);\n                this.actionDispatcher.dispatch(ExportSvgAction.create(svg, request ? request.requestId : ''));\n            }\n        }\n    }\n\n    protected createSvg(svgElementOrig: SVGSVGElement, root: SModelRootImpl): string {\n        const serializer = new XMLSerializer();\n        const svgCopy = serializer.serializeToString(svgElementOrig);\n        const iframe: HTMLIFrameElement = document.createElement('iframe');\n        document.body.appendChild(iframe);\n        if (!iframe.contentWindow)\n            throw new Error('IFrame has no contentWindow');\n        const docCopy = iframe.contentWindow.document;\n        docCopy.open();\n        docCopy.write(svgCopy);\n        docCopy.close();\n        const svgElementNew = docCopy.getElementById(svgElementOrig.id)!;\n        svgElementNew.removeAttribute('opacity');\n        this.copyStyles(svgElementOrig, svgElementNew, ['width', 'height', 'opacity']);\n        svgElementNew.setAttribute('version', '1.1');\n        const bounds = this.getBounds(root);\n        svgElementNew.setAttribute('viewBox', `${bounds.x} ${bounds.y} ${bounds.width} ${bounds.height}`);\n        const svgCode = serializer.serializeToString(svgElementNew);\n        document.body.removeChild(iframe);\n        return svgCode;\n    }\n\n    protected copyStyles(source: Element, target: Element, skipedProperties: string[]) {\n        const sourceStyle = getComputedStyle(source);\n        const targetStyle = getComputedStyle(target);\n        let diffStyle = '';\n        for (let i = 0; i < sourceStyle.length; i++) {\n            const key = sourceStyle[i];\n            if (skipedProperties.indexOf(key) === -1) {\n                const value = sourceStyle.getPropertyValue(key);\n                if (targetStyle.getPropertyValue(key) !== value) {\n                    diffStyle += key + \":\" + value + \";\";\n                }\n            }\n        }\n        if (diffStyle !== '')\n            target.setAttribute('style', diffStyle);\n        // IE doesn't retrun anything on source.children\n        for (let i = 0; i < source.childNodes.length; ++i) {\n            const sourceChild = source.childNodes[i];\n            const targetChild = target.childNodes[i];\n            if (sourceChild instanceof Element)\n                this.copyStyles(sourceChild, targetChild as Element, []);\n        }\n    }\n\n    protected getBounds(root: SModelRootImpl) {\n        const allBounds: Bounds[] = [ Bounds.EMPTY ];\n        root.children.forEach(element => {\n            if (isBoundsAware(element)) {\n                allBounds.push(element.bounds);\n            }\n        });\n        return allBounds.reduce((one, two) => Bounds.combine(one, two));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { ElementFader } from \"./fade\";\n\nconst fadeModule = new ContainerModule(bind => {\n    bind(ElementFader).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(ElementFader);\n});\n\nexport default fadeModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { Animation } from \"../../base/animations/animation\";\nimport { CommandExecutionContext } from \"../../base/commands/command\";\nimport { SModelRootImpl, SModelElementImpl, SChildElementImpl } from \"../../base/model/smodel\";\nimport { IVNodePostprocessor } from \"../../base/views/vnode-postprocessor\";\nimport { setAttr } from \"../../base/views/vnode-utils\";\nimport { Fadeable, isFadeable } from \"./model\";\n\nexport interface ResolvedElementFade {\n    element: SModelElementImpl & Fadeable\n    type: 'in' | 'out'\n}\n\nexport class FadeAnimation extends Animation {\n\n    constructor(protected model: SModelRootImpl,\n                public elementFades: ResolvedElementFade[],\n                context: CommandExecutionContext,\n                protected removeAfterFadeOut: boolean = false) {\n        super(context);\n    }\n\n    tween(t: number, context: CommandExecutionContext): SModelRootImpl {\n        for (const elementFade of this.elementFades) {\n            const element = elementFade.element;\n            if (elementFade.type === 'in') {\n                element.opacity = t;\n            } else if (elementFade.type === 'out') {\n                element.opacity = 1 - t;\n                if (t === 1 && this.removeAfterFadeOut && element instanceof SChildElementImpl) {\n                    element.parent.remove(element);\n                }\n            }\n        }\n        return this.model;\n    }\n\n}\n\n@injectable()\nexport class ElementFader implements IVNodePostprocessor {\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (isFadeable(element) && element.opacity !== 1) {\n            setAttr(vnode, 'opacity', element.opacity);\n        }\n        return vnode;\n    }\n\n    postUpdate(): void {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const fadeFeature = Symbol('fadeFeature');\n\nexport interface Fadeable extends SModelExtension {\n    opacity: number\n}\n\nexport function isFadeable(element: SModelElementImpl): element is SModelElementImpl & Fadeable {\n    return element.hasFeature(fadeFeature) && (element as any)['opacity'] !== undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport {\n    HoverMouseListener, PopupHoverMouseListener, HoverFeedbackCommand, SetPopupModelCommand,\n    HoverKeyListener, HoverState, ClosePopupActionHandler\n} from \"./hover\";\nimport { PopupPositionUpdater } from \"./popup-position-updater\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\nimport { configureActionHandler } from \"../../base/actions/action-handler\";\nimport { FitToScreenCommand, CenterCommand } from \"../viewport/center-fit\";\nimport { SetViewportCommand } from \"../viewport/viewport\";\nimport { MoveCommand } from \"../move/move\";\n\nconst hoverModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(PopupPositionUpdater).toSelf().inSingletonScope();\n    bind(TYPES.PopupVNodePostprocessor).toService(PopupPositionUpdater);\n    bind(HoverMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(HoverMouseListener);\n    bind(PopupHoverMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.PopupMouseListener).toService(PopupHoverMouseListener);\n    bind(HoverKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(HoverKeyListener);\n    bind<HoverState>(TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n    bind(ClosePopupActionHandler).toSelf().inSingletonScope();\n\n    const context = { bind, isBound };\n    configureCommand(context, HoverFeedbackCommand);\n    configureCommand(context, SetPopupModelCommand);\n    configureActionHandler(context, SetPopupModelCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, FitToScreenCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, CenterCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, SetViewportCommand.KIND, ClosePopupActionHandler);\n    configureActionHandler(context, MoveCommand.KIND, ClosePopupActionHandler);\n});\n\nexport default hoverModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport {\n    Action, generateRequestId, RequestAction,\n    ResponseAction, RequestPopupModelAction as ProtocolRequestPopupModelAction,\n    SetPopupModelAction as ProtocolSetPopupModelAction, HoverFeedbackAction as ProtocolHoverFeedbackAction\n} from \"sprotty-protocol/lib/actions\";\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { TYPES } from \"../../base/types\";\nimport { SModelElementImpl, SModelRootImpl } from \"../../base/model/smodel\";\nimport { MouseListener } from \"../../base/views/mouse-tool\";\nimport { CommandExecutionContext, PopupCommand, SystemCommand, CommandReturn, ICommand } from \"../../base/commands/command\";\nimport { IActionHandler } from \"../../base/actions/action-handler\";\nimport { EMPTY_ROOT } from \"../../base/model/smodel-factory\";\nimport { KeyListener } from \"../../base/views/key-tool\";\nimport { findParentByFeature, findParent } from \"../../base/model/smodel-utils\";\nimport { ViewerOptions } from \"../../base/views/viewer-options\";\nimport { getAbsoluteBounds } from '../bounds/model';\nimport { hasPopupFeature, isHoverable } from \"./model\";\n\n\n\n@injectable()\nexport class HoverFeedbackCommand extends SystemCommand {\n    static readonly KIND = ProtocolHoverFeedbackAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolHoverFeedbackAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const model: SModelRootImpl = context.root;\n        const modelElement: SModelElementImpl | undefined = model.index.getById(this.action.mouseoverElement);\n\n        if (modelElement) {\n            if (isHoverable(modelElement)) {\n                modelElement.hoverFeedback = this.action.mouseIsOver;\n            }\n        }\n\n        return this.redo(context);\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return context.root;\n    }\n}\n\n@injectable()\nexport class SetPopupModelCommand extends PopupCommand {\n    static readonly KIND = ProtocolSetPopupModelAction.KIND;\n\n    oldRoot: SModelRootImpl;\n    newRoot: SModelRootImpl;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolSetPopupModelAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.oldRoot = context.root;\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n\n        return this.newRoot;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return this.oldRoot;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return this.newRoot;\n    }\n}\n\nexport interface HoverState {\n    mouseOverTimer: number | undefined\n    mouseOutTimer: number | undefined\n    popupOpen: boolean\n    previousPopupElement: SModelElementImpl | undefined\n}\n\nexport abstract class AbstractHoverMouseListener extends MouseListener {\n\n    protected mouseIsDown: boolean;\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n    @inject(TYPES.HoverState) protected state: HoverState;\n\n    override mouseDown(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        this.mouseIsDown = true;\n        return [];\n    }\n\n    override mouseUp(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        this.mouseIsDown = false;\n        return [];\n    }\n\n    protected stopMouseOutTimer(): void {\n        if (this.state.mouseOutTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOutTimer);\n            this.state.mouseOutTimer = undefined;\n        }\n    }\n\n    protected startMouseOutTimer(): Promise<Action> {\n        this.stopMouseOutTimer();\n        return new Promise((resolve) => {\n            this.state.mouseOutTimer = window.setTimeout(() => {\n                this.state.popupOpen = false;\n                this.state.previousPopupElement = undefined;\n                resolve(ProtocolSetPopupModelAction.create({ type: EMPTY_ROOT.type, id: EMPTY_ROOT.id }));\n            }, this.options.popupCloseDelay);\n        });\n    }\n\n    protected stopMouseOverTimer(): void {\n        if (this.state.mouseOverTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOverTimer);\n            this.state.mouseOverTimer = undefined;\n        }\n    }\n}\n\n@injectable()\nexport class HoverMouseListener extends AbstractHoverMouseListener {\n\n    protected lastHoverFeedbackElementId?: string;\n\n    @inject(TYPES.ViewerOptions) protected override options: ViewerOptions;\n\n    protected computePopupBounds(target: SModelElementImpl, mousePosition: Point): Bounds {\n        // Default position: below the mouse cursor\n        let offset: Point = { x: -5, y: 20 };\n\n        const targetBounds = getAbsoluteBounds(target);\n        const canvasBounds = target.root.canvasBounds;\n        const boundsInWindow = Bounds.translate(targetBounds, canvasBounds);\n        const distRight = boundsInWindow.x + boundsInWindow.width - mousePosition.x;\n        const distBottom = boundsInWindow.y + boundsInWindow.height - mousePosition.y;\n        if (distBottom <= distRight && this.allowSidePosition(target, 'below', distBottom)) {\n            // Put the popup below the target element\n            offset = { x: -5, y: Math.round(distBottom + 5) };\n        } else if (distRight <= distBottom && this.allowSidePosition(target, 'right', distRight)) {\n            // Put the popup right of the target element\n            offset = { x: Math.round(distRight + 5), y: -5 };\n        }\n        let leftPopupPosition = mousePosition.x + offset.x;\n        const canvasRightBorderPosition = canvasBounds.x + canvasBounds.width;\n        if (leftPopupPosition > canvasRightBorderPosition) {\n            leftPopupPosition = canvasRightBorderPosition;\n        }\n        let topPopupPosition = mousePosition.y + offset.y;\n        const canvasBottomBorderPosition = canvasBounds.y + canvasBounds.height;\n        if (topPopupPosition > canvasBottomBorderPosition) {\n            topPopupPosition = canvasBottomBorderPosition;\n        }\n        return { x: leftPopupPosition, y: topPopupPosition, width: -1, height: -1 };\n    }\n\n    protected allowSidePosition(target: SModelElementImpl, side: 'above' | 'below' | 'left' | 'right', distance: number): boolean {\n        return !(target instanceof SModelRootImpl) && distance <= 150;\n    }\n\n    protected startMouseOverTimer(target: SModelElementImpl, event: MouseEvent): Promise<Action> {\n        this.stopMouseOverTimer();\n        return new Promise((resolve) => {\n            this.state.mouseOverTimer = window.setTimeout(() => {\n                const popupBounds = this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                resolve(ProtocolRequestPopupModelAction.create({ elementId: target.id, bounds: popupBounds }));\n\n                this.state.popupOpen = true;\n                this.state.previousPopupElement = target;\n            }, this.options.popupOpenDelay);\n        });\n    }\n\n    override mouseOver(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: (Action | Promise<Action>)[] = [];\n        if (!this.mouseIsDown) {\n            const popupTarget = findParent(target, hasPopupFeature);\n            if (this.state.popupOpen && (popupTarget === undefined ||\n                this.state.previousPopupElement !== undefined && this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOutTimer());\n            } else {\n                this.stopMouseOverTimer();\n                this.stopMouseOutTimer();\n            }\n            if (popupTarget !== undefined &&\n                (this.state.previousPopupElement === undefined || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n            if (this.lastHoverFeedbackElementId) {\n                result.push(ProtocolHoverFeedbackAction.create({ mouseoverElement: this.lastHoverFeedbackElementId, mouseIsOver: false }));\n                this.lastHoverFeedbackElementId = undefined;\n            }\n            const hoverTarget = findParentByFeature(target, isHoverable);\n            if (hoverTarget !== undefined) {\n                result.push(ProtocolHoverFeedbackAction.create({ mouseoverElement: hoverTarget.id, mouseIsOver: true }));\n                this.lastHoverFeedbackElementId = hoverTarget.id;\n            }\n        }\n        return result;\n    }\n\n    override mouseOut(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: (Action | Promise<Action>)[] = [];\n        if (!this.mouseIsDown) {\n            const elementUnderMouse = this.getElementFromEventPosition(event);\n            if (!this.isSprottyPopup(elementUnderMouse)) {\n                if (this.state.popupOpen) {\n                    const popupTarget = findParent(target, hasPopupFeature);\n                    if (this.state.previousPopupElement !== undefined && popupTarget !== undefined\n                        && this.state.previousPopupElement.id === popupTarget.id)\n                        result.push(this.startMouseOutTimer());\n                }\n                this.stopMouseOverTimer();\n                const hoverTarget = findParentByFeature(target, isHoverable);\n                if (hoverTarget !== undefined) {\n                    result.push(ProtocolHoverFeedbackAction.create({ mouseoverElement: hoverTarget.id, mouseIsOver: false }));\n                    if (this.lastHoverFeedbackElementId && this.lastHoverFeedbackElementId !== hoverTarget.id) {\n                        result.push(ProtocolHoverFeedbackAction.create({ mouseoverElement: this.lastHoverFeedbackElementId, mouseIsOver: false }));\n                    }\n                    this.lastHoverFeedbackElementId = undefined;\n                }\n            }\n        }\n        return result;\n    }\n\n    protected getElementFromEventPosition(event: MouseEvent) {\n        return document.elementFromPoint(event.x, event.y);\n    }\n\n    protected isSprottyPopup(element: Element | null): boolean {\n        return element\n            ? (element.id === this.options.popupDiv\n                || (!!element.parentElement && this.isSprottyPopup(element.parentElement)))\n            : false;\n    }\n\n    override mouseMove(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: (Action | Promise<Action>)[] = [];\n\n        if (!this.mouseIsDown) {\n            if (this.state.previousPopupElement !== undefined && this.closeOnMouseMove(this.state.previousPopupElement, event)) {\n                result.push(this.startMouseOutTimer());\n            }\n\n            const popupTarget = findParent(target, hasPopupFeature);\n            if (popupTarget !== undefined && (this.state.previousPopupElement === undefined\n                || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n        }\n\n        return result;\n    }\n\n    protected closeOnMouseMove(target: SModelElementImpl, event: MouseEvent): boolean {\n        return target instanceof SModelRootImpl;\n    }\n\n}\n\n@injectable()\nexport class PopupHoverMouseListener extends AbstractHoverMouseListener {\n\n    override mouseOut(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [this.startMouseOutTimer()];\n    }\n\n    override mouseOver(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        this.stopMouseOutTimer();\n        this.stopMouseOverTimer();\n        return [];\n    }\n}\n\nexport class HoverKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'Escape')) {\n            return [ProtocolSetPopupModelAction.create({ type: EMPTY_ROOT.type, id: EMPTY_ROOT.id })];\n        }\n        return [];\n    }\n}\n\n@injectable()\nexport class ClosePopupActionHandler implements IActionHandler {\n    protected popupOpen: boolean = false;\n\n    handle(action: Action): void | ICommand | Action {\n        if (action.kind === SetPopupModelCommand.KIND) {\n            this.popupOpen = (action as ProtocolSetPopupModelAction).newRoot.type !== EMPTY_ROOT.type;\n        } else if (this.popupOpen) {\n            return  ProtocolSetPopupModelAction.create({ id: EMPTY_ROOT.id, type: EMPTY_ROOT.type });\n        }\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Triggered when the user puts the mouse pointer over an element.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface HoverFeedbackAction extends Action {\n    kind: typeof HoverFeedbackAction.KIND\n    mouseoverElement: string\n    mouseIsOver: boolean\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport namespace HoverFeedbackAction {\n    export const KIND = 'hoverFeedback';\n\n    export function create(options: { mouseoverElement: string, mouseIsOver: boolean }): HoverFeedbackAction {\n        return {\n            kind: KIND,\n            mouseoverElement: options.mouseoverElement,\n            mouseIsOver: options.mouseIsOver\n        };\n    }\n}\n\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class RequestPopupModelAction implements RequestAction<SetPopupModelAction>, ProtocolRequestPopupModelAction {\n    static readonly KIND = 'requestPopupModel';\n    readonly kind = RequestPopupModelAction.KIND;\n\n    constructor(public readonly elementId: string,\n        public readonly bounds: Bounds,\n        public readonly requestId = '') { }\n\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    static create(elementId: string, bounds: Bounds): RequestAction<SetPopupModelAction> {\n        return new RequestPopupModelAction(elementId, bounds, generateRequestId());\n    }\n}\n\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SetPopupModelAction implements ResponseAction, ProtocolSetPopupModelAction {\n    static readonly KIND = 'setPopupModel';\n    readonly kind = SetPopupModelAction.KIND;\n\n    constructor(public readonly newRoot: SModelRootSchema,\n        public readonly responseId = '') { }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const hoverFeedbackFeature = Symbol('hoverFeedbackFeature');\n\nexport interface Hoverable extends SModelExtension {\n    hoverFeedback: boolean\n}\n\nexport function isHoverable(element: SModelElementImpl): element is SModelElementImpl & Hoverable {\n    return element.hasFeature(hoverFeedbackFeature);\n}\n\nexport const popupFeature = Symbol('popupFeature');\n\nexport function hasPopupFeature(element: SModelElementImpl): boolean {\n    return element.hasFeature(popupFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { VNode } from \"snabbdom\";\nimport { TYPES } from \"../../base/types\";\nimport { IVNodePostprocessor } from \"../../base/views/vnode-postprocessor\";\nimport { ViewerOptions } from \"../../base/views/viewer-options\";\nimport { SModelElementImpl } from \"../../base/model/smodel\";\n\n@injectable()\nexport class PopupPositionUpdater implements IVNodePostprocessor {\n\n    @inject(TYPES.ViewerOptions) protected options: ViewerOptions;\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        return vnode;\n    }\n\n    postUpdate(): void {\n        const popupDiv = document.getElementById(this.options.popupDiv);\n        if (popupDiv !== null && typeof window !== 'undefined') {\n            const boundingClientRect = popupDiv.getBoundingClientRect();\n            if (window.innerHeight < boundingClientRect.height + boundingClientRect.top) {\n                popupDiv.style.top = (window.pageYOffset + window.innerHeight - boundingClientRect.height - 5) + 'px';\n            }\n\n            if (window.innerWidth < boundingClientRect.left + boundingClientRect.width) {\n                popupDiv.style.left = (window.pageXOffset + window.innerWidth - boundingClientRect.width - 5) + 'px';\n            }\n\n            if (boundingClientRect.left < 0) {\n                popupDiv.style.left = '0px';\n            }\n\n            if (boundingClientRect.top < 0) {\n                popupDiv.style.top = '0px';\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from '../../base/types';\nimport { MoveCommand, MoveMouseListener, LocationPostprocessor } from './move';\nimport { configureCommand } from \"../../base/commands/command-registration\";\n\nconst moveModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(MoveMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(MoveMouseListener);\n    configureCommand({ bind, isBound }, MoveCommand);\n    bind(LocationPostprocessor).toSelf().inSingletonScope();\n    bind(TYPES.IVNodePostprocessor).toService(LocationPostprocessor);\n    bind(TYPES.HiddenVNodePostprocessor).toService(LocationPostprocessor);\n});\n\nexport default moveModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const moveFeature = Symbol('moveFeature');\n\n/**\n * An element that can be placed at a specific location using its position\n * property.\n */\nexport interface Locateable extends SModelExtension {\n    position: Point\n}\n\nexport function isLocateable(element: SModelElementImpl): element is SModelElementImpl & Locateable {\n    return (element as any)['position'] !== undefined;\n}\n\nexport function isMoveable(element: SModelElementImpl): element is SModelElementImpl & Locateable {\n    return element.hasFeature(moveFeature) && isLocateable(element);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { Bounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { Action, DeleteElementAction, ReconnectAction, SelectAction, SelectAllAction, MoveAction as ProtocolMoveAction } from 'sprotty-protocol/lib/actions';\nimport { Animation, CompoundAnimation } from '../../base/animations/animation';\nimport { CommandExecutionContext, ICommand, MergeableCommand, CommandReturn } from '../../base/commands/command';\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { findParentByFeature, translatePoint } from '../../base/model/smodel-utils';\nimport { TYPES } from '../../base/types';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { IVNodePostprocessor } from '../../base/views/vnode-postprocessor';\nimport { setAttr } from '../../base/views/vnode-utils';\nimport { SEdgeImpl } from '../../graph/sgraph';\nimport { CommitModelAction } from '../../model-source/commit-model';\nimport { findChildrenAtPosition, isAlignable } from '../bounds/model';\nimport { CreatingOnDrag, isCreatingOnDrag } from '../edit/create-on-drag';\nimport { SwitchEditModeAction } from '../edit/edit-routing';\nimport { ReconnectCommand } from '../edit/reconnect';\nimport { edgeInProgressID, edgeInProgressTargetHandleID, isConnectable, SRoutableElementImpl, SRoutingHandleImpl } from '../routing/model';\nimport { EdgeMemento, EdgeRouterRegistry, EdgeSnapshot, RoutedPoint } from '../routing/routing';\nimport { isEdgeLayoutable } from '../edge-layout/model';\nimport { isSelectable } from '../select/model';\nimport { isViewport } from '../viewport/model';\nimport { isLocateable, isMoveable, Locateable } from './model';\nimport { ISnapper } from './snap';\n\nexport interface ElementMove {\n    elementId: string\n    elementType?: string\n    fromPosition?: Point\n    toPosition: Point\n}\n\nexport interface ResolvedElementMove {\n    element: SModelElementImpl & Locateable\n    fromPosition: Point\n    toPosition: Point\n}\n\nexport interface ResolvedHandleMove {\n    handle: SRoutingHandleImpl\n    fromPosition: Point\n    toPosition: Point\n}\n\n@injectable()\nexport class MoveCommand extends MergeableCommand {\n    static readonly KIND = ProtocolMoveAction.KIND;\n\n    @inject(EdgeRouterRegistry) @optional() edgeRouterRegistry?: EdgeRouterRegistry;\n\n    protected resolvedMoves: Map<string, ResolvedElementMove> = new Map;\n    protected edgeMementi: EdgeMemento[] = [];\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolMoveAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        const edge2handleMoves = new Map<SRoutableElementImpl, ResolvedHandleMove[]>();\n        const attachedEdgeShifts = new Map<SRoutableElementImpl, Point>();\n        this.action.moves.forEach(move => {\n            const element = index.getById(move.elementId);\n            if (element instanceof SRoutingHandleImpl && this.edgeRouterRegistry) {\n                const edge = element.parent;\n                if (edge instanceof SRoutableElementImpl) {\n                    const resolvedMove = this.resolveHandleMove(element, edge, move);\n                    if (resolvedMove) {\n                        let movesByEdge = edge2handleMoves.get(edge);\n                        if (!movesByEdge) {\n                            movesByEdge = [];\n                            edge2handleMoves.set(edge, movesByEdge);\n                        }\n                        movesByEdge.push(resolvedMove);\n                    }\n                }\n            } else if (element && isLocateable(element)) {\n                const resolvedMove = this.resolveElementMove(element, move);\n                if (resolvedMove) {\n                    this.resolvedMoves.set(resolvedMove.element.id, resolvedMove);\n                    if (this.edgeRouterRegistry) {\n                        index.getAttachedElements(element).forEach(edge => {\n                            if (edge instanceof SRoutableElementImpl) {\n                                const existingDelta = attachedEdgeShifts.get(edge);\n                                const newDelta = Point.subtract(resolvedMove.toPosition, resolvedMove.fromPosition);\n                                const delta = (existingDelta)\n                                    ? Point.linear(existingDelta, newDelta, 0.5)\n                                    : newDelta;\n                                attachedEdgeShifts.set(edge, delta);\n                            }\n                        });\n                    }\n                }\n            }\n        });\n        this.doMove(edge2handleMoves, attachedEdgeShifts);\n        if (this.action.animate) {\n            this.undoMove();\n            return new CompoundAnimation(context.root, context, [\n                new MoveAnimation(context.root, this.resolvedMoves, context, false),\n                new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n            ]).start();\n        }\n        return context.root;\n    }\n\n    protected resolveHandleMove(handle: SRoutingHandleImpl, edge: SRoutableElementImpl, move: ElementMove): ResolvedHandleMove | undefined {\n        let fromPosition = move.fromPosition;\n        if (!fromPosition) {\n            const router = this.edgeRouterRegistry!.get(edge.routerKind);\n            fromPosition = router.getHandlePosition(edge, router.route(edge), handle);\n        }\n        if (fromPosition)\n            return {\n                handle,\n                fromPosition,\n                toPosition: move.toPosition\n            };\n        return undefined;\n    }\n\n    protected resolveElementMove(element: SModelElementImpl & Locateable, move: ElementMove): ResolvedElementMove | undefined {\n        const fromPosition = move.fromPosition\n            || { x: element.position.x, y: element.position.y };\n        return {\n            element,\n            fromPosition,\n            toPosition: move.toPosition\n        };\n    }\n\n    protected doMove(edge2move: Map<SRoutableElementImpl, ResolvedHandleMove[]>, attachedEdgeShifts: Map<SRoutableElementImpl, Point>) {\n        this.resolvedMoves.forEach(res => {\n            res.element.position = res.toPosition;\n        });\n        // reset edges to state before\n        edge2move.forEach((moves, edge) => {\n            const router = this.edgeRouterRegistry!.get(edge.routerKind);\n            const before = router.takeSnapshot(edge);\n            router.applyHandleMoves(edge, moves);\n            const after = router.takeSnapshot(edge);\n            this.edgeMementi.push({ edge, before, after });\n        });\n        attachedEdgeShifts.forEach((delta, edge) => {\n            if (!edge2move.get(edge)) {\n                const router = this.edgeRouterRegistry!.get(edge.routerKind);\n                const before = router.takeSnapshot(edge);\n                if (edge.source\n                    && edge.target\n                    && this.resolvedMoves.get(edge.source.id)\n                    && this.resolvedMoves.get(edge.target.id)) {\n                    // move the entire edge when both source and target are moved\n                    edge.routingPoints = edge.routingPoints.map(rp => Point.add(rp, delta));\n                } else {\n                    // add/remove RPs according to the new source/target positions\n                    const updateHandles = isSelectable(edge) && edge.selected;\n                    router.cleanupRoutingPoints(edge, edge.routingPoints, updateHandles, this.action.finished);\n                }\n                const after = router.takeSnapshot(edge);\n                this.edgeMementi.push({ edge, before, after });\n            }\n        });\n    }\n\n    protected undoMove() {\n        this.resolvedMoves.forEach(res => {\n            (res.element as any).position = res.fromPosition;\n        });\n        this.edgeMementi.forEach(memento => {\n            const router = this.edgeRouterRegistry!.get(memento.edge.routerKind);\n            router.applySnapshot(memento.edge, memento.before);\n        });\n    }\n\n    undo(context: CommandExecutionContext): Promise<SModelRootImpl> {\n        return new CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, true),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, true)\n        ]).start();\n    }\n\n    redo(context: CommandExecutionContext): Promise<SModelRootImpl> {\n        return new CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, false),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n        ]).start();\n    }\n\n    override merge(other: ICommand, context: CommandExecutionContext) {\n        if (!this.action.animate && other instanceof MoveCommand) {\n            other.resolvedMoves.forEach(\n                (otherMove, otherElementId) => {\n                    const existingMove = this.resolvedMoves.get(otherElementId);\n                    if (existingMove) {\n                        existingMove.toPosition = otherMove.toPosition;\n                    } else {\n                        this.resolvedMoves.set(otherElementId, otherMove);\n                    }\n                }\n            );\n            other.edgeMementi.forEach(otherMemento => {\n                const existingMemento = this.edgeMementi.find(edgeMemento => edgeMemento.edge.id === otherMemento.edge.id);\n                if (existingMemento) {\n                    existingMemento.after = otherMemento.after;\n                } else {\n                    this.edgeMementi.push(otherMemento);\n                }\n            });\n            return true;\n        } else if (other instanceof ReconnectCommand) {\n            const otherMemento = other.memento;\n            if (otherMemento) {\n                const existingMemento = this.edgeMementi.find(edgeMemento => edgeMemento.edge.id === otherMemento.edge.id);\n                if (existingMemento) {\n                    existingMemento.after = otherMemento.after;\n                } else {\n                    this.edgeMementi.push(otherMemento);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n}\n\nexport class MoveAnimation extends Animation {\n\n    constructor(protected model: SModelRootImpl,\n                public elementMoves: Map<string, ResolvedElementMove>,\n                context: CommandExecutionContext,\n                protected reverse: boolean = false) {\n        super(context);\n    }\n\n    tween(t: number) {\n        this.elementMoves.forEach((elementMove) => {\n            if (this.reverse) {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.toPosition.x + t * elementMove.fromPosition.x,\n                    y: (1 - t) * elementMove.toPosition.y + t * elementMove.fromPosition.y\n                };\n            } else {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.fromPosition.x + t * elementMove.toPosition.x,\n                    y: (1 - t) * elementMove.fromPosition.y + t * elementMove.toPosition.y\n                };\n            }\n        });\n        return this.model;\n    }\n}\n\ninterface ExpandedEdgeMorph {\n    startExpandedRoute: Point[],\n    endExpandedRoute: Point[],\n    memento: EdgeMemento\n}\n\nexport class MorphEdgesAnimation extends Animation {\n\n    protected expanded: ExpandedEdgeMorph[] = [];\n\n    constructor(protected model: SModelRootImpl,\n                originalMementi: EdgeMemento[],\n                context: CommandExecutionContext,\n                protected reverse: boolean = false) {\n        super(context);\n        originalMementi.forEach(edgeMemento => {\n            const start = this.reverse ? edgeMemento.after : edgeMemento.before;\n            const end = this.reverse ? edgeMemento.before : edgeMemento.after;\n            const startRoute = start.routedPoints;\n            const endRoute = end.routedPoints;\n            const maxRoutingPoints = Math.max(startRoute.length, endRoute.length);\n            this.expanded.push({\n                startExpandedRoute: this.growToSize(startRoute, maxRoutingPoints),\n                endExpandedRoute: this.growToSize(endRoute, maxRoutingPoints),\n                memento: edgeMemento\n            });\n        });\n    }\n\n    protected midPoint(edgeMemento: EdgeMemento): Point {\n        const edge = edgeMemento.edge;\n        const source = edgeMemento.edge.source!;\n        const target = edgeMemento.edge.target!;\n        return Point.linear(\n            translatePoint(Bounds.center(source.bounds), source.parent, edge.parent),\n            translatePoint(Bounds.center(target.bounds), target.parent, edge.parent),\n            0.5);\n    }\n\n    override start() {\n        this.expanded.forEach(morph => {\n            morph.memento.edge.removeAll(e => e instanceof SRoutingHandleImpl);\n        });\n        return super.start();\n    }\n\n    tween(t: number) {\n        if (t === 1) {\n            this.expanded.forEach(morph => {\n                const memento = morph.memento;\n                if (this.reverse)\n                    memento.before.router.applySnapshot(memento.edge, memento.before);\n                else\n                    memento.after.router.applySnapshot(memento.edge, memento.after);\n            });\n        } else {\n            this.expanded.forEach(morph => {\n                const newRoutingPoints: Point[] = [];\n                // ignore source and target anchor\n                for (let i = 1; i < morph.startExpandedRoute.length - 1; ++i)\n                    newRoutingPoints.push(Point.linear(morph.startExpandedRoute[i], morph.endExpandedRoute[i], t));\n\n                const closestSnapshot = t < 0.5 ? morph.memento.before : morph.memento.after;\n                const newSnapshot: EdgeSnapshot = {\n                    ...closestSnapshot,\n                    routingPoints: newRoutingPoints,\n                    routingHandles: []\n                };\n                closestSnapshot.router.applySnapshot(morph.memento.edge, newSnapshot);\n            });\n        }\n        return this.model;\n    }\n\n    protected growToSize(route: RoutedPoint[], targetSize: number): Point[] {\n        const diff = targetSize - route.length;\n        if (diff <= 0)\n            return route;\n        const result: Point[] = [];\n        result.push(route[0]);\n        const deltaDiff = 1 / (diff + 1);\n        const deltaSmaller = 1 / (route.length - 1);\n        let nextInsertion = 1;\n        for (let i = 1; i < route.length; ++i) {\n            const pos = deltaSmaller * i;\n            let insertions = 0;\n            while (pos > (nextInsertion + insertions) * deltaDiff)\n                ++insertions;\n            nextInsertion += insertions;\n            for (let j = 0; j < insertions; ++j) {\n                const p = Point.linear(route[i - 1], route[i], (j + 1) / (insertions + 1));\n                result.push(p);\n            }\n            result.push(route[i]);\n        }\n        return result;\n    }\n\n}\n\nexport class MoveMouseListener extends MouseListener {\n\n    @inject(EdgeRouterRegistry) @optional() edgeRouterRegistry?: EdgeRouterRegistry;\n    @inject(TYPES.ISnapper) @optional() snapper?: ISnapper;\n\n    hasDragged = false;\n    startDragPosition: Point | undefined;\n    elementId2startPos = new Map<string, Point>();\n\n    override mouseDown(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        if (event.button === 0) {\n            const moveable = findParentByFeature(target, isMoveable);\n            const isRoutingHandle = target instanceof SRoutingHandleImpl;\n            if (moveable !== undefined || isRoutingHandle || isCreatingOnDrag(target)) {\n                this.startDragPosition = { x: event.pageX, y: event.pageY };\n            } else {\n                this.startDragPosition = undefined;\n            }\n            this.hasDragged = false;\n            if (isCreatingOnDrag(target)) {\n                return this.startCreatingOnDrag(target, event);\n            } else if (isRoutingHandle) {\n                return this.activateRoutingHandle(target, event);\n            }\n        }\n        return [];\n    }\n\n    protected startCreatingOnDrag(target: CreatingOnDrag, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        result.push(SelectAllAction.create({ select: false }));\n        result.push(target.createAction(edgeInProgressID));\n        result.push(SelectAction.create({ selectedElementsIDs: [edgeInProgressID] }));\n        result.push(SwitchEditModeAction.create({ elementsToActivate: [edgeInProgressID] }));\n        result.push(SelectAction.create({ selectedElementsIDs: [edgeInProgressTargetHandleID] }));\n        result.push(SwitchEditModeAction.create({ elementsToActivate: [edgeInProgressTargetHandleID] }));\n        return result;\n    }\n\n    protected activateRoutingHandle(target: SRoutingHandleImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        return [SwitchEditModeAction.create({ elementsToActivate: [target.id] })];\n    }\n\n    override mouseMove(target: SModelElementImpl, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.startDragPosition) {\n            if (this.elementId2startPos.size === 0) {\n                this.collectStartPositions(target.root);\n            }\n            this.hasDragged = true;\n            const moveAction = this.getElementMoves(target, event, false);\n            if (moveAction)\n                result.push(moveAction);\n        }\n        return result;\n    }\n\n    protected collectStartPositions(root: SModelRootImpl) {\n        const selectedElements = new Set<SModelElementImpl>(root.index.all()\n            .filter(element => isSelectable(element) && element.selected));\n\n        selectedElements.forEach(element => {\n            if (!this.isChildOfSelected(selectedElements, element)) {\n                if (isMoveable(element))\n                    this.elementId2startPos.set(element.id, element.position);\n                else if (element instanceof SRoutingHandleImpl) {\n                    const position = this.getHandlePosition(element);\n                    if (position)\n                        this.elementId2startPos.set(element.id, position);\n                }\n            }\n        });\n    }\n\n    protected isChildOfSelected(selectedElements: Set<SModelElementImpl>, element: SModelElementImpl): boolean {\n        while (element instanceof SChildElementImpl) {\n            element = element.parent;\n            if (isMoveable(element) && selectedElements.has(element)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    protected getElementMoves(target: SModelElementImpl, event: MouseEvent, isFinished: boolean): ProtocolMoveAction | undefined {\n        if (!this.startDragPosition)\n            return undefined;\n        const elementMoves: ElementMove[] = [];\n        const viewport = findParentByFeature(target, isViewport);\n        const zoom = viewport ? viewport.zoom : 1;\n        const delta = {\n            x: (event.pageX - this.startDragPosition.x) / zoom,\n            y: (event.pageY - this.startDragPosition.y) / zoom\n        };\n        this.elementId2startPos.forEach((startPosition, elementId) => {\n            const element = target.root.index.getById(elementId);\n            if (element) {\n                const move = this.createElementMove(element, startPosition, delta, event);\n                if (move) {\n                    elementMoves.push(move);\n                }\n            }\n        });\n        if (elementMoves.length > 0)\n            return ProtocolMoveAction.create(elementMoves, { animate: false, finished: isFinished });\n        else\n            return undefined;\n    }\n\n    protected createElementMove(element: SModelElementImpl, startPosition: Point, delta: Point, event: MouseEvent): ElementMove | undefined {\n        const toPosition = this.snap({\n            x: startPosition.x + delta.x,\n            y: startPosition.y + delta.y\n        }, element, !event.shiftKey);\n        if (isMoveable(element)) {\n            return {\n                elementId: element.id,\n                elementType: element.type,\n                fromPosition: {\n                    x: element.position.x,\n                    y: element.position.y\n                },\n                toPosition\n            };\n        } else if (element instanceof SRoutingHandleImpl) {\n            const point = this.getHandlePosition(element);\n            if (point !== undefined) {\n                return {\n                    elementId: element.id,\n                    elementType: element.type,\n                    fromPosition: point,\n                    toPosition\n                };\n            }\n        }\n        return undefined;\n    }\n\n    protected snap(position: Point, element: SModelElementImpl, isSnap: boolean): Point {\n        if (isSnap && this.snapper)\n            return this.snapper.snap(position, element);\n        else\n            return position;\n    }\n\n    protected getHandlePosition(handle: SRoutingHandleImpl): Point | undefined {\n        if (this.edgeRouterRegistry) {\n            const parent = handle.parent;\n            if (!(parent instanceof SRoutableElementImpl))\n                return undefined;\n            const router = this.edgeRouterRegistry.get(parent.routerKind);\n            const route = router.route(parent);\n            return router.getHandlePosition(parent, route, handle);\n        }\n        return undefined;\n    }\n\n    override mouseEnter(target: SModelElementImpl, event: MouseEvent): Action[] {\n        if (target instanceof SModelRootImpl && event.buttons === 0 && !this.startDragPosition)\n            this.mouseUp(target, event);\n        return [];\n    }\n\n    override mouseUp(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        if (this.startDragPosition) {\n            const moveAction = this.getElementMoves(target, event, true);\n            if (moveAction) {\n                result.push(moveAction);\n            }\n            target.root.index.all().forEach(element => {\n                if (element instanceof SRoutingHandleImpl) {\n                    result.push(...this.deactivateRoutingHandle(element, target, event));\n                }\n            });\n        }\n        if (!result.some(a => a.kind === ReconnectAction.KIND)) {\n            const edgeInProgress = target.root.index.getById(edgeInProgressID);\n            if (edgeInProgress instanceof SChildElementImpl) {\n                result.push(this.deleteEdgeInProgress(edgeInProgress));\n            }\n        }\n        if (this.hasDragged) {\n            result.push(CommitModelAction.create());\n        }\n        this.hasDragged = false;\n        this.startDragPosition = undefined;\n        this.elementId2startPos.clear();\n        return result;\n    }\n\n    protected deactivateRoutingHandle(element: SRoutingHandleImpl, target: SModelElementImpl, event: MouseEvent): Action[] {\n        const result: Action[] = [];\n        const parent = element.parent;\n        if (parent instanceof SRoutableElementImpl && element.danglingAnchor) {\n            const handlePos = this.getHandlePosition(element);\n            if (handlePos) {\n                const handlePosAbs = translatePoint(handlePos, element.parent, element.root);\n                const newEnd = findChildrenAtPosition(target.root, handlePosAbs)\n                    .find(e => isConnectable(e) && e.canConnect(parent, element.kind as ('source' | 'target')));\n                if (newEnd && this.hasDragged) {\n                    result.push(ReconnectAction.create({\n                        routableId: element.parent.id,\n                        newSourceId: element.kind === 'source' ? newEnd.id : parent.sourceId,\n                        newTargetId: element.kind === 'target' ? newEnd.id : parent.targetId\n                    }));\n                }\n            }\n        }\n        if (element.editMode) {\n            result.push(SwitchEditModeAction.create({ elementsToDeactivate: [element.id] }));\n        }\n        return result;\n    }\n\n    protected deleteEdgeInProgress(edgeInProgress: SChildElementImpl): Action {\n        const deleteIds: string[] = [];\n        deleteIds.push(edgeInProgressID);\n        edgeInProgress.children.forEach(c => {\n            if (c instanceof SRoutingHandleImpl && c.danglingAnchor)\n                deleteIds.push(c.danglingAnchor.id);\n        });\n        return DeleteElementAction.create(deleteIds);\n    }\n\n    override decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        return vnode;\n    }\n}\n\n@injectable()\nexport class LocationPostprocessor implements IVNodePostprocessor {\n\n    decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        if (isEdgeLayoutable(element) && element.parent instanceof SEdgeImpl) {\n            // The element is handled by EdgeLayoutDecorator\n            return vnode;\n        }\n        let translate: string = '';\n        if (isLocateable(element) && element instanceof SChildElementImpl && element.parent !== undefined) {\n            const pos = element.position;\n            if (pos.x !== 0 || pos.y !== 0) {\n                translate = 'translate(' + pos.x + ', ' + pos.y + ')';\n            }\n        }\n        if (isAlignable(element)) {\n            const ali = element.alignment;\n            if (ali.x !== 0 || ali.y !== 0) {\n                if (translate.length > 0) {\n                    translate += ' ';\n                }\n                translate += 'translate(' + ali.x + ', ' + ali.y + ')';\n            }\n        }\n        if (translate.length > 0) {\n            setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    }\n\n    postUpdate(): void {\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface MoveAction extends Action {\n    kind: typeof MoveAction.KIND\n    moves: ElementMove[]\n    animate: boolean\n    finished: boolean\n}\nexport namespace MoveAction {\n    export const KIND = 'move';\n\n    export function create(moves: ElementMove[], options: { animate?: boolean, finished?: boolean } = {}): MoveAction {\n        return {\n            kind: KIND,\n            moves,\n            animate: options.animate ?? true,\n            finished: options.finished ?? false\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SModelElementImpl } from \"../../base/model/smodel\";\nimport { isBoundsAware } from \"../bounds/model\";\n\n/**\n * A snapper helps to align nodes and routing handles.\n */\nexport interface ISnapper {\n    /**\n     * @retruns the closest snapped position that for the `element` located at `position`\n     */\n    snap(position: Point, element: SModelElementImpl): Point\n}\n\n/**\n * A simple snapper that snaps the center of nodes and routing points to a grid.\n */\n@injectable()\nexport class CenterGridSnapper implements ISnapper {\n\n    get gridX() {\n        return 10;\n    }\n\n    get gridY() {\n        return 10;\n    }\n\n    snap(position: Point, element: SModelElementImpl): Point {\n        if (element && isBoundsAware(element))\n            return {\n                x: Math.round((position.x + 0.5 * element.bounds.width) / this.gridX) * this.gridX - 0.5 * element.bounds.width,\n                y: Math.round((position.y + 0.5 * element.bounds.height) / this.gridY) * this.gridY - 0.5 * element.bounds.height\n            };\n        else\n            return {\n                x: Math.round(position.x / this.gridX) * this.gridX,\n                y: Math.round(position.y / this.gridY) * this.gridY\n            };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const nameFeature = Symbol('nameableFeature');\n\nexport interface Nameable extends SModelExtension {\n    name: string\n}\n\nexport function isNameable(element: SModelElementImpl): element is SModelElementImpl & Nameable {\n    return element.hasFeature(nameFeature);\n}\n\nexport function name(element: SModelElementImpl): string|undefined {\n    if (isNameable(element)) {\n        return element.name;\n    } else {\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { OpenMouseListener } from \"./open\";\n\nconst openModule = new ContainerModule(bind => {\n    bind(OpenMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(OpenMouseListener);\n});\n\nexport default openModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\n\nexport const openFeature = Symbol('openFeature');\n\nexport function isOpenable(element: SModelElementImpl): element is SModelElementImpl  {\n    return element.hasFeature(openFeature);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action, OpenAction } from 'sprotty-protocol/lib/actions';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { isOpenable } from './model';\n\n\nexport class OpenMouseListener extends MouseListener {\n    override doubleClick(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const openableTarget = findParentByFeature(target, isOpenable);\n        if (openableTarget !== undefined) {\n            return [ OpenAction.create(openableTarget.id) ];\n        }\n        return [];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Viewport } from 'sprotty-protocol/lib/model';\nimport { Bounds, Dimension } from 'sprotty-protocol/lib/utils/geometry';\nimport { hasOwnProperty } from 'sprotty-protocol/lib/utils/object';\nimport { SChildElementImpl, SModelRootImpl, SParentElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { transformToRootBounds } from '../../base/model/smodel-utils';\nimport { isBoundsAware } from '../bounds/model';\n\n/**\n * Model elements implementing this interface can be displayed on a projection bar.\n * _Note:_ If set, the projectedBounds property will be prefered over the model element bounds.\n * Otherwise model elements also have to be `BoundsAware` so their projections can be shown.\n */\nexport interface Projectable extends SModelExtension {\n    projectionCssClasses: string[],\n    projectedBounds?: Bounds,\n}\n\nexport function isProjectable(arg: unknown): arg is Projectable {\n    return hasOwnProperty(arg, 'projectionCssClasses');\n}\n\n/**\n * A projection can be shown in a horizontal or vertical bar to display an overview of the diagram.\n */\nexport interface ViewProjection {\n    elementId: string;\n    projectedBounds: Bounds;\n    cssClasses: string[];\n}\n\n/**\n * Gather all projections of elements contained in the given parent element.\n */\nexport function getProjections(parent: Readonly<SParentElementImpl>): ViewProjection[] | undefined {\n    let result: ViewProjection[] | undefined;\n    for (const child of parent.children) {\n        if (isProjectable(child) && child.projectionCssClasses.length > 0) {\n            const projectedBounds = getProjectedBounds(child);\n            if (projectedBounds) {\n                const projection: ViewProjection = {\n                    elementId: child.id,\n                    projectedBounds,\n                    cssClasses: child.projectionCssClasses\n                };\n                if (result) {\n                    result.push(projection);\n                } else {\n                    result = [projection];\n                }\n            }\n        }\n        if (child.children.length > 0) {\n            const childProj = getProjections(child);\n            if (childProj) {\n                if (result) {\n                    result.push(...childProj);\n                } else {\n                    result = childProj;\n                }\n            }\n        }\n    }\n    return result;\n}\n\n/**\n * Compute the projected bounds of the given model element, that is the absolute position in the diagram.\n */\nexport function getProjectedBounds(model: Readonly<SChildElementImpl & Projectable>): Bounds | undefined {\n    const parent = model.parent;\n    if (model.projectedBounds) {\n        let bounds = model.projectedBounds;\n        if (isBoundsAware(parent)) {\n            bounds = transformToRootBounds(parent, bounds);\n        }\n        return bounds;\n    } else if (isBoundsAware(model)) {\n        let bounds = model.bounds;\n        bounds = transformToRootBounds(parent, bounds);\n        return bounds;\n    }\n    return undefined;\n}\n\nconst MAX_COORD = 1_000_000_000;\n\n/**\n * Determine the total bounds of a model; this takes the viewport into consideration\n * so it can be shown in the projections.\n */\nexport function getModelBounds(model: SModelRootImpl & Viewport): Bounds | undefined {\n    let minX = MAX_COORD;\n    let minY = MAX_COORD;\n    let maxX = -MAX_COORD;\n    let maxY = -MAX_COORD;\n\n    const bounds = isBoundsAware(model) ? model.bounds : undefined;\n    if (bounds && Dimension.isValid(bounds)) {\n        // Get the bounds directly from the model if it returns a valid size\n        minX = bounds.x;\n        minY = bounds.y;\n        maxX = minX + bounds.width;\n        maxY = minY + bounds.height;\n    } else {\n        // Determine the min. / max coordinates of top-level model elements\n        // Note that this approach is slower, so provide valid bounds to speed up the process.\n        for (const element of model.children) {\n            if (isBoundsAware(element)) {\n                const b = element.bounds;\n                minX = Math.min(minX, b.x);\n                minY = Math.min(minY, b.y);\n                maxX = Math.max(maxX, b.x + b.width);\n                maxY = Math.max(maxY, b.y + b.height);\n            }\n        }\n    }\n\n    // Enlarge the bounds by the current viewport to ensure it always fits into the projection\n    minX = Math.min(minX, model.scroll.x);\n    minY = Math.min(minY, model.scroll.y);\n    maxX = Math.max(maxX, model.scroll.x + model.canvasBounds.width / model.zoom);\n    maxY = Math.max(maxY, model.scroll.y + model.canvasBounds.height / model.zoom);\n\n    if (minX < maxX && minY < maxY) {\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY\n        };\n    }\n    return undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx html */\nimport { html } from '../../lib/jsx';\n\nimport { injectable } from 'inversify';\nimport { VNode, VNodeStyle, h } from 'snabbdom';\nimport { Bounds } from 'sprotty-protocol/lib/utils/geometry';\nimport { IView, IViewArgs, RenderingContext } from '../../base/views/view';\nimport { setAttr, setClass } from '../../base/views/vnode-utils';\nimport { ViewportRootElement } from '../viewport/viewport-root';\nimport { getModelBounds, getProjections, ViewProjection } from './model';\n\n/**\n * Special viewport root view that renders horizontal and vertical projection bars for quick navigation.\n */\n@injectable()\nexport class ProjectedViewportView implements IView {\n\n    render(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode {\n        const rootNode: VNode = <div class-sprotty-root={true}>\n            {this.renderSvg(model, context, args)}\n            {this.renderProjections(model, context, args)}\n        </div>;\n        setAttr(rootNode, 'tabindex', 0); // make root div focus-able\n        return rootNode;\n    }\n\n    protected renderSvg(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode {\n        const transform = `scale(${model.zoom}) translate(${-model.scroll.x},${-model.scroll.y})`;\n        const ns = 'http://www.w3.org/2000/svg';\n        return h('svg', { ns }, h('g', { ns, attrs: { transform } }, context.renderChildren(model)));\n    }\n\n    protected renderProjections(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode[] {\n        if (model.zoom <= 0) {\n            return [];\n        }\n        const modelBounds = getModelBounds(model);\n        if (!modelBounds) {\n            return [];\n        }\n        const projections = getProjections(model) ?? [];\n        return [\n            this.renderProjectionBar(projections, model, modelBounds, 'vertical'),\n            this.renderProjectionBar(projections, model, modelBounds, 'horizontal')\n        ];\n    }\n\n    protected renderProjectionBar(projections: ViewProjection[], model: Readonly<ViewportRootElement>, modelBounds: Bounds, orientation: 'horizontal' | 'vertical'): VNode {\n        const params: ProjectionParams = { modelBounds, orientation } as ProjectionParams;\n        // NOTE: Here we assume that the projection bars have the same size as the diagram canvas, i.e. they are drawn as overlay above the canvas.\n        params.factor = orientation === 'horizontal' ? model.canvasBounds.width / modelBounds.width : model.canvasBounds.height / modelBounds.height;\n        params.zoomedFactor = params.factor / model.zoom;\n        return <div\n                class-sprotty-projection-bar={true}\n                class-horizontal={orientation === 'horizontal'}\n                class-vertical={orientation === 'vertical'} >\n            {this.renderViewport(model, params)}\n            {projections.map(p => this.renderProjection(p, model, params))}\n        </div>;\n    }\n\n    protected renderViewport(model: Readonly<ViewportRootElement>, params: ProjectionParams): VNode {\n        let canvasSize, viewportPos: number;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            viewportPos = (model.scroll.x - params.modelBounds.x) * params.factor;\n        } else {\n            canvasSize = model.canvasBounds.height;\n            viewportPos = (model.scroll.y - params.modelBounds.y) * params.factor;\n        }\n        let viewportSize = canvasSize * params.zoomedFactor;\n        if (viewportPos < 0) {\n            viewportSize += viewportPos;\n            viewportPos = 0;\n        } else if (viewportPos > canvasSize) {\n            viewportPos = canvasSize;\n        }\n        if (viewportSize < 0) {\n            viewportSize = 0;\n        } else if (viewportPos + viewportSize > canvasSize) {\n            viewportSize = canvasSize - viewportPos;\n        }\n        const style: VNodeStyle = params.orientation === 'horizontal' ? {\n            left: `${viewportPos}px`,\n            width: `${viewportSize}px`\n        } : {\n            top: `${viewportPos}px`,\n            height: `${viewportSize}px`\n        };\n        return <div class-sprotty-viewport={true} style={style} />;\n    }\n\n    protected renderProjection(projection: ViewProjection, model: Readonly<ViewportRootElement>, params: ProjectionParams): VNode {\n        let canvasSize, projPos, projSize: number;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            projPos = (projection.projectedBounds.x - params.modelBounds.x) * params.factor;\n            projSize = projection.projectedBounds.width * params.factor;\n        } else {\n            canvasSize = model.canvasBounds.height;\n            projPos = (projection.projectedBounds.y - params.modelBounds.y) * params.factor;\n            projSize = projection.projectedBounds.height * params.factor;\n        }\n        if (projPos < 0) {\n            projSize += projPos;\n            projPos = 0;\n        } else if (projPos > canvasSize) {\n            projPos = canvasSize;\n        }\n        if (projSize < 0) {\n            projSize = 0;\n        } else if (projPos + projSize > canvasSize) {\n            projSize = canvasSize - projPos;\n        }\n        const style: VNodeStyle = params.orientation === 'horizontal' ? {\n            left: `${projPos}px`,\n            width: `${projSize}px`\n        } : {\n            top: `${projPos}px`,\n            height: `${projSize}px`\n        };\n        const result = <div id={`${params.orientation}-projection:${projection.elementId}`} class-sprotty-projection={true} style={style} />;\n        projection.cssClasses.forEach(cl => setClass(result, cl, true));\n        return result;\n    }\n\n}\n\nexport type ProjectionParams = {\n    modelBounds: Bounds\n    orientation: 'horizontal' | 'vertical'\n    factor: number\n    zoomedFactor: number\n};\n","/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SModelElementImpl, SParentElementImpl } from \"../../base/model/smodel\";\nimport { translateBounds, translatePoint } from \"../../base/model/smodel-utils\";\nimport { ResolvedHandleMove } from \"../move/move\";\nimport { RoutingHandleKind, SDanglingAnchorImpl, SRoutingHandleImpl, edgeInProgressID, edgeInProgressTargetHandleID } from \"./model\";\nimport { AnchorComputerRegistry, IAnchorComputer } from \"./anchor\";\nimport { SConnectableElementImpl, SRoutableElementImpl } from \"./model\";\nimport { EdgeSnapshot, IEdgeRouter, RoutedPoint } from \"./routing\";\n\nexport interface LinearRouteOptions {\n    minimalPointDistance: number\n    standardDistance: number\n    selfEdgeOffset: number\n}\n\nexport enum Side { RIGHT, LEFT, TOP, BOTTOM }\n\nexport class DefaultAnchors {\n    readonly bounds: Bounds;\n    readonly left: RoutedPoint;\n    readonly right: RoutedPoint;\n    readonly top: RoutedPoint;\n    readonly bottom: RoutedPoint;\n\n    constructor(readonly element: SConnectableElementImpl, edgeParent: SParentElementImpl, readonly kind: 'source' | 'target') {\n        const bounds = element.bounds;\n        this.bounds = translateBounds(bounds, element.parent, edgeParent);\n        this.left = { x: this.bounds.x, y: this.bounds.y + 0.5 * this.bounds.height, kind };\n        this.right = { x: this.bounds.x + this.bounds.width, y: this.bounds.y + 0.5 * this.bounds.height, kind };\n        this.top = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y, kind };\n        this.bottom = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y + this.bounds.height, kind };\n    }\n\n    get(side: Side): RoutedPoint {\n        return (this as any)[Side[side].toLowerCase()];\n    }\n\n    getNearestSide(point: Point): Side {\n        const leftDistance = Point.euclideanDistance(point, this.left);\n        const rightDistance = Point.euclideanDistance(point, this.right);\n        const topDistance = Point.euclideanDistance(point, this.top);\n        const bottomDistance = Point.euclideanDistance(point, this.bottom);\n        let currentNearestSide = Side.LEFT;\n        let currentMinDist = leftDistance;\n        if (rightDistance < currentMinDist) {\n            currentMinDist = rightDistance;\n            currentNearestSide = Side.RIGHT;\n        }\n        if (topDistance < currentMinDist) {\n            currentMinDist = topDistance;\n            currentNearestSide = Side.TOP;\n        }\n        if (bottomDistance < currentMinDist) {\n            currentMinDist = bottomDistance;\n            currentNearestSide = Side.BOTTOM;\n        }\n        return currentNearestSide;\n    }\n}\n\n@injectable()\nexport abstract class AbstractEdgeRouter implements IEdgeRouter {\n\n    @inject(AnchorComputerRegistry) anchorRegistry: AnchorComputerRegistry;\n\n    abstract get kind(): string;\n\n    abstract route(edge: SRoutableElementImpl): RoutedPoint[];\n\n    abstract createRoutingHandles(edge: SRoutableElementImpl): void;\n\n    protected abstract getOptions(edge: SRoutableElementImpl): LinearRouteOptions;\n\n    pointAt(edge: SRoutableElementImpl, t: number): Point | undefined {\n        const segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        const { segmentStart, segmentEnd, lambda } = segments;\n        return Point.linear(segmentStart, segmentEnd, lambda);\n    }\n\n    derivativeAt(edge: SRoutableElementImpl, t: number): Point | undefined {\n        const segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        const { segmentStart, segmentEnd } = segments;\n        return {\n            x: segmentEnd.x - segmentStart.x,\n            y: segmentEnd.y - segmentStart.y\n        };\n    }\n\n    protected calculateSegment(edge: SRoutableElementImpl, t: number): { segmentStart: Point, segmentEnd: Point, lambda: number} | undefined {\n        if (t < 0 || t > 1)\n            return undefined;\n        const routedPoints = this.route(edge);\n        if (routedPoints.length < 2)\n            return undefined;\n        const segmentLengths: number[] = [];\n        let totalLength = 0;\n        for (let i = 0; i < routedPoints.length - 1; ++i) {\n            segmentLengths[i] = Point.euclideanDistance(routedPoints[i], routedPoints[i + 1]);\n            totalLength += segmentLengths[i];\n        }\n        let currentLenght = 0;\n        const tAsLenght = t * totalLength;\n        for (let i = 0; i < routedPoints.length - 1; ++i) {\n            const newLength = currentLenght + segmentLengths[i];\n            // avoid division by (almost) zero\n            if (segmentLengths[i] > 1E-8) {\n                if (newLength >= tAsLenght) {\n                    const lambda = Math.max(0, (tAsLenght - currentLenght)) / segmentLengths[i];\n                    return {\n                        segmentStart: routedPoints[i],\n                        segmentEnd: routedPoints[i + 1],\n                        lambda\n                    };\n                }\n            }\n            currentLenght = newLength;\n        }\n        return {\n            segmentEnd: routedPoints.pop()!,\n            segmentStart: routedPoints.pop()!,\n            lambda: 1\n        };\n    }\n\n    protected addHandle(edge: SRoutableElementImpl, kind: RoutingHandleKind, type: string, routingPointIndex: number): SRoutingHandleImpl {\n        const handle = new SRoutingHandleImpl();\n        handle.kind = kind;\n        handle.pointIndex = routingPointIndex;\n        handle.type = type;\n        if (kind === 'target' && edge.id === edgeInProgressID)\n            handle.id = edgeInProgressTargetHandleID;\n        edge.add(handle);\n        return handle;\n    }\n\n    getHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl): Point | undefined {\n        switch (handle.kind) {\n            case 'source':\n                if (edge.source instanceof SDanglingAnchorImpl)\n                    return edge.source.position;\n                else\n                    return route[0];\n            case 'target':\n                if (edge.target instanceof SDanglingAnchorImpl)\n                    return edge.target.position;\n                 else {\n                    return route[route.length - 1];\n                }\n            default:\n                const position = this.getInnerHandlePosition(edge, route, handle);\n                if (position !== undefined)\n                    return position;\n                if (handle.pointIndex >= 0 && handle.pointIndex < edge.routingPoints.length)\n                    return edge.routingPoints[handle.pointIndex];\n        }\n        return undefined;\n    }\n\n    protected abstract getInnerHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl): Point | undefined;\n\n    protected findRouteSegment(edge: SRoutableElementImpl, route: RoutedPoint[], handleIndex: number): { start?: Point, end?: Point } {\n        const getIndex = (rp: RoutedPoint) => {\n            if (rp.pointIndex !== undefined)\n                return rp.pointIndex;\n            else if (rp.kind === 'target')\n                return edge.routingPoints.length;\n            else\n                return -2;\n        };\n        let start, end: RoutedPoint | undefined;\n        for (const rp of route) {\n            const i = getIndex(rp);\n            if (i <= handleIndex && (start === undefined || i > getIndex(start)))\n                start = rp;\n            if (i > handleIndex && (end === undefined || i < getIndex(end)))\n                end = rp;\n        }\n        return { start, end };\n    }\n\n    getTranslatedAnchor(connectable: SConnectableElementImpl, refPoint: Point, refContainer: SParentElementImpl, edge: SRoutableElementImpl, anchorCorrection: number = 0): Point {\n        const translatedRefPoint = translatePoint(refPoint, refContainer, connectable.parent);\n        const anchorComputer = this.getAnchorComputer(connectable);\n        const strokeCorrection = 0.5 * connectable.strokeWidth;\n        const anchor = anchorComputer.getAnchor(connectable, translatedRefPoint, anchorCorrection + strokeCorrection);\n        return translatePoint(anchor, connectable.parent, edge.parent);\n    }\n\n    protected getAnchorComputer(connectable: SConnectableElementImpl): IAnchorComputer {\n       return this.anchorRegistry.get(this.kind, connectable.anchorKind);\n    }\n\n    applyHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]): void {\n        const remainingMoves = moves.slice();\n        moves.forEach(move => {\n            const handle = move.handle;\n            if (handle.kind === 'source' && !(edge.source instanceof SDanglingAnchorImpl)) {\n                // detach source\n                const anchor = new SDanglingAnchorImpl();\n                anchor.id = edge.id + '_dangling-source';\n                anchor.original = edge.source;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.sourceId = anchor.id;\n            } else if (handle.kind === 'target' && !(edge.target instanceof SDanglingAnchorImpl)) {\n                // detach target\n                const anchor = new SDanglingAnchorImpl();\n                anchor.id = edge.id + '_dangling-target';\n                anchor.original = edge.target;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.targetId = anchor.id;\n            }\n            if (handle.danglingAnchor) {\n                handle.danglingAnchor.position = move.toPosition;\n                remainingMoves.splice(remainingMoves.indexOf(move), 1);\n            }\n        });\n        if (remainingMoves.length > 0)\n            this.applyInnerHandleMoves(edge, remainingMoves);\n        this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n    }\n\n    protected abstract applyInnerHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]): void;\n\n    cleanupRoutingPoints(edge: SRoutableElementImpl, routingPoints: Point[], updateHandles: boolean, addRoutingPoints: boolean) {\n        const sourceAnchors = new DefaultAnchors(edge.source!, edge.parent, \"source\");\n        const targetAnchors = new DefaultAnchors(edge.target!, edge.parent, \"target\");\n        this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors);\n    }\n\n    protected resetRoutingPointsOnReconnect(edge: SRoutableElementImpl, routingPoints: Point[], updateHandles: boolean,\n        sourceAnchors: DefaultAnchors, targetAnchors: DefaultAnchors): boolean {\n        if (routingPoints.length === 0 || edge.source instanceof SDanglingAnchorImpl || edge.target instanceof SDanglingAnchorImpl) {\n            const options = this.getOptions(edge);\n            const corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n            routingPoints.splice(0, routingPoints.length, ...corners);\n            if (updateHandles) {\n                let maxPointIndex = -2;\n                edge.children.forEach(child => {\n                    if (child instanceof SRoutingHandleImpl) {\n                        if (child.kind === 'target')\n                            child.pointIndex = routingPoints.length;\n                        else if (child.kind === 'line' && child.pointIndex >= routingPoints.length)\n                            edge.remove(child);\n                        else\n                            maxPointIndex = Math.max(child.pointIndex, maxPointIndex);\n                    }\n                });\n                for (let i = maxPointIndex; i < routingPoints.length - 1; ++i)\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    applyReconnect(edge: SRoutableElementImpl, newSourceId?: string, newTargetId?: string) {\n        let hasChanged = false;\n        if (newSourceId) {\n            const newSource = edge.root.index.getById(newSourceId);\n            if (newSource instanceof SConnectableElementImpl) {\n                edge.sourceId = newSource.id;\n                hasChanged = true;\n            }\n        }\n        if (newTargetId) {\n            const newTarget = edge.root.index.getById(newTargetId);\n            if (newTarget instanceof SConnectableElementImpl) {\n                edge.targetId = newTarget.id;\n                hasChanged = true;\n            }\n        }\n        if (hasChanged) {\n            // reset attached elements in index\n            edge.index.remove(edge);\n            edge.index.add(edge);\n            if (this.getSelfEdgeIndex(edge) > -1) {\n                edge.routingPoints = [];\n                this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n            }\n        }\n    }\n\n    takeSnapshot(edge: SRoutableElementImpl): EdgeSnapshot {\n        return {\n            routingPoints: edge.routingPoints.slice(),\n            routingHandles: edge.children\n                .filter(child => child instanceof SRoutingHandleImpl)\n                .map(child => child as SRoutingHandleImpl),\n            routedPoints: this.route(edge),\n            router: this,\n            source: edge.source,\n            target: edge.target\n        };\n    }\n\n    applySnapshot(edge: SRoutableElementImpl, snapshot: EdgeSnapshot): void {\n        edge.routingPoints = snapshot.routingPoints;\n        edge.removeAll(child => child instanceof SRoutingHandleImpl);\n        edge.routerKind = snapshot.router.kind;\n        snapshot.routingHandles.forEach(handle => edge.add(handle));\n        if (snapshot.source)\n            edge.sourceId = snapshot.source.id;\n        if (snapshot.target)\n            edge.targetId = snapshot.target.id;\n        // update index\n        edge.root.index.remove(edge as SModelElementImpl);\n        edge.root.index.add(edge as SModelElementImpl);\n    }\n\n    protected calculateDefaultCorners(edge: SRoutableElementImpl, sourceAnchors: DefaultAnchors, targetAnchors: DefaultAnchors, options: LinearRouteOptions): Point[] {\n        const selfEdgeIndex = this.getSelfEdgeIndex(edge);\n        if (selfEdgeIndex >= 0) {\n            const standardDist = options.standardDistance;\n            const delta = options.selfEdgeOffset * Math.min(sourceAnchors.bounds.width, sourceAnchors.bounds.height);\n            switch (selfEdgeIndex % 4) {\n                case 0:\n                    return [\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y + delta },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.BOTTOM).x + delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                    ];\n                case 1:\n                    return [\n                        { x: sourceAnchors.get(Side.BOTTOM).x - delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y + delta},\n                    ];\n                case 2:\n                    return [\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y - delta },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.TOP).x - delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                    ];\n                case 3:\n                    return [\n                        { x: sourceAnchors.get(Side.TOP).x + delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y - delta },\n                    ];\n            }\n        }\n        return [];\n    }\n\n    protected getSelfEdgeIndex(edge: SRoutableElementImpl): number {\n        if (!edge.source || edge.source !== edge.target)\n            return -1;\n        return edge.source.outgoingEdges\n            .filter(otherEdge => otherEdge.target === edge.source)\n            .indexOf(edge);\n    }\n\n    protected commitRoute(edge: SRoutableElementImpl, routedPoints: RoutedPoint[]) {\n        const newRoutingPoints: Point[] = [];\n        for (let i = 1; i < routedPoints.length - 1; ++i)\n            newRoutingPoints.push({ x: routedPoints[i].x, y: routedPoints[i].y });\n        edge.routingPoints = newRoutingPoints;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject } from \"inversify\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { TYPES } from \"../../base/types\";\nimport { InstanceRegistry } from \"../../utils/registry\";\nimport { SConnectableElementImpl } from \"./model\";\n\nexport const DIAMOND_ANCHOR_KIND = 'diamond';\nexport const ELLIPTIC_ANCHOR_KIND = 'elliptic';\nexport const RECTANGULAR_ANCHOR_KIND = 'rectangular';\n\nexport interface IAnchorComputer {\n    readonly kind: string;\n\n    /**\n     * Compute an anchor position for routing an edge towards this element.\n     *\n     * The default implementation returns the element's center point. If edges should be connected\n     * differently, e.g. to some point on the boundary of the element's view, the according computation\n     * should be implemented in a subclass by overriding this method.\n     *\n     * @param connectable The node or port an edge should be connected to.\n     * @param referencePoint The point from which the edge is routed towards this elemet, in the same\n     *                       coordintae system as the connectable.\n     * @param offset An optional offset value to be considered in the anchor computation;\n     *               positive values should shift the anchor away from this element, negative values\n     *               should shift the anchor more to the inside. Use this to adapt ot arrow heads.\n     */\n    getAnchor(connectable: SConnectableElementImpl, referencePoint: Point, offset?: number): Point;\n}\n\n\n@injectable()\nexport class AnchorComputerRegistry extends InstanceRegistry<IAnchorComputer> {\n\n    constructor(@multiInject(TYPES.IAnchorComputer) anchors: IAnchorComputer[]) {\n        super();\n        anchors.forEach(anchor => this.register(anchor.kind, anchor));\n    }\n\n    protected get defaultAnchorKind() {\n        return RECTANGULAR_ANCHOR_KIND;\n    }\n\n    override get(routerKind: string, anchorKind?: string): IAnchorComputer {\n        return super.get(`${routerKind}:${anchorKind || this.defaultAnchorKind}`);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ELLIPTIC_ANCHOR_KIND, RECTANGULAR_ANCHOR_KIND, DIAMOND_ANCHOR_KIND } from \"./anchor\";\nimport { injectable } from \"inversify\";\nimport { DiamondAnchor, EllipseAnchor, RectangleAnchor } from './polyline-anchors';\nimport { BezierEdgeRouter } from './bezier-edge-router';\n\n@injectable()\nexport class BezierEllipseAnchor extends EllipseAnchor {\n\n    override get kind() {\n        return BezierEdgeRouter.KIND + ':' + ELLIPTIC_ANCHOR_KIND;\n    }\n}\n\n@injectable()\nexport class BezierRectangleAnchor extends RectangleAnchor {\n\n    override get kind() {\n        return BezierEdgeRouter.KIND + ':' + RECTANGULAR_ANCHOR_KIND;\n    }\n}\n\n@injectable()\nexport class BezierDiamondAnchor extends DiamondAnchor {\n\n    override get kind() {\n        return BezierEdgeRouter.KIND + ':' + DIAMOND_ANCHOR_KIND;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Action } from 'sprotty-protocol/lib/actions';\nimport { centerOfLine, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { ResolvedHandleMove } from '../move/move';\nimport { SDanglingAnchorImpl, SRoutableElementImpl, SRoutingHandleImpl } from './model';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { EdgeRouterRegistry, RoutedPoint } from './routing';\nimport { AbstractEdgeRouter, LinearRouteOptions } from './abstract-edge-router';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { Command, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { TYPES } from \"../../base/types\";\nimport { SEdgeImpl } from '../../graph/sgraph';\n\n@injectable()\nexport class BezierEdgeRouter extends AbstractEdgeRouter {\n\n    static readonly KIND = 'bezier';\n    static readonly DEFAULT_BEZIER_HANDLE_OFFSET = 25;\n\n    get kind() {\n        return BezierEdgeRouter.KIND;\n    }\n\n    route(edge: SRoutableElementImpl): RoutedPoint[] {\n        if (!edge.source || !edge.target)\n            return [];\n        const rpCount = edge.routingPoints.length;\n        const source = edge.source;\n        const target = edge.target;\n\n        const result: RoutedPoint[] = [];\n        result.push({ kind: 'source', x: 0, y: 0 });\n        if (rpCount === 0) {\n            // initial values\n            const [h1, h2] = this.createDefaultBezierHandles(source.position, target.position);\n            result.push( { kind: 'bezier-control-after', x: h1.x, y: h1.y, pointIndex: 0 } );\n            result.push( { kind: 'bezier-control-before', x: h2.x, y: h2.y, pointIndex: 1 } );\n            edge.routingPoints.push(h1);\n            edge.routingPoints.push(h2);\n        } else if (rpCount >= 2) {\n            for (let i = 0; i < rpCount; i++) {\n                const p = edge.routingPoints[i];\n                if (i % 3 === 0) {\n                    result.push({ kind: 'bezier-control-after', x: p.x, y: p.y, pointIndex: i });\n                }\n                if ((i + 1) % 3 === 0) {\n                    result.push({ kind: 'bezier-junction', x: p.x, y: p.y, pointIndex: i });\n                } else if ((i + 2) % 3 === 0) {\n                    result.push({ kind: 'bezier-control-before', x: p.x, y: p.y, pointIndex: i });\n                }\n            }\n        }\n        result.push({ kind: 'target', x: 0, y: 0 });\n\n        // use \"ends\" of edge as reference or next bezier-junction\n        const p0 = rpCount > 2 ? edge.routingPoints[2] : target.position;\n        const pn = rpCount > 2 ? edge.routingPoints[edge.routingPoints.length - 3] : source.position;\n\n        const sourceAnchor = this.getTranslatedAnchor(source, p0, target.parent, edge, edge.sourceAnchorCorrection);\n        const targetAnchor = this.getTranslatedAnchor(target, pn, source.parent, edge, edge.targetAnchorCorrection);\n\n        result[0] = { kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y };\n        result[result.length - 1] = { kind: 'target', x: targetAnchor.x, y: targetAnchor.y };\n\n        return result;\n    }\n\n    private createDefaultBezierHandles(relH1: Point, relH2: Point): [Point, Point] {\n        const h1 = {\n            x: relH1.x - BezierEdgeRouter.DEFAULT_BEZIER_HANDLE_OFFSET,\n            y: relH1.y\n        };\n        const h2 = {\n            x: relH2.x + BezierEdgeRouter.DEFAULT_BEZIER_HANDLE_OFFSET,\n            y: relH2.y\n        };\n        return [ h1, h2 ];\n    }\n\n    createRoutingHandles(edge: SRoutableElementImpl): void {\n        // route ensure there are at least 2 routed points\n        this.route(edge);\n\n        this.rebuildHandles(edge);\n    }\n\n    private rebuildHandles(edge: SRoutableElementImpl) {\n        this.addHandle(edge, 'source', 'routing-point', -2);\n        this.addHandle(edge, 'bezier-control-after', 'bezier-routing-point', 0);\n        this.addHandle(edge, 'bezier-add', 'bezier-create-routing-point', 0);\n        const rpCount = edge.routingPoints.length;\n\n        if (rpCount > 2) {\n            for (let i = 1; i < rpCount - 1; i += 3) {\n                this.addHandle(edge, 'bezier-control-before', 'bezier-routing-point', i);\n                // Add two circle for add/remove segments\n                this.addHandle(edge, 'bezier-add', 'bezier-create-routing-point', i + 1);\n                this.addHandle(edge, 'bezier-junction', 'routing-point', i + 1);\n                this.addHandle(edge, 'bezier-remove', 'bezier-remove-routing-point', i + 1);\n                this.addHandle(edge, 'bezier-control-after', 'bezier-routing-point', i + 2);\n\n                // re-position control-pairs\n                this.moveBezierControlPair(edge.routingPoints[i], i, edge);\n            }\n        }\n        this.addHandle(edge, 'bezier-control-before', 'bezier-routing-point', rpCount - 1);\n        this.addHandle(edge, 'target', 'routing-point', -1);\n    }\n\n    getInnerHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl) {\n       if (handle.kind === 'bezier-control-before' || handle.kind === 'bezier-junction' || handle.kind === 'bezier-control-after') {\n            for (let i = 0; i < route.length; i++) {\n                const p = route[i];\n                if (p.pointIndex === handle.pointIndex && p.kind === handle.kind)\n                    return p;\n            }\n        } else if (handle.kind === 'bezier-add') {\n            const ctrlPoint = this.findBezierControl(edge, route, handle.pointIndex);\n            return { x: ctrlPoint.x, y: ctrlPoint.y + 12.5};\n        } else if (handle.kind === 'bezier-remove') {\n            const ctrlPoint = this.findBezierControl(edge, route, handle.pointIndex);\n            return { x: ctrlPoint.x, y: ctrlPoint.y - 12.5};\n        }\n        return undefined;\n    }\n\n    protected findBezierControl(edge: SRoutableElementImpl, route: RoutedPoint[], handleIndex: number): Point {\n        let result: Point = { x: route[0].x, y: route[0].y };\n        if (handleIndex > 0) {\n            for (const rp of route) {\n                if (rp.pointIndex !== undefined && rp.pointIndex === handleIndex && rp.kind === 'bezier-junction') {\n                    result = { x: rp.x, y: rp.y };\n                    break;\n                }\n            }\n        }\n        return result;\n    }\n\n    override applyHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]): void {\n        moves.forEach(move => {\n            const handle = move.handle;\n            let orgPosition = { x: 0, y: 0 };\n            let relativePos, newControlPos, ctrlPointIndex;\n            const moveToPos = move.toPosition;\n\n            switch (handle.kind) {\n                case 'bezier-control-before':\n                case 'bezier-control-after':\n                    // find potential other handle/rp and move\n                    this.moveBezierControlPair(moveToPos, move.handle.pointIndex, edge);\n                    break;\n                case 'bezier-junction':\n                    const index = handle.pointIndex;\n                    if (index >= 0 && index < edge.routingPoints.length) {\n                        ctrlPointIndex = index - 1;\n                        orgPosition = edge.routingPoints[index];\n                        relativePos = edge.routingPoints[ctrlPointIndex];\n                        newControlPos = this.calcRelativeMove(orgPosition, moveToPos, relativePos);\n                        edge.routingPoints[index] = moveToPos;\n                        this.moveBezierControlPair(newControlPos, ctrlPointIndex, edge);\n                    }\n                    break;\n                case 'source':\n                    ctrlPointIndex = 0;\n                    relativePos = edge.routingPoints[ctrlPointIndex];\n\n                    if (!(edge.source instanceof SDanglingAnchorImpl)) {\n                        // detach source\n                        const anchor = new SDanglingAnchorImpl();\n                        anchor.id = edge.id + '_dangling-source';\n                        anchor.original = edge.source;\n                        anchor.position = move.toPosition;\n                        handle.root.add(anchor);\n                        handle.danglingAnchor = anchor;\n                        edge.sourceId = anchor.id;\n                        if (edge.source) orgPosition = edge.source.position;\n                    } else if (handle.danglingAnchor) {\n                        orgPosition = handle.danglingAnchor.position;\n                        handle.danglingAnchor.position = moveToPos;\n                    }\n                    newControlPos = this.calcRelativeMove(orgPosition, moveToPos, relativePos);\n                    this.moveBezierControlPair(newControlPos, ctrlPointIndex, edge);\n                    break;\n                case 'target':\n                    ctrlPointIndex = edge.routingPoints.length - 1;\n                    relativePos = edge.routingPoints[ctrlPointIndex];\n\n                    if (!(edge.target instanceof SDanglingAnchorImpl)) {\n                        // detach target\n                        const anchor = new SDanglingAnchorImpl();\n                        anchor.id = edge.id + '_dangling-target';\n                        anchor.original = edge.target;\n                        anchor.position = moveToPos;\n                        handle.root.add(anchor);\n                        handle.danglingAnchor = anchor;\n                        edge.targetId = anchor.id;\n                        if (edge.target) orgPosition = edge.target.position;\n                    } else if (handle.danglingAnchor) {\n                        orgPosition = handle.danglingAnchor.position;\n                        handle.danglingAnchor.position = moveToPos;\n                    }\n                    newControlPos = this.calcRelativeMove(orgPosition, moveToPos, relativePos);\n                    this.moveBezierControlPair(newControlPos, ctrlPointIndex, edge);\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n\n    protected applyInnerHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]): void {\n        // not required\n    }\n\n    protected getOptions(edge: SRoutableElementImpl): LinearRouteOptions {\n        return  {\n            minimalPointDistance: 2,\n            standardDistance: 0.1,\n            selfEdgeOffset: 20\n        };\n    }\n\n    private calcRelativeMove(oldPos: Point, newPos: Point, relativePoint: Point): Point {\n        return {\n            x: relativePoint.x - (oldPos.x - newPos.x),\n            y: relativePoint.y - (oldPos.y - newPos.y)\n        };\n    }\n\n    public createNewBezierSegment(index: number, edge: SRoutableElementImpl): void {\n        const routingPoints = edge.routingPoints;\n\n        let bezierJunctionPos, start, end: Point;\n        if (routingPoints.length === 2) {\n            start = routingPoints[index < 0 ? 0 : index];\n            end = routingPoints[routingPoints.length - 1];\n            bezierJunctionPos = centerOfLine(start, end);\n        } else {\n            start = routingPoints[index];\n            end = routingPoints[index + 2];\n            bezierJunctionPos = centerOfLine(start, end);\n        }\n        const [h1, h2] = this.createDefaultBezierHandles(bezierJunctionPos, bezierJunctionPos);\n\n        routingPoints.splice(index + 1, 0, h1);\n        routingPoints.splice(index + 2, 0, bezierJunctionPos);\n        routingPoints.splice(index + 3, 0, h2);\n        // ensure handles are correctly positioned\n        this.moveBezierControlPair(h1, index + 1, edge);\n\n        // simple solution for now: just rebuildHandles\n        edge.removeAll(c => c instanceof SRoutingHandleImpl);\n        this.rebuildHandles(edge);\n    }\n\n    public removeBezierSegment(index: number, edge: SRoutableElementImpl): void {\n        const routingPoints = edge.routingPoints;\n\n        routingPoints.splice(index - 1, 3);\n\n        // simple solution for now: just rebuildHandles\n        edge.removeAll(c => c instanceof SRoutingHandleImpl);\n        this.rebuildHandles(edge);\n    }\n\n    private moveBezierControlPair(newPos: Point, ctrlPointIndex: number, edge: SRoutableElementImpl) {\n        if (ctrlPointIndex >= 0 && ctrlPointIndex < edge.routingPoints.length) {\n            // find neighbors\n            const before = ctrlPointIndex - 1;\n            const after = ctrlPointIndex + 1;\n\n            // this is the first control or the last control => nothing to do further\n            if (before < 0 || after === edge.routingPoints.length) {\n                edge.routingPoints[ctrlPointIndex] = newPos;\n            } else  {\n                // behind bezier-junction\n                if (ctrlPointIndex % 3 === 0) {\n                    this.setBezierMirror(edge, newPos, ctrlPointIndex, false);\n                // before bezier-junction\n                } else if ((ctrlPointIndex + 2) % 3 === 0) {\n                    this.setBezierMirror(edge, newPos, ctrlPointIndex, true);\n                }\n            }\n        }\n    }\n\n    private setBezierMirror(edge: SRoutableElementImpl, newPos: Point, pointIndex: number, before: boolean) {\n        edge.routingPoints[pointIndex] = newPos;\n        const jct = edge.routingPoints[before ? (pointIndex + 1) : (pointIndex - 1)];\n        edge.routingPoints[before ? (pointIndex + 2) : (pointIndex - 2)] = {\n            x: jct.x - (newPos.x - jct.x),\n            y: jct.y - (newPos.y - jct.y)\n        };\n    }\n\n}\n\n/**\n * Reacts on mouseDown events if the target kind is bezier-add or bezier-remove\n */\nexport class BezierMouseListener extends MouseListener {\n\n    override mouseDown(target: SModelElementImpl, event: MouseEvent): Action[] {\n        const result = [];\n        if (target instanceof SRoutingHandleImpl && (target.kind === 'bezier-add' || target.kind === 'bezier-remove')) {\n            if (target.type === 'bezier-create-routing-point') {\n                result.push(AddRemoveBezierSegmentAction.create('add', target.id));\n            } else if (target.type === 'bezier-remove-routing-point') {\n                result.push(AddRemoveBezierSegmentAction.create('remove', target.id));\n            }\n        }\n        return result;\n    }\n};\n\nexport interface AddRemoveBezierSegmentAction extends Action {\n    kind: typeof AddRemoveBezierSegmentAction.KIND\n    targetId: string\n    actionTask: 'add' | 'remove'\n}\n\nexport namespace AddRemoveBezierSegmentAction {\n    export const KIND = 'addRemoveBezierSegment';\n    export function create(actionTask: 'add' | 'remove', targetId: string): AddRemoveBezierSegmentAction {\n        return {\n            kind: KIND,\n            actionTask,\n            targetId\n        };\n    }\n}\n\n@injectable()\nexport class AddRemoveBezierSegmentCommand extends Command {\n    static readonly KIND = AddRemoveBezierSegmentAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected readonly action: AddRemoveBezierSegmentAction,\n        @inject(EdgeRouterRegistry) protected readonly edgeRouterRegistry?: EdgeRouterRegistry) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const index = context.root.index;\n        const target = index.getById(this.action.targetId);\n\n        if (this.edgeRouterRegistry && target instanceof SRoutingHandleImpl) {\n            const raw = this.edgeRouterRegistry.get((target.parent as SRoutableElementImpl).routerKind);\n            if (raw instanceof BezierEdgeRouter) {\n                const router = raw;\n\n                for (const child of context.root.children) {\n                    if (child.id === target.parent.id) {\n                        if (this.action.actionTask === 'add') {\n                            router.createNewBezierSegment(target.pointIndex, child as SEdgeImpl);\n                        } else if (this.action.actionTask === 'remove') {\n                            router.removeBezierSegment(target.pointIndex, child as SEdgeImpl);\n                        }\n                        break;\n                    }\n                }\n            }\n        }\n\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        throw new Error('Method not implemented.');\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        throw new Error('Method not implemented.');\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { ManhattanEdgeRouter } from \"./manhattan-edge-router\";\nimport { PolylineEdgeRouter } from \"./polyline-edge-router\";\nimport { ManhattanRectangularAnchor, ManhattanEllipticAnchor, ManhattanDiamondAnchor } from \"./manhattan-anchors\";\nimport { RectangleAnchor, EllipseAnchor, DiamondAnchor } from \"./polyline-anchors\";\nimport { AnchorComputerRegistry } from \"./anchor\";\nimport { EdgeRouterRegistry } from \"./routing\";\nimport { AddRemoveBezierSegmentCommand, BezierEdgeRouter } from './bezier-edge-router';\nimport { BezierDiamondAnchor, BezierEllipseAnchor, BezierRectangleAnchor } from './bezier-anchors';\nimport { configureCommand } from \"../../base/commands/command-registration\";\n\nconst routingModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(EdgeRouterRegistry).toSelf().inSingletonScope();\n\n    bind(AnchorComputerRegistry).toSelf().inSingletonScope();\n\n    bind(ManhattanEdgeRouter).toSelf().inSingletonScope();\n    bind(TYPES.IEdgeRouter).toService(ManhattanEdgeRouter);\n    bind(ManhattanEllipticAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(ManhattanEllipticAnchor);\n    bind(ManhattanRectangularAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(ManhattanRectangularAnchor);\n    bind(ManhattanDiamondAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(ManhattanDiamondAnchor);\n\n    bind(PolylineEdgeRouter).toSelf().inSingletonScope();\n    bind(TYPES.IEdgeRouter).toService(PolylineEdgeRouter);\n    bind(EllipseAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(EllipseAnchor);\n    bind(RectangleAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(RectangleAnchor);\n    bind(DiamondAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(DiamondAnchor);\n\n    bind(BezierEdgeRouter).toSelf().inSingletonScope();\n    bind(TYPES.IEdgeRouter).toService(BezierEdgeRouter);\n    bind(BezierEllipseAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(BezierEllipseAnchor);\n    bind(BezierRectangleAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(BezierRectangleAnchor);\n    bind(BezierDiamondAnchor).toSelf().inSingletonScope();\n    bind(TYPES.IAnchorComputer).toService(BezierDiamondAnchor);\n\n    configureCommand({ bind, isBound }, AddRemoveBezierSegmentCommand);\n});\n\nexport default routingModule;\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { Line, PointToPointLine, intersection } from \"../../utils/geometry\";\nimport { RECTANGULAR_ANCHOR_KIND, IAnchorComputer, DIAMOND_ANCHOR_KIND, ELLIPTIC_ANCHOR_KIND } from \"./anchor\";\nimport { ManhattanEdgeRouter } from \"./manhattan-edge-router\";\nimport { SConnectableElementImpl } from \"./model\";\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport class ManhattanRectangularAnchor implements IAnchorComputer {\n\n    static KIND = ManhattanEdgeRouter.KIND + ':' + RECTANGULAR_ANCHOR_KIND;\n\n    get kind() {\n        return ManhattanRectangularAnchor.KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number): Point {\n        const b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        const bounds: Bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            if (refPoint.y < bounds.y + 0.5 * bounds.height)\n            return { x: refPoint.x, y: bounds.y };\n            else\n            return { x: refPoint.x, y: bounds.y + bounds.height };\n        }\n        if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            if (refPoint.x < bounds.x + 0.5 * bounds.width)\n            return { x: bounds.x, y: refPoint.y };\n            else\n            return { x: bounds.x + bounds.width, y: refPoint.y };\n        }\n        return Bounds.center(bounds);\n    }\n}\n\n@injectable()\nexport class ManhattanDiamondAnchor implements IAnchorComputer {\n\n    static KIND = ManhattanEdgeRouter.KIND + ':' + DIAMOND_ANCHOR_KIND;\n\n    get kind() {\n        return ManhattanDiamondAnchor.KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number = 0): Point {\n        const b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        const bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        const c = Bounds.center(bounds);\n\n        let outline: Line | undefined = undefined;\n        let refLine: Line | undefined = undefined;\n        if (refPoint.x >= bounds.x && refPoint.x <= bounds.x + bounds.width) {\n            if (bounds.x + 0.5 * bounds.width >= refPoint.x) {\n                refLine = new PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            } else {\n                refLine = new PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        } else if (refPoint.y >= bounds.y && refPoint.y <= bounds.y + bounds.height) {\n            if (bounds.y + 0.5 * bounds.height >= refPoint.y) {\n                refLine = new PointToPointLine(refPoint, { x: c.x , y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n            } else {\n                refLine = new PointToPointLine(refPoint, { x: c.x , y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n                else\n                    outline = new PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        }\n        if (!!refLine && !!outline)\n            return intersection(outline, refLine);\n        else\n            return c;\n    }\n}\n\n@injectable()\nexport class ManhattanEllipticAnchor implements IAnchorComputer {\n\n    static KIND = ManhattanEdgeRouter.KIND + ':' + ELLIPTIC_ANCHOR_KIND;\n\n    get kind() {\n        return ManhattanEllipticAnchor.KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number = 0): Point {\n        const b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        const bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        const c = Bounds.center(bounds);\n        const refRelative = Point.subtract(refPoint, c);\n        let x = c.x;\n        let y = c.y;\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            x += refRelative.x;\n            const dy = 0.5 * bounds.height * Math.sqrt(1 - (refRelative.x * refRelative.x) / (0.25 * bounds.width * bounds.width));\n            if (refRelative.y < 0)\n                y -= dy;\n            else\n                y += dy;\n        } else if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            y += refRelative.y;\n            const dx = 0.5 * bounds.width * Math.sqrt(1 - (refRelative.y * refRelative.y) / (0.25 * bounds.height * bounds.height));\n            if (refRelative.x < 0)\n                x -= dx;\n            else\n                x += dx;\n        }\n        return { x, y };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { almostEquals, Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { translatePoint } from \"../../base/model/smodel-utils\";\nimport { ResolvedHandleMove } from \"../move/move\";\nimport { DefaultAnchors, AbstractEdgeRouter, LinearRouteOptions, Side } from \"./abstract-edge-router\";\nimport { SRoutableElementImpl, RoutingHandleKind, SRoutingHandleImpl } from \"./model\";\nimport { RoutedPoint } from \"./routing\";\n\nexport interface ManhattanRouterOptions extends LinearRouteOptions {\n    standardDistance: number;\n}\n\nexport class ManhattanEdgeRouter extends AbstractEdgeRouter {\n\n    static readonly KIND = 'manhattan';\n\n    get kind() {\n        return ManhattanEdgeRouter.KIND;\n    }\n\n    protected getOptions(edge: SRoutableElementImpl): ManhattanRouterOptions {\n        return {\n            standardDistance: 20,\n            minimalPointDistance: 3,\n            selfEdgeOffset: 0.25\n        };\n    }\n\n    route(edge: SRoutableElementImpl): RoutedPoint[] {\n        if (!edge.source || !edge.target)\n            return [];\n        const routedCorners = this.createRoutedCorners(edge);\n        const sourceRefPoint = routedCorners[0]\n            || translatePoint(Bounds.center(edge.target.bounds), edge.target.parent, edge.parent);\n        const sourceAnchor = this.getTranslatedAnchor(edge.source, sourceRefPoint, edge.parent, edge, edge.sourceAnchorCorrection);\n        const targetRefPoint = routedCorners[routedCorners.length - 1]\n            || translatePoint(Bounds.center(edge.source.bounds), edge.source.parent, edge.parent);\n        const targetAnchor = this.getTranslatedAnchor(edge.target, targetRefPoint, edge.parent, edge, edge.targetAnchorCorrection);\n        if (!sourceAnchor || !targetAnchor)\n            return [];\n        const routedPoints: RoutedPoint[] = [];\n        routedPoints.push({ kind: 'source', ...sourceAnchor});\n        routedCorners.forEach(corner => routedPoints.push(corner));\n        routedPoints.push({ kind: 'target', ...targetAnchor});\n        return routedPoints;\n    }\n\n    protected createRoutedCorners(edge: SRoutableElementImpl): RoutedPoint[] {\n        const sourceAnchors = new DefaultAnchors(edge.source!, edge.parent, 'source');\n        const targetAnchors = new DefaultAnchors(edge.target!, edge.parent, 'target');\n        if (edge.routingPoints.length > 0) {\n            const routingPointsCopy = edge.routingPoints.slice();\n            this.cleanupRoutingPoints(edge, routingPointsCopy, false, true);\n            if (routingPointsCopy.length > 0)\n                return routingPointsCopy.map((routingPoint, index) => {\n                    return <RoutedPoint> { kind: 'linear', pointIndex: index, ...routingPoint};\n                });\n        }\n        const options = this.getOptions(edge);\n        const corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n        return corners.map(corner => {\n            return <RoutedPoint> { kind: 'linear', ...corner };\n        });\n    }\n\n    createRoutingHandles(edge: SRoutableElementImpl) {\n        const routedPoints = this.route(edge);\n        this.commitRoute(edge, routedPoints);\n        if (routedPoints.length > 0) {\n            this.addHandle(edge, 'source', 'routing-point', -2);\n            for (let i = 0; i < routedPoints.length - 1; ++i)\n                this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i - 1);\n            this.addHandle(edge, 'target', 'routing-point', routedPoints.length - 2);\n        }\n    }\n\n    protected getInnerHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl) {\n        const fraction = this.getFraction(handle.kind);\n        if (fraction !== undefined) {\n            const { start, end } = this.findRouteSegment(edge, route, handle.pointIndex);\n            if (start !== undefined && end !== undefined)\n                return Point.linear(start, end, fraction);\n        }\n        return undefined;\n    }\n\n    protected getFraction(kind: RoutingHandleKind): number | undefined {\n        switch (kind) {\n            case 'manhattan-50%': return 0.5;\n            default: return undefined;\n        }\n    }\n\n    protected applyInnerHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]) {\n        const route = this.route(edge);\n        const routingPoints = edge.routingPoints;\n        const minimalPointDistance = this.getOptions(edge).minimalPointDistance;\n        moves.forEach(move => {\n            const handle = move.handle;\n            const index = handle.pointIndex;\n            const correctedX = this.correctX(routingPoints, index, move.toPosition.x, minimalPointDistance);\n            const correctedY = this.correctY(routingPoints, index, move.toPosition.y, minimalPointDistance);\n            switch (handle.kind) {\n                case 'manhattan-50%':\n                    if (index < 0) {\n                        if (routingPoints.length === 0) {\n                            routingPoints.push({ x: correctedX, y: correctedY });\n                            handle.pointIndex = 0;\n                        } else if (almostEquals(route[0].x, route[1].x)) {\n                            this.alignX(routingPoints, 0, correctedX);\n                        } else {\n                            this.alignY(routingPoints, 0, correctedY);\n                        }\n                    } else if (index < routingPoints.length - 1) {\n                        if (almostEquals(routingPoints[index].x, routingPoints[index + 1].x)) {\n                            this.alignX(routingPoints, index, correctedX);\n                            this.alignX(routingPoints, index + 1, correctedX);\n                        } else {\n                            this.alignY(routingPoints, index, correctedY);\n                            this.alignY(routingPoints, index + 1, correctedY);\n                        }\n                    } else {\n                        if (almostEquals(route[route.length - 2].x, route[route.length - 1].x)) {\n                            this.alignX(routingPoints, routingPoints.length - 1, correctedX);\n                        } else {\n                            this.alignY(routingPoints, routingPoints.length - 1, correctedY);\n                        }\n                    }\n                    break;\n            }\n        });\n    }\n\n    protected correctX(routingPoints: Point[], index: number, x: number, minimalPointDistance: number) {\n        if (index > 0 && Math.abs(x - routingPoints[index - 1].x) < minimalPointDistance)\n            return routingPoints[index - 1].x;\n        else if (index < routingPoints.length - 2 && Math.abs(x - routingPoints[index + 2].x) < minimalPointDistance)\n            return routingPoints[index + 2].x;\n        else\n            return x;\n    }\n\n    protected alignX(routingPoints: Point[], index: number, x: number) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x,\n                y: routingPoints[index].y\n            };\n    }\n\n    protected correctY(routingPoints: Point[], index: number, y: number, minimalPointDistance: number) {\n        if (index > 0 && Math.abs(y - routingPoints[index - 1].y) < minimalPointDistance)\n            return routingPoints[index - 1].y;\n        else if (index < routingPoints.length - 2 && Math.abs(y - routingPoints[index + 2].y) < minimalPointDistance)\n            return routingPoints[index + 2].y;\n        else\n            return y;\n    }\n\n    protected alignY(routingPoints: Point[], index: number, y: number) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x: routingPoints[index].x,\n                y\n            };\n    }\n\n    override cleanupRoutingPoints(edge: SRoutableElementImpl, routingPoints: Point[], updateHandles: boolean, addRoutingPoints: boolean) {\n        const sourceAnchors = new DefaultAnchors(edge.source!, edge.parent, \"source\");\n        const targetAnchors = new DefaultAnchors(edge.target!, edge.parent, \"target\");\n        if (this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors))\n            return;\n        // delete leading RPs inside the bounds of the source\n        for (let i = 0; i < routingPoints.length; ++i)\n            if (Bounds.includes(sourceAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(0, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, -1);\n                }\n            } else {\n                break;\n            }\n        // delete trailing RPs inside the bounds of the target\n        for (let i = routingPoints.length - 1; i >= 0; --i)\n            if (Bounds.includes(targetAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(i, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, i);\n                }\n            } else {\n                break;\n        }\n        if (routingPoints.length >= 2) {\n            const options = this.getOptions(edge);\n            for (let i = routingPoints.length - 2; i >= 0; --i) {\n                if (Point.manhattanDistance(routingPoints[i], routingPoints[i + 1]) < options.minimalPointDistance) {\n                    routingPoints.splice(i, 2);\n                    --i;\n                    if (updateHandles) {\n                        this.removeHandle(edge, i - 1);\n                        this.removeHandle(edge, i);\n                    }\n                }\n            }\n        }\n        if (addRoutingPoints) {\n            this.addAdditionalCorner(edge, routingPoints, sourceAnchors, targetAnchors, updateHandles);\n            this.addAdditionalCorner(edge, routingPoints, targetAnchors, sourceAnchors, updateHandles);\n            this.manhattanify(edge, routingPoints);\n        }\n    }\n\n    protected removeHandle(edge: SRoutableElementImpl, pointIndex: number) {\n        const toBeRemoved: SRoutingHandleImpl[] = [];\n        edge.children.forEach(child => {\n            if (child instanceof SRoutingHandleImpl) {\n                if (child.pointIndex > pointIndex)\n                    --child.pointIndex;\n                else if (child.pointIndex === pointIndex)\n                    toBeRemoved.push(child);\n            }\n        });\n        toBeRemoved.forEach(child => edge.remove(child));\n    }\n\n    protected addAdditionalCorner(edge: SRoutableElementImpl, routingPoints: Point[], currentAnchors: DefaultAnchors, otherAnchors: DefaultAnchors, updateHandles: boolean) {\n        if (routingPoints.length === 0)\n            return;\n        const refPoint = currentAnchors.kind === 'source' ? routingPoints[0] : routingPoints[routingPoints.length - 1];\n        const index = currentAnchors.kind === 'source' ? 0 : routingPoints.length;\n        const shiftIndex = index - (currentAnchors.kind === 'source' ? 1 : 0);\n        let isHorizontal: boolean;\n        if (routingPoints.length > 1) {\n            isHorizontal = index === 0\n            ? almostEquals(routingPoints[0].x, routingPoints[1].x)\n            : almostEquals(routingPoints[routingPoints.length - 1].x, routingPoints[routingPoints.length - 2].x);\n        } else {\n            const nearestSide = otherAnchors.getNearestSide(refPoint);\n            isHorizontal = nearestSide === Side.TOP || nearestSide === Side.BOTTOM;\n        }\n        if (isHorizontal) {\n            if (refPoint.y < currentAnchors.get(Side.TOP).y || refPoint.y > currentAnchors.get(Side.BOTTOM).y) {\n                const newPoint = { x: currentAnchors.get(Side.TOP).x, y: refPoint.y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(child => {\n                        if (child instanceof SRoutingHandleImpl && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        } else {\n            if (refPoint.x < currentAnchors.get(Side.LEFT).x || refPoint.x > currentAnchors.get(Side.RIGHT).x) {\n                const newPoint = { x: refPoint.x, y: currentAnchors.get(Side.LEFT).y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(child => {\n                        if (child instanceof SRoutingHandleImpl && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        }\n    }\n\n    /**\n     * Add artificial routing points to keep all angles rectilinear.\n     *\n     * This makes edge morphing look a lot smoother, where RP positions are interpolated\n     * linearly probably resulting in non-rectilinear angles. We don't add handles for\n     * these additional RPs.\n     */\n    protected manhattanify(edge: SRoutableElementImpl, routingPoints: Point[]) {\n        for (let i = 1; i < routingPoints.length; ++i) {\n            const isVertical = Math.abs(routingPoints[i - 1].x - routingPoints[i].x) < 1;\n            const isHorizontal = Math.abs(routingPoints[i - 1].y - routingPoints[i].y) < 1;\n            if (!isVertical && !isHorizontal) {\n                routingPoints.splice(i, 0, {\n                    x: routingPoints[i - 1].x,\n                    y: routingPoints[i].y\n                });\n                ++i;\n            }\n        }\n    }\n\n    protected override calculateDefaultCorners(edge: SRoutableElementImpl, sourceAnchors: DefaultAnchors, targetAnchors: DefaultAnchors, options: ManhattanRouterOptions): Point[] {\n        const selfEdge = super.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n        if (selfEdge.length > 0)\n            return selfEdge;\n        const bestAnchors = this.getBestConnectionAnchors(edge, sourceAnchors, targetAnchors, options);\n        const sourceSide = bestAnchors.source;\n        const targetSide = bestAnchors.target;\n        const corners: Point[] = [];\n        const startPoint = sourceAnchors.get(sourceSide);\n        let endPoint = targetAnchors.get(targetSide);\n        switch (sourceSide) {\n            case Side.RIGHT:\n                switch (targetSide) {\n                    case Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case Side.RIGHT:\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: startPoint.y });\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: endPoint.y });\n                        break;\n                    case Side.LEFT:\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case Side.LEFT:\n                switch (targetSide) {\n                    case Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(Side.RIGHT);\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case Side.TOP:\n                switch (targetSide) {\n                    case Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        } else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        } else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case Side.TOP:\n                        corners.push({ x: startPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        corners.push({ x: endPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        break;\n                    case Side.BOTTOM:\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n            case Side.BOTTOM:\n                switch (targetSide) {\n                    case Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        } else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        } else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(Side.TOP);\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n        }\n        return corners;\n    }\n\n    protected getBestConnectionAnchors(edge: SRoutableElementImpl,\n                                        sourceAnchors: DefaultAnchors, targetAnchors: DefaultAnchors,\n                                        options: ManhattanRouterOptions): { source: Side, target: Side } {\n        // distance is enough\n        let sourcePoint = sourceAnchors.get(Side.RIGHT);\n        let targetPoint = targetAnchors.get(Side.LEFT);\n        if ((targetPoint.x - sourcePoint.x) > options.standardDistance)\n            return { source: Side.RIGHT, target: Side.LEFT };\n\n        sourcePoint = sourceAnchors.get(Side.LEFT);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if ((sourcePoint.x - targetPoint.x) > options.standardDistance)\n            return { source: Side.LEFT, target: Side.RIGHT };\n\n        sourcePoint = sourceAnchors.get(Side.TOP);\n        targetPoint = targetAnchors.get(Side.BOTTOM);\n        if ((sourcePoint.y - targetPoint.y) > options.standardDistance)\n            return { source: Side.TOP, target: Side.BOTTOM };\n\n        sourcePoint = sourceAnchors.get(Side.BOTTOM);\n        targetPoint = targetAnchors.get(Side.TOP);\n        if ((targetPoint.y - sourcePoint.y) > options.standardDistance)\n            return { source: Side.BOTTOM, target: Side.TOP };\n\n        // One additional point\n        sourcePoint = sourceAnchors.get(Side.RIGHT);\n        targetPoint = targetAnchors.get(Side.TOP);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: Side.RIGHT, target: Side.TOP };\n\n        targetPoint = targetAnchors.get(Side.BOTTOM);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: Side.RIGHT, target: Side.BOTTOM };\n\n        sourcePoint = sourceAnchors.get(Side.LEFT);\n        targetPoint = targetAnchors.get(Side.BOTTOM);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: Side.LEFT, target: Side.BOTTOM };\n\n        targetPoint = targetAnchors.get(Side.TOP);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: Side.LEFT, target: Side.TOP };\n\n        sourcePoint = sourceAnchors.get(Side.TOP);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: Side.TOP, target: Side.RIGHT };\n\n        targetPoint = targetAnchors.get(Side.LEFT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: Side.TOP, target: Side.LEFT };\n\n        sourcePoint = sourceAnchors.get(Side.BOTTOM);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: Side.BOTTOM, target: Side.RIGHT };\n\n        targetPoint = targetAnchors.get(Side.LEFT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: Side.BOTTOM, target: Side.LEFT };\n\n        // Two points\n        // priority NN >> EE >> NE >> NW >> SE >> SW\n        sourcePoint = sourceAnchors.get(Side.TOP);\n        targetPoint = targetAnchors.get(Side.TOP);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.y - targetPoint.y) < 0) {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > ((sourceAnchors.bounds.width + options.standardDistance) / 2))\n                    return { source: Side.TOP, target: Side.TOP };\n            } else {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > (targetAnchors.bounds.width / 2))\n                    return { source: Side.TOP, target: Side.TOP };\n            }\n        }\n\n        sourcePoint = sourceAnchors.get(Side.RIGHT);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.x - targetPoint.x) > 0) {\n                if (Math.abs(sourcePoint.y - targetPoint.y) > ((sourceAnchors.bounds.height + options.standardDistance) / 2))\n                    return { source: Side.RIGHT, target: Side.RIGHT };\n            } else if (Math.abs(sourcePoint.y - targetPoint.y) > (targetAnchors.bounds.height / 2))\n                return { source: Side.RIGHT, target: Side.RIGHT };\n        }\n\n        // Secondly, judge NE NW is available\n        sourcePoint = sourceAnchors.get(Side.TOP);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint))\n            return { source: Side.TOP, target: Side.RIGHT };\n\n        targetPoint = targetAnchors.get(Side.LEFT);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint))\n            return { source: Side.TOP, target: Side.LEFT };\n\n        // Finally, judge SE SW is available\n        sourcePoint = sourceAnchors.get(Side.BOTTOM);\n        targetPoint = targetAnchors.get(Side.RIGHT);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint))\n            return { source: Side.BOTTOM, target: Side.RIGHT };\n\n        targetPoint = targetAnchors.get(Side.LEFT);\n        if (!Bounds.includes(targetAnchors.bounds, sourcePoint) && !Bounds.includes(sourceAnchors.bounds, targetPoint))\n            return { source: Side.BOTTOM, target: Side.LEFT };\n\n        // Only to return to the\n        return { source: Side.RIGHT, target: Side.BOTTOM };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SChildElementImpl, SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { FluentIterable } from '../../utils/iterable';\nimport { SShapeElementImpl } from '../bounds/model';\nimport { deletableFeature } from '../edit/delete';\nimport { Selectable, selectFeature } from '../select/model';\nimport { Hoverable, hoverFeedbackFeature } from '../hover/model';\nimport { moveFeature } from '../move/model';\n\nexport abstract class SRoutableElementImpl extends SChildElementImpl {\n\n    routerKind?: string;\n    routingPoints: Point[] = [];\n    sourceId: string;\n    targetId: string;\n    sourceAnchorCorrection?: number;\n    targetAnchorCorrection?: number;\n\n    get source(): SConnectableElementImpl | undefined {\n        return this.index.getById(this.sourceId) as SConnectableElementImpl;\n    }\n\n    get target(): SConnectableElementImpl | undefined {\n        return this.index.getById(this.targetId) as SConnectableElementImpl;\n    }\n\n    get bounds(): Bounds {\n        // this should also work for splines, which have the convex hull property\n        return this.routingPoints.reduce<Bounds>((bounds, routingPoint) => Bounds.combine(bounds, {\n            x: routingPoint.x,\n            y: routingPoint.y,\n            width: 0,\n            height: 0\n        }), Bounds.EMPTY);\n    }\n}\n\nexport const connectableFeature = Symbol('connectableFeature');\n\nexport interface Connectable extends SModelExtension {\n    canConnect(routable: SRoutableElementImpl, role: 'source' | 'target'): boolean;\n}\n\nexport function isConnectable<T extends SModelElementImpl>(element: T): element is Connectable & T {\n    return element.hasFeature(connectableFeature) && (element as any).canConnect;\n}\n\nexport function getAbsoluteRouteBounds(model: Readonly<SRoutableElementImpl>, route: Point[] = model.routingPoints): Bounds {\n    let bounds = getRouteBounds(route);\n    let current: SModelElementImpl = model;\n    while (current instanceof SChildElementImpl) {\n        const parent = current.parent;\n        bounds = parent.localToParent(bounds);\n        current = parent;\n    }\n    return bounds;\n}\n\nexport function getRouteBounds(route: Point[]): Bounds {\n    const bounds = { x: NaN, y: NaN, width: 0, height: 0};\n    for (const point of route) {\n        if (isNaN(bounds.x)) {\n            bounds.x = point.x;\n            bounds.y = point.y;\n        } else {\n            if (point.x < bounds.x) {\n                bounds.width += bounds.x - point.x;\n                bounds.x = point.x;\n            } else if (point.x > bounds.x + bounds.width) {\n                bounds.width = point.x - bounds.x;\n            }\n            if (point.y < bounds.y) {\n                bounds.height += bounds.y - point.y;\n                bounds.y = point.y;\n            } else if (point.y > bounds.y + bounds.height) {\n                bounds.height = point.y - bounds.y;\n            }\n        }\n    }\n    return bounds;\n}\n\n/**\n * A connectable element is one that can have outgoing and incoming edges, i.e. it can be the source\n * or target element of an edge. There are two kinds of connectable elements: nodes (`SNode`) and\n * ports (`SPort`). A node represents a main entity, while a port is a connection point inside a node.\n */\nexport abstract class SConnectableElementImpl extends SShapeElementImpl implements Connectable {\n\n    get anchorKind(): string | undefined{\n         return undefined;\n     }\n\n    strokeWidth: number = 0;\n\n    /**\n     * The incoming edges of this connectable element. They are resolved by the index, which must\n     * be an `SGraphIndex` for efficient lookup.\n     */\n    get incomingEdges(): FluentIterable<SRoutableElementImpl> {\n        const allEdges = this.index.all().filter(e => e instanceof SRoutableElementImpl) as FluentIterable<SRoutableElementImpl>;\n        return allEdges.filter(e => e.targetId === this.id);\n    }\n\n    /**\n     * The outgoing edges of this connectable element. They are resolved by the index, which must\n     * be an `SGraphIndex` for efficient lookup.\n     */\n    get outgoingEdges(): FluentIterable<SRoutableElementImpl> {\n        const allEdges = this.index.all().filter(e => e instanceof SRoutableElementImpl) as FluentIterable<SRoutableElementImpl>;\n        return allEdges.filter(e => e.sourceId === this.id);\n    }\n\n    canConnect(routable: SRoutableElementImpl, role: 'source' | 'target') {\n        return true;\n    }\n}\n\n\nexport type RoutingHandleKind = 'junction' | 'line' | 'source' | 'target' | 'manhattan-50%' |\n    'bezier-control-after' | 'bezier-control-before' | 'bezier-junction' | 'bezier-add' | 'bezier-remove';\n\nexport class SRoutingHandleImpl extends SChildElementImpl implements Selectable, Hoverable {\n    static readonly DEFAULT_FEATURES = [selectFeature, moveFeature, hoverFeedbackFeature];\n\n    /**\n     * 'junction' is a point where two line segments meet,\n     * 'line' is a volatile handle placed on a line segment,\n     * 'source' and 'target' are the respective anchors.\n     */\n    kind: RoutingHandleKind;\n    /** The actual routing point index (junction) or the previous point index (line). */\n    pointIndex: number;\n    /** Whether the routing point is being dragged. */\n    editMode: boolean = false;\n\n    hoverFeedback: boolean = false;\n    selected: boolean = false;\n    danglingAnchor?: SDanglingAnchorImpl;\n\n    /**\n     * SRoutingHandles are created using the constructor, so we hard-wire the\n     * default features\n     */\n    override hasFeature(feature: symbol): boolean {\n        return SRoutingHandleImpl.DEFAULT_FEATURES.indexOf(feature) !== -1;\n    }\n}\n\nexport class SDanglingAnchorImpl extends SConnectableElementImpl {\n    static readonly DEFAULT_FEATURES = [deletableFeature];\n\n    original?: SModelElementImpl;\n    override type = 'dangling-anchor';\n\n    constructor() {\n        super();\n        this.size = { width: 0, height: 0 };\n    }\n}\n\nexport const edgeInProgressID = 'edge-in-progress';\nexport const edgeInProgressTargetHandleID = edgeInProgressID + '-target-anchor';\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/** @deprecated Use `SRoutableElementImpl` instead. */\nexport const SRoutableElement = SRoutableElementImpl;\n\n\n/** @deprecated Use `SConnectableElementImpl` instead. */\nexport const SConnectableElement = SConnectableElementImpl;\n\n\n/** @deprecated Use `SRoutingHandleImpl` instead. */\nexport const SRoutingHandle = SRoutingHandleImpl;\n\n/** @deprecated Use `SDanglingAnchorImpl` instead. */\nexport const SDanglingAnchor = SDanglingAnchorImpl;\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { IAnchorComputer, ELLIPTIC_ANCHOR_KIND, RECTANGULAR_ANCHOR_KIND, DIAMOND_ANCHOR_KIND } from \"./anchor\";\nimport { SConnectableElementImpl } from \"./model\";\nimport { PointToPointLine, Diamond, intersection } from \"../../utils/geometry\";\nimport { injectable } from \"inversify\";\nimport { PolylineEdgeRouter } from \"./polyline-edge-router\";\nimport { almostEquals, Bounds, Point } from \"sprotty-protocol/lib/utils/geometry\";\n\n@injectable()\nexport class EllipseAnchor implements IAnchorComputer {\n\n    get kind() {\n        return PolylineEdgeRouter.KIND + ':' + ELLIPTIC_ANCHOR_KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number = 0): Point {\n        const bounds = connectable.bounds;\n        const c = Bounds.center(bounds);\n        const dx = c.x - refPoint.x;\n        const dy = c.y - refPoint.y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const normX = (dx / distance) || 0;\n        const normY = (dy / distance) || 0;\n        return {\n            x: c.x - normX * (0.5 * bounds.width + offset),\n            y: c.y - normY * (0.5 * bounds.height + offset)\n        };\n    }\n}\n\n@injectable()\nexport class RectangleAnchor implements IAnchorComputer {\n\n    get kind() {\n        return PolylineEdgeRouter.KIND + ':' + RECTANGULAR_ANCHOR_KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number = 0): Point {\n        const bounds = connectable.bounds;\n        const c = Bounds.center(bounds);\n        const finder = new NearestPointFinder(c, refPoint);\n        if (!almostEquals(c.y, refPoint.y)) {\n            const xTop = this.getXIntersection(bounds.y, c, refPoint);\n            if (xTop >= bounds.x && xTop <= bounds.x + bounds.width)\n                finder.addCandidate(xTop, bounds.y - offset);\n            const xBottom = this.getXIntersection(bounds.y + bounds.height, c, refPoint);\n            if (xBottom >= bounds.x && xBottom <= bounds.x + bounds.width)\n                finder.addCandidate(xBottom, bounds.y + bounds.height + offset);\n        }\n        if (!almostEquals(c.x, refPoint.x)) {\n            const yLeft = this.getYIntersection(bounds.x, c, refPoint);\n            if (yLeft >= bounds.y && yLeft <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x - offset, yLeft);\n            const yRight = this.getYIntersection(bounds.x + bounds.width, c, refPoint);\n            if (yRight >= bounds.y && yRight <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x + bounds.width + offset, yRight);\n        }\n        return finder.best;\n    }\n\n    protected getXIntersection(yIntersection: number, centerPoint: Point, point: Point): number {\n        const t = (yIntersection - centerPoint.y) / (point.y - centerPoint.y);\n        return (point.x - centerPoint.x) * t + centerPoint.x;\n    }\n\n    protected getYIntersection(xIntersection: number, centerPoint: Point, point: Point): number {\n        const t = (xIntersection - centerPoint.x) / (point.x - centerPoint.x);\n        return (point.y - centerPoint.y) * t + centerPoint.y;\n    }\n}\n\nclass NearestPointFinder {\n    protected currentBest: Point | undefined;\n    protected currentDist: number = -1;\n\n    constructor(protected centerPoint: Point, protected refPoint: Point) {\n    }\n\n    addCandidate(x: number, y: number) {\n        const dx = this.refPoint.x - x;\n        const dy = this.refPoint.y - y;\n        const dist = dx * dx + dy * dy;\n        if (this.currentDist < 0 || dist < this.currentDist) {\n            this.currentBest = {\n                x: x,\n                y: y\n            };\n            this.currentDist = dist;\n        }\n    }\n\n    get best(): Point {\n        if (this.currentBest === undefined)\n            return this.centerPoint;\n        else\n            return this.currentBest;\n    }\n}\n\n@injectable()\nexport class DiamondAnchor implements IAnchorComputer {\n\n    get kind() {\n        return PolylineEdgeRouter.KIND + ':' + DIAMOND_ANCHOR_KIND;\n    }\n\n    getAnchor(connectable: SConnectableElementImpl, refPoint: Point, offset: number): Point {\n        const bounds = connectable.bounds;\n        const referenceLine = new PointToPointLine(Bounds.center(bounds), refPoint);\n        const closestDiamondSide = new Diamond(bounds).closestSideLine(refPoint);\n        const anchorPoint = intersection(closestDiamondSide, referenceLine);\n        return Point.shiftTowards(anchorPoint, refPoint, offset);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { angleBetweenPoints, Bounds, centerOfLine, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SRoutingHandleImpl } from \"./model\";\nimport { ResolvedHandleMove } from \"../move/move\";\nimport { AnchorComputerRegistry } from \"./anchor\";\nimport { AbstractEdgeRouter, LinearRouteOptions } from \"./abstract-edge-router\";\nimport { SRoutableElementImpl } from \"./model\";\nimport { RoutedPoint } from \"./routing\";\n\nexport interface PolylineRouteOptions extends LinearRouteOptions {\n    /** The angle in radians below which a routing handle is removed. */\n    removeAngleThreshold: number;\n}\n\n@injectable()\nexport class PolylineEdgeRouter extends AbstractEdgeRouter {\n\n    @inject(AnchorComputerRegistry) override anchorRegistry: AnchorComputerRegistry;\n\n    static readonly KIND = 'polyline';\n\n    get kind() {\n        return PolylineEdgeRouter.KIND;\n    }\n\n    protected getOptions(edge: SRoutableElementImpl): PolylineRouteOptions {\n        return {\n            minimalPointDistance: 2,\n            removeAngleThreshold: 0.1,\n            standardDistance: 20,\n            selfEdgeOffset: 0.25\n        };\n    }\n\n    route(edge: SRoutableElementImpl): RoutedPoint[] {\n        const source = edge.source;\n        const target = edge.target;\n        if (source === undefined || target === undefined) {\n            return [];\n        }\n\n        let sourceAnchor: Point;\n        let targetAnchor: Point;\n        const options = this.getOptions(edge);\n        const routingPoints = edge.routingPoints.length > 0\n            ? edge.routingPoints\n            : [];\n        this.cleanupRoutingPoints(edge, routingPoints, false, false);\n        const rpCount = routingPoints !== undefined ? routingPoints.length : 0;\n        if (rpCount === 0) {\n            // Use the target center as start anchor reference\n            const startRef = Bounds.center(target.bounds);\n            sourceAnchor = this.getTranslatedAnchor(source, startRef, target.parent, edge, edge.sourceAnchorCorrection);\n            // Use the source center as end anchor reference\n            const endRef = Bounds.center(source.bounds);\n            targetAnchor = this.getTranslatedAnchor(target, endRef, source.parent, edge, edge.targetAnchorCorrection);\n        } else {\n            // Use the first routing point as start anchor reference\n            const p0 = routingPoints[0];\n            sourceAnchor = this.getTranslatedAnchor(source, p0, edge.parent, edge, edge.sourceAnchorCorrection);\n            // Use the last routing point as end anchor reference\n            const pn = routingPoints[rpCount - 1];\n            targetAnchor = this.getTranslatedAnchor(target, pn, edge.parent, edge, edge.targetAnchorCorrection);\n        }\n\n        const result: RoutedPoint[] = [];\n        result.push({ kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y });\n        for (let i = 0; i < rpCount; i++) {\n            const p = routingPoints[i];\n            if (i > 0 && i < rpCount - 1\n                || i === 0 && Point.maxDistance(sourceAnchor, p) >= options.minimalPointDistance + (edge.sourceAnchorCorrection || 0)\n                || i === rpCount - 1 && Point.maxDistance(p, targetAnchor) >= options.minimalPointDistance + (edge.targetAnchorCorrection || 0)) {\n                result.push({ kind: 'linear', x: p.x, y: p.y, pointIndex: i });\n            }\n        }\n        result.push({ kind: 'target', x: targetAnchor.x, y: targetAnchor.y });\n            return this.filterEditModeHandles(result, edge, options);\n    }\n\n    /**\n     * Remove routed points that are in edit mode and for which the angle between the preceding and\n     * following points falls below a threshold.\n     */\n    protected filterEditModeHandles(route: RoutedPoint[], edge: SRoutableElementImpl, options: PolylineRouteOptions): RoutedPoint[] {\n        if (edge.children.length === 0)\n            return route;\n\n        let i = 0;\n        while (i < route.length) {\n            const curr = route[i];\n            if (curr.pointIndex !== undefined) {\n                const handle: SRoutingHandleImpl | undefined = edge.children.find(child =>\n                    child instanceof SRoutingHandleImpl && child.kind === 'junction' && child.pointIndex === curr.pointIndex) as any;\n                if (handle !== undefined && handle.editMode && i > 0 && i < route.length - 1) {\n                    const prev = route[i - 1], next = route[i + 1];\n                    const prevDiff: Point = { x: prev.x - curr.x, y: prev.y - curr.y };\n                    const nextDiff: Point = { x: next.x - curr.x, y: next.y - curr.y };\n                    const angle = angleBetweenPoints(prevDiff, nextDiff);\n                    if (Math.abs(Math.PI - angle) < options.removeAngleThreshold) {\n                        route.splice(i, 1);\n                        continue;\n                    }\n                }\n            }\n            i++;\n        }\n        return route;\n    }\n\n    createRoutingHandles(edge: SRoutableElementImpl): void {\n        const rpCount = edge.routingPoints.length;\n        this.addHandle(edge, 'source', 'routing-point', -2);\n        this.addHandle(edge, 'line', 'volatile-routing-point', -1);\n        for (let i = 0; i < rpCount; i++) {\n            this.addHandle(edge, 'junction', 'routing-point', i);\n            this.addHandle(edge, 'line', 'volatile-routing-point', i);\n        }\n        this.addHandle(edge, 'target', 'routing-point', rpCount);\n    }\n\n    getInnerHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl) {\n        if (handle.kind === 'line') {\n            const { start, end } = this.findRouteSegment(edge, route, handle.pointIndex);\n            if (start !== undefined && end !== undefined)\n                return centerOfLine(start, end);\n        }\n        return undefined;\n    }\n\n    applyInnerHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]) {\n        moves.forEach(move => {\n            const handle = move.handle;\n            const points = edge.routingPoints;\n            let index = handle.pointIndex;\n            if (handle.kind === 'line') {\n                // Upgrade to a proper routing point\n                handle.kind = 'junction';\n                handle.type = 'routing-point';\n                points.splice(index + 1, 0, move.fromPosition || points[Math.max(index, 0)]);\n                edge.children.forEach(child => {\n                    if (child instanceof SRoutingHandleImpl && (child === handle || child.pointIndex > index))\n                        child.pointIndex++;\n                });\n                this.addHandle(edge, 'line', 'volatile-routing-point', index);\n                index++;\n                this.addHandle(edge, 'line', 'volatile-routing-point', index);\n            }\n            if (index >= 0 && index < points.length) {\n                points[index] = move.toPosition;\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2018-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, multiInject, optional } from \"inversify\";\nimport { Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SParentElementImpl } from \"../../base/model/smodel\";\nimport { TYPES } from \"../../base/types\";\nimport { findArgValue, IViewArgs } from \"../../base/views/view\";\nimport { InstanceRegistry } from \"../../utils/registry\";\nimport { ResolvedHandleMove } from \"../move/move\";\nimport { SRoutingHandleImpl } from \"../routing/model\";\nimport { SConnectableElementImpl, SRoutableElementImpl } from \"./model\";\nimport { PolylineEdgeRouter } from \"./polyline-edge-router\";\n\n/**\n * A point describing the shape of an edge.\n *\n * The <code>RoutedPoints</code> of an edge are derived from the <code>routingPoints</code>\n * which plain <code>Points</code> stored in the SModel by the <code>IEdgeRouter</code>.\n * As opposed to the originals, they also contain the source and target anchor points.\n * The router may also add or remove points in order to satisfy the constraints\n * the constraints of the routing algorithm or in order to to filter out points which are\n * obsolete, e.g. to close to each other.\n */\nexport interface RoutedPoint extends Point {\n    kind: 'source' | 'target' | 'linear' | 'bezier-control-before' | 'bezier-junction' | 'bezier-control-after'\n    pointIndex?: number\n}\n\n/**\n * Stores the state of an edge at a specific time.\n */\nexport interface EdgeSnapshot {\n    routingHandles: SRoutingHandleImpl[]\n    routingPoints: Point[]\n    routedPoints: RoutedPoint[]\n    router: IEdgeRouter\n    source?: SConnectableElementImpl\n    target?: SConnectableElementImpl\n}\n\nexport interface EdgeMemento {\n    edge: SRoutableElementImpl\n    before: EdgeSnapshot\n    after: EdgeSnapshot\n}\n\n/**\n * Encapsulates the logic of how the actual shape of an edge is derived from its routing points,\n * and how the user can modify it.\n */\nexport interface IEdgeRouter {\n\n    readonly kind: string;\n\n    /**\n     * Calculates the route of the given edge.\n     */\n    route(edge: SRoutableElementImpl): RoutedPoint[]\n\n    /**\n     * Calculates a point on the edge\n     *\n     * @param t a value between 0 (sourceAnchor) and 1 (targetAnchor)\n     * @returns the point or undefined if t is out of bounds or it cannot be computed\n     */\n    pointAt(edge: SRoutableElementImpl, t: number): Point | undefined\n\n    /**\n     * Calculates the derivative at a point on the edge.\n     *\n     * @param t a value between 0 (sourceAnchor) and 1 (targetAnchor)\n     * @returns the point or undefined if t is out of bounds or it cannot be computed\n     */\n    derivativeAt(edge: SRoutableElementImpl, t: number): Point | undefined\n\n    /**\n     * Retuns the position of the given handle based on the routing points of the edge.\n     */\n    getHandlePosition(edge: SRoutableElementImpl, route: RoutedPoint[], handle: SRoutingHandleImpl): Point | undefined\n\n    /**\n     * Creates the routing handles for the given target.\n     */\n    createRoutingHandles(edge: SRoutableElementImpl): void\n\n    /**\n     * Updates the routing points and handles of the given edge with regard to the given moves.\n     */\n    applyHandleMoves(edge: SRoutableElementImpl, moves: ResolvedHandleMove[]): void\n\n    /**\n     * Updates the routing points and handles of the given edge with regard to the given moves.\n     */\n    applyReconnect(edge: SRoutableElementImpl, newSourceId?: string, newTargetId?: string): void\n\n    /**\n     * Remove/add points in order to keep routing constraints consistent, or reset RPs on reconnect.\n     */\n    cleanupRoutingPoints(edge: SRoutableElementImpl, routingPoints: Point[], updateHandles: boolean, addRoutingPoints: boolean): void;\n    /**\n     * Creates a snapshot of the given edge, storing all the data needed to restore it to\n     * its current state.\n     */\n    takeSnapshot(edge: SRoutableElementImpl): EdgeSnapshot;\n\n    /**\n     * Applies a snapshot to the current edge.\n     */\n    applySnapshot(edge: SRoutableElementImpl, edgeSnapshot: EdgeSnapshot): void;\n}\n\nexport interface IMultipleEdgesRouter extends IEdgeRouter {\n    routeAll(\n        edges: SRoutableElementImpl[],\n        parent: Readonly<SParentElementImpl>\n    ): EdgeRouting;\n}\n\nfunction isMultipleEdgesRouter(\n    router: IEdgeRouter | IMultipleEdgesRouter\n): router is IMultipleEdgesRouter {\n    return (router as IMultipleEdgesRouter).routeAll !== undefined;\n}\n\n/** A postprocessor that is applied to all routes, once they are computed. */\nexport interface IEdgeRoutePostprocessor {\n    apply(routing: EdgeRouting): void;\n}\n\n@injectable()\nexport class EdgeRouterRegistry extends InstanceRegistry<IEdgeRouter> {\n\n    @multiInject(TYPES.IEdgeRoutePostprocessor) @optional()\n    protected postProcessors: IEdgeRoutePostprocessor[];\n\n    constructor(@multiInject(TYPES.IEdgeRouter) edgeRouters: IEdgeRouter[]) {\n        super();\n        edgeRouters.forEach(router => this.register(router.kind, router));\n    }\n\n    protected get defaultKind() {\n        return PolylineEdgeRouter.KIND;\n    }\n\n    override get(kind: string | undefined): IEdgeRouter {\n        return super.get(kind || this.defaultKind);\n    }\n\n    /**\n     * Computes the routes of all edges contained by the specified `parent`.\n     * After all routes are available, it'll apply the registered `EdgeRoutePostProcessors`.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    routeAllChildren(parent: Readonly<SParentElementImpl>): EdgeRouting {\n        const routing = this.doRouteAllChildren(parent);\n        for (const postProcessor of this.postProcessors) {\n            postProcessor.apply(routing);\n        }\n        return routing;\n    }\n\n    /**\n     * Recursively traverses the children of `parent`, collects children grouped by router kind,\n     * and then routes them either.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    protected doRouteAllChildren(parent: Readonly<SParentElementImpl>) {\n        const routing = new EdgeRouting();\n        const routersEdges = new Map<string, SRoutableElementImpl[]>();\n\n        const elementsToProcess = [parent];\n        while (elementsToProcess.length > 0) {\n            const element = elementsToProcess.shift() as SParentElementImpl;\n            for (const child of element.children) {\n                if (child instanceof SRoutableElementImpl) {\n                    const routerKind = child.routerKind || this.defaultKind;\n                    if (routersEdges.has(routerKind)) {\n                        (routersEdges.get(routerKind) as SRoutableElementImpl[]).push(child);\n                    } else {\n                        routersEdges.set(routerKind, [child]);\n                    }\n                }\n                if (child instanceof SParentElementImpl) {\n                    elementsToProcess.push(child);\n                }\n            }\n        }\n\n        routersEdges.forEach((edges, routerKind) => {\n            const childRouter = this.get(routerKind);\n            if (isMultipleEdgesRouter(childRouter)) {\n                routing.setAll(childRouter.routeAll(edges, parent));\n            } else {\n                for (const edge of  edges) {\n                    routing.set(edge.id, this.route(edge));\n                }\n            }\n        });\n\n        return routing;\n    }\n\n    /**\n     * Computes or obtains the route of a single edge.\n     * @param edge the edge to be routed\n     * @param args arguments that may contain an `EdgeRouting` already\n     * @returns the route of the specified `edge`\n     */\n    route(edge: Readonly<SRoutableElementImpl>, args?: IViewArgs): RoutedPoint[] {\n        const edgeRouting = findArgValue<EdgeRouting>(args, 'edgeRouting');\n        if (edgeRouting) {\n            const route = edgeRouting.get(edge.id);\n            if (route) {\n                return route;\n            }\n        }\n        const router = this.get(edge.routerKind);\n        return router.route(edge);\n    }\n\n}\n\n/** Any object that contains a routing, such as an argument object passed to views for rendering. */\nexport interface EdgeRoutingContainer {\n    edgeRouting: EdgeRouting;\n}\n\n/**\n * Map of edges and their computed routes.\n */\nexport class EdgeRouting {\n\n    protected routesMap = new Map<string, RoutedPoint[]>();\n\n    set(routableId: string, route: RoutedPoint[]): void {\n        this.routesMap.set(routableId, route);\n    }\n\n    setAll(otherRoutes: EdgeRouting): void {\n        otherRoutes.routes.forEach((route, routableId) => this.set(routableId, route));\n    }\n\n    get(routableId: string): RoutedPoint[] | undefined {\n        return this.routesMap.get(routableId);\n    }\n\n    get routes() {\n        return this.routesMap;\n    }\n\n}\n","/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { IViewArgs, IView, RenderingContext } from '../../base/views/view';\nimport { SRoutableElementImpl, getAbsoluteRouteBounds } from './model';\n\n@injectable()\nexport abstract class RoutableView implements IView {\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    isVisible(model: Readonly<SRoutableElementImpl>, route: Point[], context: RenderingContext): boolean {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (route.length === 0) {\n            // We should hide only if we know the element's route\n            return true;\n        }\n        const ab = getAbsoluteRouteBounds(model, route);\n        const canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    }\n\n    abstract render(model: Readonly<SRoutableElementImpl>, context: RenderingContext, args?: IViewArgs): VNode | undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { SelectCommand, SelectAllCommand, SelectKeyboardListener, SelectMouseListener, GetSelectionCommand } from \"./select\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\n\nconst selectModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureCommand({ bind, isBound }, SelectCommand);\n    configureCommand({ bind, isBound }, SelectAllCommand);\n    configureCommand({ bind, isBound }, GetSelectionCommand);\n    bind(SelectKeyboardListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(SelectKeyboardListener);\n    bind(SelectMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(SelectMouseListener);\n});\n\nexport default selectModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\n\nexport const selectFeature = Symbol('selectFeature');\n\nexport interface Selectable extends SModelExtension {\n    selected: boolean\n}\n\nexport function isSelectable(element: SModelElementImpl): element is SModelElementImpl & Selectable {\n    return element.hasFeature(selectFeature);\n}\n\nexport function isSelected(element: SModelElementImpl | undefined): element is SModelElementImpl & Selectable {\n    return element !== undefined && isSelectable(element) && element.selected;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, optional } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport {\n    Action, BringToFrontAction, generateRequestId, RequestAction, ResponseAction\n} from 'sprotty-protocol/lib/actions';\nimport * as protocol from \"sprotty-protocol/lib/actions\";\nimport { Command, CommandExecutionContext } from '../../base/commands/command';\nimport { ModelRequestCommand } from '../../base/commands/request-command';\nimport { SChildElementImpl, SModelElementImpl, SModelRootImpl, SParentElementImpl } from '../../base/model/smodel';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { TYPES } from '../../base/types';\nimport { KeyListener } from '../../base/views/key-tool';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { setClass } from '../../base/views/vnode-utils';\nimport { isCtrlOrCmd } from '../../utils/browser';\nimport { toArray } from '../../utils/iterable';\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { ButtonHandlerRegistry } from '../button/button-handler';\nimport { SButtonImpl } from '../button/model';\nimport { SwitchEditModeAction } from '../edit/edit-routing';\nimport { SRoutingHandleImpl } from '../routing/model';\nimport { SRoutableElementImpl } from '../routing/model';\nimport { findViewportScrollbar } from '../viewport/scroll';\nimport { isSelectable, Selectable } from './model';\n\n@injectable()\nexport class SelectCommand extends Command {\n    static readonly KIND = protocol.SelectAction.KIND;\n\n    protected selected: (SChildElementImpl & Selectable)[] = [];\n    protected deselected: (SChildElementImpl & Selectable)[] = [];\n\n    constructor(@inject(TYPES.Action) public action: protocol.SelectAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRootImpl {\n        const model = context.root;\n        this.action.selectedElementsIDs.forEach(id => {\n            const element = model.index.getById(id);\n            if (element instanceof SChildElementImpl && isSelectable(element)) {\n                this.selected.push(element);\n            }\n        });\n        this.action.deselectedElementsIDs.forEach(id => {\n            const element = model.index.getById(id);\n            if (element instanceof SChildElementImpl && isSelectable(element)) {\n                this.deselected.push(element);\n            }\n        });\n        return this.redo(context);\n    }\n\n    undo(context: CommandExecutionContext): SModelRootImpl {\n        for (const element of this.selected) {\n            element.selected = false;\n        }\n        for (const element of this.deselected) {\n            element.selected = true;\n        }\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): SModelRootImpl {\n        for (const element of this.deselected) {\n            element.selected = false;\n        }\n        for (const element of this.selected) {\n            element.selected = true;\n        }\n        return context.root;\n    }\n}\n\n@injectable()\nexport class SelectAllCommand extends Command {\n    static readonly KIND = protocol.SelectAllAction.KIND;\n\n    protected previousSelection: Record<string, boolean> = {};\n\n    constructor(@inject(TYPES.Action) protected readonly action: protocol.SelectAllAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRootImpl {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    }\n\n    protected selectAll(element: SParentElementImpl, newState: boolean): void {\n        if (isSelectable(element)) {\n            this.previousSelection[element.id] = element.selected;\n            element.selected = newState;\n        }\n        for (const child of element.children) {\n            this.selectAll(child, newState);\n        }\n    }\n\n    undo(context: CommandExecutionContext): SModelRootImpl {\n        const index = context.root.index;\n        Object.keys(this.previousSelection).forEach(id => {\n            const element = index.getById(id);\n            if (element !== undefined && isSelectable(element))\n                element.selected = this.previousSelection[id];\n        });\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): SModelRootImpl {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    }\n}\n\nexport class SelectMouseListener extends MouseListener {\n\n    @inject(ButtonHandlerRegistry) @optional() protected buttonHandlerRegistry: ButtonHandlerRegistry;\n\n    wasSelected = false;\n    hasDragged = false;\n\n    override mouseDown(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        if (event.button !== 0) {\n            return [];\n        }\n        const buttonHandled = this.handleButton(target, event);\n        if (buttonHandled) {\n            return buttonHandled;\n        }\n        const selectableTarget = findParentByFeature(target, isSelectable);\n        if (selectableTarget !== undefined || target instanceof SModelRootImpl) {\n            this.hasDragged = false;\n        }\n        if (selectableTarget !== undefined) {\n            let deselectedElements: SModelElementImpl[] = [];\n            // multi-selection?\n            if (!isCtrlOrCmd(event)) {\n                deselectedElements = this.collectElementsToDeselect(target, selectableTarget);\n            }\n            if (selectableTarget !== undefined) {\n                if (!selectableTarget.selected) {\n                    this.wasSelected = false;\n                    return this.handleSelectTarget(selectableTarget, deselectedElements, event);\n                } else if (isCtrlOrCmd(event)) {\n                    this.wasSelected = false;\n                    return this.handleDeselectTarget(selectableTarget, event);\n                } else {\n                    this.wasSelected = true;\n                }\n            } else {\n                return this.handleDeselectAll(deselectedElements, event);\n            }\n        }\n        return [];\n    }\n\n    protected collectElementsToDeselect(target: SModelElementImpl, selectableTarget: (SModelElementImpl & Selectable) | undefined): SModelElementImpl[] {\n        return toArray(target.root.index.all()\n        .filter(element => isSelectable(element) && element.selected\n            && !(selectableTarget instanceof SRoutingHandleImpl && element === selectableTarget.parent as SModelElementImpl)));\n    }\n\n    protected handleButton(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] | undefined {\n        if (this.buttonHandlerRegistry !== undefined && target instanceof SButtonImpl && target.enabled) {\n            const buttonHandler = this.buttonHandlerRegistry.get(target.type);\n            if (buttonHandler !== undefined) {\n                return buttonHandler.buttonPressed(target);\n            }\n        }\n        return undefined;\n    }\n\n    protected handleSelectTarget(selectableTarget: SModelElementImpl & Selectable, deselectedElements: SModelElementImpl[], event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        result.push(protocol.SelectAction.create({ selectedElementsIDs: [selectableTarget.id], deselectedElementsIDs: deselectedElements.map(e => e.id) }));\n        result.push(BringToFrontAction.create([selectableTarget.id]));\n        const routableDeselect = deselectedElements.filter(e => e instanceof SRoutableElementImpl).map(e => e.id);\n        if (selectableTarget instanceof SRoutableElementImpl) {\n            result.push(SwitchEditModeAction.create({ elementsToActivate: [selectableTarget.id], elementsToDeactivate: routableDeselect }));\n        } else if (routableDeselect.length > 0) {\n            result.push(SwitchEditModeAction.create({ elementsToDeactivate: routableDeselect }));\n        }\n        return result;\n    }\n\n    protected handleDeselectTarget(selectableTarget: SModelElementImpl & Selectable, event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        result.push(protocol.SelectAction.create({ selectedElementsIDs: [], deselectedElementsIDs: [selectableTarget.id] }));\n        if (selectableTarget instanceof SRoutableElementImpl) {\n            result.push(SwitchEditModeAction.create({ elementsToDeactivate: [selectableTarget.id] }));\n        }\n        return result;\n    }\n\n    protected handleDeselectAll(deselectedElements: SModelElementImpl[], event: MouseEvent): (Action | Promise<Action>)[] {\n        const result: Action[] = [];\n        result.push(protocol.SelectAction.create({ selectedElementsIDs: [], deselectedElementsIDs: deselectedElements.map(e => e.id) }));\n        const routableDeselect = deselectedElements.filter(e => e instanceof SRoutableElementImpl).map(e => e.id);\n        if (routableDeselect.length > 0) {\n            result.push(SwitchEditModeAction.create({ elementsToDeactivate: routableDeselect }));\n        }\n        return result;\n    }\n\n    override mouseMove(target: SModelElementImpl, event: MouseEvent): Action[] {\n        this.hasDragged = true;\n        return [];\n    }\n\n    override mouseUp(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        if (event.button === 0) {\n            if (!this.hasDragged) {\n                const selectableTarget = findParentByFeature(target, isSelectable);\n                if (selectableTarget !== undefined) {\n                    if (this.wasSelected) {\n                        return [protocol.SelectAction.create({selectedElementsIDs:[selectableTarget.id],deselectedElementsIDs:[]})];\n                    }\n                } else if (target instanceof SModelRootImpl && !findViewportScrollbar(event)) {\n                    // Mouse up on root but not over ViewPort's scroll bars > deselect all\n                    return this.handleDeselectAll(this.collectElementsToDeselect(target, undefined), event);\n                }\n            }\n        }\n        this.hasDragged = false;\n        return [];\n    }\n\n    override decorate(vnode: VNode, element: SModelElementImpl): VNode {\n        const selectableTarget = findParentByFeature(element, isSelectable);\n        if (selectableTarget !== undefined) {\n            setClass(vnode, 'selected', selectableTarget.selected);\n        }\n        return vnode;\n    }\n}\n\n@injectable()\nexport class GetSelectionCommand extends ModelRequestCommand {\n    static readonly KIND = protocol.GetSelectionAction.KIND;\n\n    protected previousSelection: Record<string, boolean> = {};\n\n    constructor(@inject(TYPES.Action) protected readonly action: protocol.GetSelectionAction) {\n        super();\n    }\n\n    protected retrieveResult(context: CommandExecutionContext): ResponseAction {\n        const selection = context.root.index.all()\n            .filter(e => isSelectable(e) && e.selected)\n            .map(e => e.id);\n        return SelectionResult.create(toArray(selection), this.action.requestId);\n    }\n\n}\n\nexport class SelectKeyboardListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'KeyA', 'ctrlCmd')) {\n            return [ protocol.SelectAllAction.create()];\n        }\n        return [];\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SelectAction implements Action, protocol.SelectAction {\n    static readonly KIND = 'elementSelected';\n    readonly kind = SelectAction.KIND;\n\n    constructor(public readonly selectedElementsIDs: string[] = [],\n        public readonly deselectedElementsIDs: string[] = []) {\n    }\n}\n\n/**\n * Programmatic action for selecting or deselecting all elements.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SelectAllAction implements Action, protocol.SelectAllAction {\n    static readonly KIND = 'allSelected';\n    readonly kind = SelectAllAction.KIND;\n\n    /**\n     * If `select` is true, all elements are selected, otherwise they are deselected.\n     */\n    constructor(public readonly select: boolean = true) {\n    }\n}\n\n/**\n * Request action for retrieving the current selection.\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface GetSelectionAction extends RequestAction<SelectionResult> {\n    kind: typeof GetSelectionAction.KIND\n}\nexport namespace GetSelectionAction {\n    export const KIND = 'getSelection';\n\n    export function create(): GetSelectionAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface SelectionResult extends ResponseAction {\n    kind: typeof SelectionResult.KIND\n    selectedElementsIDs: string[]\n}\nexport namespace SelectionResult {\n    export const KIND = 'selectionResult';\n\n    export function create(selectedElementsIDs: string[], requestId: string): SelectionResult {\n        return {\n            kind: KIND,\n            selectedElementsIDs,\n            responseId: requestId\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { UndoRedoKeyListener } from \"./undo-redo\";\n\nconst undoRedoModule = new ContainerModule(bind => {\n    bind(UndoRedoKeyListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(UndoRedoKeyListener);\n});\n\nexport default undoRedoModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action, UndoAction as ProtocolUndoAction, RedoAction as ProtocolRedoAction } from 'sprotty-protocol/lib/actions';\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { KeyListener } from '../../base/views/key-tool';\nimport { SModelElementImpl } from '../../base/model/smodel';\nimport { isMac } from '../../utils/browser';\n\nexport class UndoRedoKeyListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'KeyZ', 'ctrlCmd'))\n            return [ProtocolUndoAction.create()];\n        if (matchesKeystroke(event, 'KeyZ', 'ctrlCmd', 'shift') || (!isMac() && matchesKeystroke(event, 'KeyY', 'ctrlCmd')))\n            return [ProtocolRedoAction.create()];\n        return [];\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface UndoAction extends Action {\n    kind: typeof UndoAction.KIND;\n}\nexport namespace UndoAction {\n    export const KIND = 'undo';\n\n    export function create(): UndoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface RedoAction extends Action {\n    kind: typeof RedoAction.KIND;\n}\nexport namespace RedoAction {\n    export const KIND = 'redo';\n\n    export function create(): RedoAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\nimport { UpdateModelCommand } from \"./update-model\";\n\nconst updateModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureCommand({ bind, isBound }, UpdateModelCommand);\n});\n\nexport default updateModule;\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { SModelRootImpl, SModelElementImpl, isParent, IModelIndex } from '../../base/model/smodel';\nimport { SModelIndex } from 'sprotty-protocol';\n\nexport interface Match {\n    left?: SModelElementSchema\n    right?: SModelElementSchema\n    leftParentId?: string\n    rightParentId?: string\n}\n\nexport interface MatchResult {\n    [id: string]: Match\n}\n\nexport function forEachMatch(matchResult: MatchResult, callback: (id: string, match: Match) => void): void {\n    Object.keys(matchResult).forEach(id => callback(id, matchResult[id]));\n}\n\nexport class ModelMatcher {\n    match(left: SModelRootSchema | SModelRootImpl, right: SModelRootSchema | SModelRootImpl): MatchResult {\n        const result: MatchResult = {};\n        this.matchLeft(left, result);\n        this.matchRight(right, result);\n        return result;\n    }\n\n    protected matchLeft(element: SModelElementSchema | SModelElementImpl, result: MatchResult, parentId?: string): void {\n        let match = result[element.id];\n        if (match !== undefined) {\n            match.left = element;\n            match.leftParentId = parentId;\n        } else {\n            match = {\n                left: element,\n                leftParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (isParent(element)) {\n            for (const child of element.children) {\n                this.matchLeft(child, result, element.id);\n            }\n        }\n    }\n\n    protected matchRight(element: SModelElementSchema | SModelElementImpl, result: MatchResult, parentId?: string) {\n        let match = result[element.id];\n        if (match !== undefined) {\n            match.right = element;\n            match.rightParentId = parentId;\n        } else {\n            match = {\n                right: element,\n                rightParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (isParent(element)) {\n            for (const child of element.children) {\n                this.matchRight(child, result, element.id);\n            }\n        }\n    }\n}\n\nexport function applyMatches(root: SModelRootSchema, matches: Match[], index?: IModelIndex): void {\n    if (root instanceof SModelRootImpl) {\n        index = root.index;\n    } else if (index === undefined) {\n        index = new SModelIndex();\n        index.add(root);\n    }\n    for (const match of matches) {\n        let newElementInserted = false;\n        if (match.left !== undefined && match.leftParentId !== undefined) {\n            const parent = index.getById(match.leftParentId);\n            if (parent !== undefined && parent.children !== undefined) {\n                const i = parent.children.indexOf(match.left);\n                if (i >= 0) {\n                    if (match.right !== undefined && match.leftParentId === match.rightParentId) {\n                        parent.children.splice(i, 1, match.right);\n                        newElementInserted = true;\n                    } else {\n                        parent.children.splice(i, 1);\n                    }\n                }\n                index.remove(match.left);\n            }\n        }\n        if (!newElementInserted && match.right !== undefined && match.rightParentId !== undefined) {\n            const parent = index.getById(match.rightParentId);\n            if (parent !== undefined) {\n                if (parent.children === undefined)\n                    parent.children = [];\n                parent.children.push(match.right);\n            }\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2022 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, optional } from \"inversify\";\nimport { Action, UpdateModelAction as ProtocolUpdateModelAction } from \"sprotty-protocol/lib/actions\";\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { almostEquals, Dimension } from \"sprotty-protocol/lib/utils/geometry\";\nimport { Animation, CompoundAnimation } from '../../base/animations/animation';\nimport { CommandExecutionContext, CommandReturn, Command } from '../../base/commands/command';\nimport { FadeAnimation, ResolvedElementFade } from '../fade/fade';\nimport { SModelRootImpl, SChildElementImpl, SModelElementImpl, SParentElementImpl } from \"../../base/model/smodel\";\nimport { MoveAnimation, ResolvedElementMove, MorphEdgesAnimation } from \"../move/move\";\nimport { Fadeable, isFadeable } from \"../fade/model\";\nimport { isLocateable } from \"../move/model\";\nimport { isSizeable } from \"../bounds/model\";\nimport { ViewportRootElement } from \"../viewport/viewport-root\";\nimport { isSelectable } from \"../select/model\";\nimport { MatchResult, ModelMatcher, Match, forEachMatch } from \"./model-matching\";\nimport { ResolvedElementResize, ResizeAnimation } from '../bounds/resize';\nimport { TYPES } from \"../../base/types\";\nimport { isViewport } from \"../viewport/model\";\nimport { EdgeRouterRegistry, EdgeSnapshot, EdgeMemento } from \"../routing/routing\";\nimport { SRoutableElementImpl } from \"../routing/model\";\nimport { containsSome } from \"../../base/model/smodel-utils\";\n\n\nexport interface UpdateAnimationData {\n    fades: ResolvedElementFade[]\n    moves?: ResolvedElementMove[]\n    resizes?: ResolvedElementResize[]\n    edgeMementi?: EdgeMemento[]\n}\n\n@injectable()\nexport class UpdateModelCommand extends Command {\n    static readonly KIND = ProtocolUpdateModelAction.KIND;\n\n    oldRoot: SModelRootImpl;\n    newRoot: SModelRootImpl;\n\n    @inject(EdgeRouterRegistry) @optional() edgeRouterRegistry?: EdgeRouterRegistry;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolUpdateModelAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        let newRoot: SModelRootImpl;\n        if (this.action.newRoot !== undefined) {\n            newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        } else {\n            newRoot = context.modelFactory.createRoot(context.root);\n            if (this.action.matches !== undefined)\n                this.applyMatches(newRoot, this.action.matches, context);\n        }\n        this.oldRoot = context.root;\n        this.newRoot = newRoot;\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    }\n\n    protected performUpdate(oldRoot: SModelRootImpl, newRoot: SModelRootImpl, context: CommandExecutionContext): CommandReturn {\n        if ((this.action.animate === undefined || this.action.animate) && oldRoot.id === newRoot.id) {\n            let matchResult: MatchResult;\n            if (this.action.matches === undefined) {\n                const matcher = new ModelMatcher();\n                matchResult = matcher.match(oldRoot, newRoot);\n            } else {\n                matchResult = this.convertToMatchResult(this.action.matches, oldRoot, newRoot);\n            }\n            const animationOrRoot = this.computeAnimation(newRoot, matchResult, context);\n            if (animationOrRoot instanceof Animation)\n                return animationOrRoot.start();\n            else\n                return animationOrRoot;\n        } else {\n            if (oldRoot.type === newRoot.type && Dimension.isValid(oldRoot.canvasBounds))\n                newRoot.canvasBounds = oldRoot.canvasBounds;\n            if (isViewport(oldRoot) && isViewport(newRoot)) {\n                newRoot.zoom = oldRoot.zoom;\n                newRoot.scroll = oldRoot.scroll;\n            }\n            return newRoot;\n        }\n    }\n\n    protected applyMatches(root: SModelRootImpl, matches: Match[], context: CommandExecutionContext): void {\n        const index = root.index;\n        for (const match of matches) {\n            if (match.left !== undefined) {\n                const element = index.getById(match.left.id);\n                if (element instanceof SChildElementImpl)\n                    element.parent.remove(element);\n            }\n        }\n        for (const match of matches) {\n            if (match.right !== undefined) {\n                const element = context.modelFactory.createElement(match.right);\n                let parent: SModelElementImpl | undefined;\n                if (match.rightParentId !== undefined)\n                    parent = index.getById(match.rightParentId);\n                if (parent instanceof SParentElementImpl)\n                    parent.add(element);\n                else\n                    root.add(element);\n            }\n        }\n    }\n\n    protected convertToMatchResult(matches: Match[], leftRoot: SModelRootImpl, rightRoot: SModelRootImpl): MatchResult {\n        const result: MatchResult = {};\n        for (const match of matches) {\n            const converted: Match = {};\n            let id: string | undefined = undefined;\n            if (match.left !== undefined) {\n                id = match.left.id;\n                converted.left = leftRoot.index.getById(id);\n                converted.leftParentId = match.leftParentId;\n            }\n            if (match.right !== undefined) {\n                id = match.right.id;\n                converted.right = rightRoot.index.getById(id);\n                converted.rightParentId = match.rightParentId;\n            }\n            if (id !== undefined)\n                result[id] = converted;\n        }\n        return result;\n    }\n\n    protected computeAnimation(newRoot: SModelRootImpl, matchResult: MatchResult, context: CommandExecutionContext): SModelRootImpl | Animation {\n        const animationData: UpdateAnimationData = {\n            fades: [] as ResolvedElementFade[]\n        };\n        forEachMatch(matchResult, (id, match) => {\n            if (match.left !== undefined && match.right !== undefined) {\n                // The element is still there, but may have been moved\n                this.updateElement(match.left as SModelElementImpl, match.right as SModelElementImpl, animationData);\n            } else if (match.right !== undefined) {\n                // An element has been added\n                const right = match.right as SModelElementImpl;\n                if (isFadeable(right)) {\n                    right.opacity = 0;\n                    animationData.fades.push({\n                        element: right,\n                        type: 'in'\n                    });\n                }\n            } else if (match.left instanceof SChildElementImpl) {\n                // An element has been removed\n                const left = match.left;\n                if (isFadeable(left) && match.leftParentId !== undefined) {\n                    if (!containsSome(newRoot, left)) {\n                        const parent = newRoot.index.getById(match.leftParentId);\n                        if (parent instanceof SParentElementImpl) {\n                            const leftCopy = context.modelFactory.createElement(left) as SChildElementImpl & Fadeable;\n                            parent.add(leftCopy);\n                            animationData.fades.push({\n                                element: leftCopy,\n                                type: 'out'\n                            });\n                        }\n                    }\n                }\n            }\n        });\n\n        const animations = this.createAnimations(animationData, newRoot, context);\n        if (animations.length >= 2) {\n            return new CompoundAnimation(newRoot, context, animations);\n        } else if (animations.length === 1) {\n            return animations[0];\n        } else {\n            return newRoot;\n        }\n    }\n\n    protected updateElement(left: SModelElementImpl, right: SModelElementImpl, animationData: UpdateAnimationData): void {\n        if (isLocateable(left) && isLocateable(right)) {\n            const leftPos = left.position;\n            const rightPos = right.position;\n            if (!almostEquals(leftPos.x, rightPos.x) || !almostEquals(leftPos.y, rightPos.y)) {\n                if (animationData.moves === undefined)\n                    animationData.moves = [];\n                animationData.moves.push({\n                    element: right,\n                    fromPosition: leftPos,\n                    toPosition: rightPos\n                });\n                right.position = leftPos;\n            }\n        }\n        if (isSizeable(left) && isSizeable(right)) {\n            if (!Dimension.isValid(right.bounds)) {\n                right.bounds = {\n                    x: right.bounds.x,\n                    y: right.bounds.y,\n                    width: left.bounds.width,\n                    height: left.bounds.height\n                };\n            } else if (!almostEquals(left.bounds.width, right.bounds.width)\n                || !almostEquals(left.bounds.height, right.bounds.height)) {\n                if (animationData.resizes === undefined)\n                    animationData.resizes = [];\n                animationData.resizes.push({\n                    element: right,\n                    fromDimension: {\n                        width: left.bounds.width,\n                        height: left.bounds.height,\n                    },\n                    toDimension: {\n                        width: right.bounds.width,\n                        height: right.bounds.height,\n                    }\n                });\n            }\n        }\n        if (left instanceof SRoutableElementImpl && right instanceof SRoutableElementImpl && this.edgeRouterRegistry) {\n            if (animationData.edgeMementi === undefined)\n                animationData.edgeMementi = [];\n            animationData.edgeMementi.push({\n                edge: right,\n                before: this.takeSnapshot(left),\n                after: this.takeSnapshot(right),\n            });\n        }\n        if (isSelectable(left) && isSelectable(right)) {\n            right.selected = left.selected;\n        }\n        if (left instanceof SModelRootImpl && right instanceof SModelRootImpl) {\n            right.canvasBounds = left.canvasBounds;\n        }\n        if (left instanceof ViewportRootElement && right instanceof ViewportRootElement) {\n            right.scroll = left.scroll;\n            right.zoom = left.zoom;\n        }\n    }\n\n    protected takeSnapshot(edge: SRoutableElementImpl): EdgeSnapshot {\n        const router = this.edgeRouterRegistry!.get(edge.routerKind);\n        return router.takeSnapshot(edge);\n    }\n\n    protected createAnimations(data: UpdateAnimationData, root: SModelRootImpl, context: CommandExecutionContext): Animation[] {\n        const animations: Animation[] = [];\n        if (data.fades.length > 0) {\n            animations.push(new FadeAnimation(root, data.fades, context, true));\n        }\n        if (data.moves !== undefined && data.moves.length > 0) {\n            const movesMap: Map<string, ResolvedElementMove> = new Map;\n            for (const move of data.moves) {\n                movesMap.set(move.element.id, move);\n            }\n            animations.push(new MoveAnimation(root, movesMap, context, false));\n        }\n        if (data.resizes !== undefined && data.resizes.length > 0) {\n            const resizesMap: Map<string, ResolvedElementResize> = new Map;\n            for (const resize of data.resizes) {\n                resizesMap.set(resize.element.id, resize);\n            }\n            animations.push(new ResizeAnimation(root, resizesMap, context, false));\n        }\n        if (data.edgeMementi !== undefined && data.edgeMementi.length > 0) {\n            animations.push(new MorphEdgesAnimation(root, data.edgeMementi, context, false));\n        }\n        return animations;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return this.performUpdate(this.newRoot, this.oldRoot, context);\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class UpdateModelAction implements Action, ProtocolUpdateModelAction {\n    static readonly KIND = 'updateModel';\n    readonly kind = UpdateModelAction.KIND;\n\n    public readonly newRoot?: SModelRootSchema;\n    public readonly matches?: Match[];\n\n    constructor(input: SModelRootSchema | Match[],\n        public readonly animate: boolean = true,\n        public readonly cause?: Action) {\n        if ((input as SModelRootSchema).id !== undefined)\n            this.newRoot = input as SModelRootSchema;\n        else\n            this.matches = input as Match[];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Action, CenterAction as ProtocolCenterAction, FitToScreenAction as ProtocolFitToScreenAction} from 'sprotty-protocol/lib/actions';\nimport { Viewport } from 'sprotty-protocol/lib/model';\nimport { almostEquals, Bounds, Dimension } from 'sprotty-protocol/lib/utils/geometry';\nimport { matchesKeystroke } from '../../utils/keyboard';\nimport { SChildElementImpl } from '../../base/model/smodel';\nimport { Command, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { KeyListener } from '../../base/views/key-tool';\nimport { isBoundsAware } from '../bounds/model';\nimport { isSelectable } from '../select/model';\nimport { ViewportAnimation } from './viewport';\nimport { isViewport, limitViewport } from './model';\nimport { injectable, inject } from 'inversify';\nimport { TYPES } from '../../base/types';\nimport { ViewerOptions } from '../../base/views/viewer-options';\n\n@injectable()\nexport abstract class BoundsAwareViewportCommand extends Command {\n\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    oldViewport: Viewport;\n    newViewport?: Viewport;\n\n    constructor(protected readonly animate: boolean) {\n        super();\n    }\n\n    protected initialize(model: SModelRootImpl): void {\n        if (!isViewport(model)) {\n            return;\n        }\n        this.oldViewport = {\n            scroll: model.scroll,\n            zoom: model.zoom\n        };\n        const allBounds: Bounds[] = [];\n        this.getElementIds().forEach(id => {\n            const element = model.index.getById(id);\n            if (element && isBoundsAware(element)) {\n                allBounds.push(this.boundsInViewport(element, element.bounds, model));\n            }\n        });\n        if (allBounds.length === 0) {\n            model.index.all().forEach(element => {\n                if (isSelectable(element) && element.selected && isBoundsAware(element)) {\n                    allBounds.push(this.boundsInViewport(element, element.bounds, model));\n                }\n            });\n        }\n        if (allBounds.length === 0) {\n            model.index.all().forEach(element => {\n                if (isBoundsAware(element)) {\n                    allBounds.push(this.boundsInViewport(element, element.bounds, model));\n                }\n            });\n        }\n        if (allBounds.length !== 0) {\n            const bounds = allBounds.reduce((b0, b1) => Bounds.combine(b0, b1));\n            if (Dimension.isValid(bounds)) {\n                const newViewport = this.getNewViewport(bounds, model);\n                if (newViewport) {\n                    const { zoomLimits, horizontalScrollLimits, verticalScrollLimits } = this.viewerOptions;\n                    this.newViewport = limitViewport(newViewport, model.canvasBounds, horizontalScrollLimits, verticalScrollLimits, zoomLimits);\n                }\n            }\n        }\n    }\n\n    protected boundsInViewport(element: SModelElementImpl, bounds: Bounds, viewport: SModelRootImpl & Viewport): Bounds {\n        if (element instanceof SChildElementImpl && element.parent !== viewport)\n            return this.boundsInViewport(element.parent, element.parent.localToParent(bounds) as Bounds, viewport);\n        else\n            return bounds;\n    }\n\n    protected abstract getNewViewport(bounds: Bounds, model: SModelRootImpl): Viewport | undefined;\n\n    protected abstract getElementIds(): string[];\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.initialize(context.root);\n        return this.redo(context);\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        const model = context.root;\n        if (isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate)\n                return new ViewportAnimation(model, this.newViewport, this.oldViewport, context).start();\n            else {\n                model.scroll = this.oldViewport.scroll;\n                model.zoom = this.oldViewport.zoom;\n            }\n        }\n        return model;\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        const model = context.root;\n        if (isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate) {\n               return new ViewportAnimation(model, this.oldViewport, this.newViewport, context).start();\n            } else {\n                model.scroll = this.newViewport.scroll;\n                model.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    }\n\n    protected equal(vp1: Viewport, vp2: Viewport): boolean {\n        return almostEquals(vp1.zoom, vp2.zoom) && almostEquals(vp1.scroll.x, vp2.scroll.x) && almostEquals(vp1.scroll.y, vp2.scroll.y);\n    }\n}\n\nexport class CenterCommand extends BoundsAwareViewportCommand {\n    static readonly KIND = ProtocolCenterAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected action: ProtocolCenterAction) {\n        super(action.animate);\n    }\n\n    getElementIds() {\n        return this.action.elementIds;\n    }\n\n    getNewViewport(bounds: Bounds, model: SModelRootImpl): Viewport | undefined {\n        if (!Dimension.isValid(model.canvasBounds)) {\n            return undefined;\n        }\n        let zoom = 1;\n        if (this.action.retainZoom && isViewport(model)) {\n            zoom = model.zoom;\n        } else if (this.action.zoomScale) {\n            zoom = this.action.zoomScale;\n        }\n        const c = Bounds.center(bounds);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    }\n}\n\nexport class FitToScreenCommand extends BoundsAwareViewportCommand {\n    static readonly KIND = ProtocolFitToScreenAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolFitToScreenAction) {\n        super(action.animate);\n    }\n\n    getElementIds() {\n        return this.action.elementIds;\n    }\n\n    getNewViewport(bounds: Bounds, model: SModelRootImpl): Viewport | undefined {\n        if (!Dimension.isValid(model.canvasBounds)) {\n            return undefined;\n        }\n        const c = Bounds.center(bounds);\n        const delta = this.action.padding === undefined\n            ? 0\n            : 2 *  this.action.padding;\n        let zoom = Math.min(\n            model.canvasBounds.width / (bounds.width + delta),\n            model.canvasBounds.height / (bounds.height + delta));\n        if (this.action.maxZoom !== undefined)\n           zoom = Math.min(zoom, this.action.maxZoom);\n        if (zoom === Infinity) {\n            zoom = 1;\n        }\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    }\n}\n\nexport class CenterKeyboardListener extends KeyListener {\n    override keyDown(element: SModelElementImpl, event: KeyboardEvent): Action[] {\n        if (matchesKeystroke(event, 'KeyC', 'ctrlCmd', 'shift'))\n            return [ProtocolCenterAction.create([])];\n        if (matchesKeystroke(event, 'KeyF', 'ctrlCmd', 'shift'))\n            return [ProtocolFitToScreenAction.create([])];\n        return [];\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly.\n * It also resets the zoom to its default if retainZoom is false.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n *\n * @deprecated Use the declaration in `sprotty-protocol` instead.\n */\nexport class CenterAction implements Action, ProtocolCenterAction {\n    static readonly KIND = 'center';\n    readonly kind = CenterAction.KIND;\n\n    constructor(public readonly elementIds: string[],\n                public readonly animate: boolean = true,\n                public readonly retainZoom: boolean = false,\n                public readonly zoomScale?: number) {\n    }\n}\n\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n *\n * @deprecated Use the declaration in `sprotty-protocol` instead.\n */\nexport class FitToScreenAction implements Action, ProtocolFitToScreenAction {\n    static readonly KIND = 'fit';\n    readonly kind = FitToScreenAction.KIND;\n\n    constructor(public readonly elementIds: string[],\n                public readonly padding?: number,\n                public readonly maxZoom?: number,\n                public readonly animate: boolean = true) {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../../base/types\";\nimport { CenterCommand, CenterKeyboardListener, FitToScreenCommand } from \"./center-fit\";\nimport { SetViewportCommand, GetViewportCommand } from \"./viewport\";\nimport { ScrollMouseListener } from \"./scroll\";\nimport { ZoomMouseListener } from \"./zoom\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\n\nconst viewportModule = new ContainerModule((bind , _unbind, isBound) => {\n    configureCommand({ bind, isBound }, CenterCommand);\n    configureCommand({ bind, isBound }, FitToScreenCommand);\n    configureCommand({ bind, isBound }, SetViewportCommand);\n    configureCommand({ bind, isBound }, GetViewportCommand);\n    bind(CenterKeyboardListener).toSelf().inSingletonScope();\n    bind(TYPES.KeyListener).toService(CenterKeyboardListener);\n    bind(ScrollMouseListener).toSelf().inSingletonScope();\n    bind(ZoomMouseListener).toSelf().inSingletonScope();\n    bind(TYPES.MouseListener).toService(ScrollMouseListener);\n    bind(TYPES.MouseListener).toService(ZoomMouseListener);\n});\n\nexport default viewportModule;\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds, Dimension } from 'sprotty-protocol';\nimport { Scrollable, Zoomable, Viewport as ProtocolViewport } from 'sprotty-protocol/lib/model';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { limit, Limits } from '../../utils/geometry';\n\nexport const viewportFeature = Symbol('viewportFeature');\n\n/**\n * Determine whether the given model element has a viewport.\n */\nexport function isViewport(element: SModelElementImpl): element is SModelRootImpl & ProtocolViewport {\n    return element instanceof SModelRootImpl\n        && element.hasFeature(viewportFeature)\n        && 'zoom' in element\n        && 'scroll' in element;\n}\n\n/**\n * Apply limits to the given viewport.\n */\nexport function limitViewport(viewport: ProtocolViewport,\n    canvasBounds: Bounds | undefined,\n    horizontalScrollLimits: Limits | undefined,\n    verticalScrollLimits: Limits | undefined,\n    zoomLimits: Limits | undefined): ProtocolViewport {\n    if (canvasBounds && !Dimension.isValid(canvasBounds)) {\n        canvasBounds = undefined;\n    }\n    // Limit the zoom factor\n    let zoom = zoomLimits ? limit(viewport.zoom, zoomLimits) : viewport.zoom;\n    if (canvasBounds && horizontalScrollLimits) {\n        const minZoom = canvasBounds.width / (horizontalScrollLimits.max - horizontalScrollLimits.min);\n        if (zoom < minZoom) {\n            zoom = minZoom;\n        }\n    }\n    if (canvasBounds && verticalScrollLimits) {\n        const minZoom = canvasBounds.height / (verticalScrollLimits.max - verticalScrollLimits.min);\n        if (zoom < minZoom) {\n            zoom = minZoom;\n        }\n    }\n    // Limit the horizontal scroll position\n    let scrollX: number;\n    if (horizontalScrollLimits) {\n        const min = horizontalScrollLimits.min;\n        const max = canvasBounds ? horizontalScrollLimits.max - canvasBounds.width / zoom : horizontalScrollLimits.max;\n        scrollX = limit(viewport.scroll.x, { min, max });\n    } else {\n        scrollX = viewport.scroll.x;\n    }\n    // Limit the vertical scroll position\n    let scrollY: number;\n    if (verticalScrollLimits) {\n        const min = verticalScrollLimits.min;\n        const max = canvasBounds ? verticalScrollLimits.max - canvasBounds.height / zoom : verticalScrollLimits.max;\n        scrollY = limit(viewport.scroll.y, { min, max });\n    } else {\n        scrollY = viewport.scroll.y;\n    }\n    return { scroll: { x: scrollX, y: scrollY }, zoom };\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Viewport extends Scrollable, Zoomable {\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from 'inversify';\nimport { Viewport } from 'sprotty-protocol/lib/model';\nimport { Action, CenterAction, SetViewportAction } from 'sprotty-protocol/lib/actions';\nimport { almostEquals, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { isViewport } from './model';\nimport { isMoveable } from '../move/model';\nimport { SRoutingHandleImpl } from '../routing/model';\nimport { getModelBounds } from '../projection/model';\nimport { hitsMouseEvent } from '../../utils/browser';\nimport { TYPES } from '../../base/types';\nimport { ViewerOptions } from '../../base/views/viewer-options';\n\nexport class ScrollMouseListener extends MouseListener {\n\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n\n    protected lastScrollPosition: Point |undefined;\n    protected scrollbar: HTMLElement | undefined;\n    protected scrollbarMouseDownTimeout: number | undefined;\n    protected scrollbarMouseDownDelay = 200;\n\n    override mouseDown(target: SModelElementImpl, event: MouseEvent): (Action | Promise<Action>)[] {\n        const moveable = findParentByFeature(target, isMoveable);\n        if (moveable === undefined && !(target instanceof SRoutingHandleImpl)) {\n            const viewport = findParentByFeature(target, isViewport);\n            if (viewport) {\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n                this.scrollbar = this.getScrollbar(event);\n                if (this.scrollbar) {\n                    window.clearTimeout(this.scrollbarMouseDownTimeout);\n                    return this.moveScrollBar(viewport, event, this.scrollbar, true)\n                        .map(action => new Promise(resolve => {\n                            this.scrollbarMouseDownTimeout = window.setTimeout(() => resolve(action), this.scrollbarMouseDownDelay);\n                        }));\n                }\n            } else {\n                this.lastScrollPosition = undefined;\n                this.scrollbar = undefined;\n            }\n        }\n        return [];\n    }\n\n    override mouseMove(target: SModelElementImpl, event: MouseEvent): Action[] {\n        if (event.buttons === 0) {\n            return this.mouseUp(target, event);\n        }\n        if (this.scrollbar) {\n            window.clearTimeout(this.scrollbarMouseDownTimeout);\n            const viewport = findParentByFeature(target, isViewport);\n            if (viewport) {\n                return this.moveScrollBar(viewport, event, this.scrollbar);\n            }\n        }\n        if (this.lastScrollPosition) {\n            const viewport = findParentByFeature(target, isViewport);\n            if (viewport) {\n                return this.dragCanvas(viewport, event, this.lastScrollPosition);\n            }\n        }\n        return [];\n    }\n\n    override mouseEnter(target: SModelElementImpl, event: MouseEvent): Action[] {\n        if (target instanceof SModelRootImpl && event.buttons === 0) {\n            this.mouseUp(target, event);\n        }\n        return [];\n    }\n\n    override mouseUp(target: SModelElementImpl, event: MouseEvent): Action[] {\n        this.lastScrollPosition = undefined;\n        this.scrollbar = undefined;\n        return [];\n    }\n\n    override doubleClick(target: SModelElementImpl, event: MouseEvent): Action[] {\n        const viewport = findParentByFeature(target, isViewport);\n        if (viewport) {\n            const scrollbar = this.getScrollbar(event);\n            if (scrollbar) {\n                window.clearTimeout(this.scrollbarMouseDownTimeout);\n                const targetElement = this.findClickTarget(scrollbar, event);\n                let elementId: string | undefined;\n                if (targetElement && targetElement.id.startsWith('horizontal-projection:')) {\n                    elementId = targetElement.id.substring('horizontal-projection:'.length);\n                } else if (targetElement && targetElement.id.startsWith('vertical-projection:')) {\n                    elementId = targetElement.id.substring('vertical-projection:'.length);\n                }\n                if (elementId) {\n                    return [CenterAction.create([elementId], { animate: true, retainZoom: true })];\n                }\n            }\n        }\n        return [];\n    }\n\n    protected dragCanvas(model: SModelRootImpl & Viewport, event: MouseEvent, lastScrollPosition: Point): Action[] {\n        let dx = (event.pageX - lastScrollPosition.x) / model.zoom;\n        if (dx > 0 && almostEquals(model.scroll.x, this.viewerOptions.horizontalScrollLimits.min)\n            || dx < 0 && almostEquals(model.scroll.x, this.viewerOptions.horizontalScrollLimits.max - model.canvasBounds.width / model.zoom)) {\n            dx = 0;\n        }\n        let dy = (event.pageY - lastScrollPosition.y) / model.zoom;\n        if (dy > 0 && almostEquals(model.scroll.y, this.viewerOptions.verticalScrollLimits.min)\n            || dy < 0 && almostEquals(model.scroll.y, this.viewerOptions.verticalScrollLimits.max - model.canvasBounds.height / model.zoom)) {\n            dy = 0;\n        }\n        if (dx === 0 && dy === 0) {\n            return [];\n        }\n        const newViewport: Viewport = {\n            scroll: {\n                x: model.scroll.x - dx,\n                y: model.scroll.y - dy,\n            },\n            zoom: model.zoom\n        };\n        this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n        return [SetViewportAction.create(model.id, newViewport, { animate: false })];\n    }\n\n    protected moveScrollBar(model: SModelRootImpl & Viewport, event: MouseEvent, scrollbar: HTMLElement, animate: boolean = false): Action[] {\n        const modelBounds = getModelBounds(model);\n        if (!modelBounds || model.zoom <= 0) {\n            return [];\n        }\n        const scrollbarRect = scrollbar.getBoundingClientRect();\n        let newScroll: { x: number, y: number };\n        if (this.getScrollbarOrientation(scrollbar) === 'horizontal') {\n            if (scrollbarRect.width <= 0) {\n                return [];\n            }\n            const viewportSize = (model.canvasBounds.width / (model.zoom * modelBounds.width)) * scrollbarRect.width;\n            let position = event.clientX - scrollbarRect.x - viewportSize / 2;\n            if (position < 0) {\n                position = 0;\n            } else if (position > scrollbarRect.width - viewportSize) {\n                position = scrollbarRect.width - viewportSize;\n            }\n            newScroll = {\n                x: modelBounds.x + (position / scrollbarRect.width) * modelBounds.width,\n                y: model.scroll.y\n            };\n            if (newScroll.x < this.viewerOptions.horizontalScrollLimits.min) {\n                newScroll.x = this.viewerOptions.horizontalScrollLimits.min;\n            } else if (newScroll.x > this.viewerOptions.horizontalScrollLimits.max - model.canvasBounds.width / model.zoom) {\n                newScroll.x = this.viewerOptions.horizontalScrollLimits.max - model.canvasBounds.width / model.zoom;\n            }\n            if (almostEquals(newScroll.x, model.scroll.x)) {\n                return [];\n            }\n        } else {\n            if (scrollbarRect.height <= 0) {\n                return [];\n            }\n            const viewportSize = (model.canvasBounds.height / (model.zoom * modelBounds.height)) * scrollbarRect.height;\n            let position = event.clientY - scrollbarRect.y - viewportSize / 2;\n            if (position < 0) {\n                position = 0;\n            } else if (position > scrollbarRect.height - viewportSize) {\n                position = scrollbarRect.height - viewportSize;\n            }\n            newScroll = {\n                x: model.scroll.x,\n                y: modelBounds.y + (position / scrollbarRect.height) * modelBounds.height\n            };\n            if (newScroll.y < this.viewerOptions.verticalScrollLimits.min) {\n                newScroll.y = this.viewerOptions.verticalScrollLimits.min;\n            } else if (newScroll.y > this.viewerOptions.verticalScrollLimits.max - model.canvasBounds.height / model.zoom) {\n                newScroll.y = this.viewerOptions.verticalScrollLimits.max - model.canvasBounds.height / model.zoom;\n            }\n            if (almostEquals(newScroll.y, model.scroll.y)) {\n                return [];\n            }\n        }\n        return [SetViewportAction.create(model.id, { scroll: newScroll, zoom: model.zoom }, { animate })];\n    }\n\n    protected getScrollbar(event: MouseEvent): HTMLElement | undefined {\n        return findViewportScrollbar(event);\n    }\n\n    protected getScrollbarOrientation(scrollbar: HTMLElement): 'horizontal' | 'vertical' {\n        if (scrollbar.classList.contains('horizontal')) {\n            return 'horizontal';\n        } else {\n            return 'vertical';\n        }\n    }\n\n    protected findClickTarget(scrollbar: HTMLElement, event: MouseEvent): HTMLElement | undefined {\n        const matching = Array.from(scrollbar.children).filter(child =>\n            child.id && child.classList.contains('sprotty-projection') && hitsMouseEvent(child, event)\n        ) as HTMLElement[];\n        if (matching.length > 0) {\n            return matching[matching.length - 1];\n        }\n        return undefined;\n    }\n\n}\n\nexport function findViewportScrollbar(event: MouseEvent): HTMLElement | undefined {\n    let element = event.target as HTMLElement | null;\n    while (element) {\n        if (element.classList && element.classList.contains('sprotty-projection-bar')) {\n            return element;\n        }\n        element = element.parentElement;\n    }\n    return undefined;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Scrollable extends SModelExtension {\n    scroll: Point\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isScrollable(element: SModelElementImpl | Scrollable): element is Scrollable {\n    return 'scroll' in element;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelRoot as SModelRootSchema, Viewport } from 'sprotty-protocol/lib/model';\nimport { Bounds, Dimension, isBounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelRootImpl, ModelIndexImpl } from '../../base/model/smodel';\nimport { viewportFeature } from \"./model\";\nimport { exportFeature } from \"../export/model\";\nimport { BoundsAware } from \"../bounds/model\";\n\nexport interface ViewportRootElementSchema extends SModelRootSchema {\n    scroll?: Point\n    zoom?: number\n    position?: Point\n    size?: Dimension\n}\n\n/**\n * Model root element that defines a viewport, so it transforms the coordinate system with\n * a `scroll` translation and a `zoom` scaling.\n */\nexport class ViewportRootElement extends SModelRootImpl implements Viewport, BoundsAware {\n    static readonly DEFAULT_FEATURES = [viewportFeature, exportFeature];\n\n    scroll: Point = { x: 0, y: 0 };\n    zoom: number = 1;\n    position: Point = Point.ORIGIN;\n    size: Dimension = Dimension.EMPTY;\n\n    constructor(index?: ModelIndexImpl) {\n        super(index);\n    }\n\n    get bounds(): Bounds {\n        return {\n            x: this.position.x,\n            y: this.position.y,\n            width: this.size.width,\n            height: this.size.height\n        };\n    }\n\n    set bounds(newBounds: Bounds) {\n        this.position = {\n            x: newBounds.x,\n            y: newBounds.y\n        };\n        this.size = {\n            width: newBounds.width,\n            height: newBounds.height\n        };\n    }\n\n    override localToParent(point: Point | Bounds): Bounds {\n        const result = {\n            x: (point.x - this.scroll.x) * this.zoom,\n            y: (point.y - this.scroll.y) * this.zoom,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point)) {\n            result.width = point.width * this.zoom;\n            result.height = point.height * this.zoom;\n        }\n        return result;\n    }\n\n    override parentToLocal(point: Point | Bounds): Bounds {\n        const result = {\n            x: (point.x / this.zoom) + this.scroll.x,\n            y: (point.y / this.zoom) + this.scroll.y,\n            width: -1,\n            height: -1\n        };\n        if (isBounds(point) && Dimension.isValid(point)) {\n            result.width = point.width / this.zoom;\n            result.height = point.height / this.zoom;\n        }\n        return result;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Action, generateRequestId, RequestAction, ResponseAction, SetViewportAction as ProtocolSetViewPortAction} from 'sprotty-protocol/lib/actions';\nimport { Viewport } from 'sprotty-protocol/lib/model';\nimport { Bounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { MergeableCommand, ICommand, CommandExecutionContext, CommandReturn } from '../../base/commands/command';\nimport { Animation } from '../../base/animations/animation';\nimport { isViewport, limitViewport } from './model';\nimport { TYPES } from '../../base/types';\nimport { ModelRequestCommand } from '../../base/commands/request-command';\nimport { ViewerOptions } from '../../base/views/viewer-options';\n\n/**\n * Request action for retrieving the current viewport and canvas bounds.\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface GetViewportAction extends RequestAction<ViewportResult> {\n    kind: typeof GetViewportAction.KIND;\n}\nexport namespace GetViewportAction {\n    export const KIND = 'getViewport';\n\n    export function create(): GetViewportAction {\n        return {\n            kind: KIND,\n            requestId: generateRequestId()\n        };\n    }\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ViewportResult extends ResponseAction {\n    kind: typeof ViewportResult.KIND;\n    viewport: Viewport\n    canvasBounds: Bounds\n}\nexport namespace ViewportResult {\n    export const KIND = 'viewportResult';\n\n    export function create(viewport: Viewport, canvasBounds: Bounds, requestId: string): ViewportResult {\n        return {\n            kind: KIND,\n            viewport,\n            canvasBounds,\n            responseId: requestId\n        };\n    }\n}\n\n@injectable()\nexport class SetViewportCommand extends MergeableCommand {\n    static readonly KIND = ProtocolSetViewPortAction.KIND;\n\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    protected element: SModelElementImpl & Viewport;\n    protected oldViewport: Viewport;\n    protected newViewport: Viewport;\n\n    constructor(@inject(TYPES.Action) protected readonly action: ProtocolSetViewPortAction) {\n        super();\n        this.newViewport = action.newViewport;\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        const model = context.root;\n        const element = model.index.getById(this.action.elementId);\n        if (element && isViewport(element)) {\n            this.element = element;\n            this.oldViewport = {\n                scroll: this.element.scroll,\n                zoom: this.element.zoom,\n            };\n            const { zoomLimits, horizontalScrollLimits, verticalScrollLimits } = this.viewerOptions;\n            this.newViewport = limitViewport(this.newViewport, model.canvasBounds, horizontalScrollLimits, verticalScrollLimits, zoomLimits);\n            return this.setViewport(element, this.oldViewport, this.newViewport, context);\n        }\n        return context.root;\n    }\n\n    protected setViewport(element: SModelElementImpl, oldViewport: Viewport, newViewport: Viewport, context: CommandExecutionContext): CommandReturn {\n        if (element && isViewport(element)) {\n            if (this.action.animate) {\n                return new ViewportAnimation(element, oldViewport, newViewport, context).start();\n            } else {\n                element.scroll = newViewport.scroll;\n                element.zoom = newViewport.zoom;\n            }\n        }\n        return context.root;\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return this.setViewport(this.element, this.newViewport, this.oldViewport, context);\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return this.setViewport(this.element, this.oldViewport, this.newViewport, context);\n    }\n\n    override merge(command: ICommand, context: CommandExecutionContext): boolean {\n        if (!this.action.animate && command instanceof SetViewportCommand && this.element === command.element) {\n            this.newViewport = command.newViewport;\n            return true;\n        }\n        return false;\n    }\n}\n\nexport class GetViewportCommand extends ModelRequestCommand {\n    static readonly KIND = GetViewportAction.KIND;\n\n    constructor(@inject(TYPES.Action) protected readonly action: GetViewportAction) {\n        super();\n    }\n\n    protected retrieveResult(context: CommandExecutionContext): ResponseAction {\n        const elem = context.root;\n        let viewport: Viewport;\n        if (isViewport(elem)) {\n            viewport = { scroll: elem.scroll, zoom: elem.zoom };\n        } else {\n            viewport = { scroll: Point.ORIGIN, zoom: 1 };\n        }\n        return ViewportResult.create(viewport, elem.canvasBounds, this.action.requestId);\n    }\n}\n\nexport class ViewportAnimation extends Animation {\n\n    protected zoomFactor: number;\n\n    constructor(protected element: SModelElementImpl & Viewport,\n                protected oldViewport: Viewport,\n                protected newViewport: Viewport,\n                protected override context: CommandExecutionContext) {\n        super(context);\n        this.zoomFactor = Math.log(newViewport.zoom / oldViewport.zoom);\n    }\n\n    tween(t: number, context: CommandExecutionContext): SModelRootImpl {\n        this.element.scroll = {\n            x: (1 - t) * this.oldViewport.scroll.x + t * this.newViewport.scroll.x,\n            y: (1 - t) * this.oldViewport.scroll.y + t * this.newViewport.scroll.y\n        };\n        this.element.zoom = this.oldViewport.zoom * Math.exp(t * this.zoomFactor);\n        return context.root;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport class SetViewportAction implements Action, ProtocolSetViewPortAction {\n    static readonly KIND = 'viewport';\n    readonly kind = SetViewportAction.KIND;\n\n    constructor(public readonly elementId: string,\n                public readonly newViewport: Viewport,\n                public readonly animate: boolean) {\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2023 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject } from 'inversify';\nimport { Action, SetViewportAction } from 'sprotty-protocol/lib/actions';\nimport { Viewport } from 'sprotty-protocol/lib/model';\nimport { almostEquals, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelElementImpl, SModelRootImpl } from '../../base/model/smodel';\nimport { SModelExtension } from '../../base/model/smodel-extension';\nimport { findParentByFeature } from '../../base/model/smodel-utils';\nimport { TYPES } from '../../base/types';\nimport { MouseListener } from '../../base/views/mouse-tool';\nimport { ViewerOptions } from '../../base/views/viewer-options';\nimport { getWindowScroll } from '../../utils/browser';\nimport { isViewport } from './model';\n\nexport function getZoom(label: SModelElementImpl) {\n    let zoom = 1;\n    const viewport = findParentByFeature(label, isViewport);\n    if (viewport) {\n        zoom = viewport.zoom;\n    }\n    return zoom;\n}\n\nexport class ZoomMouseListener extends MouseListener {\n\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n\n    override wheel(target: SModelElementImpl, event: WheelEvent): Action[] {\n        const viewport = findParentByFeature(target, isViewport);\n        if (!viewport) {\n            return [];\n        }\n        const newViewport = this.isScrollMode(event) ? this.processScroll(viewport, event) : this.processZoom(viewport, target, event);\n        if (newViewport) {\n            return [SetViewportAction.create(viewport.id, newViewport, { animate: false })];\n        }\n        return [];\n    }\n\n    protected isScrollMode(event: WheelEvent) {\n        return event.altKey;\n    }\n\n    protected processScroll(viewport: Viewport, event: WheelEvent): Viewport {\n        return {\n            scroll: {\n                x: viewport.scroll.x + event.deltaX,\n                y: viewport.scroll.y + event.deltaY\n            },\n            zoom: viewport.zoom\n        };\n    }\n\n    protected processZoom(viewport: Viewport, target: SModelElementImpl, event: WheelEvent): Viewport | undefined {\n        const zoomFactor = this.getZoomFactor(event);\n        if (zoomFactor > 1 && almostEquals(viewport.zoom, this.viewerOptions.zoomLimits.max)\n            || zoomFactor < 1 && almostEquals(viewport.zoom, this.viewerOptions.zoomLimits.min)) {\n            return;\n        }\n        const zoom = viewport.zoom * zoomFactor;\n        const viewportOffset = this.getViewportOffset(target.root, event);\n        const offsetFactor = 1.0 / zoom - 1.0 / viewport.zoom;\n        return {\n            scroll: {\n                x: viewport.scroll.x - offsetFactor * viewportOffset.x,\n                y: viewport.scroll.y - offsetFactor * viewportOffset.y\n            },\n            zoom\n        };\n    }\n\n    protected getViewportOffset(root: SModelRootImpl, event: WheelEvent): Point {\n        const canvasBounds = root.canvasBounds;\n        const windowScroll = getWindowScroll();\n        return {\n            x: event.clientX + windowScroll.x - canvasBounds.x,\n            y: event.clientY + windowScroll.y - canvasBounds.y\n        };\n    }\n\n    protected getZoomFactor(event: WheelEvent): number {\n        if (event.deltaMode === event.DOM_DELTA_PAGE)\n            return Math.exp(-event.deltaY * 0.5);\n        else if (event.deltaMode === event.DOM_DELTA_LINE)\n            return Math.exp(-event.deltaY * 0.05);\n        else // deltaMode === DOM_DELTA_PIXEL\n            return Math.exp(-event.deltaY * 0.005);\n    }\n\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Zoomable extends SModelExtension {\n    zoom: number\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isZoomable(element: SModelElementImpl | Zoomable): element is Zoomable {\n    return 'zoom' in element;\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { configureCommand } from \"../../base/commands/command-registration\";\nimport { BringToFrontCommand } from './zorder';\n\nconst zorderModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureCommand({ bind, isBound }, BringToFrontCommand);\n});\n\nexport default zorderModule;\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Action, BringToFrontAction as ProtocolBringToFrontAction} from 'sprotty-protocol/lib/actions';\nimport { TYPES } from '../../base/types';\nimport { SModelRootImpl, SChildElementImpl, SModelElementImpl, SParentElementImpl } from '../../base/model/smodel';\nimport { Command, CommandExecutionContext } from '../../base/commands/command';\nimport { SRoutableElementImpl, SConnectableElementImpl } from '../routing/model';\n\nexport type ZOrderElement = {\n    element: SChildElementImpl\n    index: number\n};\n\n@injectable()\nexport class BringToFrontCommand extends Command {\n    static readonly KIND = ProtocolBringToFrontAction.KIND;\n\n    protected selected: ZOrderElement[] = [];\n\n    constructor(@inject(TYPES.Action) public action: ProtocolBringToFrontAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): SModelRootImpl {\n        const model = context.root;\n        this.action.elementIDs.forEach(id => {\n            const element = model.index.getById(id);\n            if (element instanceof SRoutableElementImpl) {\n                if (element.source)\n                    this.addToSelection(element.source);\n                if (element.target)\n                    this.addToSelection(element.target);\n            }\n            if (element instanceof SChildElementImpl) {\n                this.addToSelection(element);\n            }\n            this.includeConnectedEdges(element);\n        });\n        return this.redo(context);\n    }\n\n    protected includeConnectedEdges(element?: SModelElementImpl): void {\n        if (element instanceof SConnectableElementImpl) {\n            element.incomingEdges.forEach(edge => this.addToSelection(edge));\n            element.outgoingEdges.forEach(edge => this.addToSelection(edge));\n        }\n        if (element instanceof SParentElementImpl) {\n            for (const child of element.children) {\n                this.includeConnectedEdges(child);\n            }\n        }\n    }\n\n    protected addToSelection(element: SChildElementImpl): void {\n        this.selected.push({\n            element: element,\n            index: element.parent.children.indexOf(element)\n        });\n    }\n\n    undo(context: CommandExecutionContext): SModelRootImpl {\n        for (let i = this.selected.length - 1; i >= 0; i--) {\n            const selection = this.selected[i];\n            const element = selection.element;\n            element.parent.move(element, selection.index);\n        }\n        return context.root;\n    }\n\n    redo(context: CommandExecutionContext): SModelRootImpl {\n        for (let i = 0; i < this.selected.length; i++) {\n            this.bringToFront(this.selected[i]);\n        }\n        return context.root;\n    }\n\n    protected bringToFront(selection: ZOrderElement) {\n        const element = selection.element;\n        const childrenLength = element.parent.children.length;\n        element.parent.move(element, childrenLength - 1);\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Action to render the selected elements in front of others by manipulating the z-order.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface BringToFrontAction extends Action {\n    kind: typeof BringToFrontAction.KIND;\n    elementIDs: string[]\n}\nexport namespace BringToFrontAction {\n    export const KIND = 'bringToFront';\n\n    export function create(elementIDs: string[]): BringToFrontAction {\n        return {\n            kind: KIND,\n            elementIDs\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { TYPES } from \"../base/types\";\nimport { SGraphFactory } from \"./sgraph-factory\";\n\nconst graphModule = new ContainerModule((bind, unbind, isBound, rebind) => {\n    rebind(TYPES.IModelFactory).to(SGraphFactory).inSingletonScope();\n});\n\nexport default graphModule;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport {\n    SCompartment as SCompartmentSchema, SEdge as SEdgeSchema, SGraph as SGraphSchema, SLabel as SLabelSchema,\n    SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema, SNode as SNodeSchema, SPort as SPortSchema\n} from 'sprotty-protocol/lib/model';\nimport { getBasicType } from 'sprotty-protocol/lib/utils/model-utils';\nimport { SModelFactory, createFeatureSet } from \"../base/model/smodel-factory\";\nimport { SChildElementImpl, SModelRootImpl, SParentElementImpl } from \"../base/model/smodel\";\nimport { SCompartmentImpl, SEdgeImpl, SGraphImpl, SLabelImpl, SNodeImpl, SPortImpl } from \"./sgraph\";\nimport { SButtonImpl, SButtonSchema } from '../features/button/model';\n\n/**\n * @deprecated\n * Subclassing SModelFactory is discouraged. Use `registerModelElement`\n * or `configureModelElement` instead.\n */\n@injectable()\nexport class SGraphFactory extends SModelFactory {\n\n    protected readonly defaultGraphFeatures = createFeatureSet(SGraphImpl.DEFAULT_FEATURES);\n    protected readonly defaultNodeFeatures = createFeatureSet(SNodeImpl.DEFAULT_FEATURES);\n    protected readonly defaultPortFeatures = createFeatureSet(SPortImpl.DEFAULT_FEATURES);\n    protected readonly defaultEdgeFeatures = createFeatureSet(SEdgeImpl.DEFAULT_FEATURES);\n    protected readonly defaultLabelFeatures = createFeatureSet(SLabelImpl.DEFAULT_FEATURES);\n    protected readonly defaultCompartmentFeatures = createFeatureSet(SCompartmentImpl.DEFAULT_FEATURES);\n    protected readonly defaultButtonFeatures = createFeatureSet(SButtonImpl.DEFAULT_FEATURES);\n\n    override createElement(schema: SModelElementSchema, parent?: SParentElementImpl): SChildElementImpl {\n        let child: SChildElementImpl;\n        if (this.registry.hasKey(schema.type)) {\n            const regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof SChildElementImpl))\n                throw new Error(`Element with type ${schema.type} was expected to be an SChildElement.`);\n            child = regElement;\n        } else if (this.isNodeSchema(schema)) {\n            child = new SNodeImpl();\n            child.features = this.defaultNodeFeatures;\n        } else if (this.isPortSchema(schema)) {\n            child = new SPortImpl();\n            child.features = this.defaultPortFeatures;\n        } else if (this.isEdgeSchema(schema)) {\n            child = new SEdgeImpl();\n            child.features = this.defaultEdgeFeatures;\n        } else if (this.isLabelSchema(schema)) {\n            child = new SLabelImpl();\n            child.features = this.defaultLabelFeatures;\n        } else if (this.isCompartmentSchema(schema)) {\n            child = new SCompartmentImpl();\n            child.features = this.defaultCompartmentFeatures;\n        } else if (this.isButtonSchema(schema)) {\n            child = new SButtonImpl();\n            child.features = this.defaultButtonFeatures;\n        } else {\n            child = new SChildElementImpl();\n        }\n        return this.initializeChild(child, schema, parent);\n    }\n\n    override createRoot(schema: SModelRootSchema): SModelRootImpl {\n        let root: SModelRootImpl;\n        if (this.registry.hasKey(schema.type)) {\n            const regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof SModelRootImpl))\n                throw new Error(`Element with type ${schema.type} was expected to be an SModelRoot.`);\n            root = regElement;\n        } else if (this.isGraphSchema(schema)) {\n            root = new SGraphImpl();\n            root.features = this.defaultGraphFeatures;\n        } else {\n            root = new SModelRootImpl();\n        }\n        return this.initializeRoot(root, schema);\n    }\n\n    isGraphSchema(schema: SModelElementSchema): schema is SGraphSchema {\n        return getBasicType(schema) === 'graph';\n    }\n\n    isNodeSchema(schema: SModelElementSchema): schema is SNodeSchema {\n        return getBasicType(schema) === 'node';\n    }\n\n    isPortSchema(schema: SModelElementSchema): schema is SPortSchema {\n        return getBasicType(schema) === 'port';\n    }\n\n    isEdgeSchema(schema: SModelElementSchema): schema is SEdgeSchema {\n        return getBasicType(schema) === 'edge';\n    }\n\n    isLabelSchema(schema: SModelElementSchema): schema is SLabelSchema {\n        return getBasicType(schema) === 'label';\n    }\n\n    isCompartmentSchema(schema: SModelElementSchema): schema is SCompartmentSchema {\n        return getBasicType(schema) === 'comp';\n    }\n\n    isButtonSchema(schema: SModelElementSchema): schema is SButtonSchema {\n        return getBasicType(schema) === 'button';\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema, SShapeElement as SShapeElementSchema\n} from 'sprotty-protocol/lib/model';\nimport { Bounds, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { ModelIndexImpl, SChildElementImpl, SModelElementImpl } from '../base/model/smodel';\nimport {\n    Alignable, alignFeature, BoundsAware, boundsFeature, layoutableChildFeature, layoutContainerFeature,\n    ModelLayoutOptions, SShapeElementImpl\n} from '../features/bounds/model';\nimport { edgeLayoutFeature, EdgePlacement } from '../features/edge-layout/model';\nimport { deletableFeature } from '../features/edit/delete';\nimport { editFeature } from '../features/edit/model';\nimport { Fadeable, fadeFeature } from '../features/fade/model';\nimport { Hoverable, hoverFeedbackFeature, popupFeature } from '../features/hover/model';\nimport { moveFeature } from '../features/move/model';\nimport { connectableFeature, SConnectableElementImpl, SRoutableElementImpl } from '../features/routing/model';\nimport { Selectable, selectFeature } from '../features/select/model';\nimport { ViewportRootElement } from '../features/viewport/viewport-root';\nimport { FluentIterable, FluentIterableImpl } from '../utils/iterable';\n\n/**\n * Root element for graph-like models.\n */\nexport class SGraphImpl extends ViewportRootElement {\n    layoutOptions?: ModelLayoutOptions;\n\n    constructor(index = new SGraphIndex()) {\n        super(index);\n    }\n}\n\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nexport class SNodeImpl extends SConnectableElementImpl implements Selectable, Fadeable, Hoverable {\n    static readonly DEFAULT_FEATURES = [connectableFeature, deletableFeature, selectFeature, boundsFeature,\n        moveFeature, layoutContainerFeature, fadeFeature, hoverFeedbackFeature, popupFeature];\n\n    override children: SChildElementImpl[];\n    layout?: string;\n    selected: boolean = false;\n    hoverFeedback: boolean = false;\n    opacity: number = 1;\n\n    override canConnect(routable: SRoutableElementImpl, role: string) {\n        return this.children.find(c => c instanceof SPortImpl) === undefined;\n    }\n\n    override get incomingEdges(): FluentIterable<SEdgeImpl> {\n        const index = this.index;\n        if (index instanceof SGraphIndex) {\n            return index.getIncomingEdges(this);\n        }\n        const allEdges = this.index.all().filter(e => e instanceof SEdgeImpl) as FluentIterable<SEdgeImpl>;\n        return allEdges.filter(e => e.targetId === this.id);\n    }\n\n    override get outgoingEdges(): FluentIterable<SEdgeImpl> {\n        const index = this.index;\n        if (index instanceof SGraphIndex) {\n            return index.getOutgoingEdges(this);\n        }\n        const allEdges = this.index.all().filter(e => e instanceof SEdgeImpl) as FluentIterable<SEdgeImpl>;\n        return allEdges.filter(e => e.sourceId === this.id);\n    }\n\n}\n\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nexport class SPortImpl extends SConnectableElementImpl implements Selectable, Fadeable, Hoverable {\n    static readonly DEFAULT_FEATURES = [connectableFeature, selectFeature, boundsFeature, fadeFeature,\n        hoverFeedbackFeature];\n\n    selected: boolean = false;\n    hoverFeedback: boolean = false;\n    opacity: number = 1;\n\n    override get incomingEdges(): FluentIterable<SEdgeImpl> {\n        const index = this.index;\n        if (index instanceof SGraphIndex) {\n            return index.getIncomingEdges(this);\n        }\n        return super.incomingEdges.filter(e => e instanceof SEdgeImpl) as FluentIterable<SEdgeImpl>;\n    }\n\n    override get outgoingEdges(): FluentIterable<SEdgeImpl> {\n        const index = this.index;\n        if (index instanceof SGraphIndex) {\n            return index.getOutgoingEdges(this);\n        }\n        return super.outgoingEdges.filter(e => e instanceof SEdgeImpl) as FluentIterable<SEdgeImpl>;\n    }\n\n}\n\n\n\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their\n * ids and can be resolved with the index stored in the root element.\n */\nexport class SEdgeImpl extends SRoutableElementImpl implements Fadeable, Selectable, Hoverable, BoundsAware {\n    static readonly DEFAULT_FEATURES = [editFeature, deletableFeature, selectFeature, fadeFeature,\n        hoverFeedbackFeature];\n\n    selected: boolean = false;\n    hoverFeedback: boolean = false;\n    opacity: number = 1;\n\n}\n\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nexport class SLabelImpl extends SShapeElementImpl implements Selectable, Alignable, Fadeable {\n    static readonly DEFAULT_FEATURES = [boundsFeature, alignFeature, layoutableChildFeature,\n        edgeLayoutFeature, fadeFeature];\n\n    text: string;\n    selected: boolean = false;\n    alignment: Point = Point.ORIGIN;\n    opacity = 1;\n    edgePlacement?: EdgePlacement;\n\n}\n\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nexport class SCompartmentImpl extends SShapeElementImpl implements Fadeable {\n    static readonly DEFAULT_FEATURES = [boundsFeature, layoutContainerFeature, layoutableChildFeature,\n        fadeFeature];\n\n    override children: SChildElementImpl[];\n    layout?: string;\n    override layoutOptions?: {[key: string]: string | number | boolean};\n    opacity = 1;\n\n}\n\n\n\n/**\n * A specialized model index that tracks outgoing and incoming edges.\n */\nexport class SGraphIndex extends ModelIndexImpl {\n\n    private outgoing: Map<string, SEdgeImpl[]> = new Map;\n    private incoming: Map<string, SEdgeImpl[]> = new Map;\n\n    override add(element: SModelElementImpl): void {\n        super.add(element);\n        if (element instanceof SEdgeImpl) {\n            // Register the edge in the outgoing map\n            if (element.sourceId) {\n                const sourceArr = this.outgoing.get(element.sourceId);\n                if (sourceArr === undefined)\n                    this.outgoing.set(element.sourceId, [element]);\n                else\n                    sourceArr.push(element);\n            }\n            // Register the edge in the incoming map\n            if (element.targetId) {\n                const targetArr = this.incoming.get(element.targetId);\n                if (targetArr === undefined)\n                    this.incoming.set(element.targetId, [element]);\n                else\n                    targetArr.push(element);\n            }\n        }\n    }\n\n    override remove(element: SModelElementImpl): void {\n        super.remove(element);\n        if (element instanceof SEdgeImpl) {\n            // Remove the edge from the outgoing map\n            const sourceArr = this.outgoing.get(element.sourceId);\n            if (sourceArr !== undefined) {\n                const index = sourceArr.indexOf(element);\n                if (index >= 0) {\n                    if (sourceArr.length === 1)\n                        this.outgoing.delete(element.sourceId);\n                    else\n                        sourceArr.splice(index, 1);\n                }\n            }\n            // Remove the edge from the incoming map\n            const targetArr = this.incoming.get(element.targetId);\n            if (targetArr !== undefined) {\n                const index = targetArr.indexOf(element);\n                if (index >= 0) {\n                    if (targetArr.length === 1)\n                        this.incoming.delete(element.targetId);\n                    else\n                        targetArr.splice(index, 1);\n                }\n            }\n        }\n    }\n\n    override getAttachedElements(element: SModelElementImpl): FluentIterable<SModelElementImpl> {\n        return new FluentIterableImpl(\n            () => ({\n                outgoing: this.outgoing.get(element.id),\n                incoming: this.incoming.get(element.id),\n                nextOutgoingIndex: 0,\n                nextIncomingIndex: 0\n            }),\n            (state) => {\n                let index = state.nextOutgoingIndex;\n                if (state.outgoing !== undefined && index < state.outgoing.length) {\n                    state.nextOutgoingIndex = index + 1;\n                    return { done: false, value: state.outgoing[index] };\n                }\n                index = state.nextIncomingIndex;\n                if (state.incoming !== undefined) {\n                    // Filter out self-loops: edges that are both outgoing and incoming\n                    while (index < state.incoming.length) {\n                        const edge = state.incoming[index];\n                        if (edge.sourceId !== edge.targetId) {\n                            state.nextIncomingIndex = index + 1;\n                            return { done: false, value: edge };\n                        }\n                        index++;\n                    }\n                }\n                return { done: true, value: undefined as any };\n            }\n        );\n    }\n\n    getIncomingEdges(element: SConnectableElementImpl): FluentIterable<SEdgeImpl> {\n        return this.incoming.get(element.id) || [];\n    }\n\n    getOutgoingEdges(element: SConnectableElementImpl): FluentIterable<SEdgeImpl> {\n        return this.outgoing.get(element.id) || [];\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * Serializable schema for graph-like models.\n *\n * @deprecated Use `SGraph` from `sprotty-protocol` instead.\n */\nexport interface SGraphSchema extends SModelRootSchema {\n    children: SModelElementSchema[]\n    bounds?: Bounds\n    scroll?: Point\n    zoom?: number\n    layoutOptions?: ModelLayoutOptions\n}\n\n/** @deprecated Use `SCompartmentImpl` instead. */\nexport const SCompartment = SCompartmentImpl;\n\n/** @deprecated Use `SGraphImpl` instead. */\nexport const SGraph = SGraphImpl;\n\n/**\n * Serializable schema for SNode.\n *\n * @deprecated Use `SNode` from `sprotty-protocol` instead.\n */\nexport interface SNodeSchema extends SShapeElementSchema {\n    layout?: string\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n    anchorKind?: string\n}\n\n/** @deprecated Use `SNodeImpl` instead. */\nexport const SNode = SNodeImpl;\n\n/**\n * Serializable schema for SPort.\n *\n * @deprecated Use `SPort` from `sprotty-protocol` instead.\n */\nexport interface SPortSchema extends SShapeElementSchema {\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n    anchorKind?: string;\n}\n\n/** @deprecated Use `SPortImpl` instead. */\nexport const SPort = SPortImpl;\n\n/**\n * Serializable schema for SEdge.\n *\n * @deprecated Use `SEdge` from `sprotty-protocol` instead.\n */\nexport interface SEdgeSchema extends SModelElementSchema {\n    sourceId: string\n    targetId: string\n    routerKind?: string;\n    routingPoints?: Point[]\n    selected?: boolean\n    hoverFeedback?: boolean\n    opacity?: number\n}\n\n/** @deprecated Use `SEdgeImpl` instead. */\nexport const SEdge = SEdgeImpl;\n\n/**\n * Serializable schema for SLabel.\n *\n * @deprecated Use `SLabel` from `sprotty-protocol` instead.\n */\nexport interface SLabelSchema extends SShapeElementSchema {\n    text: string\n    selected?: boolean\n}\n\n/** @deprecated Use `SLabelImpl` instead. */\nexport const SLabel = SLabelImpl;\n\n/**\n * Serializable schema for SCompartment.\n *\n * @deprecated Use `SCompartment` from `sprotty-protocol` instead.\n */\nexport interface SCompartmentSchema extends SShapeElementSchema {\n    layout?: string\n}\n","/********************************************************************************\n * Copyright (c) 2017-2022 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx svg */\nimport { inject, injectable } from 'inversify';\nimport { VNode } from \"snabbdom\";\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { getSubType } from 'sprotty-protocol/lib/utils/model-utils';\nimport { IView, IViewArgs, RenderingContext } from \"../base/views/view\";\nimport { setAttr } from '../base/views/vnode-utils';\nimport { ShapeView } from '../features/bounds/views';\nimport {\n    BY_DESCENDING_X_THEN_DESCENDING_Y,\n    BY_DESCENDING_X_THEN_Y,\n    BY_X_THEN_DESCENDING_Y,\n    BY_X_THEN_Y,\n    IntersectingRoutedPoint,\n    Intersection,\n    isIntersectingRoutedPoint\n} from '../features/edge-intersection/intersection-finder';\nimport { isEdgeLayoutable } from '../features/edge-layout/model';\nimport { SRoutableElementImpl, SRoutingHandleImpl } from '../features/routing/model';\nimport { EdgeRouterRegistry, RoutedPoint } from '../features/routing/routing';\nimport { RoutableView } from '../features/routing/views';\nimport { svg } from '../lib/jsx';\nimport { PointToPointLine } from '../utils/geometry';\nimport { SCompartmentImpl, SEdgeImpl, SGraphImpl, SLabelImpl } from \"./sgraph\";\n\n/**\n * IView component that turns an SGraph element and its children into a tree of virtual DOM elements.\n */\n@injectable()\nexport class SGraphView implements IView {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    render(model: Readonly<SGraphImpl>, context: RenderingContext): VNode {\n        const edgeRouting = this.edgeRouterRegistry.routeAllChildren(model);\n        const transform = `scale(${model.zoom}) translate(${-model.scroll.x},${-model.scroll.y})`;\n        return <svg class-sprotty-graph={true}>\n            <g transform={transform}>\n                {context.renderChildren(model, { edgeRouting })}\n            </g>\n        </svg>;\n    }\n\n}\n\n@injectable()\nexport class PolylineEdgeView extends RoutableView {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    render(edge: Readonly<SEdgeImpl>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        const route = this.edgeRouterRegistry.route(edge, args);\n        if (route.length === 0) {\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        }\n        if (!this.isVisible(edge, route, context)) {\n            if (edge.children.length === 0) {\n                return undefined;\n            }\n            // The children of an edge are not necessarily inside the bounding box of the route,\n            // so we need to render a group to ensure the children have a chance to be rendered.\n            return <g>{context.renderChildren(edge, { route })}</g>;\n        }\n\n        return <g class-sprotty-edge={true} class-mouseover={edge.hoverFeedback}>\n            {this.renderLine(edge, route, context, args)}\n            {this.renderAdditionals(edge, route, context)}\n            {context.renderChildren(edge, { route })}\n        </g>;\n    }\n\n    protected renderLine(edge: SEdgeImpl, segments: Point[], context: RenderingContext, args?: IViewArgs): VNode {\n        const firstPoint = segments[0];\n        let path = `M ${firstPoint.x},${firstPoint.y}`;\n        for (let i = 1; i < segments.length; i++) {\n            const p = segments[i];\n            path += ` L ${p.x},${p.y}`;\n        }\n        return <path d={path} />;\n    }\n\n    protected renderAdditionals(edge: SEdgeImpl, segments: Point[], context: RenderingContext): VNode[] {\n        // here we need to render the control points?\n        return [];\n    }\n\n    protected renderDanglingEdge(message: string, edge: SEdgeImpl, context: RenderingContext): VNode {\n        return <text class-sprotty-edge-dangling={true} title={message}>?</text>;\n    }\n}\n\n/**\n * A `PolylineEdgeView` that renders jumps over intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * This view only draws correct line jumps for intersections among straight line segments and doesn't work with bezier curves.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\n@injectable()\nexport class JumpingPolylineEdgeView extends PolylineEdgeView {\n\n    protected jumpOffsetBefore = 5;\n    protected jumpOffsetAfter = 5;\n    protected skipOffsetBefore = 3;\n    protected skipOffsetAfter = 2;\n\n    protected override renderLine(edge: SEdgeImpl, segments: Point[], context: RenderingContext, args?: IViewArgs): VNode {\n        let path = '';\n        for (let i = 0; i < segments.length; i++) {\n            const p = segments[i];\n            if (i === 0) {\n                path = `M ${p.x},${p.y}`;\n            }\n            if (isIntersectingRoutedPoint(p)) {\n                path += this.intersectionPath(edge, segments, p, args);\n            }\n            if (i !== 0) {\n                path += ` L ${p.x},${p.y}`;\n            }\n        }\n        return <path d={path} />;\n    }\n\n    /**\n     * Returns a path that takes the intersections into account by drawing a line jump or a gap for intersections on that path.\n     */\n    protected intersectionPath(edge: SEdgeImpl, segments: Point[], intersectingPoint: IntersectingRoutedPoint, args?: IViewArgs): string {\n        if (intersectingPoint.intersections.length < 1) {\n            return '';\n        }\n\n        const segment = this.getLineSegment(edge, intersectingPoint.intersections[0], args, segments);\n        const intersections = this.getIntersectionsSortedBySegmentDirection(segment, intersectingPoint);\n\n        let path = '';\n        for (const intersection of intersections) {\n            const otherLineSegment = this.getOtherLineSegment(edge, intersection, args);\n            if (otherLineSegment === undefined) {\n                continue;\n            }\n            const currentLineSegment = this.getLineSegment(edge, intersection, args, segments);\n            const intersectionPoint = intersection.intersectionPoint;\n            if (this.shouldDrawLineJumpOnIntersection(currentLineSegment, otherLineSegment)) {\n                path += this.createJumpPath(intersectionPoint, currentLineSegment);\n            } else if (this.shouldDrawLineGapOnIntersection(currentLineSegment, otherLineSegment)) {\n                path += this.createGapPath(intersectionPoint, currentLineSegment);\n            }\n        }\n\n        return path;\n    }\n\n    /**\n     * Returns the intersections sorted by the direction of the `lineSegment`.\n     *\n     * The coordinate system goes from left to right and top to bottom.\n     * Thus, x increases to the right and y increases downwards.\n     *\n     * We need to draw the intersections in the order of the direction of the line segment.\n     * To draw a line pointing north, we need to order intersections by Y in a descending order.\n     * To draw a line pointing south, we need to order intersections by Y in an ascending order.\n     */\n    protected getIntersectionsSortedBySegmentDirection(lineSegment: PointToPointLine, intersectingPoint: IntersectingRoutedPoint) {\n        switch (lineSegment.direction) {\n            case 'north':\n            case 'north-east':\n                return intersectingPoint.intersections.sort(BY_X_THEN_DESCENDING_Y);\n\n            case 'south':\n            case 'south-east':\n            case 'east':\n                return intersectingPoint.intersections.sort(BY_X_THEN_Y);\n\n            case 'south-west':\n            case 'west':\n                return intersectingPoint.intersections.sort(BY_DESCENDING_X_THEN_Y);\n\n            case 'north-west':\n                return intersectingPoint.intersections.sort(BY_DESCENDING_X_THEN_DESCENDING_Y);\n        }\n    }\n\n    /**\n     * Whether or not to draw a line jump on an intersection for the `currentLineSegment`.\n     * This should usually be inverse of `shouldDrawLineGapOnIntersection()`.\n     */\n    protected shouldDrawLineJumpOnIntersection(currentLineSegment: PointToPointLine, otherLineSegment: PointToPointLine) {\n        return Math.abs(currentLineSegment.slopeOrMax) < Math.abs(otherLineSegment.slopeOrMax);\n    }\n\n    /**\n     * Whether or not to draw a line gap on an intersection for the `currentLineSegment`.\n     * This should usually be inverse of `shouldDrawLineJumpOnIntersection()`.\n     */\n    protected shouldDrawLineGapOnIntersection(currentLineSegment: PointToPointLine, otherLineSegment: PointToPointLine) {\n        return !this.shouldDrawLineJumpOnIntersection(currentLineSegment, otherLineSegment);\n    }\n\n    protected getLineSegment(edge: SRoutableElementImpl, intersection: Intersection, args?: IViewArgs, segments?: Point[]): PointToPointLine {\n        const route = segments ? segments : this.edgeRouterRegistry.route(edge, args);\n        const index = intersection.routable1 === edge.id ? intersection.segmentIndex1 : intersection.segmentIndex2;\n        return new PointToPointLine(route[index], route[index + 1]);\n    }\n\n    protected getOtherLineSegment(currentEdge: SEdgeImpl, intersection: Intersection, args?: IViewArgs): PointToPointLine | undefined {\n        const otherEdgeId = intersection.routable1 === currentEdge.id ? intersection.routable2 : intersection.routable1;\n        const otherEdge = currentEdge.index.getById(otherEdgeId);\n        if (!(otherEdge instanceof SRoutableElementImpl)) {\n            return undefined;\n        }\n        return this.getLineSegment(otherEdge, intersection, args);\n    }\n\n    protected createJumpPath(intersectionPoint: Point, lineSegment: PointToPointLine): string {\n        const anchorBefore = Point.shiftTowards(intersectionPoint, lineSegment.p1, this.jumpOffsetBefore);\n        const anchorAfter = Point.shiftTowards(intersectionPoint, lineSegment.p2, this.jumpOffsetAfter);\n        const rotation = lineSegment.p1.x < lineSegment.p2.x ? 1 : 0;\n        return ` L ${anchorBefore.x},${anchorBefore.y} A 1,1 0,0 ${rotation} ${anchorAfter.x},${anchorAfter.y}`;\n    }\n\n    protected createGapPath(intersectionPoint: Point, lineSegment: PointToPointLine): string {\n        let offsetBefore;\n        let offsetAfter;\n        if (intersectionPoint.y < lineSegment.p1.y) {\n            offsetBefore = -this.skipOffsetBefore;\n            offsetAfter = this.jumpOffsetAfter + this.skipOffsetAfter;\n        } else {\n            offsetBefore = this.jumpOffsetBefore + this.skipOffsetAfter;\n            offsetAfter = -this.skipOffsetBefore;\n        }\n        const anchorBefore = Point.shiftTowards(intersectionPoint, lineSegment.p1, offsetBefore);\n        const anchorAfter = Point.shiftTowards(intersectionPoint, lineSegment.p2, offsetAfter);\n        return ` L ${anchorBefore.x},${anchorBefore.y} M ${anchorAfter.x},${anchorAfter.y}`;\n    }\n\n}\n\n/**\n * A `PolylineEdgeView` that renders gaps on intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * This view only draws correct gaps for intersections among straight line segments and doesn't work with bezier curves.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\n@injectable()\nexport class PolylineEdgeViewWithGapsOnIntersections extends JumpingPolylineEdgeView {\n\n    protected override skipOffsetBefore = 3;\n    protected override skipOffsetAfter = 3;\n\n    protected override shouldDrawLineJumpOnIntersection(currentLineSegment: PointToPointLine, otherLineSegment: PointToPointLine) {\n        return false;\n    }\n\n    protected override shouldDrawLineGapOnIntersection(currentLineSegment: PointToPointLine, otherLineSegment: PointToPointLine) {\n        return Math.abs(currentLineSegment.slopeOrMax) >= Math.abs(otherLineSegment.slopeOrMax);\n    }\n\n    protected override createGapPath(intersectionPoint: Point, lineSegment: PointToPointLine): string {\n        const anchorBefore = Point.shiftTowards(intersectionPoint, lineSegment.p1, this.skipOffsetBefore);\n        const anchorAfter = Point.shiftTowards(intersectionPoint, lineSegment.p2, this.skipOffsetAfter);\n        return ` L ${anchorBefore.x},${anchorBefore.y} M ${anchorAfter.x},${anchorAfter.y}`;\n    }\n\n}\n\n@injectable()\nexport class BezierCurveEdgeView extends RoutableView {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    render(edge: Readonly<SEdgeImpl>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        const route = this.edgeRouterRegistry.route(edge, args);\n        if (route.length === 0) {\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        }\n        if (!this.isVisible(edge, route, context)) {\n            if (edge.children.length === 0) {\n                return undefined;\n            }\n            // The children of an edge are not necessarily inside the bounding box of the route,\n            // so we need to render a group to ensure the children have a chance to be rendered.\n            return <g>{context.renderChildren(edge, { route })}</g>;\n        }\n\n        return <g class-sprotty-edge={true} class-mouseover={edge.hoverFeedback}>\n            {this.renderLine(edge, route, context, args)}\n            {this.renderAdditionals(edge, route, context)}\n            {context.renderChildren(edge, { route })}\n        </g>;\n    }\n\n    protected renderLine(edge: SEdgeImpl, segments: Point[], context: RenderingContext, args?: IViewArgs): VNode {\n        /**\n         * Example for two splines:\n         * SVG:\n         * <path d=\"M0,300 C0,150 300,150 300,300 S600,450 600,300\" />\n         *\n         * Segments input layout:\n         * routingPoints[0] = source;\n         * routingPoints[1] = controlForSource;\n         * routingPoints[2] = controlForSegment1;\n         * routingPoints[3] = segment;\n         * routingPoints[4] = controlForSegment2;\n         * routingPoints[5] = controlForTarget;\n         * routingPoints[6] = target;\n         */\n        let path = '';\n        if (segments.length >= 4) {\n            path += this.buildMainSegment(segments);\n            const pointsLeft = segments.length - 4;\n            if (pointsLeft > 0 && pointsLeft % 3 === 0) {\n                for (let i = 4; i < segments.length; i += 3) {\n                    path += this.addSpline(segments, i);\n                }\n            }\n        }\n        return <path d={path} />;\n    }\n\n    private buildMainSegment(segments: Point[]) {\n        const s = segments[0];\n        const h1 = segments[1];\n        const h2 = segments[2];\n        const t = segments[3];\n        return `M${s.x},${s.y} C${h1.x},${h1.y} ${h2.x},${h2.y} ${t.x},${t.y}`;\n    }\n\n    private addSpline(segments: Point[], index: number) {\n        // We have two controls for each junction, but SVG does not therefore index is jumped over\n        const c = segments[index + 1];\n        const p = segments[index + 2];\n        return ` S${c.x},${c.y} ${p.x},${p.y}`;\n    }\n\n    protected renderAdditionals(edge: SEdgeImpl, segments: Point[], context: RenderingContext): VNode[] {\n        return [];\n    }\n\n    protected renderDanglingEdge(message: string, edge: SEdgeImpl, context: RenderingContext): VNode {\n        return <text class-sprotty-edge-dangling={true} title={message}>?</text>;\n    }\n}\n\n@injectable()\nexport class SRoutingHandleView implements IView {\n\n    @inject(EdgeRouterRegistry) edgeRouterRegistry: EdgeRouterRegistry;\n\n    minimalPointDistance: number = 10;\n\n    render(handle: Readonly<SRoutingHandleImpl>, context: RenderingContext, args?: { route?: RoutedPoint[] }): VNode {\n        if (args && args.route) {\n            if (handle.parent instanceof SRoutableElementImpl) {\n                const router = this.edgeRouterRegistry.get(handle.parent.routerKind);\n                const theRoute = args.route === undefined ? this.edgeRouterRegistry.route(handle.parent, args) : args.route;\n                const position = router.getHandlePosition(handle.parent, theRoute, handle);\n                if (position !== undefined) {\n                    const node = <circle class-sprotty-routing-handle={true}\n                        class-selected={handle.selected} class-mouseover={handle.hoverFeedback}\n                        cx={position.x} cy={position.y} r={this.getRadius()} />;\n                    setAttr(node, 'data-kind', handle.kind);\n                    return node;\n                }\n            }\n        }\n        // Fallback: Create an empty group\n        return <g />;\n    }\n\n    getRadius(): number {\n        return 7;\n    }\n}\n\n@injectable()\nexport class SLabelView extends ShapeView {\n    render(label: Readonly<SLabelImpl>, context: RenderingContext): VNode | undefined {\n        if (!isEdgeLayoutable(label) && !this.isVisible(label, context)) {\n            return undefined;\n        }\n        const vnode = <text class-sprotty-label={true}>{label.text}</text>;\n        const subType = getSubType(label);\n        if (subType) {\n            setAttr(vnode, 'class', subType);\n        }\n        return vnode;\n    }\n}\n\n@injectable()\nexport class SCompartmentView implements IView {\n    render(compartment: Readonly<SCompartmentImpl>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        const translate = `translate(${compartment.bounds.x}, ${compartment.bounds.y})`;\n        const vnode = <g transform={translate} class-sprotty-comp=\"{true}\">\n            {context.renderChildren(compartment)}\n        </g>;\n        const subType = getSubType(compartment);\n        if (subType)\n            setAttr(vnode, 'class', subType);\n        return vnode;\n    }\n}\n\n@injectable()\nexport class SBezierCreateHandleView extends SRoutingHandleView {\n\n    override render(handle: Readonly<SRoutingHandleImpl>, context: RenderingContext, args?: { route?: RoutedPoint[] }): VNode {\n        if (args) {\n            const theRoute = args.route;\n            if (theRoute && handle.parent instanceof SRoutableElementImpl) {\n                const router = this.edgeRouterRegistry.get(handle.parent.routerKind);\n                const position = router.getHandlePosition(handle.parent, theRoute, handle);\n                if (position !== undefined) {\n\n                    const translation = \"translate(\" + position.x + \", \" + position.y + \")\";\n                    const textOffsetX = -5.5;\n                    const textOffsetY = 5.5;\n                    const text = (handle.kind === \"bezier-add\") ? \"+\" : \"-\";\n                    const node =\n                        <g transform={translation} class-sprotty-routing-handle={true}\n                            class-selected={handle.selected} class-mouseover={handle.hoverFeedback}>\n                            <circle r={this.getRadius()} />\n                            <text x={textOffsetX} y={textOffsetY} attrs-text-align=\"middle\"\n                                style-font-family=\"monospace\" style-pointer-events=\"none\" style-fill=\"white\">{text}</text>\n                        </g>;\n                    setAttr(node, 'data-kind', handle.kind);\n                    return node;\n                }\n            }\n        }\n        // Fallback: Create an empty group\n        return <g />;\n    }\n}\n\n@injectable()\nexport class SBezierControlHandleView extends SRoutingHandleView {\n\n    override render(handle: Readonly<SRoutingHandleImpl>, context: RenderingContext, args?: { route?: RoutedPoint[] }): VNode {\n        if (args) {\n            const theRoute = args.route;\n            if (theRoute && handle.parent instanceof SRoutableElementImpl) {\n                const router = this.edgeRouterRegistry.get(handle.parent.routerKind);\n                const position = router.getHandlePosition(handle.parent, theRoute, handle) as any;\n                if (position !== undefined) {\n\n                    let pathEndPos: Point | undefined;\n                    for (let i = 0; i < theRoute.length; i++) {\n                        const elem = theRoute[i];\n                        if (elem.kind === position.kind && elem.pointIndex === position.pointIndex) {\n                            if (handle.kind === 'bezier-control-before') {\n                                pathEndPos = theRoute[i + 1];\n                            } else {\n                                pathEndPos = theRoute[i - 1];\n                            }\n                            break;\n                        }\n                    }\n\n                    let node;\n                    if (pathEndPos) {\n                        const coords = `M ${position.x}, ${position.y} L ${pathEndPos.x}, ${pathEndPos.y}`;\n                        node =\n                            <g class-sprotty-routing-handle={true} class-selected={handle.selected} class-mouseover={handle.hoverFeedback}>\n                                <path d={coords} stroke=\"grey\" style-stroke-width=\"2px\"></path>\n                                <circle cx={position.x} cy={position.y} r={this.getRadius()} />\n                            </g>;\n                    } else {\n                        node = <circle class-sprotty-routing-handle={true} class-selected={handle.selected} class-mouseover={handle.hoverFeedback}\n                            cx={position.x} cy={position.y} r={this.getRadius()} />;\n                    }\n\n                    setAttr(node, 'data-kind', handle.kind);\n                    return node;\n                }\n            }\n        }\n        // Fallback: Create an empty group\n        return <g />;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// ------------------ Base ------------------\n\nexport * from './base/actions/action';\nexport * from './base/actions/action-dispatcher';\nexport * from './base/actions/action-handler';\nexport * from './base/actions/diagram-locker';\n\nexport * from './base/animations/animation-frame-syncer';\nexport * from './base/animations/animation';\nexport * from './base/animations/easing';\n\nexport * from './base/commands/command';\nexport * from './base/commands/command-registration';\nexport * from './base/commands/command-stack-options';\nexport * from './base/commands/command-stack';\n\nexport * from './base/features/initialize-canvas';\nexport * from './base/features/set-model';\n\nexport * from './base/model/smodel-extension';\nexport * from './base/model/smodel-factory';\nexport * from './base/model/smodel-utils';\nexport * from './base/model/smodel';\n\nexport * from './base/tool-manager/tool-manager';\nexport * from './base/tool-manager/tool';\n\nexport * from './base/ui-extensions/ui-extension-registry';\nexport * from './base/ui-extensions/ui-extension';\n\nexport * from './base/views/key-tool';\nexport * from './base/views/mouse-tool';\nexport * from './base/views/thunk-view';\nexport * from './base/views/view';\nexport * from './base/views/viewer-cache';\nexport * from './base/views/viewer-options';\nexport * from './base/views/viewer';\nexport * from './base/views/vnode-postprocessor';\nexport * from './base/views/vnode-utils';\n\nexport * from './base/types';\n\nimport defaultModule from './base/di.config';\nexport { defaultModule };\n\n\n// ------------------ Features ------------------\n\nexport * from \"./features/bounds/bounds-manipulation\";\nexport * from \"./features/bounds/hidden-bounds-updater\";\nexport * from \"./features/bounds/layout\";\nexport * from \"./features/bounds/model\";\nexport * from \"./features/bounds/vbox-layout\";\nexport * from \"./features/bounds/hbox-layout\";\nexport * from \"./features/bounds/stack-layout\";\nexport * from \"./features/bounds/views\";\n\nexport * from \"./features/button/button-handler\";\nexport * from \"./features/button/model\";\n\nexport * from \"./features/command-palette/action-providers\";\nexport * from \"./features/command-palette/command-palette\";\n\nexport * from \"./features/context-menu/context-menu-service\";\nexport * from \"./features/context-menu/menu-providers\";\nexport * from \"./features/context-menu/mouse-listener\";\n\nexport * from \"./features/edge-layout/di.config\";\nexport * from \"./features/edge-layout/edge-layout\";\nexport * from \"./features/edge-layout/model\";\n\nexport * from \"./features/edit/create\";\nexport * from \"./features/edit/create-on-drag\";\nexport * from \"./features/edit/di.config\";\nexport * from \"./features/edit/delete\";\nexport * from \"./features/edit/edit-label\";\nexport * from \"./features/edit/edit-label-ui\";\nexport * from \"./features/edit/edit-routing\";\nexport * from \"./features/edit/model\";\nexport * from \"./features/edit/reconnect\";\n\nexport * from \"./features/expand/expand\";\nexport * from \"./features/expand/model\";\nexport * from \"./features/expand/views\";\n\nexport * from \"./features/export/export\";\nexport * from \"./features/export/model\";\nexport * from \"./features/export/svg-exporter\";\n\nexport * from \"./features/fade/fade\";\nexport * from \"./features/fade/model\";\n\nexport * from \"./features/hover/hover\";\nexport * from \"./features/hover/model\";\n\nexport * from \"./features/decoration/model\";\nexport * from \"./features/decoration/views\";\nexport * from \"./features/decoration/decoration-placer\";\n\nexport * from \"./features/edge-intersection/intersection-finder\";\nexport * from \"./features/edge-intersection/sweepline\";\n\nexport * from \"./features/move/model\";\nexport * from \"./features/move/move\";\nexport * from \"./features/move/snap\";\n\nexport * from \"./features/nameable/model\";\n\nexport * from \"./features/open/open\";\nexport * from \"./features/open/model\";\n\nexport * from \"./features/projection/model\";\nexport * from \"./features/projection/views\";\n\nexport * from \"./features/routing/anchor\";\nexport * from \"./features/routing/abstract-edge-router\";\nexport * from \"./features/routing/bezier-anchors\";\nexport * from \"./features/routing/bezier-edge-router\";\nexport * from \"./features/routing/manhattan-anchors\";\nexport * from \"./features/routing/manhattan-edge-router\";\nexport * from \"./features/routing/model\";\nexport * from \"./features/routing/polyline-anchors\";\nexport * from \"./features/routing/polyline-edge-router\";\nexport * from \"./features/routing/routing\";\nexport * from \"./features/routing/views\";\n\nexport * from \"./features/select/model\";\nexport * from \"./features/select/select\";\n\nexport * from \"./features/undo-redo/undo-redo\";\n\nexport * from \"./features/update/model-matching\";\nexport * from \"./features/update/update-model\";\n\nexport * from \"./features/viewport/center-fit\";\nexport * from \"./features/viewport/model\";\nexport * from \"./features/viewport/scroll\";\nexport * from \"./features/viewport/viewport-root\";\nexport * from \"./features/viewport/viewport\";\nexport * from \"./features/viewport/zoom\";\n\nexport * from \"./features/zorder/zorder\";\n\nimport graphModule from \"./graph/di.config\";\n\nimport boundsModule from \"./features/bounds/di.config\";\nimport buttonModule from \"./features/button/di.config\";\nimport commandPaletteModule from \"./features/command-palette/di.config\";\nimport contextMenuModule from \"./features/context-menu/di.config\";\nimport decorationModule from \"./features/decoration/di.config\";\nimport edgeIntersectionModule from \"./features/edge-intersection/di.config\";\nimport edgeLayoutModule from \"./features/edge-layout/di.config\";\nimport expandModule from \"./features/expand/di.config\";\nimport exportModule from \"./features/export/di.config\";\nimport fadeModule from \"./features/fade/di.config\";\nimport hoverModule from \"./features/hover/di.config\";\nimport moveModule from \"./features/move/di.config\";\nimport openModule from \"./features/open/di.config\";\nimport routingModule from \"./features/routing/di.config\";\nimport selectModule from \"./features/select/di.config\";\nimport undoRedoModule from \"./features/undo-redo/di.config\";\nimport updateModule from \"./features/update/di.config\";\nimport viewportModule from \"./features/viewport/di.config\";\nimport zorderModule from './features/zorder/di.config';\n\nexport {\n    graphModule, boundsModule, buttonModule, commandPaletteModule, contextMenuModule, decorationModule,\n    edgeIntersectionModule, edgeLayoutModule, expandModule, exportModule, fadeModule, hoverModule, moveModule,\n    openModule, routingModule, selectModule, undoRedoModule, updateModule, viewportModule, zorderModule\n};\n\n// ------------------ Graph ------------------\n\nexport * from \"./graph/sgraph-factory\";\nexport * from \"./graph/sgraph\";\nexport * from \"./graph/views\";\n\n\n// ------------------ Library ------------------\n\nexport * from \"./lib/modules\";\nexport * from \"./lib/generic-views\";\nexport * from \"./lib/html-views\";\nexport * from \"./lib/jsx\";\nexport * from \"./lib/model\";\nexport * from \"./lib/svg-views\";\n\n\n// ------------------ Model Source ------------------\n\nexport * from \"./model-source/commit-model\";\nexport * from \"./model-source/diagram-server\";\nexport * from \"./model-source/local-model-source\";\nexport * from \"./model-source/logging\";\nexport * from \"./model-source/model-source\";\nexport * from \"./model-source/websocket\";\n\nimport modelSourceModule from \"./model-source/di.config\";\nexport { modelSourceModule };\n\n\n// ------------------ Utilities ------------------\n\nexport * from \"./utils/browser\";\nexport * from \"./utils/codicon\";\nexport * from \"./utils/color\";\nexport * from \"./utils/geometry\";\nexport * from \"./utils/inversify\";\nexport * from \"./utils/json\";\nexport * from \"./utils/logging\";\nexport * from \"./utils/registry\";\n","/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx svg */\nimport { svg }from './jsx';\nimport { injectable } from \"inversify\";\nimport virtualize from \"./virtualize\";\nimport { VNode } from \"snabbdom\";\nimport { IView, RenderingContext } from \"../base/views/view\";\nimport { setNamespace, setAttr } from \"../base/views/vnode-utils\";\nimport { ShapeView } from \"../features/bounds/views\";\nimport { ForeignObjectElementImpl, PreRenderedElementImpl, ShapedPreRenderedElementImpl } from \"./model\";\n\n@injectable()\nexport class PreRenderedView extends ShapeView {\n    render(model: Readonly<PreRenderedElementImpl>, context: RenderingContext): VNode | undefined {\n        if (model instanceof ShapedPreRenderedElementImpl && !this.isVisible(model, context)) {\n            return undefined;\n        }\n        const node = virtualize(model.code);\n        if (node === null) return undefined;\n        this.correctNamespace(node);\n        return node;\n    }\n\n    protected correctNamespace(node: VNode) {\n        if (node.sel === 'svg' || node.sel === 'g')\n            setNamespace(node, 'http://www.w3.org/2000/svg');\n    }\n}\n\n/**\n * An SVG `foreignObject` view with a namespace specified by the provided `ForeignObjectElement`.\n * Note that `foreignObject` may not be supported by all browsers or SVG viewers.\n */\n@injectable()\nexport class ForeignObjectView implements IView {\n    render(model: ForeignObjectElementImpl, context: RenderingContext): VNode | undefined{\n        const foreignObjectContents = virtualize(model.code);\n        if (foreignObjectContents === null) return undefined;\n        const node = <g>\n            <foreignObject requiredFeatures='http://www.w3.org/TR/SVG11/feature#Extensibility'\n                height={model.bounds.height} width={model.bounds.width} x={0} y={0}>\n                {foreignObjectContents}\n            </foreignObject>\n            {context.renderChildren(model)}\n        </g>;\n        setAttr(node, 'class', model.type);\n        setNamespace(foreignObjectContents, model.namespace);\n        return node;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n /** @jsx html */\nimport { html }from './jsx';\n\nimport { injectable } from 'inversify';\nimport { VNode } from 'snabbdom';\nimport { IView, RenderingContext } from '../base/views/view';\nimport { setClass } from '../base/views/vnode-utils';\nimport { HtmlRootImpl } from './model';\n\n/**\n * View for `HtmlRoot` elements. Typically this is used in hover popup boxes.\n */\n@injectable()\nexport class HtmlRootView implements IView {\n    render(model: HtmlRootImpl, context: RenderingContext): VNode {\n        const root = <div>\n            { context.renderChildren(model) }\n        </div>;\n        for (const c of model.classes) {\n            setClass(root, c, true);\n        }\n        return root;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { VNodeData, JsxVNodeChildren, JsxVNodeChild, jsx, FunctionComponent } from \"snabbdom\";\n\n\ndeclare global {\n  // eslint-disable-next-line no-redeclare\n  namespace JSX {\n      // Based on the tag list in github:DefinitelyTyped/DefinitelyTyped:React\n      interface IntrinsicElements {\n          [elemName: string]: VNodeData\n      }\n  }\n}\n\nconst modulesNS = ['hook', 'on', 'style', 'class', 'props', 'attrs', 'dataset'];\nconst SVGNS = 'http://www.w3.org/2000/svg';\n\nfunction normalizeAttrs(source: VNodeData | null, defNS: string, namespace?: string) {\n  const data: VNodeData = {};\n\n  if (namespace) {\n    data.ns = namespace;\n  }\n  if (source === null) {\n    return data;\n  }\n\n  modulesNS.forEach(mod => {\n    if (source[mod]) {\n      data[mod] = source[mod];\n    }\n  });\n  Object.keys(source).forEach(key => {\n    if (key === 'key' || key === 'classNames' || key === 'selector') return;\n    const idx = key.indexOf('-');\n    if (idx > 0)\n      addAttr(key.slice(0, idx), key.slice(idx + 1), source[key]);\n    else if (!data[key])\n      addAttr(defNS, key, source[key]);\n  });\n  return data;\n\n  function addAttr(modname: string, key: string, val: JsxVNodeChildren) {\n    const mod = data[modname] || (data[modname] = {});\n    mod[key] = val;\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction JSX(namespace?: string, defNS: string = 'props') {\n  return (tag: FunctionComponent | string, attrs: VNodeData | null, ...children: JsxVNodeChild[]) => jsx(tag, normalizeAttrs(attrs, defNS, namespace), children);\n}\n\nconst html = JSX();\nconst svg = JSX(SVGNS, 'attrs');\n\nexport { html, svg, JSX };\n","/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { Bounds, Dimension, Point } from \"sprotty-protocol/lib/utils/geometry\";\nimport { SModelRootImpl, SChildElementImpl } from \"../base/model/smodel\";\nimport { BoundsAware, boundsFeature, Alignable, alignFeature, isBoundsAware } from \"../features/bounds/model\";\nimport { Locateable, moveFeature } from \"../features/move/model\";\nimport { Selectable, selectFeature } from \"../features/select/model\";\nimport { SNodeImpl, SPortImpl } from '../graph/sgraph';\nimport { RECTANGULAR_ANCHOR_KIND, DIAMOND_ANCHOR_KIND, ELLIPTIC_ANCHOR_KIND } from \"../features/routing/anchor\";\n\n/**\n * A node that is represented by a circle.\n */\nexport class CircularNode extends SNodeImpl {\n    override get anchorKind() {\n        return ELLIPTIC_ANCHOR_KIND;\n    }\n}\n\n/**\n * A node that is represented by a rectangle.\n */\nexport class RectangularNode extends SNodeImpl {\n    override get anchorKind() {\n        return RECTANGULAR_ANCHOR_KIND;\n    }\n}\n\n/**\n * A node that is represented by a diamond.\n */\nexport class DiamondNode extends SNodeImpl {\n    override get anchorKind() {\n        return DIAMOND_ANCHOR_KIND;\n    }\n}\n\n/**\n * A port that is represented by a circle.\n */\nexport class CircularPort extends SPortImpl {\n    override get anchorKind() {\n        return ELLIPTIC_ANCHOR_KIND;\n    }\n}\n\n/**\n * A port that is represented by a rectangle.\n */\nexport class RectangularPort extends SPortImpl {\n    override get anchorKind() {\n        return RECTANGULAR_ANCHOR_KIND;\n    }\n}\n\n/**\n * Serializable schema for HtmlRoot.\n *\n * @deprecated Use `HtmlRoot` from `sprotty-protocol` instead.\n */\nexport interface HtmlRootSchema extends SModelRootSchema {\n    classes?: string[]\n}\n\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nexport class HtmlRootImpl extends SModelRootImpl {\n    classes: string[] = [];\n}\n\n/** @deprecated Use `HtmlRootImpl` instead. */\nexport const HtmlRoot = HtmlRootImpl;\n\n/**\n * Serializable schema for PreRenderedElement.\n *\n * @deprecated Use `PreRenderedElement` from `sprotty-protocol` instead.\n */\nexport interface PreRenderedElementSchema extends SModelElementSchema {\n    code: string\n}\n\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nexport class PreRenderedElementImpl extends SChildElementImpl {\n    code: string;\n}\n\n/** @deprecated Use `PreRenderedElementImpl` instead. */\nexport const PreRenderedElement = PreRenderedElementImpl;\n\n/**\n * Serializable schema for ShapedPreRenderedElement.\n *\n * @deprecated Use `ShapedPreRenderedElement` from `sprotty-protocol` instead.\n */\nexport interface ShapedPreRenderedElementSchema extends PreRenderedElementSchema {\n    position?: Point\n    size?: Dimension\n}\n\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nexport class ShapedPreRenderedElementImpl extends PreRenderedElementImpl implements BoundsAware, Locateable, Selectable, Alignable {\n    static readonly DEFAULT_FEATURES = [moveFeature, boundsFeature, selectFeature, alignFeature];\n\n    position: Point = Point.ORIGIN;\n    size: Dimension = Dimension.EMPTY;\n    selected: boolean = false;\n    alignment: Point = Point.ORIGIN;\n\n    get bounds(): Bounds {\n        return {\n            x: this.position.x,\n            y: this.position.y,\n            width: this.size.width,\n            height: this.size.height\n        };\n    }\n\n    set bounds(newBounds: Bounds) {\n        this.position = {\n            x: newBounds.x,\n            y: newBounds.y\n        };\n        this.size = {\n            width: newBounds.width,\n            height: newBounds.height\n        };\n    }\n\n}\n\n/** @deprecated Use `ShapedPreRenderedElementImpl` instead. */\nexport const ShapedPreRenderedElement = ShapedPreRenderedElementImpl;\n\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nexport class ForeignObjectElementImpl extends ShapedPreRenderedElementImpl {\n    namespace: string;\n    override get bounds(): Bounds {\n        if (Dimension.isValid(this.size)) {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        } else if (isBoundsAware(this.parent)) {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.parent.bounds.width,\n                height: this.parent.bounds.height\n            };\n        }\n        return Bounds.EMPTY;\n    }\n}\n\n/** @deprecated Use `ForeignObjectElementImpl` instead. */\nexport const ForeignObjectElement = ForeignObjectElementImpl;\n\n/**\n * Serializable schema for ForeignObjectElement.\n *\n * @deprecated Use `ForeignObjectElement` from `sprotty-protocol` instead.\n */\nexport interface ForeignObjectElementSchema extends ShapedPreRenderedElementSchema {\n    /** The namespace to be assigned to the elements inside of the `foreignObject`. */\n    namespace: string\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Container, ContainerModule } from 'inversify';\nimport defaultModule from '../base/di.config';\nimport modelSourceModule from '../model-source/di.config';\nimport boundsModule from '../features/bounds/di.config';\nimport buttonModule from '../features/button/di.config';\nimport commandPaletteModule from '../features/command-palette/di.config';\nimport contextMenuModule from '../features/context-menu/di.config';\nimport decorationModule from '../features/decoration/di.config';\nimport edgeLayoutModule from '../features/edge-layout/di.config';\nimport { edgeEditModule, labelEditModule, labelEditUiModule } from '../features/edit/di.config';\nimport expandModule from '../features/expand/di.config';\nimport exportModule from '../features/export/di.config';\nimport fadeModule from '../features/fade/di.config';\nimport hoverModule from '../features/hover/di.config';\nimport moveModule from '../features/move/di.config';\nimport openModule from '../features/open/di.config';\nimport routingModule from '../features/routing/di.config';\nimport selectModule from '../features/select/di.config';\nimport undoRedoModule from '../features/undo-redo/di.config';\nimport updateModule from '../features/update/di.config';\nimport viewportModule from '../features/viewport/di.config';\nimport zorderModule from '../features/zorder/di.config';\n\nexport interface LoadModuleOptions {\n    exclude?: ContainerModule[]\n}\n\n/**\n * Load the default set of container modules provided by Sprotty.\n */\nexport function loadDefaultModules(container: Container, options?: LoadModuleOptions) {\n    const modules = [\n        defaultModule, modelSourceModule, boundsModule, buttonModule,\n        commandPaletteModule, contextMenuModule, decorationModule, edgeEditModule,\n        edgeLayoutModule, expandModule, exportModule, fadeModule,\n        hoverModule, labelEditModule, labelEditUiModule, moveModule,\n        openModule, routingModule, selectModule, undoRedoModule,\n        updateModule, viewportModule, zorderModule\n    ];\n    if (options && options.exclude) {\n        for (const mod of options.exclude) {\n            const index = modules.indexOf(mod);\n            if (index >= 0)\n                modules.splice(index, 1);\n        }\n    }\n    container.load(...modules);\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/** @jsx svg */\nimport { svg }from './jsx';\n\nimport { VNode } from \"snabbdom\";\nimport { Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { IView, IViewArgs, RenderingContext } from \"../base/views/view\";\nimport { SNodeImpl, SPortImpl } from \"../graph/sgraph\";\nimport { ViewportRootElement } from \"../features/viewport/viewport-root\";\nimport { SShapeElementImpl } from '../features/bounds/model';\nimport { ShapeView } from '../features/bounds/views';\nimport { Hoverable } from '../features/hover/model';\nimport { Selectable } from '../features/select/model';\nimport { Diamond } from '../utils/geometry';\nimport { SModelElementImpl } from '../base/model/smodel';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class SvgViewportView implements IView {\n    render(model: Readonly<ViewportRootElement>, context: RenderingContext, args?: IViewArgs): VNode {\n        const transform = `scale(${model.zoom}) translate(${-model.scroll.x},${-model.scroll.y})`;\n        return <svg>\n            <g transform={transform}>\n                {context.renderChildren(model)}\n            </g>\n        </svg>;\n    }\n}\n\n@injectable()\nexport class CircularNodeView extends ShapeView {\n    render(node: Readonly<SShapeElementImpl & Hoverable & Selectable>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        const radius = this.getRadius(node);\n        return <g>\n            <circle class-sprotty-node={node instanceof SNodeImpl} class-sprotty-port={node instanceof SPortImpl}\n                    class-mouseover={node.hoverFeedback} class-selected={node.selected}\n                    r={radius} cx={radius} cy={radius}></circle>\n            {context.renderChildren(node)}\n        </g>;\n    }\n\n    protected getRadius(node: SShapeElementImpl): number {\n        const d = Math.min(node.size.width, node.size.height);\n        return d > 0 ? d / 2 : 0;\n    }\n}\n\n@injectable()\nexport class RectangularNodeView extends ShapeView {\n    render(node: Readonly<SShapeElementImpl & Hoverable & Selectable>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        return <g>\n            <rect class-sprotty-node={node instanceof SNodeImpl} class-sprotty-port={node instanceof SPortImpl}\n                  class-mouseover={node.hoverFeedback} class-selected={node.selected}\n                  x=\"0\" y=\"0\" width={Math.max(node.size.width, 0)} height={Math.max(node.size.height, 0)}></rect>\n            {context.renderChildren(node)}\n        </g>;\n    }\n}\n\n@injectable()\nexport class DiamondNodeView extends ShapeView {\n    render(node: Readonly<SShapeElementImpl & Hoverable & Selectable>, context: RenderingContext, args?: IViewArgs): VNode | undefined {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        const diamond = new Diamond({ height: Math.max(node.size.height, 0), width: Math.max(node.size.width, 0), x: 0, y: 0 });\n        const points = `${svgStr(diamond.topPoint)} ${svgStr(diamond.rightPoint)} ${svgStr(diamond.bottomPoint)} ${svgStr(diamond.leftPoint)}`;\n        return <g>\n            <polygon class-sprotty-node={node instanceof SNodeImpl} class-sprotty-port={node instanceof SPortImpl}\n                  class-mouseover={node.hoverFeedback} class-selected={node.selected}\n                  points={points} />\n            {context.renderChildren(node)}\n        </g>;\n    }\n}\n\nfunction svgStr(point: Point) {\n    return `${point.x},${point.y}`;\n}\n\n@injectable()\nexport class EmptyGroupView implements IView {\n    render(model: Readonly<SModelElementImpl>, context: RenderingContext): VNode {\n        return <g></g>;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { h, vnode, VNode, VNodeData } from 'snabbdom';\n\nfunction buildVNodeData(attrs: { [key: string]: string }) {\n    const data: VNodeData = {};\n    const addData = (memo: Record<string, string> | null, name: string) => {\n        if (name !== 'style' && name !== 'class') {\n            const val = unescapeEntities(attrs[name]);\n            memo ? memo[name] = val : memo = { [name]: val };\n        }\n        return memo;\n    };\n    const _attrs = Object.keys(attrs).reduce(addData, null);\n\n    if (_attrs) {\n        data.attrs = _attrs;\n    }\n\n    const style = parseStyle(attrs);\n    if (style) {\n        data.style = style;\n    }\n\n    const classes = parseClass(attrs);\n    if (classes) {\n        data.class = classes;\n    }\n    return data;\n}\n\nfunction parseStyle(attrs: { [key: string]: string }) {\n    const addStyle = (memo: Record<string, string> | null, styleProp: string) => {\n        const res = styleProp.split(':');\n        const name = transformName(res[0].trim());\n        if (name) {\n            const val = res[1].replace('!important', '').trim();\n            memo ? memo[name] = val : memo = { [name]: val };\n        }\n        return memo;\n    };\n    try {\n        return attrs.style.split(';').reduce(addStyle, null);\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction parseClass(attrs: { [key: string]: string }) {\n    const addClass = (memo: Record<string, boolean> | null, className: string) => {\n        className = className.trim();\n        if (className) {\n            memo ? memo[className] = true : memo = { [className]: true };\n        }\n        return memo;\n    };\n    try {\n        return attrs.class.split(' ').reduce(addClass, null);\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction transformName(name: string) {\n    // Replace -a with A to help camel case style property names.\n    name = name.replace(/-(\\w)/g, function _replace($1, $2) {\n        return $2.toUpperCase();\n    });\n    // Handle properties that start with a -.\n    const firstChar = name.charAt(0).toLowerCase();\n    return `${firstChar}${name.substring(1)}`;\n}\n\n// Regex for matching HTML entities.\nconst entityRegex = new RegExp('&[a-z0-9#]+;', 'gi');\n// Element for setting innerHTML for transforming entities.\nlet el: HTMLDivElement | null = null;\n\nfunction unescapeEntities(text: string) {\n    // Create the element using the context if it doesn't exist.\n    if (!el) {\n        el = document.createElement('div');\n    }\n    return text.replace(entityRegex, (entity) => {\n        if (el === null) return '';\n        el.innerHTML = entity;\n        return el.textContent === null ? '' : el.textContent;\n    });\n}\n\nfunction recurse(doc: Node, func: (node: Node, parent: Node | null) => void) {\n    let node: Node | null = doc;\n    let parent: Node | null = null;\n    const stack: Node[] = [];\n\n    const setChild = (n: Node) => {\n        const child = n.firstChild;\n        if (child !== null) {\n            parent = n;\n        }\n        node = child;\n    };\n    func(node, parent);\n    setChild(node);\n\n    while (true) {\n        while (node) {\n            stack.push(node);\n            func(node, parent);\n            setChild(node);\n        }\n        const _node = stack.pop();\n        node = _node ? _node : null;\n        if (!stack.length) break;\n        parent = stack[stack.length - 1];\n        if (node) {\n            const sibling = node.nextSibling;\n            if (sibling == null) {\n                parent = stack[stack.length - 1];\n            }\n            node = sibling;\n        }\n    }\n}\n\nlet vdom: VNode | null = null;\nconst vnodeMap = new Map<Node, VNode>();\nlet delimited = false;\n\nfunction toVNode(node: Node, parent: Node | null) {\n\n    let current: VNode | undefined;\n    if (parent !== null) {\n        current = vnodeMap.get(parent);\n    }\n\n    switch (node?.nodeType) {\n        // element\n        case 1: {\n            if (current === undefined) return;\n            current.children = current.children ? current.children : [];\n            const children = current.children;\n            const attributes = (node as Element).attributes;\n            const attrs: { [key: string]: string } = {};\n            for (let i = 0; i < attributes.length; i++) {\n                const attr = attributes.item(i);\n                if (attr) {\n                    attrs[attr.name] = attr.value;\n                }\n            }\n            const vn = h(node.nodeName, buildVNodeData(attrs));\n            children.push(vn);\n            vnodeMap.set(node, vn);\n            break;\n        }\n        // text\n        case 3: {\n            const text = node.textContent;\n            if (text !== null && current !== undefined) {\n                current.children = current.children ? current.children : [];\n                const children = current.children;\n                const lastData = children.length > 0 ? children[children.length - 1] : null;\n                if (!delimited && typeof lastData !== 'string' && lastData !== null && lastData.sel === undefined) {\n                    lastData.text = lastData.text + text;\n                } else {\n                    children.push(vnode(undefined, undefined, undefined, text, undefined));\n                }\n                delimited = false;\n            }\n            break;\n        }\n        case 8: {\n            delimited = true;\n            break;\n        }\n        // document\n        case 9: {\n            vdom = vnode(undefined, undefined, [], undefined, undefined);\n            vnodeMap.set(node, vdom);\n            break;\n        }\n        default:\n            break;\n    }\n}\n\nfunction stripVNode(vnodes: VNode | null) {\n    const children = vnodes?.children;\n    if (typeof children === 'undefined') return null;\n    if (children.length === 1 && typeof children[0] !== 'string') return children[0];\n    return null;\n}\n\nexport default function virtualizeString(html?: string) {\n\n    const parser = new window.DOMParser();\n    if (parser === undefined || html === undefined || html === '') return null;\n\n    const doc = parser.parseFromString(html, \"application/xml\");\n\n    if (doc?.firstChild?.nodeName === 'parsererror') {\n        const error = `${doc?.firstChild?.textContent}`;\n        return h('parsererror', [error]);\n    }\n\n    delimited = false;\n    vdom = null;\n    recurse(doc, toVNode);\n\n    if (vdom === null) return null;\n    return stripVNode(vdom);\n}\n","/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { Action } from \"sprotty-protocol/lib/actions\";\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { CommandExecutionContext, CommandReturn, SystemCommand } from \"../base/commands/command\";\nimport { SModelRootImpl } from \"../base/model/smodel\";\nimport { TYPES } from \"../base/types\";\nimport { ModelSource } from \"./model-source\";\n\n/**\n * Commit the current SModel back to the model source.\n *\n * The SModel (AKA internal model) contains a lot of dirty/transitional state, such\n * as intermediate move postions or handles. When a user interaction that spans multiple\n * commands finishes, it fires a CommitModelAction to write the final changes back to\n * the model source.\n */\nexport interface CommitModelAction extends Action {\n    kind: typeof CommitModelAction.KIND;\n}\nexport namespace CommitModelAction {\n    export const KIND = 'commitModel';\n\n    export function create(): CommitModelAction {\n        return {\n            kind: KIND\n        };\n    }\n}\n\n@injectable()\nexport class CommitModelCommand extends SystemCommand {\n    static readonly KIND = CommitModelAction.KIND;\n\n    @inject(TYPES.ModelSource) modelSource: ModelSource;\n\n    originalModel: SModelRootSchema;\n    newModel: SModelRootSchema;\n\n    constructor(@inject(TYPES.Action) protected readonly action: CommitModelAction) {\n        super();\n    }\n\n    execute(context: CommandExecutionContext): CommandReturn {\n        this.newModel = context.modelFactory.createSchema(context.root);\n        return this.doCommit(this.newModel, context.root, true);\n    }\n\n    protected doCommit(model: SModelRootSchema, result: SModelRootImpl, doSetOriginal: boolean): CommandReturn {\n        const commitResult = this.modelSource.commitModel(model);\n        if (commitResult instanceof Promise) {\n            return commitResult.then(originalModel => {\n                if (doSetOriginal)\n                    this.originalModel = originalModel;\n                return result;\n            });\n        } else {\n            if (doSetOriginal)\n                this.originalModel = commitResult;\n            return result;\n        }\n    }\n\n    undo(context: CommandExecutionContext): CommandReturn {\n        return this.doCommit(this.originalModel, context.root, false);\n    }\n\n    redo(context: CommandExecutionContext): CommandReturn {\n        return this.doCommit(this.newModel, context.root, false);\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from \"inversify\";\nimport { configureCommand } from \"../base/commands/command-registration\";\nimport { TYPES } from \"../base/types\";\nimport { CommitModelCommand } from \"./commit-model\";\nimport { ComputedBoundsApplicator, ModelSource } from \"./model-source\";\n\n/**\n * This container module does NOT provide any binding for TYPES.ModelSource because that needs to be\n * done according to the needs of the application. You can choose between a local (LocalModelSource)\n * and a remote (e.g. WebSocketDiagramServer) implementation.\n */\nconst modelSourceModule = new ContainerModule((bind, _unbind, isBound) => {\n    bind(TYPES.ModelSourceProvider).toProvider<ModelSource>((context) => {\n        return () => {\n            return new Promise<ModelSource>((resolve) => {\n                resolve(context.container.get<ModelSource>(TYPES.ModelSource));\n            });\n        };\n    });\n    configureCommand({bind, isBound}, CommitModelCommand);\n    bind(TYPES.IActionHandlerInitializer).toService(TYPES.ModelSource);\n    bind(ComputedBoundsApplicator).toSelf().inSingletonScope();\n});\n\nexport default modelSourceModule;\n","/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { saveAs } from 'file-saver';\nimport { inject, injectable } from \"inversify\";\nimport { OpenAction, ActionMessage as ProtocolActionMessage, isActionMessage as isProtocolActionMessage } from 'sprotty-protocol';\nimport {\n    Action, CollapseExpandAction, CollapseExpandAllAction, ComputedBoundsAction, RequestModelAction,\n    RequestPopupModelAction, SetModelAction, UpdateModelAction\n} from 'sprotty-protocol/lib/actions';\nimport { SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { hasOwnProperty } from 'sprotty-protocol/lib/utils/object';\nimport { ActionHandlerRegistry } from \"../base/actions/action-handler\";\nimport { ICommand } from \"../base/commands/command\";\nimport { SetModelCommand } from \"../base/features/set-model\";\nimport { TYPES } from \"../base/types\";\nimport { RequestBoundsCommand } from '../features/bounds/bounds-manipulation';\nimport { ExportSvgAction } from '../features/export/svg-exporter';\nimport { UpdateModelCommand } from \"../features/update/update-model\";\nimport { ILogger } from \"../utils/logging\";\nimport { ComputedBoundsApplicator, ModelSource } from \"./model-source\";\n\n/**\n * Sent by the external server when to signal a state change.\n */\nexport class ServerStatusAction {\n    static KIND = 'serverStatus';\n    kind = ServerStatusAction.KIND;\n    severity: string;\n    message: string;\n}\n\nconst receivedFromServerProperty = '__receivedFromServer';\n\n/**\n * A ModelSource that communicates with an external model provider, e.g.\n * a model editor.\n *\n * This class defines which actions are sent to and received from the\n * external model source.\n */\n@injectable()\nexport abstract class DiagramServerProxy extends ModelSource {\n\n    @inject(TYPES.ILogger) protected logger: ILogger;\n    @inject(ComputedBoundsApplicator) protected readonly computedBoundsApplicator: ComputedBoundsApplicator;\n\n    clientId: string;\n\n    protected currentRoot: SModelRootSchema = {\n        type: 'NONE',\n        id: 'ROOT'\n    };\n\n    protected lastSubmittedModelType: string;\n\n    override initialize(registry: ActionHandlerRegistry): void {\n        super.initialize(registry);\n\n        // Register this model source\n        registry.register(ComputedBoundsAction.KIND, this);\n        registry.register(RequestBoundsCommand.KIND, this);\n        registry.register(RequestPopupModelAction.KIND, this);\n        registry.register(CollapseExpandAction.KIND, this);\n        registry.register(CollapseExpandAllAction.KIND, this);\n        registry.register(OpenAction.KIND, this);\n        registry.register(ServerStatusAction.KIND, this);\n\n        if (!this.clientId)\n            this.clientId = this.viewerOptions.baseDiv;\n    }\n\n    handle(action: Action): void | ICommand | Action {\n        const forwardToServer = this.handleLocally(action);\n        if (forwardToServer)\n            this.forwardToServer(action);\n    }\n\n    protected forwardToServer(action: Action): void {\n        const message: ProtocolActionMessage = {\n            clientId: this.clientId,\n            action: action\n        };\n        this.logger.log(this, 'sending', message);\n        this.sendMessage(message);\n    }\n\n    protected abstract sendMessage(message: ProtocolActionMessage): void;\n\n    protected messageReceived(data: any): void {\n        const object = typeof(data) === 'string' ? JSON.parse(data) : data;\n        if (isProtocolActionMessage(object) && object.action) {\n            if (!object.clientId || object.clientId === this.clientId) {\n                (object.action as any)[receivedFromServerProperty] = true;\n                this.logger.log(this, 'receiving', object);\n                this.actionDispatcher.dispatch(object.action).then(() => {\n                    this.storeNewModel(object.action);\n                });\n            }\n        } else {\n            this.logger.error(this, 'received data is not an action message', object);\n        }\n    }\n\n    /**\n     * Check whether the given action should be handled locally. Returns true if the action should\n     * still be sent to the server, and false if it's only handled locally.\n     */\n    protected handleLocally(action: Action): boolean {\n        this.storeNewModel(action);\n        switch (action.kind) {\n            case ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action as ComputedBoundsAction);\n            case RequestModelAction.KIND:\n                return this.handleRequestModel(action as RequestModelAction);\n            case RequestBoundsCommand.KIND:\n                return false;\n            case ExportSvgAction.KIND:\n                return this.handleExportSvgAction(action as ExportSvgAction);\n            case ServerStatusAction.KIND:\n                return this.handleServerStateAction(action as ServerStatusAction);\n        }\n        return !(action as any)[receivedFromServerProperty];\n    }\n\n    /**\n     * Put the new model contained in the given action into the model storage, if there is any.\n     */\n    protected storeNewModel(action: Action): void {\n        if (action.kind === SetModelCommand.KIND\n            || action.kind === UpdateModelCommand.KIND\n            || action.kind === RequestBoundsCommand.KIND) {\n            const newRoot = (action as any).newRoot;\n            if (newRoot) {\n                this.currentRoot = newRoot as SModelRootSchema;\n                if (action.kind === SetModelCommand.KIND || action.kind === UpdateModelCommand.KIND) {\n                    this.lastSubmittedModelType = newRoot.type;\n                }\n            }\n        }\n    }\n\n    protected handleRequestModel(action: RequestModelAction): boolean {\n        const newOptions = {\n            needsClientLayout: this.viewerOptions.needsClientLayout,\n            needsServerLayout: this.viewerOptions.needsServerLayout,\n            ...action.options\n        };\n        const newAction = {\n            ...action,\n            options: newOptions\n        };\n        this.forwardToServer(newAction);\n        return false;\n    }\n\n    /**\n     * If the server requires to compute a layout, the computed bounds are forwarded. Otherwise they\n     * are applied to the current model locally and a model update is triggered.\n     */\n    protected handleComputedBounds(action: ComputedBoundsAction): boolean {\n        if (this.viewerOptions.needsServerLayout) {\n            return true;\n        } else {\n            const root = this.currentRoot;\n            this.computedBoundsApplicator.apply(root, action);\n            if (root.type === this.lastSubmittedModelType) {\n                this.actionDispatcher.dispatch(UpdateModelAction.create(root));\n            } else {\n                this.actionDispatcher.dispatch(SetModelAction.create(root));\n            }\n            this.lastSubmittedModelType = root.type;\n            return false;\n        }\n    }\n\n    protected handleExportSvgAction(action: ExportSvgAction): boolean {\n        const blob = new Blob([action.svg], {type: \"text/plain;charset=utf-8\"});\n        saveAs(blob, \"diagram.svg\");\n        return false;\n    }\n\n    protected handleServerStateAction(action: ServerStatusAction): boolean {\n        return false;\n    }\n\n    commitModel(newRoot: SModelRootSchema): Promise<SModelRootSchema> | SModelRootSchema {\n        const previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use `DiagramServerProxy` instead.\n */\nexport const DiagramServer = DiagramServerProxy;\n\n/**\n * Wrapper for actions when transferring them between client and server via a DiagramServer.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface ActionMessage {\n    clientId: string\n    action: Action\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isActionMessage(object: unknown): object is ActionMessage {\n    return hasOwnProperty(object, 'action');\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { saveAs } from 'file-saver';\nimport { inject, injectable, optional } from 'inversify';\nimport {\n    Action, ComputedBoundsAction, RequestBoundsAction, RequestModelAction, RequestPopupModelAction,\n    SetModelAction, SetPopupModelAction, UpdateModelAction\n} from 'sprotty-protocol/lib/actions';\nimport { SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema, Viewport} from 'sprotty-protocol/lib/model';\nimport { IModelLayoutEngine as ProtocolIModelLayoutEngine, GetViewportAction, ViewportResult, GetSelectionAction, SelectionResult } from 'sprotty-protocol';\nimport { Bounds } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelIndex, findElement } from 'sprotty-protocol/lib/utils/model-utils';\nimport { ILogger } from '../utils/logging';\nimport { FluentIterable } from '../utils/iterable';\nimport { TYPES } from '../base/types';\nimport { ActionHandlerRegistry } from '../base/actions/action-handler';\nimport { EMPTY_ROOT } from '../base/model/smodel-factory';\nimport { ExportSvgAction } from '../features/export/svg-exporter';\nimport { applyMatches, Match } from '../features/update/model-matching';\nimport { ModelSource, ComputedBoundsApplicator } from './model-source';\n\nexport interface IPopupModelProvider {\n    getPopupModel(request: RequestPopupModelAction, element?: SModelElementSchema): SModelRootSchema | undefined;\n}\n\n/**\n * A model source that allows to set and modify the model through function calls.\n * This class can be used as a facade over the action-based API of sprotty. It handles\n * actions for bounds calculation and model updates.\n */\n@injectable()\nexport class LocalModelSource extends ModelSource {\n\n    @inject(TYPES.ILogger) protected readonly logger: ILogger;\n    @inject(ComputedBoundsApplicator) protected readonly computedBoundsApplicator: ComputedBoundsApplicator;\n    @inject(TYPES.IPopupModelProvider)@optional() protected popupModelProvider?: IPopupModelProvider;\n    @inject(TYPES.IModelLayoutEngine)@optional() protected layoutEngine?: ProtocolIModelLayoutEngine;\n\n    protected currentRoot: SModelRootSchema = EMPTY_ROOT;\n\n    /**\n     * The `type` property of the model root is used to determine whether a model update\n     * is a change of the previous model or a totally new one.\n     */\n    protected lastSubmittedModelType: string;\n\n    get model(): SModelRootSchema {\n        return this.currentRoot;\n    }\n\n    set model(root: SModelRootSchema) {\n        this.setModel(root);\n    }\n\n    override initialize(registry: ActionHandlerRegistry): void {\n        super.initialize(registry);\n\n        // Register this model source\n        registry.register(ComputedBoundsAction.KIND, this);\n        registry.register(RequestPopupModelAction.KIND, this);\n    }\n\n    /**\n     * Set the model without incremental update.\n     */\n    setModel(newRoot: SModelRootSchema): Promise<void> {\n        this.currentRoot = newRoot;\n        return this.submitModel(newRoot, false);\n    }\n\n    commitModel(newRoot: SModelRootSchema): Promise<SModelRootSchema> | SModelRootSchema {\n        const previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    }\n\n    /**\n     * Apply an incremental update to the model with an animation showing the transition to\n     * the new state. If `newRoot` is undefined, the current root is submitted; in that case\n     * it is assumed that it has been modified before.\n     */\n    updateModel(newRoot?: SModelRootSchema): Promise<void> {\n        if (newRoot === undefined) {\n            return this.submitModel(this.currentRoot, true);\n        } else {\n            this.currentRoot = newRoot;\n            return this.submitModel(newRoot, true);\n        }\n    }\n\n    /**\n     * Get the current selection from the model.\n     */\n    async getSelection(): Promise<FluentIterable<SModelElementSchema>> {\n        const res = await this.actionDispatcher.request<SelectionResult>(GetSelectionAction.create());\n        const result: SModelElementSchema[] = [];\n        this.gatherSelectedElements(this.currentRoot, new Set(res.selectedElementsIDs), result);\n        return result;\n    }\n\n    private gatherSelectedElements(element: SModelElementSchema, selected: Set<string>, result: SModelElementSchema[]): void {\n        if (selected.has(element.id)) {\n            result.push(element);\n        }\n        if (element.children) {\n            for (const child of element.children) {\n                this.gatherSelectedElements(child, selected, result);\n            }\n        }\n    }\n\n    /**\n     * Get the current viewport from the model.\n     */\n    async getViewport(): Promise<Viewport & { canvasBounds: Bounds }> {\n        const res = await this.actionDispatcher.request<ViewportResult>(GetViewportAction.create());\n        return {\n            scroll: res.viewport.scroll,\n            zoom: res.viewport.zoom,\n            canvasBounds: res.canvasBounds\n        };\n    }\n\n    /**\n     * If client layout is active, run a `RequestBoundsAction` and wait for the resulting\n     * `ComputedBoundsAction`, otherwise call `doSubmitModel()` directly.\n     */\n    protected async submitModel(newRoot: SModelRootSchema, update: boolean | Match[], cause?: Action): Promise<void> {\n        if (this.viewerOptions.needsClientLayout) {\n            const computedBounds = await this.actionDispatcher.request<ComputedBoundsAction>(RequestBoundsAction.create(newRoot));\n            const index = this.computedBoundsApplicator.apply(this.currentRoot, computedBounds);\n            await this.doSubmitModel(newRoot, true, cause, index);\n        } else {\n            await this.doSubmitModel(newRoot, update, cause);\n        }\n    }\n\n    /**\n     * Submit the given model with an `UpdateModelAction` or a `SetModelAction` depending on the\n     * `update` argument. If available, the model layout engine is invoked first.\n     */\n    protected async doSubmitModel(newRoot: SModelRootSchema, update: boolean | Match[],\n            cause?: Action, index?: SModelIndex): Promise<void> {\n        if (this.layoutEngine !== undefined) {\n            try {\n                const layoutResult = this.layoutEngine.layout(newRoot, index);\n                if (layoutResult instanceof Promise)\n                    newRoot = await layoutResult;\n                else if (layoutResult !== undefined)\n                    newRoot = layoutResult;\n            } catch (error) {\n                this.logger.error(this, error.toString(), error.stack);\n            }\n        }\n\n        const lastSubmittedModelType = this.lastSubmittedModelType;\n        this.lastSubmittedModelType = newRoot.type;\n        if (cause && cause.kind === RequestModelAction.KIND && (cause as RequestModelAction).requestId) {\n            const request = cause as RequestModelAction;\n            await this.actionDispatcher.dispatch(SetModelAction.create(newRoot, request.requestId));\n        } else if (update && newRoot.type === lastSubmittedModelType) {\n            const input = Array.isArray(update) ? update : newRoot;\n            await this.actionDispatcher.dispatch(UpdateModelAction.create(input, { animate: true, cause }));\n        } else {\n            await this.actionDispatcher.dispatch(SetModelAction.create(newRoot));\n        }\n    }\n\n    /**\n     * Modify the current model with an array of matches.\n     */\n    applyMatches(matches: Match[]): Promise<void> {\n        const root = this.currentRoot;\n        applyMatches(root, matches);\n        return this.submitModel(root, matches);\n    }\n\n    /**\n     * Modify the current model by adding new elements.\n     */\n    addElements(elements: (SModelElementSchema | { element: SModelElementSchema, parentId: string })[]): Promise<void> {\n        const matches: Match[] = [];\n        for (const e of elements) {\n            const anye: any = e;\n            if (anye.element !== undefined && anye.parentId !== undefined) {\n                matches.push({\n                    right: anye.element,\n                    rightParentId: anye.parentId\n                });\n            } else if (anye.id !== undefined) {\n                matches.push({\n                    right: anye,\n                    rightParentId: this.currentRoot.id\n                });\n            }\n        }\n        return this.applyMatches(matches);\n    }\n\n    /**\n     * Modify the current model by removing elements.\n     */\n    removeElements(elements: (string | { elementId: string, parentId: string })[]): Promise<void> {\n        const matches: Match[] = [];\n        const index = new SModelIndex();\n        index.add(this.currentRoot);\n        for (const e of elements) {\n            const anye: any = e;\n            if (anye.elementId !== undefined && anye.parentId !== undefined) {\n                const element = index.getById(anye.elementId);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: anye.parentId\n                    });\n                }\n            } else {\n                const element = index.getById(anye);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: this.currentRoot.id\n                    });\n                }\n            }\n        }\n        return this.applyMatches(matches);\n    }\n\n\n    // ----- Methods for handling incoming actions ----------------------------\n\n    handle(action: Action): void {\n        switch (action.kind) {\n            case RequestModelAction.KIND:\n                this.handleRequestModel(action as RequestModelAction);\n                break;\n            case ComputedBoundsAction.KIND:\n                this.computedBoundsApplicator.apply(this.currentRoot, action as ComputedBoundsAction);\n                break;\n            case RequestPopupModelAction.KIND:\n                this.handleRequestPopupModel(action as RequestPopupModelAction);\n                break;\n            case ExportSvgAction.KIND:\n                this.handleExportSvgAction(action as ExportSvgAction);\n                break;\n        }\n    }\n\n    protected handleRequestModel(action: RequestModelAction): void {\n        this.submitModel(this.currentRoot, false, action);\n    }\n\n    protected handleRequestPopupModel(action: RequestPopupModelAction): void {\n        if (this.popupModelProvider !== undefined) {\n            const element = findElement(this.currentRoot, action.elementId);\n            const popupRoot = this.popupModelProvider.getPopupModel(action, element);\n            if (popupRoot !== undefined) {\n                popupRoot.canvasBounds = action.bounds;\n                this.actionDispatcher.dispatch(SetPopupModelAction.create(popupRoot, action.requestId));\n            }\n        }\n    }\n\n    protected handleExportSvgAction(action: ExportSvgAction): void {\n        const blob = new Blob([action.svg], { type: 'text/plain;charset=utf-8' });\n        saveAs(blob, 'diagram.svg');\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use IPopupModelProvider instead.\n */\nexport type PopupModelFactory = (request: RequestPopupModelAction, element?: SModelElementSchema)\n    => SModelRootSchema | undefined;\n\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface IModelLayoutEngine {\n    layout(model: SModelRootSchema, index?: SModelIndex): SModelRootSchema | Promise<SModelRootSchema>;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Action, LoggingAction as ProtocolLoggingAction } from 'sprotty-protocol/lib/actions';\nimport { ILogger, LogLevel } from '../utils/logging';\nimport { TYPES } from '../base/types';\nimport { ModelSource } from './model-source';\n\n/**\n * A logger that forwards messages of type 'error', 'warn', and 'info' to the model source.\n */\n@injectable()\nexport class ForwardingLogger implements ILogger {\n\n    @inject(TYPES.ModelSourceProvider) protected modelSourceProvider: () => Promise<ModelSource>;\n    @inject(TYPES.LogLevel) public logLevel: LogLevel;\n\n    error(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.error)\n            this.forward(thisArg, message, LogLevel.error, params);\n    }\n\n    warn(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.warn)\n            this.forward(thisArg, message, LogLevel.warn, params);\n    }\n\n    info(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.info)\n            this.forward(thisArg, message, LogLevel.info, params);\n    }\n\n    log(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.log) {\n            // We cannot forward 'log' level messages since that would lead to endless loops\n            try {\n                const caller = typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg);\n                console.log.apply(thisArg, [caller + ': ' + message, ...params]);\n            } catch (error) {}\n        }\n    }\n\n    protected forward(thisArg: any, message: string, logLevel: LogLevel, params: any[]) {\n        const date = new Date();\n        const action = ProtocolLoggingAction.create({\n            message,\n            severity: LogLevel[logLevel],\n            time: date.toLocaleTimeString(),\n            caller: typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg),\n            params: params.map(p => JSON.stringify(p))\n        });\n        this.modelSourceProvider().then(modelSource => {\n            try {\n                modelSource.handle(action);\n            } catch (error) {\n                try {\n                    console.log.apply(thisArg, [message, action, error]);\n                } catch (e) {}\n            }\n        });\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface LoggingAction extends Action {\n    kind: typeof LoggingAction.KIND;\n    severity: string\n    time: string\n    caller: string\n    message: string\n    params: string[]\n}\nexport namespace LoggingAction {\n    export const KIND = 'logging';\n\n    export function create(options: { severity: string, time: string, caller: string, message: string, params: string[] }): LoggingAction {\n        return {\n            kind: KIND,\n            ...options\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { Action, ComputedBoundsAction, RequestModelAction } from \"sprotty-protocol/lib/actions\";\nimport { SModelElement as SModelElementSchema, SModelRoot as SModelRootSchema } from 'sprotty-protocol/lib/model';\nimport { Dimension, Point } from 'sprotty-protocol/lib/utils/geometry';\nimport { SModelIndex } from \"sprotty-protocol/lib/utils/model-utils\";\nimport { IActionDispatcher } from \"../base/actions/action-dispatcher\";\nimport { ActionHandlerRegistry, IActionHandler, IActionHandlerInitializer } from \"../base/actions/action-handler\";\nimport { ICommand } from \"../base/commands/command\";\nimport { TYPES } from \"../base/types\";\nimport { ViewerOptions } from \"../base/views/viewer-options\";\nimport { ExportSvgAction } from '../features/export/svg-exporter';\n\n/**\n * A model source is serving the model to the event cycle. It represents\n * the entry point to the client for external sources, such as model\n * editors.\n *\n * As an IActionHandler it listens to actions in and reacts to them with\n * commands or actions if necessary. This way, you can implement action\n * protocols between the client and the outside world.\n *\n * There are two default implementations for a ModelSource:\n * <ul>\n * <li>the LocalModelSource handles the actions to calculate bounds and\n * set/update the model</li>\n * <li>the DiagramServer connects via websocket to a remote source. It\n * can be used to connect to a model editor that provides the model,\n * layouts diagrams, transfers selection and answers model queries from\n * the client.</li>\n */\n@injectable()\nexport abstract class ModelSource implements IActionHandler, IActionHandlerInitializer {\n\n    @inject(TYPES.IActionDispatcher) readonly actionDispatcher: IActionDispatcher;\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n\n    initialize(registry: ActionHandlerRegistry): void {\n        // Register this model source\n        registry.register(RequestModelAction.KIND, this);\n        registry.register(ExportSvgAction.KIND, this);\n    }\n\n    abstract handle(action: Action): ICommand | Action | void;\n\n    /**\n     * Commit changes from the internal SModel back to the currentModel.\n     *\n     * This method is meant to be called only by CommitModelCommand and other commands\n     * that need to feed the current internal model back to the model source. It does\n     * not have any side effects such as triggering layout or bounds computation, as the\n     * internal model is already current. See `CommitModelAction` for details.\n     *\n     * @param newRoot the new model.\n     * @return the previous model.\n     */\n    abstract commitModel(newRoot: SModelRootSchema): Promise<SModelRootSchema> | SModelRootSchema;\n}\n\n\n@injectable()\nexport class ComputedBoundsApplicator {\n    apply(root: SModelRootSchema, action: ComputedBoundsAction): SModelIndex {\n        const index = new SModelIndex();\n        index.add(root);\n        for (const b of action.bounds) {\n            const element = index.getById(b.elementId);\n            if (element !== undefined)\n                this.applyBounds(element, b.newPosition, b.newSize);\n        }\n        if (action.alignments !== undefined) {\n            for (const a of action.alignments) {\n                const element = index.getById(a.elementId);\n                if (element !== undefined)\n                    this.applyAlignment(element, a.newAlignment);\n            }\n        }\n        return index;\n    }\n\n    protected applyAlignment(element: SModelElementSchema, newAlignment: Point) {\n        const e = element as any;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    }\n\n    protected applyBounds(element: SModelElementSchema, newPosition: Point | undefined, newSize: Dimension) {\n        const e = element as any;\n        if (newPosition)\n            e.position = {...newPosition};\n        e.size = {...newSize};\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\nimport { ActionMessage } from \"sprotty-protocol/lib/actions\";\nimport { DiagramServerProxy } from \"./diagram-server\";\n\n/**\n * An external ModelSource that connects to the model provider using a websocket.\n */\n@injectable()\nexport class WebSocketDiagramServerProxy extends DiagramServerProxy {\n\n    protected webSocket?: WebSocket;\n\n    listen(webSocket: WebSocket): void {\n        webSocket.addEventListener('message', event => {\n            this.messageReceived(event.data);\n        });\n        webSocket.addEventListener('error', event => {\n            this.logger.error(this, 'error event received', event);\n        });\n        this.webSocket = webSocket;\n    }\n\n    disconnect() {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = undefined;\n        }\n    }\n\n    protected sendMessage(message: ActionMessage): void {\n        if (this.webSocket) {\n            this.webSocket.send(JSON.stringify(message));\n        } else {\n            throw new Error('WebSocket is not connected');\n        }\n    }\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use `WebSocketDiagramServerProxy` instead;\n */\nexport const WebSocketDiagramServer = WebSocketDiagramServerProxy;\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Point } from 'sprotty-protocol';\n\n/**\n * Returns whether the mouse or keyboard event includes the CMD key\n * on Mac or CTRL key on Linux / others.\n */\nexport function isCtrlOrCmd(event: KeyboardEvent | MouseEvent) {\n    if (isMac())\n        return event.metaKey;\n    else\n        return event.ctrlKey;\n}\n\nexport function isMac(): boolean {\n    return window.navigator.userAgent.indexOf(\"Mac\") !== -1;\n}\n\nexport function isCrossSite(url: string): boolean {\n    if (url && typeof window !== 'undefined' && window.location) {\n        let baseURL: string = '';\n        if (window.location.protocol)\n            baseURL += window.location.protocol + '//';\n        if (window.location.host)\n            baseURL += window.location.host;\n        return baseURL.length > 0 && !url.startsWith(baseURL);\n    }\n    return false;\n}\n\n/**\n * Returns the amount of scroll of the browser window as a point.\n */\nexport function getWindowScroll(): Point {\n    if (typeof window === 'undefined') {\n        return Point.ORIGIN;\n    }\n    return {\n        x: window.pageXOffset,\n        y: window.pageYOffset\n    };\n}\n\n/**\n * Checks whether the given mouse event hits the given DOM element.\n */\nexport function hitsMouseEvent(child: Element, event: MouseEvent): boolean {\n    const clientRect = child.getBoundingClientRect();\n    return event.clientX >= clientRect.left && event.clientX <= clientRect.right\n        && event.clientY >= clientRect.top && event.clientY <= clientRect.bottom;\n}\n","/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const ACTION_ITEM = 'action-item';\nexport const ANIMATION_SPIN = 'animation-spin';\n\nexport function codiconCSSString(codiconId: string, actionItem = false, animationSpin = false, additionalCSS: string[] = []): string {\n    return codiconCSSClasses(codiconId, actionItem, animationSpin, additionalCSS).join(' ');\n}\n\nexport function codiconCSSClasses(codiconId: string, actionItem = false, animationSpin = false, additionalCSS: string[] = []): string[] {\n    const cssClassArray = ['codicon', `codicon-${codiconId}`];\n    if (actionItem) {\n        cssClassArray.push(ACTION_ITEM);\n    }\n    if (animationSpin) {\n        cssClassArray.push(ANIMATION_SPIN);\n    }\n    if (additionalCSS.length > 0) {\n        cssClassArray.push(...additionalCSS);\n    }\n    return cssClassArray;\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface RGBColor {\n    red: number\n    green: number\n    blue: number\n}\n\nexport function rgb(red: number, green: number, blue: number): RGBColor {\n    return {\n        red: red,\n        green: green,\n        blue: blue\n    };\n}\n\nexport function toSVG(c: RGBColor): string {\n    return 'rgb(' + c.red + ',' + c.green + ',' + c.blue + ')';\n}\n\nexport class ColorMap {\n\n    constructor(protected stops: RGBColor[]) {\n    }\n\n    getColor(t: number): RGBColor {\n        t = Math.max(0, Math.min(0.99999999, t));\n        const i = Math.floor(t * this.stops.length);\n        return this.stops[i];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2022 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Bounds as ProtocolBounds, Point as ProtocolPoint, toDegrees as protocolToDegrees } from \"sprotty-protocol\";\n\n/**\n * Represents an object's insets, for top, bottom, left and right\n */\nexport interface Insets {\n    top: number\n    bottom: number\n    left: number\n    right: number\n}\n\nexport type Orientation = 'north' | 'south' | 'east' | 'west';\n\n/**\n * A diamond or rhombus is a quadrilateral whose four sides all have the same length.\n * It consists of four points, a `topPoint`, `rightPoint`, `bottomPoint`, and a `leftPoint`,\n * which are connected by four lines -- the `topRightSideLight`, `topLeftSideLine`, `bottomRightSideLine`,\n * and the `bottomLeftSideLine`.\n */\nexport class Diamond {\n\n    constructor(protected bounds: ProtocolBounds) { }\n\n    get topPoint(): ProtocolPoint {\n        return {\n            x: this.bounds.x + this.bounds.width / 2,\n            y: this.bounds.y\n        };\n    }\n\n    get rightPoint(): ProtocolPoint {\n        return {\n            x: this.bounds.x + this.bounds.width,\n            y: this.bounds.y + this.bounds.height / 2\n        };\n    }\n\n    get bottomPoint(): ProtocolPoint {\n        return {\n            x: this.bounds.x + this.bounds.width / 2,\n            y: this.bounds.y + this.bounds.height\n        };\n    }\n\n    get leftPoint(): ProtocolPoint {\n        return {\n            x: this.bounds.x,\n            y: this.bounds.y + this.bounds.height / 2\n        };\n    }\n\n    get topRightSideLine(): Line {\n        return new PointToPointLine(this.topPoint, this.rightPoint);\n    }\n\n    get topLeftSideLine(): Line {\n        return new PointToPointLine(this.topPoint, this.leftPoint);\n    }\n\n    get bottomRightSideLine(): Line {\n        return new PointToPointLine(this.bottomPoint, this.rightPoint);\n    }\n\n    get bottomLeftSideLine(): Line {\n        return new PointToPointLine(this.bottomPoint, this.leftPoint);\n    }\n\n    /**\n     * Return the closest side of this diamond to the specified `refPoint`.\n     * @param {Point} refPoint a reference point\n     * @returns {Line} a line representing the closest side\n     */\n    closestSideLine(refPoint: ProtocolPoint): Line {\n        const c = ProtocolBounds.center(this.bounds);\n        if (refPoint.x > c.x) {\n            if (refPoint.y > c.y) {\n                return this.bottomRightSideLine;\n            } else {\n                return this.topRightSideLine;\n            }\n        } else {\n            if (refPoint.y > c.y) {\n                return this.bottomLeftSideLine;\n            } else {\n                return this.topLeftSideLine;\n            }\n        }\n    }\n}\n\n/**\n * A line represented in its standard form `a*x + b*y = c`.\n */\nexport interface Line {\n    readonly a: number\n    readonly b: number\n    readonly c: number\n}\n\nexport type CardinalDirection =\n    'north' | 'north-east' | 'east' | 'south-east' |\n    'south' | 'south-west' | 'west' | 'north-west';\n\n/**\n * A line made up from two points.\n */\nexport class PointToPointLine implements Line {\n\n    constructor(public p1: ProtocolPoint, public p2: ProtocolPoint) { }\n\n    get a(): number {\n        return this.p1.y - this.p2.y;\n    }\n\n    get b(): number {\n        return this.p2.x - this.p1.x;\n    }\n\n    get c(): number {\n        return this.p2.x * this.p1.y - this.p1.x * this.p2.y;\n    }\n\n    /**\n     * The counter-clockwise angle of this line relative to the x-axis.\n     */\n    get angle(): number {\n        return Math.atan2(-this.a, this.b);\n    }\n\n    /**\n     * The slope of the line.\n     * A vertical line returns `undefined`.\n     */\n    get slope(): number | undefined {\n        if (this.b === 0) return undefined;\n        return this.a / this.b;\n    }\n\n    /**\n     * The slope of the line or `Number.MAX_SAFE_INTEGER` if vertical.\n     */\n    get slopeOrMax(): number {\n        if (this.slope === undefined) {\n            return Number.MAX_SAFE_INTEGER;\n        }\n        return this.slope;\n    }\n\n    /**\n     * The direction of this line, such as 'north', 'south', or 'south-west'.\n     */\n    get direction(): CardinalDirection {\n        const hDegrees = protocolToDegrees(this.angle);\n        const degrees = hDegrees < 0 ? 360 + hDegrees : hDegrees;\n        // degrees are relative to the x-axis\n        if (degrees === 90) {\n            return 'south';\n        } else if (degrees === 0 || degrees === 360) {\n            return 'east';\n        } else if (degrees === 270) {\n            return 'north';\n        } else if (degrees === 180) {\n            return 'west';\n        } else if (degrees > 0 && degrees < 90) {\n            return 'south-east';\n        } else if (degrees > 90 && degrees < 180) {\n            return 'south-west';\n        } else if (degrees > 180 && degrees < 270) {\n            return 'north-west';\n        } else if (degrees > 270 && degrees < 360) {\n            return 'north-east';\n        }\n        throw new Error(`Cannot determine direction of line (${this.p1.x},${this.p1.y}) to (${this.p2.x},${this.p2.y})`);\n    }\n\n    /**\n     * @param otherLine the other line\n     * @returns the intersection point between `this` line and the `otherLine` if exists, or `undefined`.\n     */\n    intersection(otherLine: PointToPointLine): ProtocolPoint | undefined {\n        if (this.hasIndistinctPoints(otherLine)) {\n            return undefined;\n        }\n\n        const x1 = this.p1.x;\n        const y1 = this.p1.y;\n        const x2 = this.p2.x;\n        const y2 = this.p2.y;\n        const x3 = otherLine.p1.x;\n        const y3 = otherLine.p1.y;\n        const x4 = otherLine.p2.x;\n        const y4 = otherLine.p2.y;\n\n        const denominator = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\n        if (denominator === 0) {\n            return undefined;\n        }\n        const numeratorA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\n        const numeratorB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\n        if (numeratorA === 0 && numeratorB === 0) {\n            return undefined;\n        }\n\n        const determinantA = numeratorA / denominator;\n        const determinantB = numeratorB / denominator;\n        if (determinantA < 0 || determinantA > 1 || determinantB < 0 || determinantB > 1) {\n            return undefined;\n        }\n\n        const x = x1 + (determinantA * (x2 - x1));\n        const y = y1 + (determinantA * (y2 - y1));\n        return { x, y };\n    }\n\n    /**\n     * @param otherLine the other line\n     * @returns whether the start and end point of this line is does not have distinct start\n     * or end points with the `otherLine`\n     */\n    hasIndistinctPoints(otherLine: PointToPointLine): boolean {\n        return ProtocolPoint.equals(this.p1, otherLine.p1) ||\n            ProtocolPoint.equals(this.p1, otherLine.p2) ||\n            ProtocolPoint.equals(this.p2, otherLine.p1) ||\n            ProtocolPoint.equals(this.p2, otherLine.p2);\n    }\n}\n\n/**\n * Returns the intersection of two lines `l1` and `l2`\n * @param {Line} l1 - A line\n * @param {Line} l2 - Another line\n * @returns {Point} The intersection point of `l1` and `l2`\n */\nexport function intersection(l1: Line, l2: Line): ProtocolPoint {\n    return {\n        x: (l1.c * l2.b - l2.c * l1.b) / (l1.a * l2.b - l2.a * l1.b),\n        y: (l1.a * l2.c - l2.a * l1.c) / (l1.a * l2.b - l2.a * l1.b)\n    };\n}\n\n/**\n * Enumeration of possible directions (left, right, up, down)\n * @deprecated do we use this? We should rather use a string type\n */\nexport enum Direction { left, right, up, down }\n\n/**\n * A minimum and maximum value of a numeric type.\n */\nexport interface Limits {\n    min: number\n    max: number\n}\n\n/**\n * Limits a value to the specified `limits`.\n * @param {number} value - The value to limit\n * @param {Limits} limits - The minimum and maximum limits\n */\nexport function limit(value: number, limits: Limits): number {\n    if (value < limits.min) {\n        return limits.min;\n    }\n    if (value > limits.max) {\n        return limits.max;\n    }\n    return value;\n}\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function isBounds(element: any): element is Bounds {\n    return 'x' in element\n        && 'y' in element\n        && 'width' in element\n        && 'height' in element;\n}\n\n/**\n * Combines the bounds of two objects into one, so that the new bounds\n * are the minimum bounds that covers both of the original bounds.\n * @param {Bounds} b0 - First bounds object\n * @param {Bounds} b1 - Second bounds object\n * @returns {Bounds} The combined bounds\n *\n * @deprecated Use `Bounds.combine` from `sprotty-protocol` instead.\n */\nexport function combine(b0: Bounds, b1: Bounds): Bounds {\n    if (!isValidDimension(b0))\n        return isValidDimension(b1) ? b1 : EMPTY_BOUNDS;\n    if (!isValidDimension(b1))\n        return b0;\n    const minX = Math.min(b0.x, b1.x);\n    const minY = Math.min(b0.y, b1.y);\n    const maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n    const maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n    return {\n        x: minX, y: minY, width: maxX - minX, height: maxY - minY\n    };\n}\n\n/**\n * Translates the given bounds.\n * @param {Bounds} b - Bounds object\n * @param {Point} p - Vector by which to translate the bounds\n * @returns {Bounds} The translated bounds\n *\n * @deprecated Use `Bounds.translate` from `sprotty-protocol` instead.\n */\nexport function translate(b: Bounds, p: Point): Bounds {\n    return {\n        x: b.x + p.x,\n        y: b.y + p.y,\n        width: b.width,\n        height: b.height\n    };\n}\n\n/**\n * Returns the center point of the bounds of an object\n * @param {Bounds} b - Bounds object\n * @returns {Point} the center point\n *\n * @deprecated Use `Bounds.center` from `sprotty-protocol` instead.\n */\nexport function center(b: Bounds): Point {\n    return {\n        x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n        y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n    };\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function centerOfLine(s: Point, e: Point): Point {\n    const b: Bounds = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return center(b);\n}\n\n/**\n * Checks whether the point p is included in the bounds b.\n *\n * @deprecated Use `Bounds.includes` from `sprotty-protocol` instead.\n */\nexport function includes(b: Bounds, p: Point): boolean {\n    return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n}\n/**\n * Returns the \"straight line\" distance between two points.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Eucledian distance\n *\n * @deprecated Use `Point.euclideanDistance` from `sprotty-protocol` instead.\n */\nexport function euclideanDistance(a: Point, b: Point): number {\n    const dx = b.x - a.x;\n    const dy = b.y - a.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\n/**\n * Returns the distance between two points in a grid, using a\n * strictly vertical and/or horizontal path (versus straight line).\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Manhattan distance\n *\n * @deprecated Use `Point.manhattanDistance` from `sprotty-protocol` instead.\n */\nexport function manhattanDistance(a: Point, b: Point): number {\n    return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n}\n\n/**\n * Returns the maximum of the horizontal and the vertical distance.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The maximum distance\n *\n * @deprecated Use `Point.maxDistance` from `sprotty-protocol` instead.\n */\nexport function maxDistance(a: Point, b: Point): number {\n    return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n}\n\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function angleOfPoint(p: Point): number {\n    return Math.atan2(p.y, p.x);\n}\n\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function angleBetweenPoints(a: Point, b: Point): number {\n    const lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    const dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\n\n/**\n * Computes a point that is the original `point` shifted towards `refPoint` by the given `distance`.\n * @param {Point} point - Point to shift\n * @param {Point} refPoint - Point to shift towards\n * @param {Point} distance - Distance to shift\n *\n * @deprecated Use `Point.shiftTowards` from `sprotty-protocol` instead.\n */\nexport function shiftTowards(point: Point, refPoint: Point, distance: number): Point {\n    const diff = subtract(refPoint, point);\n    const normalized = normalize(diff);\n    const shift = { x: normalized.x * distance, y: normalized.y * distance };\n    return add(point, shift);\n}\n\n/**\n * Computes the normalized vector from the vector given in `point`; that is, computing its unit vector.\n * @param {Point} point - Point representing the vector to be normalized\n * @returns {Point} The normalized point\n *\n * @deprecated Use `Point.normalize` from `sprotty-protocol` instead.\n */\nexport function normalize(point: Point): Point {\n    const mag = magnitude(point);\n    if (mag === 0 || mag === 1) {\n        return ORIGIN_POINT;\n    }\n    return {\n        x: point.x / mag,\n        y: point.y / mag\n    };\n}\n\n/**\n * Computes the magnitude of the vector given in `point`.\n * @param {Point} point - Point representing the vector to compute the magnitude for\n * @returns {number} The magnitude or also known as length of the `point`\n *\n * @deprecated Use `Point.magnitude` from `sprotty-protocol` instead.\n */\nexport function magnitude(point: Point): number {\n    return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\n\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function toDegrees(a: number): number {\n    return a * 180 / Math.PI;\n}\n\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function toRadians(a: number): number {\n    return a * Math.PI / 180;\n}\n\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport function almostEquals(a: number, b: number): boolean {\n    return Math.abs(a - b) < 1e-3;\n}\n\n/**\n * Calculates a linear combination of p0 and p1 using lambda, i.e.\n *   (1-lambda) * p0 + lambda * p1\n *\n * @deprecated Use `Point.linear` from `sprotty-protocol` instead.\n */\nexport function linear(p0: Point, p1: Point, lambda: number): Point {\n    return {\n        x: (1 - lambda) * p0.x + lambda * p1.x,\n        y: (1 - lambda) * p0.y + lambda * p1.y\n    };\n}\n\n/**\n * A Point is composed of the (x,y) coordinates of an object.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Point {\n    readonly x: number\n    readonly y: number\n}\n\n/**\n * (x,y) coordinates of the origin.\n *\n * @deprecated Use `Point.ORIGIN` from `sprotty-protocol` instead.\n */\nexport const ORIGIN_POINT: Point = Object.freeze({\n    x: 0,\n    y: 0\n});\n\n/**\n * Adds two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The sum of the two points\n *\n * @deprecated Use `Point.add` from `sprotty-protocol` instead.\n */\nexport function add(p1: Point, p2: Point): Point {\n    return {\n        x: p1.x + p2.x,\n        y: p1.y + p2.y\n    };\n}\n\n/**\n * Subtracts two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The difference of the two points\n *\n * @deprecated Use `Point.subtract` from `sprotty-protocol` instead.\n */\nexport function subtract(p1: Point, p2: Point): Point {\n    return {\n        x: p1.x - p2.x,\n        y: p1.y - p2.y\n    };\n}\n\n/**\n * Specifies whether a point has exactly the same coordinates as another point.\n * @param {Point} point1 a point\n * @param {Point} point2 another point\n * @returns {boolean} `true` if `point1` has exactly the same `x` and `y` values as `point2`, `false` otherwise.\n *\n * @deprecated Use `Point.equals` from `sprotty-protocol` instead.\n */\nexport function pointEquals(point1: Point, point2: Point): boolean {\n    return point1.x === point2.x && point1.y === point2.y;\n}\n\n/**\n * The Dimension of an object is composed of its width and height.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Dimension {\n    readonly width: number\n    readonly height: number\n}\n\n/**\n * A dimension with both width and height set to a negative value, which is considered as undefined.\n *\n * @deprecated Use `Dimension.EMPTY` from `sprotty-protocol` instead.\n */\nexport const EMPTY_DIMENSION: Dimension = Object.freeze({\n    width: -1,\n    height: -1\n});\n\n/**\n * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n * @param {Dimension} b - Dimension object\n * @returns {boolean}\n *\n * @deprecated Use `Dimension.isValid` from `sprotty-protocol` instead.\n */\nexport function isValidDimension(d: Dimension): boolean {\n    return d.width >= 0 && d.height >= 0;\n}\n\n/**\n * The bounds are the position (x, y) and dimension (width, height) of an object.\n *\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport interface Bounds extends Point, Dimension {\n}\n\n/**\n * @deprecated Use `Bounds.EMPTY` from `sprotty-protocol` instead.\n */\nexport const EMPTY_BOUNDS: Bounds = Object.freeze({\n    x: 0,\n    y: 0,\n    width: -1,\n    height: -1\n});\n","/********************************************************************************\n * Copyright (c) 2019-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function isInjectable(constr: new (...args: unknown[]) => unknown): boolean {\n    return Reflect.getMetadata('inversify:paramtypes', constr) !== undefined;\n}\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * An iterable that allows filtering, mapping values etc. with a fluent API.\n * Arrays conform to this interface, so an array can be passed at every place where\n * a FluentIterable is expected.\n */\nexport interface FluentIterable<T> extends Iterable<T> {\n    filter(callback: (element: T) => boolean): FluentIterable<T>\n    map<T2>(callback: (element: T) => T2): FluentIterable<T2>\n    forEach(callback: (element: T, index: number) => void): void\n    indexOf(element: any): number\n}\n\n/**\n * A helper class that allows to easily create fluent iterables.\n */\nexport class FluentIterableImpl<S, T> implements FluentIterable<T> {\n\n    constructor(private readonly startFn: () => S,\n                private readonly nextFn: (state: S) => IteratorResult<T>) {}\n\n    [Symbol.iterator]() {\n        const iterator = {\n            state: this.startFn(),\n            next: () => this.nextFn(iterator.state),\n            [Symbol.iterator]: () => iterator\n        };\n        return iterator;\n    }\n\n    filter(callback: (element: T) => boolean): FluentIterable<T> {\n        return filterIterable(this, callback);\n    }\n\n    map<T2>(callback: (element: T) => T2): FluentIterable<T2> {\n        return mapIterable(this, callback);\n    }\n\n    forEach(callback: (element: T, index: number) => void): void {\n        const iterator = this[Symbol.iterator]();\n        let index = 0;\n        let result: IteratorResult<T>;\n        do {\n            result = iterator.next();\n            if (result.value !== undefined)\n                callback(result.value, index);\n            index++;\n        } while (!result.done);\n    }\n\n    indexOf(element: any): number {\n        const iterator = this[Symbol.iterator]();\n        let index = 0;\n        let result: IteratorResult<T>;\n        do {\n            result = iterator.next();\n            if (result.value === element)\n                return index;\n            index++;\n        } while (!result.done);\n        return -1;\n    }\n}\n\n/**\n * Converts a FluentIterable into an array. If the input is an array, it is returned unchanged.\n */\nexport function toArray<T>(input: FluentIterable<T>): T[] {\n    if (input.constructor === Array) {\n        return input as T[];\n    }\n    const result: T[] = [];\n    input.forEach(element => result.push(element));\n    return result;\n}\n\nexport const DONE_RESULT: IteratorResult<any> = Object.freeze({ done: true, value: undefined });\n\n/**\n * Create a fluent iterable that filters the content of the given iterable or array.\n */\nexport function filterIterable<T>(input: Iterable<T> | ArrayLike<T>, callback: (element: T) => boolean): FluentIterable<T> {\n    return new FluentIterableImpl(\n        () => createIterator(input),\n        (iterator) => {\n            let result: IteratorResult<T>;\n            do {\n                result = iterator.next();\n            } while (!result.done && !callback(result.value));\n            return result;\n        }\n    );\n}\n\n/**\n * Create a fluent iterable that maps the content of the given iterable or array.\n */\nexport function mapIterable<T1, T2>(input: Iterable<T1> | ArrayLike<T1>, callback: (element: T1) => T2): FluentIterable<T2> {\n    return new FluentIterableImpl(\n        () => createIterator(input),\n        (iterator) => {\n            const { done, value } = iterator.next();\n            if (done)\n                return DONE_RESULT;\n            else\n                return { done: false, value: callback(value) };\n        }\n    );\n}\n\n/**\n * Create an iterator for the given iterable or array.\n */\nfunction createIterator<T>(collection: Iterable<T> | ArrayLike<T>): Iterator<T> {\n    const method = (collection as Iterable<T>)[Symbol.iterator];\n    if (typeof method === 'function') {\n        return method.call(collection);\n    }\n    const length = (collection as ArrayLike<T>).length;\n    if (typeof length === 'number' && length >= 0) {\n        return new ArrayIterator(collection as ArrayLike<T>);\n    }\n    return { next: () => DONE_RESULT };\n}\n\n/**\n * Iterator implementation for arrays.\n */\nclass ArrayIterator<T> implements IterableIterator<T> {\n    constructor(private readonly array: ArrayLike<T>) {}\n\n    private index = 0;\n\n    next(): IteratorResult<T> {\n        if (this.index < this.array.length)\n            return { done: false, value: this.array[this.index++] };\n        else\n            return DONE_RESULT;\n    }\n\n    [Symbol.iterator]() {\n        return this;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Compatibility deprecation layer (will be removed with the graduation 1.0.0 release)\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\nexport type JsonAny =  JsonPrimitive | JsonMap | JsonArray | null;\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\n export type JsonPrimitive = string | number | boolean;\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\n export interface JsonMap {\n    [key: string]: JsonAny;\n}\n\n/**\n * @deprecated Use the declaration from `sprotty-protocol` instead.\n */\n export type JsonArray = Array<JsonAny>;\n","/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { isMac } from './browser';\n\n/**\n * Returns whether the keyboard event matches the keystroke described by the given\n * code and modifiers. The code must comply to the format of the `code` property\n * of KeyboardEvent, but in contrast to that property, the actual keyboard layout is\n * considered by this function if possible.\n */\nexport function matchesKeystroke(event: KeyboardEvent, code: KeyCode, ...modifiers: KeyboardModifier[]): boolean {\n    if (getActualCode(event) !== code)\n        return false;\n    if (isMac()) {\n        if (event.ctrlKey !== (modifiers.findIndex(m => m === 'ctrl') >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(m => m === 'meta' || m === 'ctrlCmd') >= 0))\n            return false;\n    } else {\n        if (event.ctrlKey !== (modifiers.findIndex(m => m === 'ctrl' || m === 'ctrlCmd') >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(m => m === 'meta') >= 0))\n            return false;\n    }\n    if (event.altKey !== (modifiers.findIndex(m => m === 'alt') >= 0))\n        return false;\n    if (event.shiftKey !== (modifiers.findIndex(m => m === 'shift') >= 0))\n        return false;\n    return true;\n}\n\nexport type KeyboardModifier = 'ctrl' | 'meta' | 'ctrlCmd' | 'alt' | 'shift';\n\nexport type KeyCode =\n    'AltLeft'|'AltRight'|'ArrowDown'|'ArrowLeft'|'ArrowRight'|'ArrowUp'|'Backslash'|'Backspace'|'Backquote'\n    |'BracketLeft'|'BracketRight'|'CapsLock'|'Comma'|'ContextMenu'|'ControlLeft'|'ControlRight'|'Convert'|'Delete'\n    |'Digit0'|'Digit1'|'Digit2'|'Digit3'|'Digit4'|'Digit5'|'Digit6'|'Digit7'|'Digit8'|'Digit9'\n    |'F1'|'F2'|'F3'|'F4'|'F5'|'F6'|'F7'|'F8'|'F9'|'F10'|'F11'|'F12'|'F13'|'F14'|'F15'|'F16'|'F17'|'F18'|'F19'|'F20'|'F21'|'F22'|'F23'|'F24'\n    |'End'|'Enter'|'Equal'|'Escape'|'Home'|'Insert'|'IntlBackslash'|'IntlRo'|'IntlYen'|'KanaMode'\n    |'KeyA'|'KeyB'|'KeyC'|'KeyD'|'KeyE'|'KeyF'|'KeyG'|'KeyH'|'KeyI'|'KeyJ'|'KeyK'|'KeyL'|'KeyM'\n    |'KeyN'|'KeyO'|'KeyP'|'KeyQ'|'KeyR'|'KeyS'|'KeyT'|'KeyU'|'KeyV'|'KeyW'|'KeyX'|'KeyY'|'KeyZ'\n    |'MetaLeft'|'MetaRight'|'Minus'|'NonConvert'|'NumLock'\n    |'Numpad0'|'Numpad1'|'Numpad2'|'Numpad3'|'Numpad4'|'Numpad5'|'Numpad6'|'Numpad7'|'Numpad8'|'Numpad9'\n    |'NumpadAdd'|'NumpadComma'|'NumpadDecimal'|'NumpadDivide'|'NumpadEnter'|'NumpadEqual'|'NumpadMultiply'\n    |'NumpadSeparator'|'NumpadSubtract'|'OSLeft'|'OSRight'|'PageDown'|'PageUp'|'Pause'|'Period'|'PrintScreen'\n    |'Quote'|'ScrollLock'|'Semicolon'|'ShiftLeft'|'ShiftRight'|'Slash'|'Space'|'Tab';\n\n/**\n * Determines a key code from the given event. This is necessary because the `code` property of\n * a KeyboardEvent does not consider keyboard layouts.\n */\nexport function getActualCode(event: KeyboardEvent): KeyCode {\n    if (event.keyCode) {\n        const result = STRING_CODE[event.keyCode];\n        if (result !== undefined)\n            return result;\n    }\n    return event.code as KeyCode;\n}\n\nconst STRING_CODE: { [keyCode: number]: KeyCode } = new Array(256);\n\n(() => {\n    function addKeyCode(stringCode: KeyCode, numericCode: number): void {\n        if (STRING_CODE[numericCode] === undefined)\n            STRING_CODE[numericCode] = stringCode;\n    }\n\n    addKeyCode('Pause', 3);\n    addKeyCode('Backspace', 8);\n    addKeyCode('Tab', 9);\n    addKeyCode('Enter', 13);\n    addKeyCode('ShiftLeft', 16);\n    addKeyCode('ShiftRight', 16);\n    addKeyCode('ControlLeft', 17);\n    addKeyCode('ControlRight', 17);\n    addKeyCode('AltLeft', 18);\n    addKeyCode('AltRight', 18);\n    addKeyCode('CapsLock', 20);\n    addKeyCode('Escape', 27);\n    addKeyCode('Space', 32);\n    addKeyCode('PageUp', 33);\n    addKeyCode('PageDown', 34);\n    addKeyCode('End', 35);\n    addKeyCode('Home', 36);\n    addKeyCode('ArrowLeft', 37);\n    addKeyCode('ArrowUp', 38);\n    addKeyCode('ArrowRight', 39);\n    addKeyCode('ArrowDown', 40);\n    addKeyCode('Insert', 45);\n    addKeyCode('Delete', 46);\n\n    addKeyCode('Digit1', 49);\n    addKeyCode('Digit2', 50);\n    addKeyCode('Digit3', 51);\n    addKeyCode('Digit4', 52);\n    addKeyCode('Digit5', 53);\n    addKeyCode('Digit6', 54);\n    addKeyCode('Digit7', 55);\n    addKeyCode('Digit8', 56);\n    addKeyCode('Digit9', 57);\n    addKeyCode('Digit0', 48);\n\n    addKeyCode('KeyA', 65);\n    addKeyCode('KeyB', 66);\n    addKeyCode('KeyC', 67);\n    addKeyCode('KeyD', 68);\n    addKeyCode('KeyE', 69);\n    addKeyCode('KeyF', 70);\n    addKeyCode('KeyG', 71);\n    addKeyCode('KeyH', 72);\n    addKeyCode('KeyI', 73);\n    addKeyCode('KeyJ', 74);\n    addKeyCode('KeyK', 75);\n    addKeyCode('KeyL', 76);\n    addKeyCode('KeyM', 77);\n    addKeyCode('KeyN', 78);\n    addKeyCode('KeyO', 79);\n    addKeyCode('KeyP', 80);\n    addKeyCode('KeyQ', 81);\n    addKeyCode('KeyR', 82);\n    addKeyCode('KeyS', 83);\n    addKeyCode('KeyT', 84);\n    addKeyCode('KeyU', 85);\n    addKeyCode('KeyV', 86);\n    addKeyCode('KeyW', 87);\n    addKeyCode('KeyX', 88);\n    addKeyCode('KeyY', 89);\n    addKeyCode('KeyZ', 90);\n\n    addKeyCode('OSLeft', 91);\n    addKeyCode('MetaLeft', 91);\n    addKeyCode('OSRight', 92);\n    addKeyCode('MetaRight', 92);\n    addKeyCode('ContextMenu', 93);\n\n    addKeyCode('Numpad0', 96);\n    addKeyCode('Numpad1', 97);\n    addKeyCode('Numpad2', 98);\n    addKeyCode('Numpad3', 99);\n    addKeyCode('Numpad4', 100);\n    addKeyCode('Numpad5', 101);\n    addKeyCode('Numpad6', 102);\n    addKeyCode('Numpad7', 103);\n    addKeyCode('Numpad8', 104);\n    addKeyCode('Numpad9', 105);\n    addKeyCode('NumpadMultiply', 106);\n    addKeyCode('NumpadAdd', 107);\n    addKeyCode('NumpadSeparator', 108);\n    addKeyCode('NumpadSubtract', 109);\n    addKeyCode('NumpadDecimal', 110);\n    addKeyCode('NumpadDivide', 111);\n\n    addKeyCode('F1', 112);\n    addKeyCode('F2', 113);\n    addKeyCode('F3', 114);\n    addKeyCode('F4', 115);\n    addKeyCode('F5', 116);\n    addKeyCode('F6', 117);\n    addKeyCode('F7', 118);\n    addKeyCode('F8', 119);\n    addKeyCode('F9', 120);\n    addKeyCode('F10', 121);\n    addKeyCode('F11', 122);\n    addKeyCode('F12', 123);\n    addKeyCode('F13', 124);\n    addKeyCode('F14', 125);\n    addKeyCode('F15', 126);\n    addKeyCode('F16', 127);\n    addKeyCode('F17', 128);\n    addKeyCode('F18', 129);\n    addKeyCode('F19', 130);\n    addKeyCode('F20', 131);\n    addKeyCode('F21', 132);\n    addKeyCode('F22', 133);\n    addKeyCode('F23', 134);\n    addKeyCode('F24', 135);\n\n    addKeyCode('NumLock', 144);\n    addKeyCode('ScrollLock', 145);\n\n    addKeyCode('Semicolon', 186);\n    addKeyCode('Equal', 187);\n    addKeyCode('Comma', 188);\n    addKeyCode('Minus', 189);\n    addKeyCode('Period', 190);\n    addKeyCode('Slash', 191);\n    addKeyCode('Backquote', 192);\n    addKeyCode('IntlRo', 193);\n    addKeyCode('BracketLeft', 219);\n    addKeyCode('Backslash', 220);\n    addKeyCode('BracketRight', 221);\n    addKeyCode('Quote', 222);\n    addKeyCode('IntlYen', 255);\n})();\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from \"inversify\";\nimport { TYPES } from \"../base/types\";\nimport { ViewerOptions } from \"../base/views/viewer-options\";\n\nexport interface ILogger {\n    logLevel: LogLevel\n\n    error(thisArg: any, message: string, ...params: any[]): void\n    warn(thisArg: any, message: string, ...params: any[]): void\n    info(thisArg: any, message: string, ...params: any[]): void\n    log(thisArg: any, message: string, ...params: any[]): void\n}\n\nexport enum LogLevel { none = 0, error = 1, warn = 2, info = 3, log = 4 }\n\n@injectable()\nexport class NullLogger implements ILogger {\n    logLevel: LogLevel = LogLevel.none;\n\n    error(thisArg: any, message: string, ...params: any[]): void {}\n    warn(thisArg: any, message: string, ...params: any[]): void {}\n    info(thisArg: any, message: string, ...params: any[]): void {}\n    log(thisArg: any, message: string, ...params: any[]): void {}\n}\n\n@injectable()\nexport class ConsoleLogger implements ILogger {\n\n    @inject(TYPES.LogLevel) public logLevel: LogLevel = LogLevel.log;\n    @inject(TYPES.ViewerOptions) protected viewOptions: ViewerOptions = { baseDiv: '' } as ViewerOptions;\n\n    error(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.error)\n            try {\n                console.error.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            } catch (error) {}\n    }\n\n    warn(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.warn)\n            try {\n                console.warn.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            } catch (error) {}\n    }\n\n    info(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.info)\n            try {\n                console.info.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            } catch (error) {}\n    }\n\n    log(thisArg: any, message: string, ...params: any[]): void {\n        if (this.logLevel >= LogLevel.log)\n            try {\n                console.log.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            } catch (error) {}\n    }\n\n    protected consoleArguments(thisArg: any, message: string, params: any[]): any[] {\n        let caller: any;\n        if (typeof thisArg === 'object')\n            caller = thisArg.constructor.name;\n        else\n            caller = thisArg;\n        const date = new Date();\n        return [date.toLocaleTimeString() + ' ' + this.viewOptions.baseDiv + ' ' + caller + ': ' + message, ...params];\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from \"inversify\";\n\n@injectable()\nexport class ProviderRegistry<T, U> {\n    protected elements: Map<string, new (u: U) => T> = new Map;\n\n    register(key: string, cstr: new (u: U) => T) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, cstr);\n    }\n\n    deregister(key: string) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    }\n\n    hasKey(key: string): boolean {\n        return this.elements.has(key);\n    }\n\n    get(key: string, arg: U): T {\n        const existingCstr = this.elements.get(key);\n        if (existingCstr)\n            return new existingCstr(arg);\n        else\n            return this.missing(key, arg);\n    }\n\n    protected missing(key: string, arg: U): T | never {\n        throw new Error('Unknown registry key: ' + key);\n    }\n}\n\n@injectable()\nexport class FactoryRegistry<T, U> {\n    protected elements: Map<string, (u: U) => T> = new Map;\n\n    register(key: string, factory: (u: U) => T) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, factory);\n    }\n\n    deregister(key: string) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    }\n\n    hasKey(key: string): boolean {\n        return this.elements.has(key);\n    }\n\n    get(key: string, arg: U): T {\n        const existingFactory = this.elements.get(key);\n        if (existingFactory)\n            return existingFactory(arg);\n        else\n            return this.missing(key, arg);\n    }\n\n    protected missing(key: string, arg: U): T | never {\n        throw new Error('Unknown registry key: ' + key);\n    }\n}\n\n@injectable()\nexport class InstanceRegistry<T> {\n    protected elements: Map<string, T> = new Map;\n\n    register(key: string, instance: T) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, instance);\n    }\n\n    deregister(key: string) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    }\n\n    hasKey(key: string): boolean {\n        return this.elements.has(key);\n    }\n\n    get(key: string): T {\n        const existingInstance = this.elements.get(key);\n        if (existingInstance)\n            return existingInstance;\n        else\n            return this.missing(key);\n    }\n\n    protected missing(key: string): T | never {\n        throw new Error('Unknown registry key: ' + key);\n    }\n}\n\n@injectable()\nexport class MultiInstanceRegistry<T> {\n    protected elements: Map<string, T[]> = new Map;\n\n    register(key: string, instance: T) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        const instances = this.elements.get(key);\n        if (instances !== undefined)\n            instances.push(instance);\n        else\n            this.elements.set(key, [instance]);\n    }\n\n    deregisterAll(key: string) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    }\n\n    get(key: string): T[] {\n        const existingInstances = this.elements.get(key);\n        if (existingInstances !== undefined)\n            return existingInstances;\n        else\n            return [];\n    }\n}\n","/*\n * https://github.com/kraaden/autocomplete\n * Copyright (c) 2016 Denys Krasnoshchok\n * MIT License\n */\n\nexport const enum EventTrigger {\n    Keyboard = 0,\n    Focus = 1\n}\n\nexport interface AutocompleteItem {\n    label?: string;\n    group?: string;\n}\n\nexport interface AutocompleteSettings<T extends AutocompleteItem> {\n    /**\n     * Autocomplete will be attached to this element.\n     */\n    input: HTMLInputElement | HTMLTextAreaElement;\n\n    /**\n     * Provide your own container for the widget.\n     * If not specified, a new DIV element will be created.\n     */\n    container?: HTMLDivElement;\n\n    /**\n     * This method allows you to override the default rendering function for items.\n     * It must return a DIV element or undefined to skip rendering.\n     */\n    render?: (item: T, currentValue: string, index: number) => HTMLDivElement | undefined;\n\n    /**\n     * This method allows you to override the default rendering function for item groups.\n     * It must return a DIV element or undefined to skip rendering.\n     */\n    renderGroup?: (name: string, currentValue: string) => HTMLDivElement | undefined;\n\n    /**\n     * If specified, the autocomplete DOM element will have this class assigned to it.\n     */\n    className?: string;\n\n    /**\n     * Specify the minimum text length required to show autocomplete.\n     */\n    minLength?: number;\n\n    /**\n     * The message that will be showed when there are no suggestions that match the entered value.\n     */\n    emptyMsg?: string;\n\n    /**\n     * This method will be called when user choose an item in autocomplete. The selected item will be passed as the first parameter.\n     */\n    onSelect: (item: T, input: HTMLInputElement | HTMLTextAreaElement) => void;\n\n    /**\n     * Show autocomplete on focus event. Focus event will ignore the `minLength` property and will always call `fetch`.\n     */\n    showOnFocus?: boolean;\n\n    /**\n     * This method will be called to prepare suggestions and then pass them to autocomplete.\n     * @param {string} text - text in the input field\n     * @param {(items: T[] | false) => void} update - a callback function that must be called after suggestions are prepared\n     * @param {EventTrigger} trigger - type of the event that triggered the fetch\n     * @param {number} cursorPos - position of the cursor in the input field\n     */\n    fetch: (text: string, update: (items: T[] | false) => void, trigger: EventTrigger, cursorPos: number) => void;\n\n    /**\n     * Enforces that the fetch function will only be called once within the specified time frame (in milliseconds) and\n     * delays execution. This prevents flooding your server with AJAX requests.\n     */\n    debounceWaitMs?: number;\n\n    /**\n     * Callback for additional autocomplete customization\n     * @param {HTMLInputElement | HTMLTextAreaElement} input - input box associated with autocomplete\n     * @param {ClientRect | DOMRect} inputRect - size of the input box and its position relative to the viewport\n     * @param {HTMLDivElement} container - container with suggestions\n     * @param {number} maxHeight - max height that can be used by autocomplete\n     */\n    customize?: (input: HTMLInputElement | HTMLTextAreaElement, inputRect: ClientRect | DOMRect, container: HTMLDivElement, maxHeight: number) => void;\n\n    /**\n     * Prevents automatic form submit when ENTER is pressed\n     */\n    preventSubmit?: boolean;\n\n    /**\n     * Prevents the first item in the list from being selected automatically. This option allows you\n     * to submit a custom text by pressing ENTER even when autocomplete is displayed.\n     */\n    disableAutoSelect?: boolean;\n\n    /**\n     * Keys that will be ignored and not trigger the fetch callback.\n     */\n    keysToIgnore?: Keys[];\n}\n\nexport interface AutocompleteResult {\n    destroy: () => void;\n}\n\nexport const enum Keys {\n    Enter = 13,\n    Esc = 27,\n    Up = 38,\n    Down = 40,\n    Left = 37,\n    Right = 39,\n    Shift = 16,\n    Ctrl = 17,\n    Alt = 18,\n    CapsLock = 20,\n    WindowsKey = 91,\n    Tab = 9,\n    F1 = 112,\n    F12 = 123\n}\n\nexport default function autocomplete<T extends AutocompleteItem>(settings: AutocompleteSettings<T>): AutocompleteResult {\n\n    // just an alias to minimize JS file size\n    const doc = document;\n\n    const container: HTMLDivElement = settings.container || doc.createElement(\"div\");\n    container.id = container.id || \"autocomplete-\" + uid();\n    const containerStyle = container.style;\n    const debounceWaitMs = settings.debounceWaitMs || 0;\n    const preventSubmit = settings.preventSubmit || false;\n    const disableAutoSelect = settings.disableAutoSelect || false;\n\n    let items: T[] = [];\n    let inputValue = \"\";\n    let minLen = 2;\n    const showOnFocus = settings.showOnFocus;\n    let selected: T | undefined;\n    let keypressCounter = 0;\n    let debounceTimer: number | undefined;\n\n    if (settings.minLength !== undefined) {\n        minLen = settings.minLength;\n    }\n\n    if (!settings.input) {\n        throw new Error(\"input undefined\");\n    }\n\n    const input: HTMLInputElement | HTMLTextAreaElement = settings.input;\n\n    container.className = \"autocomplete \" + (settings.className || \"\");\n    container.setAttribute(\"role\", \"listbox\");\n\n    input.setAttribute(\"role\", \"combobox\");\n    input.setAttribute(\"aria-expanded\", \"false\");\n    input.setAttribute(\"aria-autocomplete\", \"list\");\n    input.setAttribute(\"aria-controls\", container.id);\n    input.setAttribute(\"aria-owns\", container.id);\n    input.setAttribute(\"aria-activedescendant\", \"\");\n    input.setAttribute(\"aria-haspopup\", \"listbox\");\n\n    // IOS implementation for fixed positioning has many bugs, so we will use absolute positioning\n    containerStyle.position = \"absolute\";\n\n    /**\n     * Generate a unique ID\n     */\n    function uid(): string {\n        return Date.now().toString(36) + Math.random().toString(36).substring(2);\n    }\n\n    /**\n     * Detach the container from DOM\n     */\n    function detach(): void {\n        const parent = container.parentNode;\n        if (parent) {\n            parent.removeChild(container);\n        }\n    }\n\n    /**\n     * Clear debouncing timer if assigned\n     */\n    function clearDebounceTimer(): void {\n        if (debounceTimer) {\n            window.clearTimeout(debounceTimer);\n        }\n    }\n\n    /**\n     * Attach the container to DOM\n     */\n    function attach(): void {\n        if (!container.parentNode) {\n            doc.body.appendChild(container);\n        }\n    }\n\n    /**\n     * Check if container for autocomplete is displayed\n     */\n    function containerDisplayed(): boolean {\n        return !!container.parentNode;\n    }\n\n    /**\n     * Clear autocomplete state and hide container\n     */\n    function clear(): void {\n        // prevent the update call if there are pending AJAX requests\n        keypressCounter++;\n\n        items = [];\n        inputValue = \"\";\n        selected = undefined;\n        input.setAttribute(\"aria-activedescendant\", \"\");\n        input.setAttribute(\"aria-expanded\", \"false\");\n        detach();\n    }\n\n    /**\n     * Update autocomplete position\n     */\n    function updatePosition(): void {\n        if (!containerDisplayed()) {\n            return;\n        }\n\n        input.setAttribute(\"aria-expanded\", \"true\");\n\n        containerStyle.height = \"auto\";\n        containerStyle.width = input.offsetWidth + \"px\";\n\n        let maxHeight = 0;\n        let inputRect: ClientRect | DOMRect | undefined;\n\n        function calc() {\n            const docEl = doc.documentElement as HTMLElement;\n            const clientTop = docEl.clientTop || doc.body.clientTop || 0;\n            const clientLeft = docEl.clientLeft || doc.body.clientLeft || 0;\n            const scrollTop = window.pageYOffset || docEl.scrollTop;\n            const scrollLeft = window.pageXOffset || docEl.scrollLeft;\n\n            inputRect = input.getBoundingClientRect();\n\n            const top = inputRect.top + input.offsetHeight + scrollTop - clientTop;\n            const left = inputRect.left + scrollLeft - clientLeft;\n\n            containerStyle.top = top + \"px\";\n            containerStyle.left = left + \"px\";\n\n            maxHeight = window.innerHeight - (inputRect.top + input.offsetHeight);\n\n            if (maxHeight < 0) {\n                maxHeight = 0;\n            }\n\n            containerStyle.top = top + \"px\";\n            containerStyle.bottom = \"\";\n            containerStyle.left = left + \"px\";\n            containerStyle.maxHeight = maxHeight + \"px\";\n        }\n\n        // the calc method must be called twice, otherwise the calculation may be wrong on resize event (chrome browser)\n        calc();\n        calc();\n\n        if (settings.customize && inputRect) {\n            settings.customize(input, inputRect, container, maxHeight);\n        }\n    }\n\n    /**\n     * Redraw the autocomplete div element with suggestions\n     */\n    function update(): void {\n\n        // delete all children from autocomplete DOM container\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        input.setAttribute(\"aria-activedescendant\", \"\");\n\n        // function for rendering autocomplete suggestions\n        let render = function (item: T, _: string, __: number): HTMLDivElement | undefined {\n            const itemElement = doc.createElement(\"div\");\n            itemElement.textContent = item.label || \"\";\n            return itemElement;\n        };\n        if (settings.render) {\n            render = settings.render;\n        }\n\n        // function to render autocomplete groups\n        let renderGroup = function (groupName: string, _: string): HTMLDivElement | undefined {\n            const groupDiv = doc.createElement(\"div\");\n            groupDiv.textContent = groupName;\n            return groupDiv;\n        };\n        if (settings.renderGroup) {\n            renderGroup = settings.renderGroup;\n        }\n\n        const fragment = doc.createDocumentFragment();\n        let prevGroup = \"#9?$\";\n\n        items.forEach(function (item: T, index: number): void {\n            if (item.group && item.group !== prevGroup) {\n                prevGroup = item.group;\n                const groupDiv = renderGroup(item.group, inputValue);\n                if (groupDiv) {\n                    groupDiv.className += \" group\";\n                    fragment.appendChild(groupDiv);\n                }\n            }\n            const div = render(item, inputValue, index);\n            if (div) {\n                div.id = `${container.id}_${index}`;\n                div.setAttribute(\"role\", \"option\");\n                div.addEventListener(\"click\", function (ev: MouseEvent): void {\n                    settings.onSelect(item, input);\n                    clear();\n                    ev.preventDefault();\n                    ev.stopPropagation();\n                });\n                if (item === selected) {\n                    div.className += \" selected\";\n                    div.setAttribute(\"aria-selected\", \"true\");\n                    input.setAttribute(\"aria-activedescendant\", div.id);\n                }\n                fragment.appendChild(div);\n            }\n        });\n        container.appendChild(fragment);\n        if (items.length < 1) {\n            if (settings.emptyMsg) {\n                const empty = doc.createElement(\"div\");\n                empty.id = `${container.id}_${uid()}`;\n                empty.className = \"empty\";\n                empty.textContent = settings.emptyMsg;\n                container.appendChild(empty);\n                input.setAttribute(\"aria-activedescendant\", empty.id);\n            } else {\n                clear();\n                return;\n            }\n        }\n\n        attach();\n        updatePosition();\n\n        updateScroll();\n    }\n\n    function updateIfDisplayed(): void {\n        if (containerDisplayed()) {\n            update();\n        }\n    }\n\n    function resizeEventHandler(): void {\n        updateIfDisplayed();\n    }\n\n    function scrollEventHandler(e: Event): void {\n        if (e.target !== container) {\n            updateIfDisplayed();\n        } else {\n            e.preventDefault();\n        }\n    }\n\n    function keyupEventHandler(ev: KeyboardEvent): void {\n        const keyCode = ev.which || ev.keyCode || 0;\n\n        const ignore = settings.keysToIgnore || [Keys.Up, Keys.Enter, Keys.Esc, Keys.Right, Keys.Left, Keys.Shift, Keys.Ctrl, Keys.Alt, Keys.CapsLock, Keys.WindowsKey, Keys.Tab];\n        for (const key of ignore) {\n            if (keyCode === key) {\n                return;\n            }\n        }\n\n        if (keyCode >= Keys.F1 && keyCode <= Keys.F12 && !settings.keysToIgnore) {\n            return;\n        }\n\n        // the down key is used to open autocomplete\n        if (keyCode === Keys.Down && containerDisplayed()) {\n            return;\n        }\n\n        startFetch(EventTrigger.Keyboard);\n    }\n\n    /**\n     * Automatically move scroll bar if selected item is not visible\n     */\n    function updateScroll(): void {\n        const elements = container.getElementsByClassName(\"selected\");\n        if (elements.length > 0) {\n            let element = elements[0] as HTMLDivElement;\n\n            // make group visible\n            const previous = element.previousElementSibling as HTMLDivElement;\n            if (previous && previous.className.indexOf(\"group\") !== -1 && !previous.previousElementSibling) {\n                element = previous;\n            }\n\n            if (element.offsetTop < container.scrollTop) {\n                container.scrollTop = element.offsetTop;\n            } else {\n                const selectBottom = element.offsetTop + element.offsetHeight;\n                const containerBottom = container.scrollTop + container.offsetHeight;\n                if (selectBottom > containerBottom) {\n                    container.scrollTop += selectBottom - containerBottom;\n                }\n            }\n        }\n    }\n\n    /**\n     * Select the previous item in suggestions\n     */\n    function selectPrev(): void {\n        if (items.length < 1) {\n            selected = undefined;\n        } else {\n            if (selected === items[0]) {\n                selected = items[items.length - 1];\n            } else {\n                for (let i = items.length - 1; i > 0; i--) {\n                    if (selected === items[i] || i === 1) {\n                        selected = items[i - 1];\n                        break;\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Select the next item in suggestions\n     */\n    function selectNext(): void {\n        if (items.length < 1) {\n            selected = undefined;\n        }\n        if (!selected || selected === items[items.length - 1]) {\n            selected = items[0];\n            return;\n        }\n        for (let i = 0; i < (items.length - 1); i++) {\n            if (selected === items[i]) {\n                selected = items[i + 1];\n                break;\n            }\n        }\n    }\n\n    function keydownEventHandler(ev: KeyboardEvent): void {\n        const keyCode = ev.which || ev.keyCode || 0;\n\n        if (keyCode === Keys.Up || keyCode === Keys.Down || keyCode === Keys.Esc) {\n            const containerIsDisplayed = containerDisplayed();\n\n            if (keyCode === Keys.Esc) {\n                clear();\n            } else {\n                if (!containerIsDisplayed || items.length < 1) {\n                    return;\n                }\n                keyCode === Keys.Up\n                    ? selectPrev()\n                    : selectNext();\n                update();\n            }\n\n            ev.preventDefault();\n            if (containerIsDisplayed) {\n                ev.stopPropagation();\n            }\n\n            return;\n        }\n\n        if (keyCode === Keys.Enter) {\n            if (selected) {\n                settings.onSelect(selected, input);\n                clear();\n            }\n\n            if (preventSubmit) {\n                ev.preventDefault();\n            }\n        }\n    }\n\n    function focusEventHandler(): void {\n        if (showOnFocus) {\n            startFetch(EventTrigger.Focus);\n        }\n    }\n\n    function startFetch(trigger: EventTrigger) {\n        // If multiple keys were pressed, before we get an update from server,\n        // this may cause redrawing autocomplete multiple times after the last key was pressed.\n        // To avoid this, the number of times keyboard was pressed will be saved and checked before redraw.\n        const savedKeypressCounter = ++keypressCounter;\n\n        const inputText = input.value;\n        const cursorPos = input.selectionStart || 0;\n\n        if (inputText.length >= minLen || trigger === EventTrigger.Focus) {\n            clearDebounceTimer();\n            debounceTimer = window.setTimeout(function (): void {\n                settings.fetch(inputText, function (elements: T[] | false): void {\n                    if (keypressCounter === savedKeypressCounter && elements) {\n                        items = elements;\n                        inputValue = inputText;\n                        selected = (items.length < 1 || disableAutoSelect) ? undefined : items[0];\n                        update();\n                    }\n                }, trigger, cursorPos);\n            }, trigger === EventTrigger.Keyboard ? debounceWaitMs : 0);\n        } else {\n            clear();\n        }\n    }\n\n    function blurEventHandler(): void {\n        // we need to delay clear, because when we click on an item, blur will be called before click and remove items from DOM\n        setTimeout(() => {\n            if (doc.activeElement !== input) {\n                clear();\n            }\n        }, 200);\n    }\n\n    /**\n     * Fixes #26: on long clicks focus will be lost and onSelect method will not be called\n     */\n    container.addEventListener(\"mousedown\", function (evt: Event) {\n        evt.stopPropagation();\n        evt.preventDefault();\n    });\n\n    /**\n     * Fixes #30: autocomplete closes when scrollbar is clicked in IE\n     * See: https://stackoverflow.com/a/9210267/13172349\n     */\n    container.addEventListener(\"focus\", () => input.focus());\n\n    /**\n     * This function will remove DOM elements and clear event handlers\n     */\n    function destroy(): void {\n        input.removeEventListener(\"focus\", focusEventHandler);\n        input.removeEventListener(\"keydown\", keydownEventHandler as EventListenerOrEventListenerObject);\n        input.removeEventListener(\"keyup\", keyupEventHandler as EventListenerOrEventListenerObject);\n        input.removeEventListener(\"blur\", blurEventHandler);\n        window.removeEventListener(\"resize\", resizeEventHandler);\n        doc.removeEventListener(\"scroll\", scrollEventHandler, true);\n        input.removeAttribute(\"role\");\n        input.removeAttribute(\"aria-expanded\");\n        input.removeAttribute(\"aria-autocomplete\");\n        input.removeAttribute(\"aria-controls\");\n        input.removeAttribute(\"aria-activedescendant\");\n        input.removeAttribute(\"aria-owns\");\n        input.removeAttribute(\"aria-haspopup\");\n        clearDebounceTimer();\n        clear();\n    }\n\n    // setup event handlers\n    input.addEventListener(\"keydown\", keydownEventHandler as EventListenerOrEventListenerObject);\n    input.addEventListener(\"keyup\", keyupEventHandler as EventListenerOrEventListenerObject);\n    input.addEventListener(\"blur\", blurEventHandler);\n    input.addEventListener(\"focus\", focusEventHandler);\n    window.addEventListener(\"resize\", resizeEventHandler);\n    doc.addEventListener(\"scroll\", scrollEventHandler, true);\n\n    return {\n        destroy\n    };\n}\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","\nexport default class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","export { default as v1 } from './v1.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as NIL } from './nil.js';\nexport { default as version } from './version.js';\nexport { default as validate } from './validate.js';\nexport { default as stringify } from './stringify.js';\nexport { default as parse } from './parse.js';","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.BrowserMessageWriter = exports.BrowserMessageReader = void 0;\nconst ril_1 = require(\"./ril\");\n// Install the browser runtime abstract.\nril_1.default.install();\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass BrowserMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            this._onData.fire(event.data);\n        };\n        port.addEventListener('error', (event) => this.fireError(event));\n        port.onmessage = this._messageListener;\n    }\n    listen(callback) {\n        return this._onData.event(callback);\n    }\n}\nexports.BrowserMessageReader = BrowserMessageReader;\nclass BrowserMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.addEventListener('error', (event) => this.fireError(event));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.BrowserMessageWriter = BrowserMessageWriter;\nfunction createMessageConnection(reader, writer, logger, options) {\n    if (logger === undefined) {\n        logger = api_1.NullLogger;\n    }\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n        this.asciiDecoder = new TextDecoder('ascii');\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, _encoding) {\n        return (new TextEncoder()).encode(value);\n    }\n    toString(value, encoding) {\n        if (encoding === 'ascii') {\n            return this.asciiDecoder.decode(value);\n        }\n        else {\n            return (new TextDecoder(encoding)).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer;\n        }\n        else {\n            return buffer.slice(0, length);\n        }\n    }\n    allocNative(length) {\n        return new Uint8Array(length);\n    }\n}\nMessageBuffer.emptyBuffer = new Uint8Array(0);\nclass ReadableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n        this._onData = new api_1.Emitter();\n        this._messageListener = (event) => {\n            const blob = event.data;\n            blob.arrayBuffer().then((buffer) => {\n                this._onData.fire(new Uint8Array(buffer));\n            }, () => {\n                (0, api_1.RAL)().console.error(`Converting blob to array buffer failed.`);\n            });\n        };\n        this.socket.addEventListener('message', this._messageListener);\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    onData(listener) {\n        return this._onData.event(listener);\n    }\n}\nclass WritableStreamWrapper {\n    constructor(socket) {\n        this.socket = socket;\n    }\n    onClose(listener) {\n        this.socket.addEventListener('close', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('close', listener));\n    }\n    onError(listener) {\n        this.socket.addEventListener('error', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('error', listener));\n    }\n    onEnd(listener) {\n        this.socket.addEventListener('end', listener);\n        return api_1.Disposable.create(() => this.socket.removeEventListener('end', listener));\n    }\n    write(data, encoding) {\n        if (typeof data === 'string') {\n            if (encoding !== undefined && encoding !== 'utf-8') {\n                throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${encoding}`);\n            }\n            this.socket.send(data);\n        }\n        else {\n            this.socket.send(data);\n        }\n        return Promise.resolve();\n    }\n    end() {\n        this.socket.close();\n    }\n}\nconst _textEncoder = new TextEncoder();\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                if (options.charset !== 'utf-8') {\n                    throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${options.charset}`);\n                }\n                return Promise.resolve(_textEncoder.encode(JSON.stringify(msg, undefined, 0)));\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                if (!(buffer instanceof Uint8Array)) {\n                    throw new Error(`In a Browser environments only Uint8Arrays are supported.`);\n                }\n                return Promise.resolve(JSON.parse(new TextDecoder(options.charset).decode(buffer)));\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (socket) => new ReadableStreamWrapper(socket),\n        asWritableStream: (socket) => new WritableStreamWrapper(socket)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setTimeout(callback, 0, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        },\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken = exports.ProgressToken || (exports.ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues = exports.TraceValues || (exports.TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace = exports.Trace || (exports.Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy = exports.CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy = exports.CancellationSenderStrategy || (exports.CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy = exports.CancellationStrategy || (exports.CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy = exports.MessageStrategy || (exports.MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions = exports.ConnectionOptions || (exports.ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event = exports.Event || (exports.Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch = exports.Touch || (exports.Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error('Message header must separate key and value using :');\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        this.buffer.append(data);\n        while (true) {\n            if (this.nextMessageLength === -1) {\n                const headers = this.buffer.tryReadHeaders(true);\n                if (!headers) {\n                    return;\n                }\n                const contentLength = headers.get('content-length');\n                if (!contentLength) {\n                    this.fireError(new Error('Header must provide a Content-Length property.'));\n                    return;\n                }\n                const length = parseInt(contentLength);\n                if (isNaN(length)) {\n                    this.fireError(new Error('Content-Length value must be a number.'));\n                    return;\n                }\n                this.nextMessageLength = length;\n            }\n            const body = this.buffer.tryReadBody(this.nextMessageLength);\n            if (body === undefined) {\n                /** We haven't received the full message yet. */\n                this.setPartialMessageTimer();\n                return;\n            }\n            this.clearPartialMessageTimer();\n            this.nextMessageLength = -1;\n            // Make sure that we convert one received message after the\n            // other. Otherwise it could happen that a decoding of a second\n            // smaller message finished before the decoding of a first larger\n            // message and then we would deliver the second message first.\n            this.readSemaphore.lock(async () => {\n                const bytes = this.options.contentDecoder !== undefined\n                    ? await this.options.contentDecoder.decode(body)\n                    : body;\n                const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                this.callback(message);\n            }).catch((error) => {\n                this.fireError(error);\n            });\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message = exports.Message || (exports.Message = {}));\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n","\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n","/********************************************************************************\n * Copyright (c) 2019-2022 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, GLSPDiagramServer, ServerMessageAction, ServerStatusAction } from '@eclipse-glsp/client';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class EclipseGLSPDiagramServer extends GLSPDiagramServer {\n    private isServerStatusAction(action: Action): action is ServerStatusAction {\n        return ServerStatusAction.KIND === action.kind && 'severity' in action && 'message' in action;\n    }\n\n    override handleLocally(action: Action): boolean {\n        if (this.isServerStatusAction(action)) {\n            return this.handleServerStatusAction(action);\n        }\n        return super.handleLocally(action);\n    }\n\n    protected handleServerStatusAction(_action: ServerStatusAction): boolean {\n        /* send to server */\n        return true;\n    }\n\n    protected override handleServerMessageAction(_action: ServerMessageAction): boolean {\n        /* send to server */\n        return true;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport {\n    Action,\n    CutOperation,\n    EditorContextService,\n    IActionDispatcher,\n    IActionHandler,\n    IAsyncClipboardService,\n    PasteOperation,\n    RequestClipboardDataAction,\n    TYPES,\n    ViewerOptions\n} from '@eclipse-glsp/client';\nimport { inject, injectable } from 'inversify';\n\n// Eclipse-specific integration: in Eclipse, we trigger the Copy/Paste actions from\n// the IDE Keybindings. We don't use the browser events. This is fine, because we\n// don't need browser clipboard support (We use the Eclipse System Clipboard); so\n// we don't need special permission from the Browser.\n\n@injectable()\nexport class EclipseCopyPasteActionHandler implements IActionHandler {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    @inject(TYPES.ViewerOptions) protected viewerOptions: ViewerOptions;\n    @inject(TYPES.IAsyncClipboardService) protected clipboardService: IAsyncClipboardService;\n    @inject(EditorContextService) protected editorContext: EditorContextService;\n\n    handle(action: Action): void {\n        switch (action.kind) {\n            case 'invoke-copy':\n                this.handleCopy();\n                break;\n            case 'invoke-paste':\n                this.handlePaste();\n                break;\n            case 'invoke-cut':\n                this.handleCut();\n                break;\n        }\n    }\n\n    handleCopy(): void {\n        if (this.shouldCopy()) {\n            this.actionDispatcher.request(RequestClipboardDataAction.create(this.editorContext.get()));\n        } else {\n            this.clipboardService.clear();\n        }\n    }\n\n    handleCut(): void {\n        if (this.shouldCopy()) {\n            this.handleCopy();\n            this.actionDispatcher.dispatch(CutOperation.create(this.editorContext.get()));\n        }\n    }\n\n    handlePaste(): void {\n        // In the Eclipse Integration case, the server manages its own clipboard.\n        // Just pass an empty clipboard data to remain compliant with the API.\n        const clipboardData = {};\n        this.actionDispatcher.dispatch(PasteOperation.create({ clipboardData: clipboardData, editorContext: this.editorContext.get() }));\n    }\n\n    protected shouldCopy(): boolean {\n        return this.editorContext.get().selectedElementIds.length > 0 && this.isDiagramActive();\n    }\n    protected isDiagramActive(): boolean {\n        return document.activeElement?.parentElement?.id === this.viewerOptions.baseDiv;\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { configureActionHandler } from '@eclipse-glsp/client';\nimport { ContainerModule } from 'inversify';\n\nimport { EclipseCopyPasteActionHandler } from './copy-paste';\n\nconst eclipseCopyPasteModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureActionHandler({ bind, isBound }, 'invoke-copy', EclipseCopyPasteActionHandler);\n    configureActionHandler({ bind, isBound }, 'invoke-cut', EclipseCopyPasteActionHandler);\n    configureActionHandler({ bind, isBound }, 'invoke-paste', EclipseCopyPasteActionHandler);\n});\n\nexport default eclipseCopyPasteModule;\n","/********************************************************************************\n * Copyright (c) 2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { configureActionHandler } from '@eclipse-glsp/client';\nimport { ContainerModule } from 'inversify';\n\nimport { InvokeDeleteActionHandler } from './invoke-delete';\n\nconst eclipseDeleteModule = new ContainerModule((bind, _unbind, isBound) => {\n    configureActionHandler({ bind, isBound }, 'invoke-delete', InvokeDeleteActionHandler);\n});\n\nexport default eclipseDeleteModule;\n","/********************************************************************************\n * Copyright (c) 2020-2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Action, DeleteElementOperation, EditorContextService, IActionDispatcher, IActionHandler, TYPES } from '@eclipse-glsp/client';\nimport { inject, injectable } from 'inversify';\n\nexport class InvokeDeleteAction implements Action {\n    static KIND = 'invoke-delete';\n    readonly kind = InvokeDeleteAction.KIND;\n}\n\nexport function isInvokeDeleteAction(action: Action): action is InvokeDeleteAction {\n    return action.kind === InvokeDeleteAction.KIND;\n}\n\n@injectable()\nexport class InvokeDeleteActionHandler implements IActionHandler {\n    @inject(TYPES.IActionDispatcher) protected actionDispatcher: IActionDispatcher;\n    @inject(EditorContextService) protected editorContext: EditorContextService;\n\n    handle(action: Action): void {\n        if (isInvokeDeleteAction(action)) {\n            this.handleDelete();\n        }\n    }\n\n    handleDelete(): void {\n        this.actionDispatcher.dispatch(DeleteElementOperation.create(this.editorContext.get().selectedElementIds));\n    }\n}\n","/********************************************************************************\n * Copyright (c) 2020-2023 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport eclipseCopyPasteModule from './features/copy-paste/di.config';\nimport eclipseDeleteModule from './features/invoke-delete/di.config';\n\nexport * from './base/eclipse-glsp-diagram-server';\nexport * from './utils/url-parameters';\nexport { eclipseCopyPasteModule, eclipseDeleteModule };\n","/*\n * Copyright (C) 2017 TypeFox and others.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n */\n\nexport function getParameters(): { [key: string]: string } {\n    let search = window.location.search.substring(1);\n    const result: { [key: string]: string } = {};\n    while (search.length > 0) {\n        const nextParamIndex = search.indexOf('&');\n        let param: string;\n        if (nextParamIndex < 0) {\n            param = search;\n            search = '';\n        } else {\n            param = search.substring(0, nextParamIndex);\n            search = search.substring(nextParamIndex + 1);\n        }\n        const valueIndex = param.indexOf('=');\n        if (valueIndex > 0 && valueIndex < param.length - 1) {\n            result[param.substring(0, valueIndex)] = decodeURIComponent(param.substring(valueIndex + 1));\n        }\n    }\n    return result;\n}\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./diagram.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./diagram.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./diagram.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./diagram.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./autocomplete-palette.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./autocomplete-palette.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./command-palette.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./command-palette.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./decoration.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./decoration.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./glsp-sprotty.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./glsp-sprotty.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./tool-palette.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./tool-palette.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../css-loader/dist/cjs.js!./codicon.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../css-loader/dist/cjs.js!./codicon.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../css-loader/dist/cjs.js!./balloon.min.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../css-loader/dist/cjs.js!./balloon.min.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../css-loader/dist/cjs.js!./edit-label.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../css-loader/dist/cjs.js!./edit-label.css\";\n       export default content && content.locals ? content.locals : undefined;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport 'reflect-metadata';\nimport './app';\n"],"names":[],"sourceRoot":""}